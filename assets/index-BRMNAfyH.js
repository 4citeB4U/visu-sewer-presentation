var Gh=Object.defineProperty;var Wh=(t,e,n)=>e in t?Gh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var De=(t,e,n)=>Wh(t,typeof e!="symbol"?e+"":e,n);import{pipeline as pipeline$1}from"https://cdn.jsdelivr.net/npm/@xenova/transformers@latest";function _mergeNamespaces(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const l in i)if(l!=="default"&&!(l in t)){const f=Object.getOwnPropertyDescriptor(i,l);f&&Object.defineProperty(t,l,f.get?f:{enumerable:!0,get:()=>i[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const f of l)if(f.type==="childList")for(const p of f.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function n(l){const f={};return l.integrity&&(f.integrity=l.integrity),l.referrerPolicy&&(f.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?f.credentials="include":l.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function i(l){if(l.ep)return;l.ep=!0;const f=n(l);fetch(l.href,f)}})();window.OPENROUTER_API_KEY="";window.OPENROUTER_MODEL=void 0;window.SITE_URL=void 0;window.SITE_TITLE=void 0;function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var l=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,l.get?l:{enumerable:!0,get:function(){return t[i]}})}),n}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,l,f){var p=null;if(f!==void 0&&(p=""+f),l.key!==void 0&&(p=""+l.key),"key"in l){f={};for(var b in l)b!=="key"&&(f[b]=l[b])}else f=l;return l=f.ref,{$$typeof:t,type:i,key:p,ref:l!==void 0?l:null,props:f}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=n,reactJsxRuntime_production.jsxs=n,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),p=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),u=Symbol.for("react.activity"),o=Symbol.iterator;function h(Z){return Z===null||typeof Z!="object"?null:(Z=o&&Z[o]||Z["@@iterator"],typeof Z=="function"?Z:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function O(Z,ue,Pe){this.props=Z,this.context=ue,this.refs=T,this.updater=Pe||_}O.prototype.isReactComponent={},O.prototype.setState=function(Z,ue){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,ue,"setState")},O.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function j(){}j.prototype=O.prototype;function C(Z,ue,Pe){this.props=Z,this.context=ue,this.refs=T,this.updater=Pe||_}var D=C.prototype=new j;D.constructor=C,S(D,O.prototype),D.isPureReactComponent=!0;var R=Array.isArray;function I(){}var $={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function L(Z,ue,Pe){var Re=Pe.ref;return{$$typeof:t,type:Z,key:ue,ref:Re!==void 0?Re:null,props:Pe}}function V(Z,ue){return L(Z.type,ue,Z.props)}function Y(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===t}function Q(Z){var ue={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(Pe){return ue[Pe]})}var ee=/\/+/g;function X(Z,ue){return typeof Z=="object"&&Z!==null&&Z.key!=null?Q(""+Z.key):ue.toString(36)}function W(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(I,I):(Z.status="pending",Z.then(function(ue){Z.status==="pending"&&(Z.status="fulfilled",Z.value=ue)},function(ue){Z.status==="pending"&&(Z.status="rejected",Z.reason=ue)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function z(Z,ue,Pe,Re,pe){var Ae=typeof Z;(Ae==="undefined"||Ae==="boolean")&&(Z=null);var Ce=!1;if(Z===null)Ce=!0;else switch(Ae){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(Z.$$typeof){case t:case e:Ce=!0;break;case g:return Ce=Z._init,z(Ce(Z._payload),ue,Pe,Re,pe)}}if(Ce)return pe=pe(Z),Ce=Re===""?"."+X(Z,0):Re,R(pe)?(Pe="",Ce!=null&&(Pe=Ce.replace(ee,"$&/")+"/"),z(pe,ue,Pe,"",function(ke){return ke})):pe!=null&&(Y(pe)&&(pe=V(pe,Pe+(pe.key==null||Z&&Z.key===pe.key?"":(""+pe.key).replace(ee,"$&/")+"/")+Ce)),ue.push(pe)),1;Ce=0;var $e=Re===""?".":Re+":";if(R(Z))for(var se=0;se<Z.length;se++)Re=Z[se],Ae=$e+X(Re,se),Ce+=z(Re,ue,Pe,Ae,pe);else if(se=h(Z),typeof se=="function")for(Z=se.call(Z),se=0;!(Re=Z.next()).done;)Re=Re.value,Ae=$e+X(Re,se++),Ce+=z(Re,ue,Pe,Ae,pe);else if(Ae==="object"){if(typeof Z.then=="function")return z(W(Z),ue,Pe,Re,pe);throw ue=String(Z),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function q(Z,ue,Pe){if(Z==null)return Z;var Re=[],pe=0;return z(Z,Re,"","",function(Ae){return ue.call(Pe,Ae,pe++)}),Re}function ce(Z){if(Z._status===-1){var ue=Z._result;ue=ue(),ue.then(function(Pe){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=Pe)},function(Pe){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=Pe)}),Z._status===-1&&(Z._status=0,Z._result=ue)}if(Z._status===1)return Z._result.default;throw Z._result}var ae=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)},we={map:q,forEach:function(Z,ue,Pe){q(Z,function(){ue.apply(this,arguments)},Pe)},count:function(Z){var ue=0;return q(Z,function(){ue++}),ue},toArray:function(Z){return q(Z,function(ue){return ue})||[]},only:function(Z){if(!Y(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}};return react_production.Activity=u,react_production.Children=we,react_production.Component=O,react_production.Fragment=n,react_production.Profiler=l,react_production.PureComponent=C,react_production.StrictMode=i,react_production.Suspense=w,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(Z){return $.H.useMemoCache(Z)}},react_production.cache=function(Z){return function(){return Z.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(Z,ue,Pe){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var Re=S({},Z.props),pe=Z.key;if(ue!=null)for(Ae in ue.key!==void 0&&(pe=""+ue.key),ue)!F.call(ue,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&ue.ref===void 0||(Re[Ae]=ue[Ae]);var Ae=arguments.length-2;if(Ae===1)Re.children=Pe;else if(1<Ae){for(var Ce=Array(Ae),$e=0;$e<Ae;$e++)Ce[$e]=arguments[$e+2];Re.children=Ce}return L(Z.type,pe,Re)},react_production.createContext=function(Z){return Z={$$typeof:p,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:f,_context:Z},Z},react_production.createElement=function(Z,ue,Pe){var Re,pe={},Ae=null;if(ue!=null)for(Re in ue.key!==void 0&&(Ae=""+ue.key),ue)F.call(ue,Re)&&Re!=="key"&&Re!=="__self"&&Re!=="__source"&&(pe[Re]=ue[Re]);var Ce=arguments.length-2;if(Ce===1)pe.children=Pe;else if(1<Ce){for(var $e=Array(Ce),se=0;se<Ce;se++)$e[se]=arguments[se+2];pe.children=$e}if(Z&&Z.defaultProps)for(Re in Ce=Z.defaultProps,Ce)pe[Re]===void 0&&(pe[Re]=Ce[Re]);return L(Z,Ae,pe)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(Z){return{$$typeof:b,render:Z}},react_production.isValidElement=Y,react_production.lazy=function(Z){return{$$typeof:g,_payload:{_status:-1,_result:Z},_init:ce}},react_production.memo=function(Z,ue){return{$$typeof:v,type:Z,compare:ue===void 0?null:ue}},react_production.startTransition=function(Z){var ue=$.T,Pe={};$.T=Pe;try{var Re=Z(),pe=$.S;pe!==null&&pe(Pe,Re),typeof Re=="object"&&Re!==null&&typeof Re.then=="function"&&Re.then(I,ae)}catch(Ae){ae(Ae)}finally{ue!==null&&Pe.types!==null&&(ue.types=Pe.types),$.T=ue}},react_production.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},react_production.use=function(Z){return $.H.use(Z)},react_production.useActionState=function(Z,ue,Pe){return $.H.useActionState(Z,ue,Pe)},react_production.useCallback=function(Z,ue){return $.H.useCallback(Z,ue)},react_production.useContext=function(Z){return $.H.useContext(Z)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(Z,ue){return $.H.useDeferredValue(Z,ue)},react_production.useEffect=function(Z,ue){return $.H.useEffect(Z,ue)},react_production.useEffectEvent=function(Z){return $.H.useEffectEvent(Z)},react_production.useId=function(){return $.H.useId()},react_production.useImperativeHandle=function(Z,ue,Pe){return $.H.useImperativeHandle(Z,ue,Pe)},react_production.useInsertionEffect=function(Z,ue){return $.H.useInsertionEffect(Z,ue)},react_production.useLayoutEffect=function(Z,ue){return $.H.useLayoutEffect(Z,ue)},react_production.useMemo=function(Z,ue){return $.H.useMemo(Z,ue)},react_production.useOptimistic=function(Z,ue){return $.H.useOptimistic(Z,ue)},react_production.useReducer=function(Z,ue,Pe){return $.H.useReducer(Z,ue,Pe)},react_production.useRef=function(Z){return $.H.useRef(Z)},react_production.useState=function(Z){return $.H.useState(Z)},react_production.useSyncExternalStore=function(Z,ue,Pe){return $.H.useSyncExternalStore(Z,ue,Pe)},react_production.useTransition=function(){return $.H.useTransition()},react_production.version="19.2.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(t){function e(z,q){var ce=z.length;z.push(q);e:for(;0<ce;){var ae=ce-1>>>1,we=z[ae];if(0<l(we,q))z[ae]=q,z[ce]=we,ce=ae;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var q=z[0],ce=z.pop();if(ce!==q){z[0]=ce;e:for(var ae=0,we=z.length,Z=we>>>1;ae<Z;){var ue=2*(ae+1)-1,Pe=z[ue],Re=ue+1,pe=z[Re];if(0>l(Pe,ce))Re<we&&0>l(pe,Pe)?(z[ae]=pe,z[Re]=ce,ae=Re):(z[ae]=Pe,z[ue]=ce,ae=ue);else if(Re<we&&0>l(pe,ce))z[ae]=pe,z[Re]=ce,ae=Re;else break e}}return q}function l(z,q){var ce=z.sortIndex-q.sortIndex;return ce!==0?ce:z.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;t.unstable_now=function(){return f.now()}}else{var p=Date,b=p.now();t.unstable_now=function(){return p.now()-b}}var w=[],v=[],g=1,u=null,o=3,h=!1,_=!1,S=!1,T=!1,O=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function D(z){for(var q=n(v);q!==null;){if(q.callback===null)i(v);else if(q.startTime<=z)i(v),q.sortIndex=q.expirationTime,e(w,q);else break;q=n(v)}}function R(z){if(S=!1,D(z),!_)if(n(w)!==null)_=!0,I||(I=!0,Q());else{var q=n(v);q!==null&&W(R,q.startTime-z)}}var I=!1,$=-1,F=5,L=-1;function V(){return T?!0:!(t.unstable_now()-L<F)}function Y(){if(T=!1,I){var z=t.unstable_now();L=z;var q=!0;try{e:{_=!1,S&&(S=!1,j($),$=-1),h=!0;var ce=o;try{t:{for(D(z),u=n(w);u!==null&&!(u.expirationTime>z&&V());){var ae=u.callback;if(typeof ae=="function"){u.callback=null,o=u.priorityLevel;var we=ae(u.expirationTime<=z);if(z=t.unstable_now(),typeof we=="function"){u.callback=we,D(z),q=!0;break t}u===n(w)&&i(w),D(z)}else i(w);u=n(w)}if(u!==null)q=!0;else{var Z=n(v);Z!==null&&W(R,Z.startTime-z),q=!1}}break e}finally{u=null,o=ce,h=!1}q=void 0}}finally{q?Q():I=!1}}}var Q;if(typeof C=="function")Q=function(){C(Y)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,X=ee.port2;ee.port1.onmessage=Y,Q=function(){X.postMessage(null)}}else Q=function(){O(Y,0)};function W(z,q){$=O(function(){z(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return o},t.unstable_next=function(z){switch(o){case 1:case 2:case 3:var q=3;break;default:q=o}var ce=o;o=q;try{return z()}finally{o=ce}},t.unstable_requestPaint=function(){T=!0},t.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ce=o;o=z;try{return q()}finally{o=ce}},t.unstable_scheduleCallback=function(z,q,ce){var ae=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?ae+ce:ae):ce=ae,z){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=ce+we,z={id:g++,callback:q,priorityLevel:z,startTime:ce,expirationTime:we,sortIndex:-1},ce>ae?(z.sortIndex=ce,e(v,z),n(w)===null&&z===n(v)&&(S?(j($),$=-1):S=!0,W(R,ce-ae))):(z.sortIndex=we,e(w,z),_||h||(_=!0,I||(I=!0,Q()))),z},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(z){var q=o;return function(){var ce=o;o=q;try{return z.apply(this,arguments)}finally{o=ce}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var t=requireReact();function e(w){var v="https://react.dev/errors/"+w;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)v+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+w+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function f(w,v,g){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:u==null?null:""+u,children:w,containerInfo:v,implementation:g}}var p=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(w,v){if(w==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,reactDom_production.createPortal=function(w,v){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return f(w,v,null,g)},reactDom_production.flushSync=function(w){var v=p.T,g=i.p;try{if(p.T=null,i.p=2,w)return w()}finally{p.T=v,i.p=g,i.d.f()}},reactDom_production.preconnect=function(w,v){typeof w=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,i.d.C(w,v))},reactDom_production.prefetchDNS=function(w){typeof w=="string"&&i.d.D(w)},reactDom_production.preinit=function(w,v){if(typeof w=="string"&&v&&typeof v.as=="string"){var g=v.as,u=b(g,v.crossOrigin),o=typeof v.integrity=="string"?v.integrity:void 0,h=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;g==="style"?i.d.S(w,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:u,integrity:o,fetchPriority:h}):g==="script"&&i.d.X(w,{crossOrigin:u,integrity:o,fetchPriority:h,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},reactDom_production.preinitModule=function(w,v){if(typeof w=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var g=b(v.as,v.crossOrigin);i.d.M(w,{crossOrigin:g,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&i.d.M(w)},reactDom_production.preload=function(w,v){if(typeof w=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var g=v.as,u=b(g,v.crossOrigin);i.d.L(w,g,{crossOrigin:u,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},reactDom_production.preloadModule=function(w,v){if(typeof w=="string")if(v){var g=b(v.as,v.crossOrigin);i.d.m(w,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:g,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else i.d.m(w)},reactDom_production.requestFormReset=function(w){i.d.r(w)},reactDom_production.unstable_batchedUpdates=function(w,v){return w(v)},reactDom_production.useFormState=function(w,v,g){return p.H.useFormState(w,v,g)},reactDom_production.useFormStatus=function(){return p.H.useHostTransitionStatus()},reactDom_production.version="19.2.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var t=requireScheduler(),e=requireReact(),n=requireReactDom();function i(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)m+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function f(d){var m=d,E=d;if(d.alternate)for(;m.return;)m=m.return;else{d=m;do m=d,(m.flags&4098)!==0&&(E=m.return),d=m.return;while(d)}return m.tag===3?E:null}function p(d){if(d.tag===13){var m=d.memoizedState;if(m===null&&(d=d.alternate,d!==null&&(m=d.memoizedState)),m!==null)return m.dehydrated}return null}function b(d){if(d.tag===31){var m=d.memoizedState;if(m===null&&(d=d.alternate,d!==null&&(m=d.memoizedState)),m!==null)return m.dehydrated}return null}function w(d){if(f(d)!==d)throw Error(i(188))}function v(d){var m=d.alternate;if(!m){if(m=f(d),m===null)throw Error(i(188));return m!==d?null:d}for(var E=d,A=m;;){var M=E.return;if(M===null)break;var N=M.alternate;if(N===null){if(A=M.return,A!==null){E=A;continue}break}if(M.child===N.child){for(N=M.child;N;){if(N===E)return w(M),d;if(N===A)return w(M),m;N=N.sibling}throw Error(i(188))}if(E.return!==A.return)E=M,A=N;else{for(var B=!1,H=M.child;H;){if(H===E){B=!0,E=M,A=N;break}if(H===A){B=!0,A=M,E=N;break}H=H.sibling}if(!B){for(H=N.child;H;){if(H===E){B=!0,E=N,A=M;break}if(H===A){B=!0,A=N,E=M;break}H=H.sibling}if(!B)throw Error(i(189))}}if(E.alternate!==A)throw Error(i(190))}if(E.tag!==3)throw Error(i(188));return E.stateNode.current===E?d:m}function g(d){var m=d.tag;if(m===5||m===26||m===27||m===6)return d;for(d=d.child;d!==null;){if(m=g(d),m!==null)return m;d=d.sibling}return null}var u=Object.assign,o=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),C=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function Q(d){return d===null||typeof d!="object"?null:(d=Y&&d[Y]||d["@@iterator"],typeof d=="function"?d:null)}var ee=Symbol.for("react.client.reference");function X(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===ee?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case S:return"Fragment";case O:return"Profiler";case T:return"StrictMode";case R:return"Suspense";case I:return"SuspenseList";case L:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case _:return"Portal";case C:return d.displayName||"Context";case j:return(d._context.displayName||"Context")+".Consumer";case D:var m=d.render;return d=d.displayName,d||(d=m.displayName||m.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case $:return m=d.displayName||null,m!==null?m:X(d.type)||"Memo";case F:m=d._payload,d=d._init;try{return X(d(m))}catch{}}return null}var W=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},ae=[],we=-1;function Z(d){return{current:d}}function ue(d){0>we||(d.current=ae[we],ae[we]=null,we--)}function Pe(d,m){we++,ae[we]=d.current,d.current=m}var Re=Z(null),pe=Z(null),Ae=Z(null),Ce=Z(null);function $e(d,m){switch(Pe(Ae,m),Pe(pe,d),Pe(Re,null),m.nodeType){case 9:case 11:d=(d=m.documentElement)&&(d=d.namespaceURI)?uf(d):0;break;default:if(d=m.tagName,m=m.namespaceURI)m=uf(m),d=df(m,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}ue(Re),Pe(Re,d)}function se(){ue(Re),ue(pe),ue(Ae)}function ke(d){d.memoizedState!==null&&Pe(Ce,d);var m=Re.current,E=df(m,d.type);m!==E&&(Pe(pe,d),Pe(Re,E))}function Ie(d){pe.current===d&&(ue(Re),ue(pe)),Ce.current===d&&(ue(Ce),io._currentValue=ce)}var de,qe;function Fe(d){if(de===void 0)try{throw Error()}catch(E){var m=E.stack.trim().match(/\n( *(at )?)/);de=m&&m[1]||"",qe=-1<E.stack.indexOf(`
    at`)?" (<anonymous>)":-1<E.stack.indexOf("@")?"@unknown:0:0":""}return`
`+de+d+qe}var Ne=!1;function Ge(d,m){if(!d||Ne)return"";Ne=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var A={DetermineComponentFrameRoot:function(){try{if(m){var Me=function(){throw Error()};if(Object.defineProperty(Me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Me,[])}catch(_e){var be=_e}Reflect.construct(d,[],Me)}else{try{Me.call()}catch(_e){be=_e}d.call(Me.prototype)}}else{try{throw Error()}catch(_e){be=_e}(Me=d())&&typeof Me.catch=="function"&&Me.catch(function(){})}}catch(_e){if(_e&&be&&typeof _e.stack=="string")return[_e.stack,be.stack]}return[null,null]}};A.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(A.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(A.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=A.DetermineComponentFrameRoot(),B=N[0],H=N[1];if(B&&H){var ne=B.split(`
`),ye=H.split(`
`);for(M=A=0;A<ne.length&&!ne[A].includes("DetermineComponentFrameRoot");)A++;for(;M<ye.length&&!ye[M].includes("DetermineComponentFrameRoot");)M++;if(A===ne.length||M===ye.length)for(A=ne.length-1,M=ye.length-1;1<=A&&0<=M&&ne[A]!==ye[M];)M--;for(;1<=A&&0<=M;A--,M--)if(ne[A]!==ye[M]){if(A!==1||M!==1)do if(A--,M--,0>M||ne[A]!==ye[M]){var Oe=`
`+ne[A].replace(" at new "," at ");return d.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",d.displayName)),Oe}while(1<=A&&0<=M);break}}}finally{Ne=!1,Error.prepareStackTrace=E}return(E=d?d.displayName||d.name:"")?Fe(E):""}function Ue(d,m){switch(d.tag){case 26:case 27:case 5:return Fe(d.type);case 16:return Fe("Lazy");case 13:return d.child!==m&&m!==null?Fe("Suspense Fallback"):Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 15:return Ge(d.type,!1);case 11:return Ge(d.type.render,!1);case 1:return Ge(d.type,!0);case 31:return Fe("Activity");default:return""}}function Ze(d){try{var m="",E=null;do m+=Ue(d,E),E=d,d=d.return;while(d);return m}catch(A){return`
Error generating stack: `+A.message+`
`+A.stack}}var yt=Object.prototype.hasOwnProperty,Nt=t.unstable_scheduleCallback,Ut=t.unstable_cancelCallback,ht=t.unstable_shouldYield,Ct=t.unstable_requestPaint,Ot=t.unstable_now,We=t.unstable_getCurrentPriorityLevel,Yt=t.unstable_ImmediatePriority,tr=t.unstable_UserBlockingPriority,It=t.unstable_NormalPriority,Xt=t.unstable_LowPriority,yr=t.unstable_IdlePriority,en=t.log,rr=t.unstable_setDisableYieldValue,Ar=null,He=null;function lr(d){if(typeof en=="function"&&rr(d),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(Ar,d)}catch{}}var or=Math.clz32?Math.clz32:wt,Mi=Math.log,Kr=Math.LN2;function wt(d){return d>>>=0,d===0?32:31-(Mi(d)/Kr|0)|0}var Nr=256,tn=262144,Ir=4194304;function tt(d){var m=d&42;if(m!==0)return m;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return d&261888;case 262144:case 524288:case 1048576:case 2097152:return d&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function et(d,m,E){var A=d.pendingLanes;if(A===0)return 0;var M=0,N=d.suspendedLanes,B=d.pingedLanes;d=d.warmLanes;var H=A&134217727;return H!==0?(A=H&~N,A!==0?M=tt(A):(B&=H,B!==0?M=tt(B):E||(E=H&~d,E!==0&&(M=tt(E))))):(H=A&~N,H!==0?M=tt(H):B!==0?M=tt(B):E||(E=A&~d,E!==0&&(M=tt(E)))),M===0?0:m!==0&&m!==M&&(m&N)===0&&(N=M&-M,E=m&-m,N>=E||N===32&&(E&4194048)!==0)?m:M}function rt(d,m){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&m)===0}function ci(d,m){switch(d){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rn(){var d=Ir;return Ir<<=1,(Ir&62914560)===0&&(Ir=4194304),d}function cn(d){for(var m=[],E=0;31>E;E++)m.push(d);return m}function Yr(d,m){d.pendingLanes|=m,m!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function ui(d,m,E,A,M,N){var B=d.pendingLanes;d.pendingLanes=E,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=E,d.entangledLanes&=E,d.errorRecoveryDisabledLanes&=E,d.shellSuspendCounter=0;var H=d.entanglements,ne=d.expirationTimes,ye=d.hiddenUpdates;for(E=B&~E;0<E;){var Oe=31-or(E),Me=1<<Oe;H[Oe]=0,ne[Oe]=-1;var be=ye[Oe];if(be!==null)for(ye[Oe]=null,Oe=0;Oe<be.length;Oe++){var _e=be[Oe];_e!==null&&(_e.lane&=-536870913)}E&=~Me}A!==0&&kn(d,A,0),N!==0&&M===0&&d.tag!==0&&(d.suspendedLanes|=N&~(B&~m))}function kn(d,m,E){d.pendingLanes|=m,d.suspendedLanes&=~m;var A=31-or(m);d.entangledLanes|=m,d.entanglements[A]=d.entanglements[A]|1073741824|E&261930}function Dn(d,m){var E=d.entangledLanes|=m;for(d=d.entanglements;E;){var A=31-or(E),M=1<<A;M&m|d[A]&m&&(d[A]|=m),E&=~M}}function Nn(d,m){var E=m&-m;return E=(E&42)!==0?1:un(E),(E&(d.suspendedLanes|m))!==0?0:E}function un(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function dn(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function In(){var d=q.p;return d!==0?d:(d=window.event,d===void 0?32:Df(d.type))}function $n(d,m){var E=q.p;try{return q.p=d,m()}finally{q.p=E}}var br=Math.random().toString(36).slice(2),qt="__reactFiber$"+br,K="__reactProps$"+br,te="__reactContainer$"+br,le="__reactEvents$"+br,he="__reactListeners$"+br,xe="__reactHandles$"+br,Te="__reactResources$"+br,Le="__reactMarker$"+br;function Ke(d){delete d[qt],delete d[K],delete d[le],delete d[he],delete d[xe]}function ze(d){var m=d[qt];if(m)return m;for(var E=d.parentNode;E;){if(m=E[te]||E[qt]){if(E=m.alternate,m.child!==null||E!==null&&E.child!==null)for(d=bf(d);d!==null;){if(E=d[qt])return E;d=bf(d)}return m}d=E,E=d.parentNode}return null}function it(d){if(d=d[qt]||d[te]){var m=d.tag;if(m===5||m===6||m===13||m===31||m===26||m===27||m===3)return d}return null}function vt(d){var m=d.tag;if(m===5||m===26||m===27||m===6)return d.stateNode;throw Error(i(33))}function Bt(d){var m=d[Te];return m||(m=d[Te]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function pt(d){d[Le]=!0}var Ee=new Set,dt={};function Et(d,m){nr(d,m),nr(d+"Capture",m)}function nr(d,m){for(dt[d]=m,d=0;d<m.length;d++)Ee.add(m[d])}var Xr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ci={},Ri={};function co(d){return yt.call(Ri,d)?!0:yt.call(Ci,d)?!1:Xr.test(d)?Ri[d]=!0:(Ci[d]=!0,!1)}function ir(d,m,E){if(co(m))if(E===null)d.removeAttribute(m);else{switch(typeof E){case"undefined":case"function":case"symbol":d.removeAttribute(m);return;case"boolean":var A=m.toLowerCase().slice(0,5);if(A!=="data-"&&A!=="aria-"){d.removeAttribute(m);return}}d.setAttribute(m,""+E)}}function fn(d,m,E){if(E===null)d.removeAttribute(m);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(m);return}d.setAttribute(m,""+E)}}function $r(d,m,E,A){if(A===null)d.removeAttribute(E);else{switch(typeof A){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(E);return}d.setAttributeNS(m,E,""+A)}}function hr(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function ma(d){var m=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function gs(d,m,E){var A=Object.getOwnPropertyDescriptor(d.constructor.prototype,m);if(!d.hasOwnProperty(m)&&typeof A<"u"&&typeof A.get=="function"&&typeof A.set=="function"){var M=A.get,N=A.set;return Object.defineProperty(d,m,{configurable:!0,get:function(){return M.call(this)},set:function(B){E=""+B,N.call(this,B)}}),Object.defineProperty(d,m,{enumerable:A.enumerable}),{getValue:function(){return E},setValue:function(B){E=""+B},stopTracking:function(){d._valueTracker=null,delete d[m]}}}}function ga(d){if(!d._valueTracker){var m=ma(d)?"checked":"value";d._valueTracker=gs(d,m,""+d[m])}}function di(d){if(!d)return!1;var m=d._valueTracker;if(!m)return!0;var E=m.getValue(),A="";return d&&(A=ma(d)?d.checked?"true":"false":d.value),d=A,d!==E?(m.setValue(d),!0):!1}function Ln(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var uo=/[\n"\\]/g;function mr(d){return d.replace(uo,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function ki(d,m,E,A,M,N,B,H){d.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?d.type=B:d.removeAttribute("type"),m!=null?B==="number"?(m===0&&d.value===""||d.value!=m)&&(d.value=""+hr(m)):d.value!==""+hr(m)&&(d.value=""+hr(m)):B!=="submit"&&B!=="reset"||d.removeAttribute("value"),m!=null?Bn(d,B,hr(m)):E!=null?Bn(d,B,hr(E)):A!=null&&d.removeAttribute("value"),M==null&&N!=null&&(d.defaultChecked=!!N),M!=null&&(d.checked=M&&typeof M!="function"&&typeof M!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?d.name=""+hr(H):d.removeAttribute("name")}function ya(d,m,E,A,M,N,B,H){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(d.type=N),m!=null||E!=null){if(!(N!=="submit"&&N!=="reset"||m!=null)){ga(d);return}E=E!=null?""+hr(E):"",m=m!=null?""+hr(m):E,H||m===d.value||(d.value=m),d.defaultValue=m}A=A??M,A=typeof A!="function"&&typeof A!="symbol"&&!!A,d.checked=H?d.checked:!!A,d.defaultChecked=!!A,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(d.name=B),ga(d)}function Bn(d,m,E){m==="number"&&Ln(d.ownerDocument)===d||d.defaultValue===""+E||(d.defaultValue=""+E)}function pn(d,m,E,A){if(d=d.options,m){m={};for(var M=0;M<E.length;M++)m["$"+E[M]]=!0;for(E=0;E<d.length;E++)M=m.hasOwnProperty("$"+d[E].value),d[E].selected!==M&&(d[E].selected=M),M&&A&&(d[E].defaultSelected=!0)}else{for(E=""+hr(E),m=null,M=0;M<d.length;M++){if(d[M].value===E){d[M].selected=!0,A&&(d[M].defaultSelected=!0);return}m!==null||d[M].disabled||(m=d[M])}m!==null&&(m.selected=!0)}}function ba(d,m,E){if(m!=null&&(m=""+hr(m),m!==d.value&&(d.value=m),E==null)){d.defaultValue!==m&&(d.defaultValue=m);return}d.defaultValue=E!=null?""+hr(E):""}function Di(d,m,E,A){if(m==null){if(A!=null){if(E!=null)throw Error(i(92));if(W(A)){if(1<A.length)throw Error(i(93));A=A[0]}E=A}E==null&&(E=""),m=E}E=hr(m),d.defaultValue=E,A=d.textContent,A===E&&A!==""&&A!==null&&(d.value=A),ga(d)}function hn(d,m){if(m){var E=d.firstChild;if(E&&E===d.lastChild&&E.nodeType===3){E.nodeValue=m;return}}d.textContent=m}var ut=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xa(d,m,E){var A=m.indexOf("--")===0;E==null||typeof E=="boolean"||E===""?A?d.setProperty(m,""):m==="float"?d.cssFloat="":d[m]="":A?d.setProperty(m,E):typeof E!="number"||E===0||ut.has(m)?m==="float"?d.cssFloat=E:d[m]=(""+E).trim():d[m]=E+"px"}function st(d,m,E){if(m!=null&&typeof m!="object")throw Error(i(62));if(d=d.style,E!=null){for(var A in E)!E.hasOwnProperty(A)||m!=null&&m.hasOwnProperty(A)||(A.indexOf("--")===0?d.setProperty(A,""):A==="float"?d.cssFloat="":d[A]="");for(var M in m)A=m[M],m.hasOwnProperty(M)&&E[M]!==A&&xa(d,M,A)}else for(var N in m)m.hasOwnProperty(N)&&xa(d,N,m[N])}function ot(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var va=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ni=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fi(d){return Ni.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}function Lr(){}var Ii=null;function $i(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var mn=null,gn=null;function _a(d){var m=it(d);if(m&&(d=m.stateNode)){var E=d[K]||null;e:switch(d=m.stateNode,m.type){case"input":if(ki(d,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name),m=E.name,E.type==="radio"&&m!=null){for(E=d;E.parentNode;)E=E.parentNode;for(E=E.querySelectorAll('input[name="'+mr(""+m)+'"][type="radio"]'),m=0;m<E.length;m++){var A=E[m];if(A!==d&&A.form===d.form){var M=A[K]||null;if(!M)throw Error(i(90));ki(A,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(m=0;m<E.length;m++)A=E[m],A.form===d.form&&di(A)}break e;case"textarea":ba(d,E.value,E.defaultValue);break e;case"select":m=E.value,m!=null&&pn(d,!!E.multiple,m,!1)}}}var Li=!1;function wa(d,m,E){if(Li)return d(m,E);Li=!0;try{var A=d(m);return A}finally{if(Li=!1,(mn!==null||gn!==null)&&(Ho(),mn&&(m=mn,d=gn,gn=mn=null,_a(m),d)))for(m=0;m<d.length;m++)_a(d[m])}}function Fn(d,m){var E=d.stateNode;if(E===null)return null;var A=E[K]||null;if(A===null)return null;E=A[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(d=d.type,A=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!A;break e;default:d=!1}if(d)return null;if(E&&typeof E!="function")throw Error(i(231,m,typeof E));return E}var Br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bi=!1;if(Br)try{var U={};Object.defineProperty(U,"passive",{get:function(){Bi=!0}}),window.addEventListener("test",U,U),window.removeEventListener("test",U,U)}catch{Bi=!1}var G=null,J=null,ie=null;function me(){if(ie)return ie;var d,m=J,E=m.length,A,M="value"in G?G.value:G.textContent,N=M.length;for(d=0;d<E&&m[d]===M[d];d++);var B=E-d;for(A=1;A<=B&&m[E-A]===M[N-A];A++);return ie=M.slice(d,1<A?1-A:void 0)}function ve(d){var m=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&m===13&&(d=13)):d=m,d===10&&(d=13),32<=d||d===13?d:0}function Be(){return!0}function Xe(){return!1}function Je(d){function m(E,A,M,N,B){this._reactName=E,this._targetInst=M,this.type=A,this.nativeEvent=N,this.target=B,this.currentTarget=null;for(var H in d)d.hasOwnProperty(H)&&(E=d[H],this[H]=E?E(N):N[H]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Be:Xe,this.isPropagationStopped=Xe,this}return u(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var E=this.nativeEvent;E&&(E.preventDefault?E.preventDefault():typeof E.returnValue!="unknown"&&(E.returnValue=!1),this.isDefaultPrevented=Be)},stopPropagation:function(){var E=this.nativeEvent;E&&(E.stopPropagation?E.stopPropagation():typeof E.cancelBubble!="unknown"&&(E.cancelBubble=!0),this.isPropagationStopped=Be)},persist:function(){},isPersistent:Be}),m}var at={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$t=Je(at),pr=u({},at,{view:0,detail:0}),xr=Je(pr),Se,ft,Pt,vr=u({},pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bs,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Pt&&(Pt&&d.type==="mousemove"?(Se=d.screenX-Pt.screenX,ft=d.screenY-Pt.screenY):ft=Se=0,Pt=d),Se)},movementY:function(d){return"movementY"in d?d.movementY:ft}}),yn=Je(vr),qf=u({},vr,{dataTransfer:0}),Gf=Je(qf),Wf=u({},pr,{relatedTarget:0}),ys=Je(Wf),Hf=u({},at,{animationName:0,elapsedTime:0,pseudoElement:0}),Kf=Je(Hf),Yf=u({},at,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),Xf=Je(Yf),Qf=u({},at,{data:0}),pc=Je(Qf),Zf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ep={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tp(d){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(d):(d=ep[d])?!!m[d]:!1}function bs(){return tp}var rp=u({},pr,{key:function(d){if(d.key){var m=Zf[d.key]||d.key;if(m!=="Unidentified")return m}return d.type==="keypress"?(d=ve(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Jf[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bs,charCode:function(d){return d.type==="keypress"?ve(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?ve(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),np=Je(rp),ip=u({},vr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hc=Je(ip),ap=u({},pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bs}),op=Je(ap),sp=u({},at,{propertyName:0,elapsedTime:0,pseudoElement:0}),lp=Je(sp),cp=u({},vr,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),up=Je(cp),dp=u({},at,{newState:0,oldState:0}),fp=Je(dp),pp=[9,13,27,32],xs=Br&&"CompositionEvent"in window,Ea=null;Br&&"documentMode"in document&&(Ea=document.documentMode);var hp=Br&&"TextEvent"in window&&!Ea,mc=Br&&(!xs||Ea&&8<Ea&&11>=Ea),gc=" ",yc=!1;function bc(d,m){switch(d){case"keyup":return pp.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xc(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Fi=!1;function mp(d,m){switch(d){case"compositionend":return xc(m);case"keypress":return m.which!==32?null:(yc=!0,gc);case"textInput":return d=m.data,d===gc&&yc?null:d;default:return null}}function gp(d,m){if(Fi)return d==="compositionend"||!xs&&bc(d,m)?(d=me(),ie=J=G=null,Fi=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return mc&&m.locale!=="ko"?null:m.data;default:return null}}var yp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vc(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m==="input"?!!yp[d.type]:m==="textarea"}function _c(d,m,E,A){mn?gn?gn.push(A):gn=[A]:mn=A,m=es(m,"onChange"),0<m.length&&(E=new $t("onChange","change",null,E,A),d.push({event:E,listeners:m}))}var Sa=null,Ta=null;function bp(d){nf(d,0)}function fo(d){var m=vt(d);if(di(m))return d}function wc(d,m){if(d==="change")return m}var Ec=!1;if(Br){var vs;if(Br){var _s="oninput"in document;if(!_s){var Sc=document.createElement("div");Sc.setAttribute("oninput","return;"),_s=typeof Sc.oninput=="function"}vs=_s}else vs=!1;Ec=vs&&(!document.documentMode||9<document.documentMode)}function Tc(){Sa&&(Sa.detachEvent("onpropertychange",Ac),Ta=Sa=null)}function Ac(d){if(d.propertyName==="value"&&fo(Ta)){var m=[];_c(m,Ta,d,$i(d)),wa(bp,m)}}function xp(d,m,E){d==="focusin"?(Tc(),Sa=m,Ta=E,Sa.attachEvent("onpropertychange",Ac)):d==="focusout"&&Tc()}function vp(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return fo(Ta)}function _p(d,m){if(d==="click")return fo(m)}function wp(d,m){if(d==="input"||d==="change")return fo(m)}function Ep(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var Or=typeof Object.is=="function"?Object.is:Ep;function Aa(d,m){if(Or(d,m))return!0;if(typeof d!="object"||d===null||typeof m!="object"||m===null)return!1;var E=Object.keys(d),A=Object.keys(m);if(E.length!==A.length)return!1;for(A=0;A<E.length;A++){var M=E[A];if(!yt.call(m,M)||!Or(d[M],m[M]))return!1}return!0}function Oc(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Pc(d,m){var E=Oc(d);d=0;for(var A;E;){if(E.nodeType===3){if(A=d+E.textContent.length,d<=m&&A>=m)return{node:E,offset:m-d};d=A}e:{for(;E;){if(E.nextSibling){E=E.nextSibling;break e}E=E.parentNode}E=void 0}E=Oc(E)}}function jc(d,m){return d&&m?d===m?!0:d&&d.nodeType===3?!1:m&&m.nodeType===3?jc(d,m.parentNode):"contains"in d?d.contains(m):d.compareDocumentPosition?!!(d.compareDocumentPosition(m)&16):!1:!1}function Mc(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var m=Ln(d.document);m instanceof d.HTMLIFrameElement;){try{var E=typeof m.contentWindow.location.href=="string"}catch{E=!1}if(E)d=m.contentWindow;else break;m=Ln(d.document)}return m}function ws(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m&&(m==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||m==="textarea"||d.contentEditable==="true")}var Sp=Br&&"documentMode"in document&&11>=document.documentMode,zi=null,Es=null,Oa=null,Ss=!1;function Cc(d,m,E){var A=E.window===E?E.document:E.nodeType===9?E:E.ownerDocument;Ss||zi==null||zi!==Ln(A)||(A=zi,"selectionStart"in A&&ws(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),Oa&&Aa(Oa,A)||(Oa=A,A=es(Es,"onSelect"),0<A.length&&(m=new $t("onSelect","select",null,m,E),d.push({event:m,listeners:A}),m.target=zi)))}function hi(d,m){var E={};return E[d.toLowerCase()]=m.toLowerCase(),E["Webkit"+d]="webkit"+m,E["Moz"+d]="moz"+m,E}var Ui={animationend:hi("Animation","AnimationEnd"),animationiteration:hi("Animation","AnimationIteration"),animationstart:hi("Animation","AnimationStart"),transitionrun:hi("Transition","TransitionRun"),transitionstart:hi("Transition","TransitionStart"),transitioncancel:hi("Transition","TransitionCancel"),transitionend:hi("Transition","TransitionEnd")},Ts={},Rc={};Br&&(Rc=document.createElement("div").style,"AnimationEvent"in window||(delete Ui.animationend.animation,delete Ui.animationiteration.animation,delete Ui.animationstart.animation),"TransitionEvent"in window||delete Ui.transitionend.transition);function mi(d){if(Ts[d])return Ts[d];if(!Ui[d])return d;var m=Ui[d],E;for(E in m)if(m.hasOwnProperty(E)&&E in Rc)return Ts[d]=m[E];return d}var kc=mi("animationend"),Dc=mi("animationiteration"),Nc=mi("animationstart"),Tp=mi("transitionrun"),Ap=mi("transitionstart"),Op=mi("transitioncancel"),Ic=mi("transitionend"),$c=new Map,As="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");As.push("scrollEnd");function Qr(d,m){$c.set(d,m),Et(m,[d])}var po=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)},Fr=[],Vi=0,Os=0;function ho(){for(var d=Vi,m=Os=Vi=0;m<d;){var E=Fr[m];Fr[m++]=null;var A=Fr[m];Fr[m++]=null;var M=Fr[m];Fr[m++]=null;var N=Fr[m];if(Fr[m++]=null,A!==null&&M!==null){var B=A.pending;B===null?M.next=M:(M.next=B.next,B.next=M),A.pending=M}N!==0&&Lc(E,M,N)}}function mo(d,m,E,A){Fr[Vi++]=d,Fr[Vi++]=m,Fr[Vi++]=E,Fr[Vi++]=A,Os|=A,d.lanes|=A,d=d.alternate,d!==null&&(d.lanes|=A)}function Ps(d,m,E,A){return mo(d,m,E,A),go(d)}function gi(d,m){return mo(d,null,null,m),go(d)}function Lc(d,m,E){d.lanes|=E;var A=d.alternate;A!==null&&(A.lanes|=E);for(var M=!1,N=d.return;N!==null;)N.childLanes|=E,A=N.alternate,A!==null&&(A.childLanes|=E),N.tag===22&&(d=N.stateNode,d===null||d._visibility&1||(M=!0)),d=N,N=N.return;return d.tag===3?(N=d.stateNode,M&&m!==null&&(M=31-or(E),d=N.hiddenUpdates,A=d[M],A===null?d[M]=[m]:A.push(m),m.lane=E|536870912),N):null}function go(d){if(50<Xa)throw Xa=0,$l=null,Error(i(185));for(var m=d.return;m!==null;)d=m,m=d.return;return d.tag===3?d.stateNode:null}var qi={};function Pp(d,m,E,A){this.tag=d,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(d,m,E,A){return new Pp(d,m,E,A)}function js(d){return d=d.prototype,!(!d||!d.isReactComponent)}function bn(d,m){var E=d.alternate;return E===null?(E=Pr(d.tag,m,d.key,d.mode),E.elementType=d.elementType,E.type=d.type,E.stateNode=d.stateNode,E.alternate=d,d.alternate=E):(E.pendingProps=m,E.type=d.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=d.flags&65011712,E.childLanes=d.childLanes,E.lanes=d.lanes,E.child=d.child,E.memoizedProps=d.memoizedProps,E.memoizedState=d.memoizedState,E.updateQueue=d.updateQueue,m=d.dependencies,E.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},E.sibling=d.sibling,E.index=d.index,E.ref=d.ref,E.refCleanup=d.refCleanup,E}function Bc(d,m){d.flags&=65011714;var E=d.alternate;return E===null?(d.childLanes=0,d.lanes=m,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=E.childLanes,d.lanes=E.lanes,d.child=E.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=E.memoizedProps,d.memoizedState=E.memoizedState,d.updateQueue=E.updateQueue,d.type=E.type,m=E.dependencies,d.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),d}function yo(d,m,E,A,M,N){var B=0;if(A=d,typeof d=="function")js(d)&&(B=1);else if(typeof d=="string")B=kh(d,E,Re.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case L:return d=Pr(31,E,m,M),d.elementType=L,d.lanes=N,d;case S:return yi(E.children,M,N,m);case T:B=8,M|=24;break;case O:return d=Pr(12,E,m,M|2),d.elementType=O,d.lanes=N,d;case R:return d=Pr(13,E,m,M),d.elementType=R,d.lanes=N,d;case I:return d=Pr(19,E,m,M),d.elementType=I,d.lanes=N,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case C:B=10;break e;case j:B=9;break e;case D:B=11;break e;case $:B=14;break e;case F:B=16,A=null;break e}B=29,E=Error(i(130,d===null?"null":typeof d,"")),A=null}return m=Pr(B,E,m,M),m.elementType=d,m.type=A,m.lanes=N,m}function yi(d,m,E,A){return d=Pr(7,d,A,m),d.lanes=E,d}function Ms(d,m,E){return d=Pr(6,d,null,m),d.lanes=E,d}function Fc(d){var m=Pr(18,null,null,0);return m.stateNode=d,m}function Cs(d,m,E){return m=Pr(4,d.children!==null?d.children:[],d.key,m),m.lanes=E,m.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},m}var zc=new WeakMap;function zr(d,m){if(typeof d=="object"&&d!==null){var E=zc.get(d);return E!==void 0?E:(m={value:d,source:m,stack:Ze(m)},zc.set(d,m),m)}return{value:d,source:m,stack:Ze(m)}}var Gi=[],Wi=0,bo=null,Pa=0,Ur=[],Vr=0,zn=null,nn=1,an="";function xn(d,m){Gi[Wi++]=Pa,Gi[Wi++]=bo,bo=d,Pa=m}function Uc(d,m,E){Ur[Vr++]=nn,Ur[Vr++]=an,Ur[Vr++]=zn,zn=d;var A=nn;d=an;var M=32-or(A)-1;A&=~(1<<M),E+=1;var N=32-or(m)+M;if(30<N){var B=M-M%5;N=(A&(1<<B)-1).toString(32),A>>=B,M-=B,nn=1<<32-or(m)+M|E<<M|A,an=N+d}else nn=1<<N|E<<M|A,an=d}function Rs(d){d.return!==null&&(xn(d,1),Uc(d,1,0))}function ks(d){for(;d===bo;)bo=Gi[--Wi],Gi[Wi]=null,Pa=Gi[--Wi],Gi[Wi]=null;for(;d===zn;)zn=Ur[--Vr],Ur[Vr]=null,an=Ur[--Vr],Ur[Vr]=null,nn=Ur[--Vr],Ur[Vr]=null}function Vc(d,m){Ur[Vr++]=nn,Ur[Vr++]=an,Ur[Vr++]=zn,nn=m.id,an=m.overflow,zn=d}var cr=null,Ft=null,_t=!1,Un=null,qr=!1,Ds=Error(i(519));function Vn(d){var m=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ja(zr(m,d)),Ds}function qc(d){var m=d.stateNode,E=d.type,A=d.memoizedProps;switch(m[qt]=d,m[K]=A,E){case"dialog":gt("cancel",m),gt("close",m);break;case"iframe":case"object":case"embed":gt("load",m);break;case"video":case"audio":for(E=0;E<Za.length;E++)gt(Za[E],m);break;case"source":gt("error",m);break;case"img":case"image":case"link":gt("error",m),gt("load",m);break;case"details":gt("toggle",m);break;case"input":gt("invalid",m),ya(m,A.value,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name,!0);break;case"select":gt("invalid",m);break;case"textarea":gt("invalid",m),Di(m,A.value,A.defaultValue,A.children)}E=A.children,typeof E!="string"&&typeof E!="number"&&typeof E!="bigint"||m.textContent===""+E||A.suppressHydrationWarning===!0||lf(m.textContent,E)?(A.popover!=null&&(gt("beforetoggle",m),gt("toggle",m)),A.onScroll!=null&&gt("scroll",m),A.onScrollEnd!=null&&gt("scrollend",m),A.onClick!=null&&(m.onclick=Lr),m=!0):m=!1,m||Vn(d,!0)}function Gc(d){for(cr=d.return;cr;)switch(cr.tag){case 5:case 31:case 13:qr=!1;return;case 27:case 3:qr=!0;return;default:cr=cr.return}}function Hi(d){if(d!==cr)return!1;if(!_t)return Gc(d),_t=!0,!1;var m=d.tag,E;if((E=m!==3&&m!==27)&&((E=m===5)&&(E=d.type,E=!(E!=="form"&&E!=="button")||Zl(d.type,d.memoizedProps)),E=!E),E&&Ft&&Vn(d),Gc(d),m===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));Ft=yf(d)}else if(m===31){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));Ft=yf(d)}else m===27?(m=Ft,ni(d.type)?(d=nc,nc=null,Ft=d):Ft=m):Ft=cr?Wr(d.stateNode.nextSibling):null;return!0}function bi(){Ft=cr=null,_t=!1}function Ns(){var d=Un;return d!==null&&(Sr===null?Sr=d:Sr.push.apply(Sr,d),Un=null),d}function ja(d){Un===null?Un=[d]:Un.push(d)}var Is=Z(null),xi=null,vn=null;function qn(d,m,E){Pe(Is,m._currentValue),m._currentValue=E}function _n(d){d._currentValue=Is.current,ue(Is)}function $s(d,m,E){for(;d!==null;){var A=d.alternate;if((d.childLanes&m)!==m?(d.childLanes|=m,A!==null&&(A.childLanes|=m)):A!==null&&(A.childLanes&m)!==m&&(A.childLanes|=m),d===E)break;d=d.return}}function Ls(d,m,E,A){var M=d.child;for(M!==null&&(M.return=d);M!==null;){var N=M.dependencies;if(N!==null){var B=M.child;N=N.firstContext;e:for(;N!==null;){var H=N;N=M;for(var ne=0;ne<m.length;ne++)if(H.context===m[ne]){N.lanes|=E,H=N.alternate,H!==null&&(H.lanes|=E),$s(N.return,E,d),A||(B=null);break e}N=H.next}}else if(M.tag===18){if(B=M.return,B===null)throw Error(i(341));B.lanes|=E,N=B.alternate,N!==null&&(N.lanes|=E),$s(B,E,d),B=null}else B=M.child;if(B!==null)B.return=M;else for(B=M;B!==null;){if(B===d){B=null;break}if(M=B.sibling,M!==null){M.return=B.return,B=M;break}B=B.return}M=B}}function Ki(d,m,E,A){d=null;for(var M=m,N=!1;M!==null;){if(!N){if((M.flags&524288)!==0)N=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var B=M.alternate;if(B===null)throw Error(i(387));if(B=B.memoizedProps,B!==null){var H=M.type;Or(M.pendingProps.value,B.value)||(d!==null?d.push(H):d=[H])}}else if(M===Ce.current){if(B=M.alternate,B===null)throw Error(i(387));B.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(d!==null?d.push(io):d=[io])}M=M.return}d!==null&&Ls(m,d,E,A),m.flags|=262144}function xo(d){for(d=d.firstContext;d!==null;){if(!Or(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function vi(d){xi=d,vn=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function ur(d){return Wc(xi,d)}function vo(d,m){return xi===null&&vi(d),Wc(d,m)}function Wc(d,m){var E=m._currentValue;if(m={context:m,memoizedValue:E,next:null},vn===null){if(d===null)throw Error(i(308));vn=m,d.dependencies={lanes:0,firstContext:m},d.flags|=524288}else vn=vn.next=m;return E}var jp=typeof AbortController<"u"?AbortController:function(){var d=[],m=this.signal={aborted:!1,addEventListener:function(E,A){d.push(A)}};this.abort=function(){m.aborted=!0,d.forEach(function(E){return E()})}},Mp=t.unstable_scheduleCallback,Cp=t.unstable_NormalPriority,Qt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bs(){return{controller:new jp,data:new Map,refCount:0}}function Ma(d){d.refCount--,d.refCount===0&&Mp(Cp,function(){d.controller.abort()})}var Ca=null,Fs=0,Yi=0,Xi=null;function Rp(d,m){if(Ca===null){var E=Ca=[];Fs=0,Yi=Vl(),Xi={status:"pending",value:void 0,then:function(A){E.push(A)}}}return Fs++,m.then(Hc,Hc),m}function Hc(){if(--Fs===0&&Ca!==null){Xi!==null&&(Xi.status="fulfilled");var d=Ca;Ca=null,Yi=0,Xi=null;for(var m=0;m<d.length;m++)(0,d[m])()}}function kp(d,m){var E=[],A={status:"pending",value:null,reason:null,then:function(M){E.push(M)}};return d.then(function(){A.status="fulfilled",A.value=m;for(var M=0;M<E.length;M++)(0,E[M])(m)},function(M){for(A.status="rejected",A.reason=M,M=0;M<E.length;M++)(0,E[M])(void 0)}),A}var Kc=z.S;z.S=function(d,m){Cd=Ot(),typeof m=="object"&&m!==null&&typeof m.then=="function"&&Rp(d,m),Kc!==null&&Kc(d,m)};var _i=Z(null);function zs(){var d=_i.current;return d!==null?d:Lt.pooledCache}function _o(d,m){m===null?Pe(_i,_i.current):Pe(_i,m.pool)}function Yc(){var d=zs();return d===null?null:{parent:Qt._currentValue,pool:d}}var Qi=Error(i(460)),Us=Error(i(474)),wo=Error(i(542)),Eo={then:function(){}};function Xc(d){return d=d.status,d==="fulfilled"||d==="rejected"}function Qc(d,m,E){switch(E=d[E],E===void 0?d.push(m):E!==m&&(m.then(Lr,Lr),m=E),m.status){case"fulfilled":return m.value;case"rejected":throw d=m.reason,Jc(d),d;default:if(typeof m.status=="string")m.then(Lr,Lr);else{if(d=Lt,d!==null&&100<d.shellSuspendCounter)throw Error(i(482));d=m,d.status="pending",d.then(function(A){if(m.status==="pending"){var M=m;M.status="fulfilled",M.value=A}},function(A){if(m.status==="pending"){var M=m;M.status="rejected",M.reason=A}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw d=m.reason,Jc(d),d}throw Ei=m,Qi}}function wi(d){try{var m=d._init;return m(d._payload)}catch(E){throw E!==null&&typeof E=="object"&&typeof E.then=="function"?(Ei=E,Qi):E}}var Ei=null;function Zc(){if(Ei===null)throw Error(i(459));var d=Ei;return Ei=null,d}function Jc(d){if(d===Qi||d===wo)throw Error(i(483))}var Zi=null,Ra=0;function So(d){var m=Ra;return Ra+=1,Zi===null&&(Zi=[]),Qc(Zi,d,m)}function Da(d,m){m=m.props.ref,d.ref=m!==void 0?m:null}function To(d,m){throw m.$$typeof===o?Error(i(525)):(d=Object.prototype.toString.call(m),Error(i(31,d==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":d)))}function eu(d){function m(fe,oe){if(d){var ge=fe.deletions;ge===null?(fe.deletions=[oe],fe.flags|=16):ge.push(oe)}}function E(fe,oe){if(!d)return null;for(;oe!==null;)m(fe,oe),oe=oe.sibling;return null}function A(fe){for(var oe=new Map;fe!==null;)fe.key!==null?oe.set(fe.key,fe):oe.set(fe.index,fe),fe=fe.sibling;return oe}function M(fe,oe){return fe=bn(fe,oe),fe.index=0,fe.sibling=null,fe}function N(fe,oe,ge){return fe.index=ge,d?(ge=fe.alternate,ge!==null?(ge=ge.index,ge<oe?(fe.flags|=67108866,oe):ge):(fe.flags|=67108866,oe)):(fe.flags|=1048576,oe)}function B(fe){return d&&fe.alternate===null&&(fe.flags|=67108866),fe}function H(fe,oe,ge,je){return oe===null||oe.tag!==6?(oe=Ms(ge,fe.mode,je),oe.return=fe,oe):(oe=M(oe,ge),oe.return=fe,oe)}function ne(fe,oe,ge,je){var Qe=ge.type;return Qe===S?Oe(fe,oe,ge.props.children,je,ge.key):oe!==null&&(oe.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===F&&wi(Qe)===oe.type)?(oe=M(oe,ge.props),Da(oe,ge),oe.return=fe,oe):(oe=yo(ge.type,ge.key,ge.props,null,fe.mode,je),Da(oe,ge),oe.return=fe,oe)}function ye(fe,oe,ge,je){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==ge.containerInfo||oe.stateNode.implementation!==ge.implementation?(oe=Cs(ge,fe.mode,je),oe.return=fe,oe):(oe=M(oe,ge.children||[]),oe.return=fe,oe)}function Oe(fe,oe,ge,je,Qe){return oe===null||oe.tag!==7?(oe=yi(ge,fe.mode,je,Qe),oe.return=fe,oe):(oe=M(oe,ge),oe.return=fe,oe)}function Me(fe,oe,ge){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return oe=Ms(""+oe,fe.mode,ge),oe.return=fe,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case h:return ge=yo(oe.type,oe.key,oe.props,null,fe.mode,ge),Da(ge,oe),ge.return=fe,ge;case _:return oe=Cs(oe,fe.mode,ge),oe.return=fe,oe;case F:return oe=wi(oe),Me(fe,oe,ge)}if(W(oe)||Q(oe))return oe=yi(oe,fe.mode,ge,null),oe.return=fe,oe;if(typeof oe.then=="function")return Me(fe,So(oe),ge);if(oe.$$typeof===C)return Me(fe,vo(fe,oe),ge);To(fe,oe)}return null}function be(fe,oe,ge,je){var Qe=oe!==null?oe.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return Qe!==null?null:H(fe,oe,""+ge,je);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case h:return ge.key===Qe?ne(fe,oe,ge,je):null;case _:return ge.key===Qe?ye(fe,oe,ge,je):null;case F:return ge=wi(ge),be(fe,oe,ge,je)}if(W(ge)||Q(ge))return Qe!==null?null:Oe(fe,oe,ge,je,null);if(typeof ge.then=="function")return be(fe,oe,So(ge),je);if(ge.$$typeof===C)return be(fe,oe,vo(fe,ge),je);To(fe,ge)}return null}function _e(fe,oe,ge,je,Qe){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return fe=fe.get(ge)||null,H(oe,fe,""+je,Qe);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case h:return fe=fe.get(je.key===null?ge:je.key)||null,ne(oe,fe,je,Qe);case _:return fe=fe.get(je.key===null?ge:je.key)||null,ye(oe,fe,je,Qe);case F:return je=wi(je),_e(fe,oe,ge,je,Qe)}if(W(je)||Q(je))return fe=fe.get(ge)||null,Oe(oe,fe,je,Qe,null);if(typeof je.then=="function")return _e(fe,oe,ge,So(je),Qe);if(je.$$typeof===C)return _e(fe,oe,ge,vo(oe,je),Qe);To(oe,je)}return null}function Ve(fe,oe,ge,je){for(var Qe=null,St=null,Ye=oe,ct=oe=0,xt=null;Ye!==null&&ct<ge.length;ct++){Ye.index>ct?(xt=Ye,Ye=null):xt=Ye.sibling;var Tt=be(fe,Ye,ge[ct],je);if(Tt===null){Ye===null&&(Ye=xt);break}d&&Ye&&Tt.alternate===null&&m(fe,Ye),oe=N(Tt,oe,ct),St===null?Qe=Tt:St.sibling=Tt,St=Tt,Ye=xt}if(ct===ge.length)return E(fe,Ye),_t&&xn(fe,ct),Qe;if(Ye===null){for(;ct<ge.length;ct++)Ye=Me(fe,ge[ct],je),Ye!==null&&(oe=N(Ye,oe,ct),St===null?Qe=Ye:St.sibling=Ye,St=Ye);return _t&&xn(fe,ct),Qe}for(Ye=A(Ye);ct<ge.length;ct++)xt=_e(Ye,fe,ct,ge[ct],je),xt!==null&&(d&&xt.alternate!==null&&Ye.delete(xt.key===null?ct:xt.key),oe=N(xt,oe,ct),St===null?Qe=xt:St.sibling=xt,St=xt);return d&&Ye.forEach(function(li){return m(fe,li)}),_t&&xn(fe,ct),Qe}function nt(fe,oe,ge,je){if(ge==null)throw Error(i(151));for(var Qe=null,St=null,Ye=oe,ct=oe=0,xt=null,Tt=ge.next();Ye!==null&&!Tt.done;ct++,Tt=ge.next()){Ye.index>ct?(xt=Ye,Ye=null):xt=Ye.sibling;var li=be(fe,Ye,Tt.value,je);if(li===null){Ye===null&&(Ye=xt);break}d&&Ye&&li.alternate===null&&m(fe,Ye),oe=N(li,oe,ct),St===null?Qe=li:St.sibling=li,St=li,Ye=xt}if(Tt.done)return E(fe,Ye),_t&&xn(fe,ct),Qe;if(Ye===null){for(;!Tt.done;ct++,Tt=ge.next())Tt=Me(fe,Tt.value,je),Tt!==null&&(oe=N(Tt,oe,ct),St===null?Qe=Tt:St.sibling=Tt,St=Tt);return _t&&xn(fe,ct),Qe}for(Ye=A(Ye);!Tt.done;ct++,Tt=ge.next())Tt=_e(Ye,fe,ct,Tt.value,je),Tt!==null&&(d&&Tt.alternate!==null&&Ye.delete(Tt.key===null?ct:Tt.key),oe=N(Tt,oe,ct),St===null?Qe=Tt:St.sibling=Tt,St=Tt);return d&&Ye.forEach(function(qh){return m(fe,qh)}),_t&&xn(fe,ct),Qe}function Dt(fe,oe,ge,je){if(typeof ge=="object"&&ge!==null&&ge.type===S&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case h:e:{for(var Qe=ge.key;oe!==null;){if(oe.key===Qe){if(Qe=ge.type,Qe===S){if(oe.tag===7){E(fe,oe.sibling),je=M(oe,ge.props.children),je.return=fe,fe=je;break e}}else if(oe.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===F&&wi(Qe)===oe.type){E(fe,oe.sibling),je=M(oe,ge.props),Da(je,ge),je.return=fe,fe=je;break e}E(fe,oe);break}else m(fe,oe);oe=oe.sibling}ge.type===S?(je=yi(ge.props.children,fe.mode,je,ge.key),je.return=fe,fe=je):(je=yo(ge.type,ge.key,ge.props,null,fe.mode,je),Da(je,ge),je.return=fe,fe=je)}return B(fe);case _:e:{for(Qe=ge.key;oe!==null;){if(oe.key===Qe)if(oe.tag===4&&oe.stateNode.containerInfo===ge.containerInfo&&oe.stateNode.implementation===ge.implementation){E(fe,oe.sibling),je=M(oe,ge.children||[]),je.return=fe,fe=je;break e}else{E(fe,oe);break}else m(fe,oe);oe=oe.sibling}je=Cs(ge,fe.mode,je),je.return=fe,fe=je}return B(fe);case F:return ge=wi(ge),Dt(fe,oe,ge,je)}if(W(ge))return Ve(fe,oe,ge,je);if(Q(ge)){if(Qe=Q(ge),typeof Qe!="function")throw Error(i(150));return ge=Qe.call(ge),nt(fe,oe,ge,je)}if(typeof ge.then=="function")return Dt(fe,oe,So(ge),je);if(ge.$$typeof===C)return Dt(fe,oe,vo(fe,ge),je);To(fe,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,oe!==null&&oe.tag===6?(E(fe,oe.sibling),je=M(oe,ge),je.return=fe,fe=je):(E(fe,oe),je=Ms(ge,fe.mode,je),je.return=fe,fe=je),B(fe)):E(fe,oe)}return function(fe,oe,ge,je){try{Ra=0;var Qe=Dt(fe,oe,ge,je);return Zi=null,Qe}catch(Ye){if(Ye===Qi||Ye===wo)throw Ye;var St=Pr(29,Ye,null,fe.mode);return St.lanes=je,St.return=fe,St}finally{}}}var Si=eu(!0),tu=eu(!1),Gn=!1;function Vs(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qs(d,m){d=d.updateQueue,m.updateQueue===d&&(m.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function Wn(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function Hn(d,m,E){var A=d.updateQueue;if(A===null)return null;if(A=A.shared,(At&2)!==0){var M=A.pending;return M===null?m.next=m:(m.next=M.next,M.next=m),A.pending=m,m=go(d),Lc(d,null,E),m}return mo(d,A,m,E),go(d)}function Na(d,m,E){if(m=m.updateQueue,m!==null&&(m=m.shared,(E&4194048)!==0)){var A=m.lanes;A&=d.pendingLanes,E|=A,m.lanes=E,Dn(d,E)}}function Gs(d,m){var E=d.updateQueue,A=d.alternate;if(A!==null&&(A=A.updateQueue,E===A)){var M=null,N=null;if(E=E.firstBaseUpdate,E!==null){do{var B={lane:E.lane,tag:E.tag,payload:E.payload,callback:null,next:null};N===null?M=N=B:N=N.next=B,E=E.next}while(E!==null);N===null?M=N=m:N=N.next=m}else M=N=m;E={baseState:A.baseState,firstBaseUpdate:M,lastBaseUpdate:N,shared:A.shared,callbacks:A.callbacks},d.updateQueue=E;return}d=E.lastBaseUpdate,d===null?E.firstBaseUpdate=m:d.next=m,E.lastBaseUpdate=m}var Ws=!1;function Ia(){if(Ws){var d=Xi;if(d!==null)throw d}}function $a(d,m,E,A){Ws=!1;var M=d.updateQueue;Gn=!1;var N=M.firstBaseUpdate,B=M.lastBaseUpdate,H=M.shared.pending;if(H!==null){M.shared.pending=null;var ne=H,ye=ne.next;ne.next=null,B===null?N=ye:B.next=ye,B=ne;var Oe=d.alternate;Oe!==null&&(Oe=Oe.updateQueue,H=Oe.lastBaseUpdate,H!==B&&(H===null?Oe.firstBaseUpdate=ye:H.next=ye,Oe.lastBaseUpdate=ne))}if(N!==null){var Me=M.baseState;B=0,Oe=ye=ne=null,H=N;do{var be=H.lane&-536870913,_e=be!==H.lane;if(_e?(bt&be)===be:(A&be)===be){be!==0&&be===Yi&&(Ws=!0),Oe!==null&&(Oe=Oe.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var Ve=d,nt=H;be=m;var Dt=E;switch(nt.tag){case 1:if(Ve=nt.payload,typeof Ve=="function"){Me=Ve.call(Dt,Me,be);break e}Me=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=nt.payload,be=typeof Ve=="function"?Ve.call(Dt,Me,be):Ve,be==null)break e;Me=u({},Me,be);break e;case 2:Gn=!0}}be=H.callback,be!==null&&(d.flags|=64,_e&&(d.flags|=8192),_e=M.callbacks,_e===null?M.callbacks=[be]:_e.push(be))}else _e={lane:be,tag:H.tag,payload:H.payload,callback:H.callback,next:null},Oe===null?(ye=Oe=_e,ne=Me):Oe=Oe.next=_e,B|=be;if(H=H.next,H===null){if(H=M.shared.pending,H===null)break;_e=H,H=_e.next,_e.next=null,M.lastBaseUpdate=_e,M.shared.pending=null}}while(!0);Oe===null&&(ne=Me),M.baseState=ne,M.firstBaseUpdate=ye,M.lastBaseUpdate=Oe,N===null&&(M.shared.lanes=0),Zn|=B,d.lanes=B,d.memoizedState=Me}}function ru(d,m){if(typeof d!="function")throw Error(i(191,d));d.call(m)}function nu(d,m){var E=d.callbacks;if(E!==null)for(d.callbacks=null,d=0;d<E.length;d++)ru(E[d],m)}var Ji=Z(null),Ao=Z(0);function iu(d,m){d=Mn,Pe(Ao,d),Pe(Ji,m),Mn=d|m.baseLanes}function Hs(){Pe(Ao,Mn),Pe(Ji,Ji.current)}function Ks(){Mn=Ao.current,ue(Ji),ue(Ao)}var jr=Z(null),Gr=null;function Kn(d){var m=d.alternate;Pe(Ht,Ht.current&1),Pe(jr,d),Gr===null&&(m===null||Ji.current!==null||m.memoizedState!==null)&&(Gr=d)}function Ys(d){Pe(Ht,Ht.current),Pe(jr,d),Gr===null&&(Gr=d)}function au(d){d.tag===22?(Pe(Ht,Ht.current),Pe(jr,d),Gr===null&&(Gr=d)):Yn()}function Yn(){Pe(Ht,Ht.current),Pe(jr,jr.current)}function Mr(d){ue(jr),Gr===d&&(Gr=null),ue(Ht)}var Ht=Z(0);function Oo(d){for(var m=d;m!==null;){if(m.tag===13){var E=m.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||tc(E)||rc(E)))return m}else if(m.tag===19&&(m.memoizedProps.revealOrder==="forwards"||m.memoizedProps.revealOrder==="backwards"||m.memoizedProps.revealOrder==="unstable_legacy-backwards"||m.memoizedProps.revealOrder==="together")){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var wn=0,lt=null,Rt=null,Zt=null,Po=!1,ea=!1,Ti=!1,jo=0,La=0,ta=null,Dp=0;function Gt(){throw Error(i(321))}function Xs(d,m){if(m===null)return!1;for(var E=0;E<m.length&&E<d.length;E++)if(!Or(d[E],m[E]))return!1;return!0}function Qs(d,m,E,A,M,N){return wn=N,lt=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,z.H=d===null||d.memoizedState===null?Uu:fl,Ti=!1,N=E(A,M),Ti=!1,ea&&(N=su(m,E,A,M)),ou(d),N}function ou(d){z.H=za;var m=Rt!==null&&Rt.next!==null;if(wn=0,Zt=Rt=lt=null,Po=!1,La=0,ta=null,m)throw Error(i(300));d===null||Jt||(d=d.dependencies,d!==null&&xo(d)&&(Jt=!0))}function su(d,m,E,A){lt=d;var M=0;do{if(ea&&(ta=null),La=0,ea=!1,25<=M)throw Error(i(301));if(M+=1,Zt=Rt=null,d.updateQueue!=null){var N=d.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}z.H=Vu,N=m(E,A)}while(ea);return N}function Np(){var d=z.H,m=d.useState()[0];return m=typeof m.then=="function"?Ba(m):m,d=d.useState()[0],(Rt!==null?Rt.memoizedState:null)!==d&&(lt.flags|=1024),m}function Zs(){var d=jo!==0;return jo=0,d}function Js(d,m,E){m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~E}function el(d){if(Po){for(d=d.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}Po=!1}wn=0,Zt=Rt=lt=null,ea=!1,La=jo=0,ta=null}function gr(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?lt.memoizedState=Zt=d:Zt=Zt.next=d,Zt}function Kt(){if(Rt===null){var d=lt.alternate;d=d!==null?d.memoizedState:null}else d=Rt.next;var m=Zt===null?lt.memoizedState:Zt.next;if(m!==null)Zt=m,Rt=d;else{if(d===null)throw lt.alternate===null?Error(i(467)):Error(i(310));Rt=d,d={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Zt===null?lt.memoizedState=Zt=d:Zt=Zt.next=d}return Zt}function Mo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ba(d){var m=La;return La+=1,ta===null&&(ta=[]),d=Qc(ta,d,m),m=lt,(Zt===null?m.memoizedState:Zt.next)===null&&(m=m.alternate,z.H=m===null||m.memoizedState===null?Uu:fl),d}function Co(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return Ba(d);if(d.$$typeof===C)return ur(d)}throw Error(i(438,String(d)))}function tl(d){var m=null,E=lt.updateQueue;if(E!==null&&(m=E.memoCache),m==null){var A=lt.alternate;A!==null&&(A=A.updateQueue,A!==null&&(A=A.memoCache,A!=null&&(m={data:A.data.map(function(M){return M.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),E===null&&(E=Mo(),lt.updateQueue=E),E.memoCache=m,E=m.data[m.index],E===void 0)for(E=m.data[m.index]=Array(d),A=0;A<d;A++)E[A]=V;return m.index++,E}function En(d,m){return typeof m=="function"?m(d):m}function Ro(d){var m=Kt();return rl(m,Rt,d)}function rl(d,m,E){var A=d.queue;if(A===null)throw Error(i(311));A.lastRenderedReducer=E;var M=d.baseQueue,N=A.pending;if(N!==null){if(M!==null){var B=M.next;M.next=N.next,N.next=B}m.baseQueue=M=N,A.pending=null}if(N=d.baseState,M===null)d.memoizedState=N;else{m=M.next;var H=B=null,ne=null,ye=m,Oe=!1;do{var Me=ye.lane&-536870913;if(Me!==ye.lane?(bt&Me)===Me:(wn&Me)===Me){var be=ye.revertLane;if(be===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,gesture:null,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),Me===Yi&&(Oe=!0);else if((wn&be)===be){ye=ye.next,be===Yi&&(Oe=!0);continue}else Me={lane:0,revertLane:ye.revertLane,gesture:null,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},ne===null?(H=ne=Me,B=N):ne=ne.next=Me,lt.lanes|=be,Zn|=be;Me=ye.action,Ti&&E(N,Me),N=ye.hasEagerState?ye.eagerState:E(N,Me)}else be={lane:Me,revertLane:ye.revertLane,gesture:ye.gesture,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},ne===null?(H=ne=be,B=N):ne=ne.next=be,lt.lanes|=Me,Zn|=Me;ye=ye.next}while(ye!==null&&ye!==m);if(ne===null?B=N:ne.next=H,!Or(N,d.memoizedState)&&(Jt=!0,Oe&&(E=Xi,E!==null)))throw E;d.memoizedState=N,d.baseState=B,d.baseQueue=ne,A.lastRenderedState=N}return M===null&&(A.lanes=0),[d.memoizedState,A.dispatch]}function nl(d){var m=Kt(),E=m.queue;if(E===null)throw Error(i(311));E.lastRenderedReducer=d;var A=E.dispatch,M=E.pending,N=m.memoizedState;if(M!==null){E.pending=null;var B=M=M.next;do N=d(N,B.action),B=B.next;while(B!==M);Or(N,m.memoizedState)||(Jt=!0),m.memoizedState=N,m.baseQueue===null&&(m.baseState=N),E.lastRenderedState=N}return[N,A]}function lu(d,m,E){var A=lt,M=Kt(),N=_t;if(N){if(E===void 0)throw Error(i(407));E=E()}else E=m();var B=!Or((Rt||M).memoizedState,E);if(B&&(M.memoizedState=E,Jt=!0),M=M.queue,ol(du.bind(null,A,M,d),[d]),M.getSnapshot!==m||B||Zt!==null&&Zt.memoizedState.tag&1){if(A.flags|=2048,ra(9,{destroy:void 0},uu.bind(null,A,M,E,m),null),Lt===null)throw Error(i(349));N||(wn&127)!==0||cu(A,m,E)}return E}function cu(d,m,E){d.flags|=16384,d={getSnapshot:m,value:E},m=lt.updateQueue,m===null?(m=Mo(),lt.updateQueue=m,m.stores=[d]):(E=m.stores,E===null?m.stores=[d]:E.push(d))}function uu(d,m,E,A){m.value=E,m.getSnapshot=A,fu(m)&&pu(d)}function du(d,m,E){return E(function(){fu(m)&&pu(d)})}function fu(d){var m=d.getSnapshot;d=d.value;try{var E=m();return!Or(d,E)}catch{return!0}}function pu(d){var m=gi(d,2);m!==null&&Tr(m,d,2)}function il(d){var m=gr();if(typeof d=="function"){var E=d;if(d=E(),Ti){lr(!0);try{E()}finally{lr(!1)}}}return m.memoizedState=m.baseState=d,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:d},m}function hu(d,m,E,A){return d.baseState=E,rl(d,Rt,typeof A=="function"?A:En)}function Ip(d,m,E,A,M){if(No(d))throw Error(i(485));if(d=m.action,d!==null){var N={payload:M,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){N.listeners.push(B)}};z.T!==null?E(!0):N.isTransition=!1,A(N),E=m.pending,E===null?(N.next=m.pending=N,mu(m,N)):(N.next=E.next,m.pending=E.next=N)}}function mu(d,m){var E=m.action,A=m.payload,M=d.state;if(m.isTransition){var N=z.T,B={};z.T=B;try{var H=E(M,A),ne=z.S;ne!==null&&ne(B,H),gu(d,m,H)}catch(ye){al(d,m,ye)}finally{N!==null&&B.types!==null&&(N.types=B.types),z.T=N}}else try{N=E(M,A),gu(d,m,N)}catch(ye){al(d,m,ye)}}function gu(d,m,E){E!==null&&typeof E=="object"&&typeof E.then=="function"?E.then(function(A){yu(d,m,A)},function(A){return al(d,m,A)}):yu(d,m,E)}function yu(d,m,E){m.status="fulfilled",m.value=E,bu(m),d.state=E,m=d.pending,m!==null&&(E=m.next,E===m?d.pending=null:(E=E.next,m.next=E,mu(d,E)))}function al(d,m,E){var A=d.pending;if(d.pending=null,A!==null){A=A.next;do m.status="rejected",m.reason=E,bu(m),m=m.next;while(m!==A)}d.action=null}function bu(d){d=d.listeners;for(var m=0;m<d.length;m++)(0,d[m])()}function xu(d,m){return m}function vu(d,m){if(_t){var E=Lt.formState;if(E!==null){e:{var A=lt;if(_t){if(Ft){t:{for(var M=Ft,N=qr;M.nodeType!==8;){if(!N){M=null;break t}if(M=Wr(M.nextSibling),M===null){M=null;break t}}N=M.data,M=N==="F!"||N==="F"?M:null}if(M){Ft=Wr(M.nextSibling),A=M.data==="F!";break e}}Vn(A)}A=!1}A&&(m=E[0])}}return E=gr(),E.memoizedState=E.baseState=m,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xu,lastRenderedState:m},E.queue=A,E=Bu.bind(null,lt,A),A.dispatch=E,A=il(!1),N=dl.bind(null,lt,!1,A.queue),A=gr(),M={state:m,dispatch:null,action:d,pending:null},A.queue=M,E=Ip.bind(null,lt,M,N,E),M.dispatch=E,A.memoizedState=d,[m,E,!1]}function _u(d){var m=Kt();return wu(m,Rt,d)}function wu(d,m,E){if(m=rl(d,m,xu)[0],d=Ro(En)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var A=Ba(m)}catch(B){throw B===Qi?wo:B}else A=m;m=Kt();var M=m.queue,N=M.dispatch;return E!==m.memoizedState&&(lt.flags|=2048,ra(9,{destroy:void 0},$p.bind(null,M,E),null)),[A,N,d]}function $p(d,m){d.action=m}function Eu(d){var m=Kt(),E=Rt;if(E!==null)return wu(m,E,d);Kt(),m=m.memoizedState,E=Kt();var A=E.queue.dispatch;return E.memoizedState=d,[m,A,!1]}function ra(d,m,E,A){return d={tag:d,create:E,deps:A,inst:m,next:null},m=lt.updateQueue,m===null&&(m=Mo(),lt.updateQueue=m),E=m.lastEffect,E===null?m.lastEffect=d.next=d:(A=E.next,E.next=d,d.next=A,m.lastEffect=d),d}function Su(){return Kt().memoizedState}function ko(d,m,E,A){var M=gr();lt.flags|=d,M.memoizedState=ra(1|m,{destroy:void 0},E,A===void 0?null:A)}function Do(d,m,E,A){var M=Kt();A=A===void 0?null:A;var N=M.memoizedState.inst;Rt!==null&&A!==null&&Xs(A,Rt.memoizedState.deps)?M.memoizedState=ra(m,N,E,A):(lt.flags|=d,M.memoizedState=ra(1|m,N,E,A))}function Tu(d,m){ko(8390656,8,d,m)}function ol(d,m){Do(2048,8,d,m)}function Lp(d){lt.flags|=4;var m=lt.updateQueue;if(m===null)m=Mo(),lt.updateQueue=m,m.events=[d];else{var E=m.events;E===null?m.events=[d]:E.push(d)}}function Au(d){var m=Kt().memoizedState;return Lp({ref:m,nextImpl:d}),function(){if((At&2)!==0)throw Error(i(440));return m.impl.apply(void 0,arguments)}}function Ou(d,m){return Do(4,2,d,m)}function Pu(d,m){return Do(4,4,d,m)}function ju(d,m){if(typeof m=="function"){d=d();var E=m(d);return function(){typeof E=="function"?E():m(null)}}if(m!=null)return d=d(),m.current=d,function(){m.current=null}}function Mu(d,m,E){E=E!=null?E.concat([d]):null,Do(4,4,ju.bind(null,m,d),E)}function sl(){}function Cu(d,m){var E=Kt();m=m===void 0?null:m;var A=E.memoizedState;return m!==null&&Xs(m,A[1])?A[0]:(E.memoizedState=[d,m],d)}function Ru(d,m){var E=Kt();m=m===void 0?null:m;var A=E.memoizedState;if(m!==null&&Xs(m,A[1]))return A[0];if(A=d(),Ti){lr(!0);try{d()}finally{lr(!1)}}return E.memoizedState=[A,m],A}function ll(d,m,E){return E===void 0||(wn&1073741824)!==0&&(bt&261930)===0?d.memoizedState=m:(d.memoizedState=E,d=kd(),lt.lanes|=d,Zn|=d,E)}function ku(d,m,E,A){return Or(E,m)?E:Ji.current!==null?(d=ll(d,E,A),Or(d,m)||(Jt=!0),d):(wn&42)===0||(wn&1073741824)!==0&&(bt&261930)===0?(Jt=!0,d.memoizedState=E):(d=kd(),lt.lanes|=d,Zn|=d,m)}function Du(d,m,E,A,M){var N=q.p;q.p=N!==0&&8>N?N:8;var B=z.T,H={};z.T=H,dl(d,!1,m,E);try{var ne=M(),ye=z.S;if(ye!==null&&ye(H,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var Oe=kp(ne,A);Fa(d,m,Oe,Dr(d))}else Fa(d,m,A,Dr(d))}catch(Me){Fa(d,m,{then:function(){},status:"rejected",reason:Me},Dr())}finally{q.p=N,B!==null&&H.types!==null&&(B.types=H.types),z.T=B}}function Bp(){}function cl(d,m,E,A){if(d.tag!==5)throw Error(i(476));var M=Nu(d).queue;Du(d,M,m,ce,E===null?Bp:function(){return Iu(d),E(A)})}function Nu(d){var m=d.memoizedState;if(m!==null)return m;m={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:ce},next:null};var E={};return m.next={memoizedState:E,baseState:E,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:E},next:null},d.memoizedState=m,d=d.alternate,d!==null&&(d.memoizedState=m),m}function Iu(d){var m=Nu(d);m.next===null&&(m=d.alternate.memoizedState),Fa(d,m.next.queue,{},Dr())}function ul(){return ur(io)}function $u(){return Kt().memoizedState}function Lu(){return Kt().memoizedState}function Fp(d){for(var m=d.return;m!==null;){switch(m.tag){case 24:case 3:var E=Dr();d=Wn(E);var A=Hn(m,d,E);A!==null&&(Tr(A,m,E),Na(A,m,E)),m={cache:Bs()},d.payload=m;return}m=m.return}}function zp(d,m,E){var A=Dr();E={lane:A,revertLane:0,gesture:null,action:E,hasEagerState:!1,eagerState:null,next:null},No(d)?Fu(m,E):(E=Ps(d,m,E,A),E!==null&&(Tr(E,d,A),zu(E,m,A)))}function Bu(d,m,E){var A=Dr();Fa(d,m,E,A)}function Fa(d,m,E,A){var M={lane:A,revertLane:0,gesture:null,action:E,hasEagerState:!1,eagerState:null,next:null};if(No(d))Fu(m,M);else{var N=d.alternate;if(d.lanes===0&&(N===null||N.lanes===0)&&(N=m.lastRenderedReducer,N!==null))try{var B=m.lastRenderedState,H=N(B,E);if(M.hasEagerState=!0,M.eagerState=H,Or(H,B))return mo(d,m,M,0),Lt===null&&ho(),!1}catch{}finally{}if(E=Ps(d,m,M,A),E!==null)return Tr(E,d,A),zu(E,m,A),!0}return!1}function dl(d,m,E,A){if(A={lane:2,revertLane:Vl(),gesture:null,action:A,hasEagerState:!1,eagerState:null,next:null},No(d)){if(m)throw Error(i(479))}else m=Ps(d,E,A,2),m!==null&&Tr(m,d,2)}function No(d){var m=d.alternate;return d===lt||m!==null&&m===lt}function Fu(d,m){ea=Po=!0;var E=d.pending;E===null?m.next=m:(m.next=E.next,E.next=m),d.pending=m}function zu(d,m,E){if((E&4194048)!==0){var A=m.lanes;A&=d.pendingLanes,E|=A,m.lanes=E,Dn(d,E)}}var za={readContext:ur,use:Co,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useLayoutEffect:Gt,useInsertionEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useSyncExternalStore:Gt,useId:Gt,useHostTransitionStatus:Gt,useFormState:Gt,useActionState:Gt,useOptimistic:Gt,useMemoCache:Gt,useCacheRefresh:Gt};za.useEffectEvent=Gt;var Uu={readContext:ur,use:Co,useCallback:function(d,m){return gr().memoizedState=[d,m===void 0?null:m],d},useContext:ur,useEffect:Tu,useImperativeHandle:function(d,m,E){E=E!=null?E.concat([d]):null,ko(4194308,4,ju.bind(null,m,d),E)},useLayoutEffect:function(d,m){return ko(4194308,4,d,m)},useInsertionEffect:function(d,m){ko(4,2,d,m)},useMemo:function(d,m){var E=gr();m=m===void 0?null:m;var A=d();if(Ti){lr(!0);try{d()}finally{lr(!1)}}return E.memoizedState=[A,m],A},useReducer:function(d,m,E){var A=gr();if(E!==void 0){var M=E(m);if(Ti){lr(!0);try{E(m)}finally{lr(!1)}}}else M=m;return A.memoizedState=A.baseState=M,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:M},A.queue=d,d=d.dispatch=zp.bind(null,lt,d),[A.memoizedState,d]},useRef:function(d){var m=gr();return d={current:d},m.memoizedState=d},useState:function(d){d=il(d);var m=d.queue,E=Bu.bind(null,lt,m);return m.dispatch=E,[d.memoizedState,E]},useDebugValue:sl,useDeferredValue:function(d,m){var E=gr();return ll(E,d,m)},useTransition:function(){var d=il(!1);return d=Du.bind(null,lt,d.queue,!0,!1),gr().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,m,E){var A=lt,M=gr();if(_t){if(E===void 0)throw Error(i(407));E=E()}else{if(E=m(),Lt===null)throw Error(i(349));(bt&127)!==0||cu(A,m,E)}M.memoizedState=E;var N={value:E,getSnapshot:m};return M.queue=N,Tu(du.bind(null,A,N,d),[d]),A.flags|=2048,ra(9,{destroy:void 0},uu.bind(null,A,N,E,m),null),E},useId:function(){var d=gr(),m=Lt.identifierPrefix;if(_t){var E=an,A=nn;E=(A&~(1<<32-or(A)-1)).toString(32)+E,m="_"+m+"R_"+E,E=jo++,0<E&&(m+="H"+E.toString(32)),m+="_"}else E=Dp++,m="_"+m+"r_"+E.toString(32)+"_";return d.memoizedState=m},useHostTransitionStatus:ul,useFormState:vu,useActionState:vu,useOptimistic:function(d){var m=gr();m.memoizedState=m.baseState=d;var E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=E,m=dl.bind(null,lt,!0,E),E.dispatch=m,[d,m]},useMemoCache:tl,useCacheRefresh:function(){return gr().memoizedState=Fp.bind(null,lt)},useEffectEvent:function(d){var m=gr(),E={impl:d};return m.memoizedState=E,function(){if((At&2)!==0)throw Error(i(440));return E.impl.apply(void 0,arguments)}}},fl={readContext:ur,use:Co,useCallback:Cu,useContext:ur,useEffect:ol,useImperativeHandle:Mu,useInsertionEffect:Ou,useLayoutEffect:Pu,useMemo:Ru,useReducer:Ro,useRef:Su,useState:function(){return Ro(En)},useDebugValue:sl,useDeferredValue:function(d,m){var E=Kt();return ku(E,Rt.memoizedState,d,m)},useTransition:function(){var d=Ro(En)[0],m=Kt().memoizedState;return[typeof d=="boolean"?d:Ba(d),m]},useSyncExternalStore:lu,useId:$u,useHostTransitionStatus:ul,useFormState:_u,useActionState:_u,useOptimistic:function(d,m){var E=Kt();return hu(E,Rt,d,m)},useMemoCache:tl,useCacheRefresh:Lu};fl.useEffectEvent=Au;var Vu={readContext:ur,use:Co,useCallback:Cu,useContext:ur,useEffect:ol,useImperativeHandle:Mu,useInsertionEffect:Ou,useLayoutEffect:Pu,useMemo:Ru,useReducer:nl,useRef:Su,useState:function(){return nl(En)},useDebugValue:sl,useDeferredValue:function(d,m){var E=Kt();return Rt===null?ll(E,d,m):ku(E,Rt.memoizedState,d,m)},useTransition:function(){var d=nl(En)[0],m=Kt().memoizedState;return[typeof d=="boolean"?d:Ba(d),m]},useSyncExternalStore:lu,useId:$u,useHostTransitionStatus:ul,useFormState:Eu,useActionState:Eu,useOptimistic:function(d,m){var E=Kt();return Rt!==null?hu(E,Rt,d,m):(E.baseState=d,[d,E.queue.dispatch])},useMemoCache:tl,useCacheRefresh:Lu};Vu.useEffectEvent=Au;function pl(d,m,E,A){m=d.memoizedState,E=E(A,m),E=E==null?m:u({},m,E),d.memoizedState=E,d.lanes===0&&(d.updateQueue.baseState=E)}var hl={enqueueSetState:function(d,m,E){d=d._reactInternals;var A=Dr(),M=Wn(A);M.payload=m,E!=null&&(M.callback=E),m=Hn(d,M,A),m!==null&&(Tr(m,d,A),Na(m,d,A))},enqueueReplaceState:function(d,m,E){d=d._reactInternals;var A=Dr(),M=Wn(A);M.tag=1,M.payload=m,E!=null&&(M.callback=E),m=Hn(d,M,A),m!==null&&(Tr(m,d,A),Na(m,d,A))},enqueueForceUpdate:function(d,m){d=d._reactInternals;var E=Dr(),A=Wn(E);A.tag=2,m!=null&&(A.callback=m),m=Hn(d,A,E),m!==null&&(Tr(m,d,E),Na(m,d,E))}};function qu(d,m,E,A,M,N,B){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(A,N,B):m.prototype&&m.prototype.isPureReactComponent?!Aa(E,A)||!Aa(M,N):!0}function Gu(d,m,E,A){d=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(E,A),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(E,A),m.state!==d&&hl.enqueueReplaceState(m,m.state,null)}function Ai(d,m){var E=m;if("ref"in m){E={};for(var A in m)A!=="ref"&&(E[A]=m[A])}if(d=d.defaultProps){E===m&&(E=u({},E));for(var M in d)E[M]===void 0&&(E[M]=d[M])}return E}function Wu(d){po(d)}function Hu(d){console.error(d)}function Ku(d){po(d)}function Io(d,m){try{var E=d.onUncaughtError;E(m.value,{componentStack:m.stack})}catch(A){setTimeout(function(){throw A})}}function Yu(d,m,E){try{var A=d.onCaughtError;A(E.value,{componentStack:E.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function ml(d,m,E){return E=Wn(E),E.tag=3,E.payload={element:null},E.callback=function(){Io(d,m)},E}function Xu(d){return d=Wn(d),d.tag=3,d}function Qu(d,m,E,A){var M=E.type.getDerivedStateFromError;if(typeof M=="function"){var N=A.value;d.payload=function(){return M(N)},d.callback=function(){Yu(m,E,A)}}var B=E.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(d.callback=function(){Yu(m,E,A),typeof M!="function"&&(Jn===null?Jn=new Set([this]):Jn.add(this));var H=A.stack;this.componentDidCatch(A.value,{componentStack:H!==null?H:""})})}function Up(d,m,E,A,M){if(E.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){if(m=E.alternate,m!==null&&Ki(m,E,M,!0),E=jr.current,E!==null){switch(E.tag){case 31:case 13:return Gr===null?Ko():E.alternate===null&&Wt===0&&(Wt=3),E.flags&=-257,E.flags|=65536,E.lanes=M,A===Eo?E.flags|=16384:(m=E.updateQueue,m===null?E.updateQueue=new Set([A]):m.add(A),Fl(d,A,M)),!1;case 22:return E.flags|=65536,A===Eo?E.flags|=16384:(m=E.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([A])},E.updateQueue=m):(E=m.retryQueue,E===null?m.retryQueue=new Set([A]):E.add(A)),Fl(d,A,M)),!1}throw Error(i(435,E.tag))}return Fl(d,A,M),Ko(),!1}if(_t)return m=jr.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=M,A!==Ds&&(d=Error(i(422),{cause:A}),ja(zr(d,E)))):(A!==Ds&&(m=Error(i(423),{cause:A}),ja(zr(m,E))),d=d.current.alternate,d.flags|=65536,M&=-M,d.lanes|=M,A=zr(A,E),M=ml(d.stateNode,A,M),Gs(d,M),Wt!==4&&(Wt=2)),!1;var N=Error(i(520),{cause:A});if(N=zr(N,E),Ya===null?Ya=[N]:Ya.push(N),Wt!==4&&(Wt=2),m===null)return!0;A=zr(A,E),E=m;do{switch(E.tag){case 3:return E.flags|=65536,d=M&-M,E.lanes|=d,d=ml(E.stateNode,A,d),Gs(E,d),!1;case 1:if(m=E.type,N=E.stateNode,(E.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Jn===null||!Jn.has(N))))return E.flags|=65536,M&=-M,E.lanes|=M,M=Xu(M),Qu(M,d,E,A),Gs(E,M),!1}E=E.return}while(E!==null);return!1}var gl=Error(i(461)),Jt=!1;function dr(d,m,E,A){m.child=d===null?tu(m,null,E,A):Si(m,d.child,E,A)}function Zu(d,m,E,A,M){E=E.render;var N=m.ref;if("ref"in A){var B={};for(var H in A)H!=="ref"&&(B[H]=A[H])}else B=A;return vi(m),A=Qs(d,m,E,B,N,M),H=Zs(),d!==null&&!Jt?(Js(d,m,M),Sn(d,m,M)):(_t&&H&&Rs(m),m.flags|=1,dr(d,m,A,M),m.child)}function Ju(d,m,E,A,M){if(d===null){var N=E.type;return typeof N=="function"&&!js(N)&&N.defaultProps===void 0&&E.compare===null?(m.tag=15,m.type=N,ed(d,m,N,A,M)):(d=yo(E.type,null,A,m,m.mode,M),d.ref=m.ref,d.return=m,m.child=d)}if(N=d.child,!Sl(d,M)){var B=N.memoizedProps;if(E=E.compare,E=E!==null?E:Aa,E(B,A)&&d.ref===m.ref)return Sn(d,m,M)}return m.flags|=1,d=bn(N,A),d.ref=m.ref,d.return=m,m.child=d}function ed(d,m,E,A,M){if(d!==null){var N=d.memoizedProps;if(Aa(N,A)&&d.ref===m.ref)if(Jt=!1,m.pendingProps=A=N,Sl(d,M))(d.flags&131072)!==0&&(Jt=!0);else return m.lanes=d.lanes,Sn(d,m,M)}return yl(d,m,E,A,M)}function td(d,m,E,A){var M=A.children,N=d!==null?d.memoizedState:null;if(d===null&&m.stateNode===null&&(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),A.mode==="hidden"){if((m.flags&128)!==0){if(N=N!==null?N.baseLanes|E:E,d!==null){for(A=m.child=d.child,M=0;A!==null;)M=M|A.lanes|A.childLanes,A=A.sibling;A=M&~N}else A=0,m.child=null;return rd(d,m,N,E,A)}if((E&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},d!==null&&_o(m,N!==null?N.cachePool:null),N!==null?iu(m,N):Hs(),au(m);else return A=m.lanes=536870912,rd(d,m,N!==null?N.baseLanes|E:E,E,A)}else N!==null?(_o(m,N.cachePool),iu(m,N),Yn(),m.memoizedState=null):(d!==null&&_o(m,null),Hs(),Yn());return dr(d,m,M,E),m.child}function Ua(d,m){return d!==null&&d.tag===22||m.stateNode!==null||(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.sibling}function rd(d,m,E,A,M){var N=zs();return N=N===null?null:{parent:Qt._currentValue,pool:N},m.memoizedState={baseLanes:E,cachePool:N},d!==null&&_o(m,null),Hs(),au(m),d!==null&&Ki(d,m,A,!0),m.childLanes=M,null}function $o(d,m){return m=Bo({mode:m.mode,children:m.children},d.mode),m.ref=d.ref,d.child=m,m.return=d,m}function nd(d,m,E){return Si(m,d.child,null,E),d=$o(m,m.pendingProps),d.flags|=2,Mr(m),m.memoizedState=null,d}function Vp(d,m,E){var A=m.pendingProps,M=(m.flags&128)!==0;if(m.flags&=-129,d===null){if(_t){if(A.mode==="hidden")return d=$o(m,A),m.lanes=536870912,Ua(null,d);if(Ys(m),(d=Ft)?(d=gf(d,qr),d=d!==null&&d.data==="&"?d:null,d!==null&&(m.memoizedState={dehydrated:d,treeContext:zn!==null?{id:nn,overflow:an}:null,retryLane:536870912,hydrationErrors:null},E=Fc(d),E.return=m,m.child=E,cr=m,Ft=null)):d=null,d===null)throw Vn(m);return m.lanes=536870912,null}return $o(m,A)}var N=d.memoizedState;if(N!==null){var B=N.dehydrated;if(Ys(m),M)if(m.flags&256)m.flags&=-257,m=nd(d,m,E);else if(m.memoizedState!==null)m.child=d.child,m.flags|=128,m=null;else throw Error(i(558));else if(Jt||Ki(d,m,E,!1),M=(E&d.childLanes)!==0,Jt||M){if(A=Lt,A!==null&&(B=Nn(A,E),B!==0&&B!==N.retryLane))throw N.retryLane=B,gi(d,B),Tr(A,d,B),gl;Ko(),m=nd(d,m,E)}else d=N.treeContext,Ft=Wr(B.nextSibling),cr=m,_t=!0,Un=null,qr=!1,d!==null&&Vc(m,d),m=$o(m,A),m.flags|=4096;return m}return d=bn(d.child,{mode:A.mode,children:A.children}),d.ref=m.ref,m.child=d,d.return=m,d}function Lo(d,m){var E=m.ref;if(E===null)d!==null&&d.ref!==null&&(m.flags|=4194816);else{if(typeof E!="function"&&typeof E!="object")throw Error(i(284));(d===null||d.ref!==E)&&(m.flags|=4194816)}}function yl(d,m,E,A,M){return vi(m),E=Qs(d,m,E,A,void 0,M),A=Zs(),d!==null&&!Jt?(Js(d,m,M),Sn(d,m,M)):(_t&&A&&Rs(m),m.flags|=1,dr(d,m,E,M),m.child)}function id(d,m,E,A,M,N){return vi(m),m.updateQueue=null,E=su(m,A,E,M),ou(d),A=Zs(),d!==null&&!Jt?(Js(d,m,N),Sn(d,m,N)):(_t&&A&&Rs(m),m.flags|=1,dr(d,m,E,N),m.child)}function ad(d,m,E,A,M){if(vi(m),m.stateNode===null){var N=qi,B=E.contextType;typeof B=="object"&&B!==null&&(N=ur(B)),N=new E(A,N),m.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=hl,m.stateNode=N,N._reactInternals=m,N=m.stateNode,N.props=A,N.state=m.memoizedState,N.refs={},Vs(m),B=E.contextType,N.context=typeof B=="object"&&B!==null?ur(B):qi,N.state=m.memoizedState,B=E.getDerivedStateFromProps,typeof B=="function"&&(pl(m,E,B,A),N.state=m.memoizedState),typeof E.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(B=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),B!==N.state&&hl.enqueueReplaceState(N,N.state,null),$a(m,A,N,M),Ia(),N.state=m.memoizedState),typeof N.componentDidMount=="function"&&(m.flags|=4194308),A=!0}else if(d===null){N=m.stateNode;var H=m.memoizedProps,ne=Ai(E,H);N.props=ne;var ye=N.context,Oe=E.contextType;B=qi,typeof Oe=="object"&&Oe!==null&&(B=ur(Oe));var Me=E.getDerivedStateFromProps;Oe=typeof Me=="function"||typeof N.getSnapshotBeforeUpdate=="function",H=m.pendingProps!==H,Oe||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(H||ye!==B)&&Gu(m,N,A,B),Gn=!1;var be=m.memoizedState;N.state=be,$a(m,A,N,M),Ia(),ye=m.memoizedState,H||be!==ye||Gn?(typeof Me=="function"&&(pl(m,E,Me,A),ye=m.memoizedState),(ne=Gn||qu(m,E,ne,A,be,ye,B))?(Oe||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(m.flags|=4194308)):(typeof N.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=A,m.memoizedState=ye),N.props=A,N.state=ye,N.context=B,A=ne):(typeof N.componentDidMount=="function"&&(m.flags|=4194308),A=!1)}else{N=m.stateNode,qs(d,m),B=m.memoizedProps,Oe=Ai(E,B),N.props=Oe,Me=m.pendingProps,be=N.context,ye=E.contextType,ne=qi,typeof ye=="object"&&ye!==null&&(ne=ur(ye)),H=E.getDerivedStateFromProps,(ye=typeof H=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(B!==Me||be!==ne)&&Gu(m,N,A,ne),Gn=!1,be=m.memoizedState,N.state=be,$a(m,A,N,M),Ia();var _e=m.memoizedState;B!==Me||be!==_e||Gn||d!==null&&d.dependencies!==null&&xo(d.dependencies)?(typeof H=="function"&&(pl(m,E,H,A),_e=m.memoizedState),(Oe=Gn||qu(m,E,Oe,A,be,_e,ne)||d!==null&&d.dependencies!==null&&xo(d.dependencies))?(ye||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(A,_e,ne),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(A,_e,ne)),typeof N.componentDidUpdate=="function"&&(m.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof N.componentDidUpdate!="function"||B===d.memoizedProps&&be===d.memoizedState||(m.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||B===d.memoizedProps&&be===d.memoizedState||(m.flags|=1024),m.memoizedProps=A,m.memoizedState=_e),N.props=A,N.state=_e,N.context=ne,A=Oe):(typeof N.componentDidUpdate!="function"||B===d.memoizedProps&&be===d.memoizedState||(m.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||B===d.memoizedProps&&be===d.memoizedState||(m.flags|=1024),A=!1)}return N=A,Lo(d,m),A=(m.flags&128)!==0,N||A?(N=m.stateNode,E=A&&typeof E.getDerivedStateFromError!="function"?null:N.render(),m.flags|=1,d!==null&&A?(m.child=Si(m,d.child,null,M),m.child=Si(m,null,E,M)):dr(d,m,E,M),m.memoizedState=N.state,d=m.child):d=Sn(d,m,M),d}function od(d,m,E,A){return bi(),m.flags|=256,dr(d,m,E,A),m.child}var bl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xl(d){return{baseLanes:d,cachePool:Yc()}}function vl(d,m,E){return d=d!==null?d.childLanes&~E:0,m&&(d|=Rr),d}function sd(d,m,E){var A=m.pendingProps,M=!1,N=(m.flags&128)!==0,B;if((B=N)||(B=d!==null&&d.memoizedState===null?!1:(Ht.current&2)!==0),B&&(M=!0,m.flags&=-129),B=(m.flags&32)!==0,m.flags&=-33,d===null){if(_t){if(M?Kn(m):Yn(),(d=Ft)?(d=gf(d,qr),d=d!==null&&d.data!=="&"?d:null,d!==null&&(m.memoizedState={dehydrated:d,treeContext:zn!==null?{id:nn,overflow:an}:null,retryLane:536870912,hydrationErrors:null},E=Fc(d),E.return=m,m.child=E,cr=m,Ft=null)):d=null,d===null)throw Vn(m);return rc(d)?m.lanes=32:m.lanes=536870912,null}var H=A.children;return A=A.fallback,M?(Yn(),M=m.mode,H=Bo({mode:"hidden",children:H},M),A=yi(A,M,E,null),H.return=m,A.return=m,H.sibling=A,m.child=H,A=m.child,A.memoizedState=xl(E),A.childLanes=vl(d,B,E),m.memoizedState=bl,Ua(null,A)):(Kn(m),_l(m,H))}var ne=d.memoizedState;if(ne!==null&&(H=ne.dehydrated,H!==null)){if(N)m.flags&256?(Kn(m),m.flags&=-257,m=wl(d,m,E)):m.memoizedState!==null?(Yn(),m.child=d.child,m.flags|=128,m=null):(Yn(),H=A.fallback,M=m.mode,A=Bo({mode:"visible",children:A.children},M),H=yi(H,M,E,null),H.flags|=2,A.return=m,H.return=m,A.sibling=H,m.child=A,Si(m,d.child,null,E),A=m.child,A.memoizedState=xl(E),A.childLanes=vl(d,B,E),m.memoizedState=bl,m=Ua(null,A));else if(Kn(m),rc(H)){if(B=H.nextSibling&&H.nextSibling.dataset,B)var ye=B.dgst;B=ye,A=Error(i(419)),A.stack="",A.digest=B,ja({value:A,source:null,stack:null}),m=wl(d,m,E)}else if(Jt||Ki(d,m,E,!1),B=(E&d.childLanes)!==0,Jt||B){if(B=Lt,B!==null&&(A=Nn(B,E),A!==0&&A!==ne.retryLane))throw ne.retryLane=A,gi(d,A),Tr(B,d,A),gl;tc(H)||Ko(),m=wl(d,m,E)}else tc(H)?(m.flags|=192,m.child=d.child,m=null):(d=ne.treeContext,Ft=Wr(H.nextSibling),cr=m,_t=!0,Un=null,qr=!1,d!==null&&Vc(m,d),m=_l(m,A.children),m.flags|=4096);return m}return M?(Yn(),H=A.fallback,M=m.mode,ne=d.child,ye=ne.sibling,A=bn(ne,{mode:"hidden",children:A.children}),A.subtreeFlags=ne.subtreeFlags&65011712,ye!==null?H=bn(ye,H):(H=yi(H,M,E,null),H.flags|=2),H.return=m,A.return=m,A.sibling=H,m.child=A,Ua(null,A),A=m.child,H=d.child.memoizedState,H===null?H=xl(E):(M=H.cachePool,M!==null?(ne=Qt._currentValue,M=M.parent!==ne?{parent:ne,pool:ne}:M):M=Yc(),H={baseLanes:H.baseLanes|E,cachePool:M}),A.memoizedState=H,A.childLanes=vl(d,B,E),m.memoizedState=bl,Ua(d.child,A)):(Kn(m),E=d.child,d=E.sibling,E=bn(E,{mode:"visible",children:A.children}),E.return=m,E.sibling=null,d!==null&&(B=m.deletions,B===null?(m.deletions=[d],m.flags|=16):B.push(d)),m.child=E,m.memoizedState=null,E)}function _l(d,m){return m=Bo({mode:"visible",children:m},d.mode),m.return=d,d.child=m}function Bo(d,m){return d=Pr(22,d,null,m),d.lanes=0,d}function wl(d,m,E){return Si(m,d.child,null,E),d=_l(m,m.pendingProps.children),d.flags|=2,m.memoizedState=null,d}function ld(d,m,E){d.lanes|=m;var A=d.alternate;A!==null&&(A.lanes|=m),$s(d.return,m,E)}function El(d,m,E,A,M,N){var B=d.memoizedState;B===null?d.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:A,tail:E,tailMode:M,treeForkCount:N}:(B.isBackwards=m,B.rendering=null,B.renderingStartTime=0,B.last=A,B.tail=E,B.tailMode=M,B.treeForkCount=N)}function cd(d,m,E){var A=m.pendingProps,M=A.revealOrder,N=A.tail;A=A.children;var B=Ht.current,H=(B&2)!==0;if(H?(B=B&1|2,m.flags|=128):B&=1,Pe(Ht,B),dr(d,m,A,E),A=_t?Pa:0,!H&&d!==null&&(d.flags&128)!==0)e:for(d=m.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&ld(d,E,m);else if(d.tag===19)ld(d,E,m);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===m)break e;for(;d.sibling===null;){if(d.return===null||d.return===m)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}switch(M){case"forwards":for(E=m.child,M=null;E!==null;)d=E.alternate,d!==null&&Oo(d)===null&&(M=E),E=E.sibling;E=M,E===null?(M=m.child,m.child=null):(M=E.sibling,E.sibling=null),El(m,!1,M,E,N,A);break;case"backwards":case"unstable_legacy-backwards":for(E=null,M=m.child,m.child=null;M!==null;){if(d=M.alternate,d!==null&&Oo(d)===null){m.child=M;break}d=M.sibling,M.sibling=E,E=M,M=d}El(m,!0,E,null,N,A);break;case"together":El(m,!1,null,null,void 0,A);break;default:m.memoizedState=null}return m.child}function Sn(d,m,E){if(d!==null&&(m.dependencies=d.dependencies),Zn|=m.lanes,(E&m.childLanes)===0)if(d!==null){if(Ki(d,m,E,!1),(E&m.childLanes)===0)return null}else return null;if(d!==null&&m.child!==d.child)throw Error(i(153));if(m.child!==null){for(d=m.child,E=bn(d,d.pendingProps),m.child=E,E.return=m;d.sibling!==null;)d=d.sibling,E=E.sibling=bn(d,d.pendingProps),E.return=m;E.sibling=null}return m.child}function Sl(d,m){return(d.lanes&m)!==0?!0:(d=d.dependencies,!!(d!==null&&xo(d)))}function qp(d,m,E){switch(m.tag){case 3:$e(m,m.stateNode.containerInfo),qn(m,Qt,d.memoizedState.cache),bi();break;case 27:case 5:ke(m);break;case 4:$e(m,m.stateNode.containerInfo);break;case 10:qn(m,m.type,m.memoizedProps.value);break;case 31:if(m.memoizedState!==null)return m.flags|=128,Ys(m),null;break;case 13:var A=m.memoizedState;if(A!==null)return A.dehydrated!==null?(Kn(m),m.flags|=128,null):(E&m.child.childLanes)!==0?sd(d,m,E):(Kn(m),d=Sn(d,m,E),d!==null?d.sibling:null);Kn(m);break;case 19:var M=(d.flags&128)!==0;if(A=(E&m.childLanes)!==0,A||(Ki(d,m,E,!1),A=(E&m.childLanes)!==0),M){if(A)return cd(d,m,E);m.flags|=128}if(M=m.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),Pe(Ht,Ht.current),A)break;return null;case 22:return m.lanes=0,td(d,m,E,m.pendingProps);case 24:qn(m,Qt,d.memoizedState.cache)}return Sn(d,m,E)}function ud(d,m,E){if(d!==null)if(d.memoizedProps!==m.pendingProps)Jt=!0;else{if(!Sl(d,E)&&(m.flags&128)===0)return Jt=!1,qp(d,m,E);Jt=(d.flags&131072)!==0}else Jt=!1,_t&&(m.flags&1048576)!==0&&Uc(m,Pa,m.index);switch(m.lanes=0,m.tag){case 16:e:{var A=m.pendingProps;if(d=wi(m.elementType),m.type=d,typeof d=="function")js(d)?(A=Ai(d,A),m.tag=1,m=ad(null,m,d,A,E)):(m.tag=0,m=yl(null,m,d,A,E));else{if(d!=null){var M=d.$$typeof;if(M===D){m.tag=11,m=Zu(null,m,d,A,E);break e}else if(M===$){m.tag=14,m=Ju(null,m,d,A,E);break e}}throw m=X(d)||d,Error(i(306,m,""))}}return m;case 0:return yl(d,m,m.type,m.pendingProps,E);case 1:return A=m.type,M=Ai(A,m.pendingProps),ad(d,m,A,M,E);case 3:e:{if($e(m,m.stateNode.containerInfo),d===null)throw Error(i(387));A=m.pendingProps;var N=m.memoizedState;M=N.element,qs(d,m),$a(m,A,null,E);var B=m.memoizedState;if(A=B.cache,qn(m,Qt,A),A!==N.cache&&Ls(m,[Qt],E,!0),Ia(),A=B.element,N.isDehydrated)if(N={element:A,isDehydrated:!1,cache:B.cache},m.updateQueue.baseState=N,m.memoizedState=N,m.flags&256){m=od(d,m,A,E);break e}else if(A!==M){M=zr(Error(i(424)),m),ja(M),m=od(d,m,A,E);break e}else{switch(d=m.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(Ft=Wr(d.firstChild),cr=m,_t=!0,Un=null,qr=!0,E=tu(m,null,A,E),m.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling}else{if(bi(),A===M){m=Sn(d,m,E);break e}dr(d,m,A,E)}m=m.child}return m;case 26:return Lo(d,m),d===null?(E=wf(m.type,null,m.pendingProps,null))?m.memoizedState=E:_t||(E=m.type,d=m.pendingProps,A=ts(Ae.current).createElement(E),A[qt]=m,A[K]=d,fr(A,E,d),pt(A),m.stateNode=A):m.memoizedState=wf(m.type,d.memoizedProps,m.pendingProps,d.memoizedState),null;case 27:return ke(m),d===null&&_t&&(A=m.stateNode=xf(m.type,m.pendingProps,Ae.current),cr=m,qr=!0,M=Ft,ni(m.type)?(nc=M,Ft=Wr(A.firstChild)):Ft=M),dr(d,m,m.pendingProps.children,E),Lo(d,m),d===null&&(m.flags|=4194304),m.child;case 5:return d===null&&_t&&((M=A=Ft)&&(A=vh(A,m.type,m.pendingProps,qr),A!==null?(m.stateNode=A,cr=m,Ft=Wr(A.firstChild),qr=!1,M=!0):M=!1),M||Vn(m)),ke(m),M=m.type,N=m.pendingProps,B=d!==null?d.memoizedProps:null,A=N.children,Zl(M,N)?A=null:B!==null&&Zl(M,B)&&(m.flags|=32),m.memoizedState!==null&&(M=Qs(d,m,Np,null,null,E),io._currentValue=M),Lo(d,m),dr(d,m,A,E),m.child;case 6:return d===null&&_t&&((d=E=Ft)&&(E=_h(E,m.pendingProps,qr),E!==null?(m.stateNode=E,cr=m,Ft=null,d=!0):d=!1),d||Vn(m)),null;case 13:return sd(d,m,E);case 4:return $e(m,m.stateNode.containerInfo),A=m.pendingProps,d===null?m.child=Si(m,null,A,E):dr(d,m,A,E),m.child;case 11:return Zu(d,m,m.type,m.pendingProps,E);case 7:return dr(d,m,m.pendingProps,E),m.child;case 8:return dr(d,m,m.pendingProps.children,E),m.child;case 12:return dr(d,m,m.pendingProps.children,E),m.child;case 10:return A=m.pendingProps,qn(m,m.type,A.value),dr(d,m,A.children,E),m.child;case 9:return M=m.type._context,A=m.pendingProps.children,vi(m),M=ur(M),A=A(M),m.flags|=1,dr(d,m,A,E),m.child;case 14:return Ju(d,m,m.type,m.pendingProps,E);case 15:return ed(d,m,m.type,m.pendingProps,E);case 19:return cd(d,m,E);case 31:return Vp(d,m,E);case 22:return td(d,m,E,m.pendingProps);case 24:return vi(m),A=ur(Qt),d===null?(M=zs(),M===null&&(M=Lt,N=Bs(),M.pooledCache=N,N.refCount++,N!==null&&(M.pooledCacheLanes|=E),M=N),m.memoizedState={parent:A,cache:M},Vs(m),qn(m,Qt,M)):((d.lanes&E)!==0&&(qs(d,m),$a(m,null,null,E),Ia()),M=d.memoizedState,N=m.memoizedState,M.parent!==A?(M={parent:A,cache:A},m.memoizedState=M,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=M),qn(m,Qt,A)):(A=N.cache,qn(m,Qt,A),A!==M.cache&&Ls(m,[Qt],E,!0))),dr(d,m,m.pendingProps.children,E),m.child;case 29:throw m.pendingProps}throw Error(i(156,m.tag))}function Tn(d){d.flags|=4}function Tl(d,m,E,A,M){if((m=(d.mode&32)!==0)&&(m=!1),m){if(d.flags|=16777216,(M&335544128)===M)if(d.stateNode.complete)d.flags|=8192;else if($d())d.flags|=8192;else throw Ei=Eo,Us}else d.flags&=-16777217}function dd(d,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!Of(m))if($d())d.flags|=8192;else throw Ei=Eo,Us}function Fo(d,m){m!==null&&(d.flags|=4),d.flags&16384&&(m=d.tag!==22?rn():536870912,d.lanes|=m,oa|=m)}function Va(d,m){if(!_t)switch(d.tailMode){case"hidden":m=d.tail;for(var E=null;m!==null;)m.alternate!==null&&(E=m),m=m.sibling;E===null?d.tail=null:E.sibling=null;break;case"collapsed":E=d.tail;for(var A=null;E!==null;)E.alternate!==null&&(A=E),E=E.sibling;A===null?m||d.tail===null?d.tail=null:d.tail.sibling=null:A.sibling=null}}function zt(d){var m=d.alternate!==null&&d.alternate.child===d.child,E=0,A=0;if(m)for(var M=d.child;M!==null;)E|=M.lanes|M.childLanes,A|=M.subtreeFlags&65011712,A|=M.flags&65011712,M.return=d,M=M.sibling;else for(M=d.child;M!==null;)E|=M.lanes|M.childLanes,A|=M.subtreeFlags,A|=M.flags,M.return=d,M=M.sibling;return d.subtreeFlags|=A,d.childLanes=E,m}function Gp(d,m,E){var A=m.pendingProps;switch(ks(m),m.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(m),null;case 1:return zt(m),null;case 3:return E=m.stateNode,A=null,d!==null&&(A=d.memoizedState.cache),m.memoizedState.cache!==A&&(m.flags|=2048),_n(Qt),se(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(d===null||d.child===null)&&(Hi(m)?Tn(m):d===null||d.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Ns())),zt(m),null;case 26:var M=m.type,N=m.memoizedState;return d===null?(Tn(m),N!==null?(zt(m),dd(m,N)):(zt(m),Tl(m,M,null,A,E))):N?N!==d.memoizedState?(Tn(m),zt(m),dd(m,N)):(zt(m),m.flags&=-16777217):(d=d.memoizedProps,d!==A&&Tn(m),zt(m),Tl(m,M,d,A,E)),null;case 27:if(Ie(m),E=Ae.current,M=m.type,d!==null&&m.stateNode!=null)d.memoizedProps!==A&&Tn(m);else{if(!A){if(m.stateNode===null)throw Error(i(166));return zt(m),null}d=Re.current,Hi(m)?qc(m):(d=xf(M,A,E),m.stateNode=d,Tn(m))}return zt(m),null;case 5:if(Ie(m),M=m.type,d!==null&&m.stateNode!=null)d.memoizedProps!==A&&Tn(m);else{if(!A){if(m.stateNode===null)throw Error(i(166));return zt(m),null}if(N=Re.current,Hi(m))qc(m);else{var B=ts(Ae.current);switch(N){case 1:N=B.createElementNS("http://www.w3.org/2000/svg",M);break;case 2:N=B.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;default:switch(M){case"svg":N=B.createElementNS("http://www.w3.org/2000/svg",M);break;case"math":N=B.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;case"script":N=B.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof A.is=="string"?B.createElement("select",{is:A.is}):B.createElement("select"),A.multiple?N.multiple=!0:A.size&&(N.size=A.size);break;default:N=typeof A.is=="string"?B.createElement(M,{is:A.is}):B.createElement(M)}}N[qt]=m,N[K]=A;e:for(B=m.child;B!==null;){if(B.tag===5||B.tag===6)N.appendChild(B.stateNode);else if(B.tag!==4&&B.tag!==27&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===m)break e;for(;B.sibling===null;){if(B.return===null||B.return===m)break e;B=B.return}B.sibling.return=B.return,B=B.sibling}m.stateNode=N;e:switch(fr(N,M,A),M){case"button":case"input":case"select":case"textarea":A=!!A.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&Tn(m)}}return zt(m),Tl(m,m.type,d===null?null:d.memoizedProps,m.pendingProps,E),null;case 6:if(d&&m.stateNode!=null)d.memoizedProps!==A&&Tn(m);else{if(typeof A!="string"&&m.stateNode===null)throw Error(i(166));if(d=Ae.current,Hi(m)){if(d=m.stateNode,E=m.memoizedProps,A=null,M=cr,M!==null)switch(M.tag){case 27:case 5:A=M.memoizedProps}d[qt]=m,d=!!(d.nodeValue===E||A!==null&&A.suppressHydrationWarning===!0||lf(d.nodeValue,E)),d||Vn(m,!0)}else d=ts(d).createTextNode(A),d[qt]=m,m.stateNode=d}return zt(m),null;case 31:if(E=m.memoizedState,d===null||d.memoizedState!==null){if(A=Hi(m),E!==null){if(d===null){if(!A)throw Error(i(318));if(d=m.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(557));d[qt]=m}else bi(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;zt(m),d=!1}else E=Ns(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=E),d=!0;if(!d)return m.flags&256?(Mr(m),m):(Mr(m),null);if((m.flags&128)!==0)throw Error(i(558))}return zt(m),null;case 13:if(A=m.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(M=Hi(m),A!==null&&A.dehydrated!==null){if(d===null){if(!M)throw Error(i(318));if(M=m.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(i(317));M[qt]=m}else bi(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;zt(m),M=!1}else M=Ns(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=M),M=!0;if(!M)return m.flags&256?(Mr(m),m):(Mr(m),null)}return Mr(m),(m.flags&128)!==0?(m.lanes=E,m):(E=A!==null,d=d!==null&&d.memoizedState!==null,E&&(A=m.child,M=null,A.alternate!==null&&A.alternate.memoizedState!==null&&A.alternate.memoizedState.cachePool!==null&&(M=A.alternate.memoizedState.cachePool.pool),N=null,A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(N=A.memoizedState.cachePool.pool),N!==M&&(A.flags|=2048)),E!==d&&E&&(m.child.flags|=8192),Fo(m,m.updateQueue),zt(m),null);case 4:return se(),d===null&&Hl(m.stateNode.containerInfo),zt(m),null;case 10:return _n(m.type),zt(m),null;case 19:if(ue(Ht),A=m.memoizedState,A===null)return zt(m),null;if(M=(m.flags&128)!==0,N=A.rendering,N===null)if(M)Va(A,!1);else{if(Wt!==0||d!==null&&(d.flags&128)!==0)for(d=m.child;d!==null;){if(N=Oo(d),N!==null){for(m.flags|=128,Va(A,!1),d=N.updateQueue,m.updateQueue=d,Fo(m,d),m.subtreeFlags=0,d=E,E=m.child;E!==null;)Bc(E,d),E=E.sibling;return Pe(Ht,Ht.current&1|2),_t&&xn(m,A.treeForkCount),m.child}d=d.sibling}A.tail!==null&&Ot()>Go&&(m.flags|=128,M=!0,Va(A,!1),m.lanes=4194304)}else{if(!M)if(d=Oo(N),d!==null){if(m.flags|=128,M=!0,d=d.updateQueue,m.updateQueue=d,Fo(m,d),Va(A,!0),A.tail===null&&A.tailMode==="hidden"&&!N.alternate&&!_t)return zt(m),null}else 2*Ot()-A.renderingStartTime>Go&&E!==536870912&&(m.flags|=128,M=!0,Va(A,!1),m.lanes=4194304);A.isBackwards?(N.sibling=m.child,m.child=N):(d=A.last,d!==null?d.sibling=N:m.child=N,A.last=N)}return A.tail!==null?(d=A.tail,A.rendering=d,A.tail=d.sibling,A.renderingStartTime=Ot(),d.sibling=null,E=Ht.current,Pe(Ht,M?E&1|2:E&1),_t&&xn(m,A.treeForkCount),d):(zt(m),null);case 22:case 23:return Mr(m),Ks(),A=m.memoizedState!==null,d!==null?d.memoizedState!==null!==A&&(m.flags|=8192):A&&(m.flags|=8192),A?(E&536870912)!==0&&(m.flags&128)===0&&(zt(m),m.subtreeFlags&6&&(m.flags|=8192)):zt(m),E=m.updateQueue,E!==null&&Fo(m,E.retryQueue),E=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(E=d.memoizedState.cachePool.pool),A=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==E&&(m.flags|=2048),d!==null&&ue(_i),null;case 24:return E=null,d!==null&&(E=d.memoizedState.cache),m.memoizedState.cache!==E&&(m.flags|=2048),_n(Qt),zt(m),null;case 25:return null;case 30:return null}throw Error(i(156,m.tag))}function Wp(d,m){switch(ks(m),m.tag){case 1:return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 3:return _n(Qt),se(),d=m.flags,(d&65536)!==0&&(d&128)===0?(m.flags=d&-65537|128,m):null;case 26:case 27:case 5:return Ie(m),null;case 31:if(m.memoizedState!==null){if(Mr(m),m.alternate===null)throw Error(i(340));bi()}return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 13:if(Mr(m),d=m.memoizedState,d!==null&&d.dehydrated!==null){if(m.alternate===null)throw Error(i(340));bi()}return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 19:return ue(Ht),null;case 4:return se(),null;case 10:return _n(m.type),null;case 22:case 23:return Mr(m),Ks(),d!==null&&ue(_i),d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 24:return _n(Qt),null;case 25:return null;default:return null}}function fd(d,m){switch(ks(m),m.tag){case 3:_n(Qt),se();break;case 26:case 27:case 5:Ie(m);break;case 4:se();break;case 31:m.memoizedState!==null&&Mr(m);break;case 13:Mr(m);break;case 19:ue(Ht);break;case 10:_n(m.type);break;case 22:case 23:Mr(m),Ks(),d!==null&&ue(_i);break;case 24:_n(Qt)}}function qa(d,m){try{var E=m.updateQueue,A=E!==null?E.lastEffect:null;if(A!==null){var M=A.next;E=M;do{if((E.tag&d)===d){A=void 0;var N=E.create,B=E.inst;A=N(),B.destroy=A}E=E.next}while(E!==M)}}catch(H){Mt(m,m.return,H)}}function Xn(d,m,E){try{var A=m.updateQueue,M=A!==null?A.lastEffect:null;if(M!==null){var N=M.next;A=N;do{if((A.tag&d)===d){var B=A.inst,H=B.destroy;if(H!==void 0){B.destroy=void 0,M=m;var ne=E,ye=H;try{ye()}catch(Oe){Mt(M,ne,Oe)}}}A=A.next}while(A!==N)}}catch(Oe){Mt(m,m.return,Oe)}}function pd(d){var m=d.updateQueue;if(m!==null){var E=d.stateNode;try{nu(m,E)}catch(A){Mt(d,d.return,A)}}}function hd(d,m,E){E.props=Ai(d.type,d.memoizedProps),E.state=d.memoizedState;try{E.componentWillUnmount()}catch(A){Mt(d,m,A)}}function Ga(d,m){try{var E=d.ref;if(E!==null){switch(d.tag){case 26:case 27:case 5:var A=d.stateNode;break;case 30:A=d.stateNode;break;default:A=d.stateNode}typeof E=="function"?d.refCleanup=E(A):E.current=A}}catch(M){Mt(d,m,M)}}function on(d,m){var E=d.ref,A=d.refCleanup;if(E!==null)if(typeof A=="function")try{A()}catch(M){Mt(d,m,M)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof E=="function")try{E(null)}catch(M){Mt(d,m,M)}else E.current=null}function md(d){var m=d.type,E=d.memoizedProps,A=d.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":E.autoFocus&&A.focus();break e;case"img":E.src?A.src=E.src:E.srcSet&&(A.srcset=E.srcSet)}}catch(M){Mt(d,d.return,M)}}function Al(d,m,E){try{var A=d.stateNode;hh(A,d.type,E,m),A[K]=m}catch(M){Mt(d,d.return,M)}}function gd(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&ni(d.type)||d.tag===4}function Ol(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||gd(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&ni(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function Pl(d,m,E){var A=d.tag;if(A===5||A===6)d=d.stateNode,m?(E.nodeType===9?E.body:E.nodeName==="HTML"?E.ownerDocument.body:E).insertBefore(d,m):(m=E.nodeType===9?E.body:E.nodeName==="HTML"?E.ownerDocument.body:E,m.appendChild(d),E=E._reactRootContainer,E!=null||m.onclick!==null||(m.onclick=Lr));else if(A!==4&&(A===27&&ni(d.type)&&(E=d.stateNode,m=null),d=d.child,d!==null))for(Pl(d,m,E),d=d.sibling;d!==null;)Pl(d,m,E),d=d.sibling}function zo(d,m,E){var A=d.tag;if(A===5||A===6)d=d.stateNode,m?E.insertBefore(d,m):E.appendChild(d);else if(A!==4&&(A===27&&ni(d.type)&&(E=d.stateNode),d=d.child,d!==null))for(zo(d,m,E),d=d.sibling;d!==null;)zo(d,m,E),d=d.sibling}function yd(d){var m=d.stateNode,E=d.memoizedProps;try{for(var A=d.type,M=m.attributes;M.length;)m.removeAttributeNode(M[0]);fr(m,A,E),m[qt]=d,m[K]=E}catch(N){Mt(d,d.return,N)}}var An=!1,er=!1,jl=!1,bd=typeof WeakSet=="function"?WeakSet:Set,sr=null;function Hp(d,m){if(d=d.containerInfo,Xl=cs,d=Mc(d),ws(d)){if("selectionStart"in d)var E={start:d.selectionStart,end:d.selectionEnd};else e:{E=(E=d.ownerDocument)&&E.defaultView||window;var A=E.getSelection&&E.getSelection();if(A&&A.rangeCount!==0){E=A.anchorNode;var M=A.anchorOffset,N=A.focusNode;A=A.focusOffset;try{E.nodeType,N.nodeType}catch{E=null;break e}var B=0,H=-1,ne=-1,ye=0,Oe=0,Me=d,be=null;t:for(;;){for(var _e;Me!==E||M!==0&&Me.nodeType!==3||(H=B+M),Me!==N||A!==0&&Me.nodeType!==3||(ne=B+A),Me.nodeType===3&&(B+=Me.nodeValue.length),(_e=Me.firstChild)!==null;)be=Me,Me=_e;for(;;){if(Me===d)break t;if(be===E&&++ye===M&&(H=B),be===N&&++Oe===A&&(ne=B),(_e=Me.nextSibling)!==null)break;Me=be,be=Me.parentNode}Me=_e}E=H===-1||ne===-1?null:{start:H,end:ne}}else E=null}E=E||{start:0,end:0}}else E=null;for(Ql={focusedElem:d,selectionRange:E},cs=!1,sr=m;sr!==null;)if(m=sr,d=m.child,(m.subtreeFlags&1028)!==0&&d!==null)d.return=m,sr=d;else for(;sr!==null;){switch(m=sr,N=m.alternate,d=m.flags,m.tag){case 0:if((d&4)!==0&&(d=m.updateQueue,d=d!==null?d.events:null,d!==null))for(E=0;E<d.length;E++)M=d[E],M.ref.impl=M.nextImpl;break;case 11:case 15:break;case 1:if((d&1024)!==0&&N!==null){d=void 0,E=m,M=N.memoizedProps,N=N.memoizedState,A=E.stateNode;try{var Ve=Ai(E.type,M);d=A.getSnapshotBeforeUpdate(Ve,N),A.__reactInternalSnapshotBeforeUpdate=d}catch(nt){Mt(E,E.return,nt)}}break;case 3:if((d&1024)!==0){if(d=m.stateNode.containerInfo,E=d.nodeType,E===9)ec(d);else if(E===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":ec(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(i(163))}if(d=m.sibling,d!==null){d.return=m.return,sr=d;break}sr=m.return}}function xd(d,m,E){var A=E.flags;switch(E.tag){case 0:case 11:case 15:Pn(d,E),A&4&&qa(5,E);break;case 1:if(Pn(d,E),A&4)if(d=E.stateNode,m===null)try{d.componentDidMount()}catch(B){Mt(E,E.return,B)}else{var M=Ai(E.type,m.memoizedProps);m=m.memoizedState;try{d.componentDidUpdate(M,m,d.__reactInternalSnapshotBeforeUpdate)}catch(B){Mt(E,E.return,B)}}A&64&&pd(E),A&512&&Ga(E,E.return);break;case 3:if(Pn(d,E),A&64&&(d=E.updateQueue,d!==null)){if(m=null,E.child!==null)switch(E.child.tag){case 27:case 5:m=E.child.stateNode;break;case 1:m=E.child.stateNode}try{nu(d,m)}catch(B){Mt(E,E.return,B)}}break;case 27:m===null&&A&4&&yd(E);case 26:case 5:Pn(d,E),m===null&&A&4&&md(E),A&512&&Ga(E,E.return);break;case 12:Pn(d,E);break;case 31:Pn(d,E),A&4&&wd(d,E);break;case 13:Pn(d,E),A&4&&Ed(d,E),A&64&&(d=E.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(E=rh.bind(null,E),wh(d,E))));break;case 22:if(A=E.memoizedState!==null||An,!A){m=m!==null&&m.memoizedState!==null||er,M=An;var N=er;An=A,(er=m)&&!N?jn(d,E,(E.subtreeFlags&8772)!==0):Pn(d,E),An=M,er=N}break;case 30:break;default:Pn(d,E)}}function vd(d){var m=d.alternate;m!==null&&(d.alternate=null,vd(m)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(m=d.stateNode,m!==null&&Ke(m)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var Vt=null,_r=!1;function On(d,m,E){for(E=E.child;E!==null;)_d(d,m,E),E=E.sibling}function _d(d,m,E){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(Ar,E)}catch{}switch(E.tag){case 26:er||on(E,m),On(d,m,E),E.memoizedState?E.memoizedState.count--:E.stateNode&&(E=E.stateNode,E.parentNode.removeChild(E));break;case 27:er||on(E,m);var A=Vt,M=_r;ni(E.type)&&(Vt=E.stateNode,_r=!1),On(d,m,E),eo(E.stateNode),Vt=A,_r=M;break;case 5:er||on(E,m);case 6:if(A=Vt,M=_r,Vt=null,On(d,m,E),Vt=A,_r=M,Vt!==null)if(_r)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(E.stateNode)}catch(N){Mt(E,m,N)}else try{Vt.removeChild(E.stateNode)}catch(N){Mt(E,m,N)}break;case 18:Vt!==null&&(_r?(d=Vt,hf(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,E.stateNode),ha(d)):hf(Vt,E.stateNode));break;case 4:A=Vt,M=_r,Vt=E.stateNode.containerInfo,_r=!0,On(d,m,E),Vt=A,_r=M;break;case 0:case 11:case 14:case 15:Xn(2,E,m),er||Xn(4,E,m),On(d,m,E);break;case 1:er||(on(E,m),A=E.stateNode,typeof A.componentWillUnmount=="function"&&hd(E,m,A)),On(d,m,E);break;case 21:On(d,m,E);break;case 22:er=(A=er)||E.memoizedState!==null,On(d,m,E),er=A;break;default:On(d,m,E)}}function wd(d,m){if(m.memoizedState===null&&(d=m.alternate,d!==null&&(d=d.memoizedState,d!==null))){d=d.dehydrated;try{ha(d)}catch(E){Mt(m,m.return,E)}}}function Ed(d,m){if(m.memoizedState===null&&(d=m.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{ha(d)}catch(E){Mt(m,m.return,E)}}function Kp(d){switch(d.tag){case 31:case 13:case 19:var m=d.stateNode;return m===null&&(m=d.stateNode=new bd),m;case 22:return d=d.stateNode,m=d._retryCache,m===null&&(m=d._retryCache=new bd),m;default:throw Error(i(435,d.tag))}}function Uo(d,m){var E=Kp(d);m.forEach(function(A){if(!E.has(A)){E.add(A);var M=nh.bind(null,d,A);A.then(M,M)}})}function wr(d,m){var E=m.deletions;if(E!==null)for(var A=0;A<E.length;A++){var M=E[A],N=d,B=m,H=B;e:for(;H!==null;){switch(H.tag){case 27:if(ni(H.type)){Vt=H.stateNode,_r=!1;break e}break;case 5:Vt=H.stateNode,_r=!1;break e;case 3:case 4:Vt=H.stateNode.containerInfo,_r=!0;break e}H=H.return}if(Vt===null)throw Error(i(160));_d(N,B,M),Vt=null,_r=!1,N=M.alternate,N!==null&&(N.return=null),M.return=null}if(m.subtreeFlags&13886)for(m=m.child;m!==null;)Sd(m,d),m=m.sibling}var Zr=null;function Sd(d,m){var E=d.alternate,A=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:wr(m,d),Er(d),A&4&&(Xn(3,d,d.return),qa(3,d),Xn(5,d,d.return));break;case 1:wr(m,d),Er(d),A&512&&(er||E===null||on(E,E.return)),A&64&&An&&(d=d.updateQueue,d!==null&&(A=d.callbacks,A!==null&&(E=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=E===null?A:E.concat(A))));break;case 26:var M=Zr;if(wr(m,d),Er(d),A&512&&(er||E===null||on(E,E.return)),A&4){var N=E!==null?E.memoizedState:null;if(A=d.memoizedState,E===null)if(A===null)if(d.stateNode===null){e:{A=d.type,E=d.memoizedProps,M=M.ownerDocument||M;t:switch(A){case"title":N=M.getElementsByTagName("title")[0],(!N||N[Le]||N[qt]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=M.createElement(A),M.head.insertBefore(N,M.querySelector("head > title"))),fr(N,A,E),N[qt]=d,pt(N),A=N;break e;case"link":var B=Tf("link","href",M).get(A+(E.href||""));if(B){for(var H=0;H<B.length;H++)if(N=B[H],N.getAttribute("href")===(E.href==null||E.href===""?null:E.href)&&N.getAttribute("rel")===(E.rel==null?null:E.rel)&&N.getAttribute("title")===(E.title==null?null:E.title)&&N.getAttribute("crossorigin")===(E.crossOrigin==null?null:E.crossOrigin)){B.splice(H,1);break t}}N=M.createElement(A),fr(N,A,E),M.head.appendChild(N);break;case"meta":if(B=Tf("meta","content",M).get(A+(E.content||""))){for(H=0;H<B.length;H++)if(N=B[H],N.getAttribute("content")===(E.content==null?null:""+E.content)&&N.getAttribute("name")===(E.name==null?null:E.name)&&N.getAttribute("property")===(E.property==null?null:E.property)&&N.getAttribute("http-equiv")===(E.httpEquiv==null?null:E.httpEquiv)&&N.getAttribute("charset")===(E.charSet==null?null:E.charSet)){B.splice(H,1);break t}}N=M.createElement(A),fr(N,A,E),M.head.appendChild(N);break;default:throw Error(i(468,A))}N[qt]=d,pt(N),A=N}d.stateNode=A}else Af(M,d.type,d.stateNode);else d.stateNode=Sf(M,A,d.memoizedProps);else N!==A?(N===null?E.stateNode!==null&&(E=E.stateNode,E.parentNode.removeChild(E)):N.count--,A===null?Af(M,d.type,d.stateNode):Sf(M,A,d.memoizedProps)):A===null&&d.stateNode!==null&&Al(d,d.memoizedProps,E.memoizedProps)}break;case 27:wr(m,d),Er(d),A&512&&(er||E===null||on(E,E.return)),E!==null&&A&4&&Al(d,d.memoizedProps,E.memoizedProps);break;case 5:if(wr(m,d),Er(d),A&512&&(er||E===null||on(E,E.return)),d.flags&32){M=d.stateNode;try{hn(M,"")}catch(Ve){Mt(d,d.return,Ve)}}A&4&&d.stateNode!=null&&(M=d.memoizedProps,Al(d,M,E!==null?E.memoizedProps:M)),A&1024&&(jl=!0);break;case 6:if(wr(m,d),Er(d),A&4){if(d.stateNode===null)throw Error(i(162));A=d.memoizedProps,E=d.stateNode;try{E.nodeValue=A}catch(Ve){Mt(d,d.return,Ve)}}break;case 3:if(as=null,M=Zr,Zr=rs(m.containerInfo),wr(m,d),Zr=M,Er(d),A&4&&E!==null&&E.memoizedState.isDehydrated)try{ha(m.containerInfo)}catch(Ve){Mt(d,d.return,Ve)}jl&&(jl=!1,Td(d));break;case 4:A=Zr,Zr=rs(d.stateNode.containerInfo),wr(m,d),Er(d),Zr=A;break;case 12:wr(m,d),Er(d);break;case 31:wr(m,d),Er(d),A&4&&(A=d.updateQueue,A!==null&&(d.updateQueue=null,Uo(d,A)));break;case 13:wr(m,d),Er(d),d.child.flags&8192&&d.memoizedState!==null!=(E!==null&&E.memoizedState!==null)&&(qo=Ot()),A&4&&(A=d.updateQueue,A!==null&&(d.updateQueue=null,Uo(d,A)));break;case 22:M=d.memoizedState!==null;var ne=E!==null&&E.memoizedState!==null,ye=An,Oe=er;if(An=ye||M,er=Oe||ne,wr(m,d),er=Oe,An=ye,Er(d),A&8192)e:for(m=d.stateNode,m._visibility=M?m._visibility&-2:m._visibility|1,M&&(E===null||ne||An||er||Oi(d)),E=null,m=d;;){if(m.tag===5||m.tag===26){if(E===null){ne=E=m;try{if(N=ne.stateNode,M)B=N.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{H=ne.stateNode;var Me=ne.memoizedProps.style,be=Me!=null&&Me.hasOwnProperty("display")?Me.display:null;H.style.display=be==null||typeof be=="boolean"?"":(""+be).trim()}}catch(Ve){Mt(ne,ne.return,Ve)}}}else if(m.tag===6){if(E===null){ne=m;try{ne.stateNode.nodeValue=M?"":ne.memoizedProps}catch(Ve){Mt(ne,ne.return,Ve)}}}else if(m.tag===18){if(E===null){ne=m;try{var _e=ne.stateNode;M?mf(_e,!0):mf(ne.stateNode,!1)}catch(Ve){Mt(ne,ne.return,Ve)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===d)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break e;for(;m.sibling===null;){if(m.return===null||m.return===d)break e;E===m&&(E=null),m=m.return}E===m&&(E=null),m.sibling.return=m.return,m=m.sibling}A&4&&(A=d.updateQueue,A!==null&&(E=A.retryQueue,E!==null&&(A.retryQueue=null,Uo(d,E))));break;case 19:wr(m,d),Er(d),A&4&&(A=d.updateQueue,A!==null&&(d.updateQueue=null,Uo(d,A)));break;case 30:break;case 21:break;default:wr(m,d),Er(d)}}function Er(d){var m=d.flags;if(m&2){try{for(var E,A=d.return;A!==null;){if(gd(A)){E=A;break}A=A.return}if(E==null)throw Error(i(160));switch(E.tag){case 27:var M=E.stateNode,N=Ol(d);zo(d,N,M);break;case 5:var B=E.stateNode;E.flags&32&&(hn(B,""),E.flags&=-33);var H=Ol(d);zo(d,H,B);break;case 3:case 4:var ne=E.stateNode.containerInfo,ye=Ol(d);Pl(d,ye,ne);break;default:throw Error(i(161))}}catch(Oe){Mt(d,d.return,Oe)}d.flags&=-3}m&4096&&(d.flags&=-4097)}function Td(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var m=d;Td(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),d=d.sibling}}function Pn(d,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)xd(d,m.alternate,m),m=m.sibling}function Oi(d){for(d=d.child;d!==null;){var m=d;switch(m.tag){case 0:case 11:case 14:case 15:Xn(4,m,m.return),Oi(m);break;case 1:on(m,m.return);var E=m.stateNode;typeof E.componentWillUnmount=="function"&&hd(m,m.return,E),Oi(m);break;case 27:eo(m.stateNode);case 26:case 5:on(m,m.return),Oi(m);break;case 22:m.memoizedState===null&&Oi(m);break;case 30:Oi(m);break;default:Oi(m)}d=d.sibling}}function jn(d,m,E){for(E=E&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var A=m.alternate,M=d,N=m,B=N.flags;switch(N.tag){case 0:case 11:case 15:jn(M,N,E),qa(4,N);break;case 1:if(jn(M,N,E),A=N,M=A.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(ye){Mt(A,A.return,ye)}if(A=N,M=A.updateQueue,M!==null){var H=A.stateNode;try{var ne=M.shared.hiddenCallbacks;if(ne!==null)for(M.shared.hiddenCallbacks=null,M=0;M<ne.length;M++)ru(ne[M],H)}catch(ye){Mt(A,A.return,ye)}}E&&B&64&&pd(N),Ga(N,N.return);break;case 27:yd(N);case 26:case 5:jn(M,N,E),E&&A===null&&B&4&&md(N),Ga(N,N.return);break;case 12:jn(M,N,E);break;case 31:jn(M,N,E),E&&B&4&&wd(M,N);break;case 13:jn(M,N,E),E&&B&4&&Ed(M,N);break;case 22:N.memoizedState===null&&jn(M,N,E),Ga(N,N.return);break;case 30:break;default:jn(M,N,E)}m=m.sibling}}function Ml(d,m){var E=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(E=d.memoizedState.cachePool.pool),d=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(d=m.memoizedState.cachePool.pool),d!==E&&(d!=null&&d.refCount++,E!=null&&Ma(E))}function Cl(d,m){d=null,m.alternate!==null&&(d=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==d&&(m.refCount++,d!=null&&Ma(d))}function Jr(d,m,E,A){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)Ad(d,m,E,A),m=m.sibling}function Ad(d,m,E,A){var M=m.flags;switch(m.tag){case 0:case 11:case 15:Jr(d,m,E,A),M&2048&&qa(9,m);break;case 1:Jr(d,m,E,A);break;case 3:Jr(d,m,E,A),M&2048&&(d=null,m.alternate!==null&&(d=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==d&&(m.refCount++,d!=null&&Ma(d)));break;case 12:if(M&2048){Jr(d,m,E,A),d=m.stateNode;try{var N=m.memoizedProps,B=N.id,H=N.onPostCommit;typeof H=="function"&&H(B,m.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(ne){Mt(m,m.return,ne)}}else Jr(d,m,E,A);break;case 31:Jr(d,m,E,A);break;case 13:Jr(d,m,E,A);break;case 23:break;case 22:N=m.stateNode,B=m.alternate,m.memoizedState!==null?N._visibility&2?Jr(d,m,E,A):Wa(d,m):N._visibility&2?Jr(d,m,E,A):(N._visibility|=2,na(d,m,E,A,(m.subtreeFlags&10256)!==0||!1)),M&2048&&Ml(B,m);break;case 24:Jr(d,m,E,A),M&2048&&Cl(m.alternate,m);break;default:Jr(d,m,E,A)}}function na(d,m,E,A,M){for(M=M&&((m.subtreeFlags&10256)!==0||!1),m=m.child;m!==null;){var N=d,B=m,H=E,ne=A,ye=B.flags;switch(B.tag){case 0:case 11:case 15:na(N,B,H,ne,M),qa(8,B);break;case 23:break;case 22:var Oe=B.stateNode;B.memoizedState!==null?Oe._visibility&2?na(N,B,H,ne,M):Wa(N,B):(Oe._visibility|=2,na(N,B,H,ne,M)),M&&ye&2048&&Ml(B.alternate,B);break;case 24:na(N,B,H,ne,M),M&&ye&2048&&Cl(B.alternate,B);break;default:na(N,B,H,ne,M)}m=m.sibling}}function Wa(d,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var E=d,A=m,M=A.flags;switch(A.tag){case 22:Wa(E,A),M&2048&&Ml(A.alternate,A);break;case 24:Wa(E,A),M&2048&&Cl(A.alternate,A);break;default:Wa(E,A)}m=m.sibling}}var Ha=8192;function ia(d,m,E){if(d.subtreeFlags&Ha)for(d=d.child;d!==null;)Od(d,m,E),d=d.sibling}function Od(d,m,E){switch(d.tag){case 26:ia(d,m,E),d.flags&Ha&&d.memoizedState!==null&&Dh(E,Zr,d.memoizedState,d.memoizedProps);break;case 5:ia(d,m,E);break;case 3:case 4:var A=Zr;Zr=rs(d.stateNode.containerInfo),ia(d,m,E),Zr=A;break;case 22:d.memoizedState===null&&(A=d.alternate,A!==null&&A.memoizedState!==null?(A=Ha,Ha=16777216,ia(d,m,E),Ha=A):ia(d,m,E));break;default:ia(d,m,E)}}function Pd(d){var m=d.alternate;if(m!==null&&(d=m.child,d!==null)){m.child=null;do m=d.sibling,d.sibling=null,d=m;while(d!==null)}}function Ka(d){var m=d.deletions;if((d.flags&16)!==0){if(m!==null)for(var E=0;E<m.length;E++){var A=m[E];sr=A,Md(A,d)}Pd(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)jd(d),d=d.sibling}function jd(d){switch(d.tag){case 0:case 11:case 15:Ka(d),d.flags&2048&&Xn(9,d,d.return);break;case 3:Ka(d);break;case 12:Ka(d);break;case 22:var m=d.stateNode;d.memoizedState!==null&&m._visibility&2&&(d.return===null||d.return.tag!==13)?(m._visibility&=-3,Vo(d)):Ka(d);break;default:Ka(d)}}function Vo(d){var m=d.deletions;if((d.flags&16)!==0){if(m!==null)for(var E=0;E<m.length;E++){var A=m[E];sr=A,Md(A,d)}Pd(d)}for(d=d.child;d!==null;){switch(m=d,m.tag){case 0:case 11:case 15:Xn(8,m,m.return),Vo(m);break;case 22:E=m.stateNode,E._visibility&2&&(E._visibility&=-3,Vo(m));break;default:Vo(m)}d=d.sibling}}function Md(d,m){for(;sr!==null;){var E=sr;switch(E.tag){case 0:case 11:case 15:Xn(8,E,m);break;case 23:case 22:if(E.memoizedState!==null&&E.memoizedState.cachePool!==null){var A=E.memoizedState.cachePool.pool;A!=null&&A.refCount++}break;case 24:Ma(E.memoizedState.cache)}if(A=E.child,A!==null)A.return=E,sr=A;else e:for(E=d;sr!==null;){A=sr;var M=A.sibling,N=A.return;if(vd(A),A===E){sr=null;break e}if(M!==null){M.return=N,sr=M;break e}sr=N}}}var Yp={getCacheForType:function(d){var m=ur(Qt),E=m.data.get(d);return E===void 0&&(E=d(),m.data.set(d,E)),E},cacheSignal:function(){return ur(Qt).controller.signal}},Xp=typeof WeakMap=="function"?WeakMap:Map,At=0,Lt=null,mt=null,bt=0,jt=0,Cr=null,Qn=!1,aa=!1,Rl=!1,Mn=0,Wt=0,Zn=0,Pi=0,kl=0,Rr=0,oa=0,Ya=null,Sr=null,Dl=!1,qo=0,Cd=0,Go=1/0,Wo=null,Jn=null,ar=0,ei=null,sa=null,Cn=0,Nl=0,Il=null,Rd=null,Xa=0,$l=null;function Dr(){return(At&2)!==0&&bt!==0?bt&-bt:z.T!==null?Vl():In()}function kd(){if(Rr===0)if((bt&536870912)===0||_t){var d=tn;tn<<=1,(tn&3932160)===0&&(tn=262144),Rr=d}else Rr=536870912;return d=jr.current,d!==null&&(d.flags|=32),Rr}function Tr(d,m,E){(d===Lt&&(jt===2||jt===9)||d.cancelPendingCommit!==null)&&(la(d,0),ti(d,bt,Rr,!1)),Yr(d,E),((At&2)===0||d!==Lt)&&(d===Lt&&((At&2)===0&&(Pi|=E),Wt===4&&ti(d,bt,Rr,!1)),sn(d))}function Dd(d,m,E){if((At&6)!==0)throw Error(i(327));var A=!E&&(m&127)===0&&(m&d.expiredLanes)===0||rt(d,m),M=A?Jp(d,m):Bl(d,m,!0),N=A;do{if(M===0){aa&&!A&&ti(d,m,0,!1);break}else{if(E=d.current.alternate,N&&!Qp(E)){M=Bl(d,m,!1),N=!1;continue}if(M===2){if(N=m,d.errorRecoveryDisabledLanes&N)var B=0;else B=d.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){m=B;e:{var H=d;M=Ya;var ne=H.current.memoizedState.isDehydrated;if(ne&&(la(H,B).flags|=256),B=Bl(H,B,!1),B!==2){if(Rl&&!ne){H.errorRecoveryDisabledLanes|=N,Pi|=N,M=4;break e}N=Sr,Sr=M,N!==null&&(Sr===null?Sr=N:Sr.push.apply(Sr,N))}M=B}if(N=!1,M!==2)continue}}if(M===1){la(d,0),ti(d,m,0,!0);break}e:{switch(A=d,N=M,N){case 0:case 1:throw Error(i(345));case 4:if((m&4194048)!==m)break;case 6:ti(A,m,Rr,!Qn);break e;case 2:Sr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((m&62914560)===m&&(M=qo+300-Ot(),10<M)){if(ti(A,m,Rr,!Qn),et(A,0,!0)!==0)break e;Cn=m,A.timeoutHandle=ff(Nd.bind(null,A,E,Sr,Wo,Dl,m,Rr,Pi,oa,Qn,N,"Throttled",-0,0),M);break e}Nd(A,E,Sr,Wo,Dl,m,Rr,Pi,oa,Qn,N,null,-0,0)}}break}while(!0);sn(d)}function Nd(d,m,E,A,M,N,B,H,ne,ye,Oe,Me,be,_e){if(d.timeoutHandle=-1,Me=m.subtreeFlags,Me&8192||(Me&16785408)===16785408){Me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Lr},Od(m,N,Me);var Ve=(N&62914560)===N?qo-Ot():(N&4194048)===N?Cd-Ot():0;if(Ve=Nh(Me,Ve),Ve!==null){Cn=N,d.cancelPendingCommit=Ve(Vd.bind(null,d,m,N,E,A,M,B,H,ne,Oe,Me,null,be,_e)),ti(d,N,B,!ye);return}}Vd(d,m,N,E,A,M,B,H,ne)}function Qp(d){for(var m=d;;){var E=m.tag;if((E===0||E===11||E===15)&&m.flags&16384&&(E=m.updateQueue,E!==null&&(E=E.stores,E!==null)))for(var A=0;A<E.length;A++){var M=E[A],N=M.getSnapshot;M=M.value;try{if(!Or(N(),M))return!1}catch{return!1}}if(E=m.child,m.subtreeFlags&16384&&E!==null)E.return=m,m=E;else{if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function ti(d,m,E,A){m&=~kl,m&=~Pi,d.suspendedLanes|=m,d.pingedLanes&=~m,A&&(d.warmLanes|=m),A=d.expirationTimes;for(var M=m;0<M;){var N=31-or(M),B=1<<N;A[N]=-1,M&=~B}E!==0&&kn(d,E,m)}function Ho(){return(At&6)===0?(Qa(0),!1):!0}function Ll(){if(mt!==null){if(jt===0)var d=mt.return;else d=mt,vn=xi=null,el(d),Zi=null,Ra=0,d=mt;for(;d!==null;)fd(d.alternate,d),d=d.return;mt=null}}function la(d,m){var E=d.timeoutHandle;E!==-1&&(d.timeoutHandle=-1,yh(E)),E=d.cancelPendingCommit,E!==null&&(d.cancelPendingCommit=null,E()),Cn=0,Ll(),Lt=d,mt=E=bn(d.current,null),bt=m,jt=0,Cr=null,Qn=!1,aa=rt(d,m),Rl=!1,oa=Rr=kl=Pi=Zn=Wt=0,Sr=Ya=null,Dl=!1,(m&8)!==0&&(m|=m&32);var A=d.entangledLanes;if(A!==0)for(d=d.entanglements,A&=m;0<A;){var M=31-or(A),N=1<<M;m|=d[M],A&=~N}return Mn=m,ho(),E}function Id(d,m){lt=null,z.H=za,m===Qi||m===wo?(m=Zc(),jt=3):m===Us?(m=Zc(),jt=4):jt=m===gl?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,Cr=m,mt===null&&(Wt=1,Io(d,zr(m,d.current)))}function $d(){var d=jr.current;return d===null?!0:(bt&4194048)===bt?Gr===null:(bt&62914560)===bt||(bt&536870912)!==0?d===Gr:!1}function Ld(){var d=z.H;return z.H=za,d===null?za:d}function Bd(){var d=z.A;return z.A=Yp,d}function Ko(){Wt=4,Qn||(bt&4194048)!==bt&&jr.current!==null||(aa=!0),(Zn&134217727)===0&&(Pi&134217727)===0||Lt===null||ti(Lt,bt,Rr,!1)}function Bl(d,m,E){var A=At;At|=2;var M=Ld(),N=Bd();(Lt!==d||bt!==m)&&(Wo=null,la(d,m)),m=!1;var B=Wt;e:do try{if(jt!==0&&mt!==null){var H=mt,ne=Cr;switch(jt){case 8:Ll(),B=6;break e;case 3:case 2:case 9:case 6:jr.current===null&&(m=!0);var ye=jt;if(jt=0,Cr=null,ca(d,H,ne,ye),E&&aa){B=0;break e}break;default:ye=jt,jt=0,Cr=null,ca(d,H,ne,ye)}}Zp(),B=Wt;break}catch(Oe){Id(d,Oe)}while(!0);return m&&d.shellSuspendCounter++,vn=xi=null,At=A,z.H=M,z.A=N,mt===null&&(Lt=null,bt=0,ho()),B}function Zp(){for(;mt!==null;)Fd(mt)}function Jp(d,m){var E=At;At|=2;var A=Ld(),M=Bd();Lt!==d||bt!==m?(Wo=null,Go=Ot()+500,la(d,m)):aa=rt(d,m);e:do try{if(jt!==0&&mt!==null){m=mt;var N=Cr;t:switch(jt){case 1:jt=0,Cr=null,ca(d,m,N,1);break;case 2:case 9:if(Xc(N)){jt=0,Cr=null,zd(m);break}m=function(){jt!==2&&jt!==9||Lt!==d||(jt=7),sn(d)},N.then(m,m);break e;case 3:jt=7;break e;case 4:jt=5;break e;case 7:Xc(N)?(jt=0,Cr=null,zd(m)):(jt=0,Cr=null,ca(d,m,N,7));break;case 5:var B=null;switch(mt.tag){case 26:B=mt.memoizedState;case 5:case 27:var H=mt;if(B?Of(B):H.stateNode.complete){jt=0,Cr=null;var ne=H.sibling;if(ne!==null)mt=ne;else{var ye=H.return;ye!==null?(mt=ye,Yo(ye)):mt=null}break t}}jt=0,Cr=null,ca(d,m,N,5);break;case 6:jt=0,Cr=null,ca(d,m,N,6);break;case 8:Ll(),Wt=6;break e;default:throw Error(i(462))}}eh();break}catch(Oe){Id(d,Oe)}while(!0);return vn=xi=null,z.H=A,z.A=M,At=E,mt!==null?0:(Lt=null,bt=0,ho(),Wt)}function eh(){for(;mt!==null&&!ht();)Fd(mt)}function Fd(d){var m=ud(d.alternate,d,Mn);d.memoizedProps=d.pendingProps,m===null?Yo(d):mt=m}function zd(d){var m=d,E=m.alternate;switch(m.tag){case 15:case 0:m=id(E,m,m.pendingProps,m.type,void 0,bt);break;case 11:m=id(E,m,m.pendingProps,m.type.render,m.ref,bt);break;case 5:el(m);default:fd(E,m),m=mt=Bc(m,Mn),m=ud(E,m,Mn)}d.memoizedProps=d.pendingProps,m===null?Yo(d):mt=m}function ca(d,m,E,A){vn=xi=null,el(m),Zi=null,Ra=0;var M=m.return;try{if(Up(d,M,m,E,bt)){Wt=1,Io(d,zr(E,d.current)),mt=null;return}}catch(N){if(M!==null)throw mt=M,N;Wt=1,Io(d,zr(E,d.current)),mt=null;return}m.flags&32768?(_t||A===1?d=!0:aa||(bt&536870912)!==0?d=!1:(Qn=d=!0,(A===2||A===9||A===3||A===6)&&(A=jr.current,A!==null&&A.tag===13&&(A.flags|=16384))),Ud(m,d)):Yo(m)}function Yo(d){var m=d;do{if((m.flags&32768)!==0){Ud(m,Qn);return}d=m.return;var E=Gp(m.alternate,m,Mn);if(E!==null){mt=E;return}if(m=m.sibling,m!==null){mt=m;return}mt=m=d}while(m!==null);Wt===0&&(Wt=5)}function Ud(d,m){do{var E=Wp(d.alternate,d);if(E!==null){E.flags&=32767,mt=E;return}if(E=d.return,E!==null&&(E.flags|=32768,E.subtreeFlags=0,E.deletions=null),!m&&(d=d.sibling,d!==null)){mt=d;return}mt=d=E}while(d!==null);Wt=6,mt=null}function Vd(d,m,E,A,M,N,B,H,ne){d.cancelPendingCommit=null;do Xo();while(ar!==0);if((At&6)!==0)throw Error(i(327));if(m!==null){if(m===d.current)throw Error(i(177));if(N=m.lanes|m.childLanes,N|=Os,ui(d,E,N,B,H,ne),d===Lt&&(mt=Lt=null,bt=0),sa=m,ei=d,Cn=E,Nl=N,Il=M,Rd=A,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,ih(It,function(){return Kd(),null})):(d.callbackNode=null,d.callbackPriority=0),A=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||A){A=z.T,z.T=null,M=q.p,q.p=2,B=At,At|=4;try{Hp(d,m,E)}finally{At=B,q.p=M,z.T=A}}ar=1,qd(),Gd(),Wd()}}function qd(){if(ar===1){ar=0;var d=ei,m=sa,E=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||E){E=z.T,z.T=null;var A=q.p;q.p=2;var M=At;At|=4;try{Sd(m,d);var N=Ql,B=Mc(d.containerInfo),H=N.focusedElem,ne=N.selectionRange;if(B!==H&&H&&H.ownerDocument&&jc(H.ownerDocument.documentElement,H)){if(ne!==null&&ws(H)){var ye=ne.start,Oe=ne.end;if(Oe===void 0&&(Oe=ye),"selectionStart"in H)H.selectionStart=ye,H.selectionEnd=Math.min(Oe,H.value.length);else{var Me=H.ownerDocument||document,be=Me&&Me.defaultView||window;if(be.getSelection){var _e=be.getSelection(),Ve=H.textContent.length,nt=Math.min(ne.start,Ve),Dt=ne.end===void 0?nt:Math.min(ne.end,Ve);!_e.extend&&nt>Dt&&(B=Dt,Dt=nt,nt=B);var fe=Pc(H,nt),oe=Pc(H,Dt);if(fe&&oe&&(_e.rangeCount!==1||_e.anchorNode!==fe.node||_e.anchorOffset!==fe.offset||_e.focusNode!==oe.node||_e.focusOffset!==oe.offset)){var ge=Me.createRange();ge.setStart(fe.node,fe.offset),_e.removeAllRanges(),nt>Dt?(_e.addRange(ge),_e.extend(oe.node,oe.offset)):(ge.setEnd(oe.node,oe.offset),_e.addRange(ge))}}}}for(Me=[],_e=H;_e=_e.parentNode;)_e.nodeType===1&&Me.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<Me.length;H++){var je=Me[H];je.element.scrollLeft=je.left,je.element.scrollTop=je.top}}cs=!!Xl,Ql=Xl=null}finally{At=M,q.p=A,z.T=E}}d.current=m,ar=2}}function Gd(){if(ar===2){ar=0;var d=ei,m=sa,E=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||E){E=z.T,z.T=null;var A=q.p;q.p=2;var M=At;At|=4;try{xd(d,m.alternate,m)}finally{At=M,q.p=A,z.T=E}}ar=3}}function Wd(){if(ar===4||ar===3){ar=0,Ct();var d=ei,m=sa,E=Cn,A=Rd;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?ar=5:(ar=0,sa=ei=null,Hd(d,d.pendingLanes));var M=d.pendingLanes;if(M===0&&(Jn=null),dn(E),m=m.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(Ar,m,void 0,(m.current.flags&128)===128)}catch{}if(A!==null){m=z.T,M=q.p,q.p=2,z.T=null;try{for(var N=d.onRecoverableError,B=0;B<A.length;B++){var H=A[B];N(H.value,{componentStack:H.stack})}}finally{z.T=m,q.p=M}}(Cn&3)!==0&&Xo(),sn(d),M=d.pendingLanes,(E&261930)!==0&&(M&42)!==0?d===$l?Xa++:(Xa=0,$l=d):Xa=0,Qa(0)}}function Hd(d,m){(d.pooledCacheLanes&=m)===0&&(m=d.pooledCache,m!=null&&(d.pooledCache=null,Ma(m)))}function Xo(){return qd(),Gd(),Wd(),Kd()}function Kd(){if(ar!==5)return!1;var d=ei,m=Nl;Nl=0;var E=dn(Cn),A=z.T,M=q.p;try{q.p=32>E?32:E,z.T=null,E=Il,Il=null;var N=ei,B=Cn;if(ar=0,sa=ei=null,Cn=0,(At&6)!==0)throw Error(i(331));var H=At;if(At|=4,jd(N.current),Ad(N,N.current,B,E),At=H,Qa(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(Ar,N)}catch{}return!0}finally{q.p=M,z.T=A,Hd(d,m)}}function Yd(d,m,E){m=zr(E,m),m=ml(d.stateNode,m,2),d=Hn(d,m,2),d!==null&&(Yr(d,2),sn(d))}function Mt(d,m,E){if(d.tag===3)Yd(d,d,E);else for(;m!==null;){if(m.tag===3){Yd(m,d,E);break}else if(m.tag===1){var A=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(Jn===null||!Jn.has(A))){d=zr(E,d),E=Xu(2),A=Hn(m,E,2),A!==null&&(Qu(E,A,m,d),Yr(A,2),sn(A));break}}m=m.return}}function Fl(d,m,E){var A=d.pingCache;if(A===null){A=d.pingCache=new Xp;var M=new Set;A.set(m,M)}else M=A.get(m),M===void 0&&(M=new Set,A.set(m,M));M.has(E)||(Rl=!0,M.add(E),d=th.bind(null,d,m,E),m.then(d,d))}function th(d,m,E){var A=d.pingCache;A!==null&&A.delete(m),d.pingedLanes|=d.suspendedLanes&E,d.warmLanes&=~E,Lt===d&&(bt&E)===E&&(Wt===4||Wt===3&&(bt&62914560)===bt&&300>Ot()-qo?(At&2)===0&&la(d,0):kl|=E,oa===bt&&(oa=0)),sn(d)}function Xd(d,m){m===0&&(m=rn()),d=gi(d,m),d!==null&&(Yr(d,m),sn(d))}function rh(d){var m=d.memoizedState,E=0;m!==null&&(E=m.retryLane),Xd(d,E)}function nh(d,m){var E=0;switch(d.tag){case 31:case 13:var A=d.stateNode,M=d.memoizedState;M!==null&&(E=M.retryLane);break;case 19:A=d.stateNode;break;case 22:A=d.stateNode._retryCache;break;default:throw Error(i(314))}A!==null&&A.delete(m),Xd(d,E)}function ih(d,m){return Nt(d,m)}var Qo=null,ua=null,zl=!1,Zo=!1,Ul=!1,ri=0;function sn(d){d!==ua&&d.next===null&&(ua===null?Qo=ua=d:ua=ua.next=d),Zo=!0,zl||(zl=!0,oh())}function Qa(d,m){if(!Ul&&Zo){Ul=!0;do for(var E=!1,A=Qo;A!==null;){if(d!==0){var M=A.pendingLanes;if(M===0)var N=0;else{var B=A.suspendedLanes,H=A.pingedLanes;N=(1<<31-or(42|d)+1)-1,N&=M&~(B&~H),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(E=!0,ef(A,N))}else N=bt,N=et(A,A===Lt?N:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),(N&3)===0||rt(A,N)||(E=!0,ef(A,N));A=A.next}while(E);Ul=!1}}function ah(){Qd()}function Qd(){Zo=zl=!1;var d=0;ri!==0&&gh()&&(d=ri);for(var m=Ot(),E=null,A=Qo;A!==null;){var M=A.next,N=Zd(A,m);N===0?(A.next=null,E===null?Qo=M:E.next=M,M===null&&(ua=E)):(E=A,(d!==0||(N&3)!==0)&&(Zo=!0)),A=M}ar!==0&&ar!==5||Qa(d),ri!==0&&(ri=0)}function Zd(d,m){for(var E=d.suspendedLanes,A=d.pingedLanes,M=d.expirationTimes,N=d.pendingLanes&-62914561;0<N;){var B=31-or(N),H=1<<B,ne=M[B];ne===-1?((H&E)===0||(H&A)!==0)&&(M[B]=ci(H,m)):ne<=m&&(d.expiredLanes|=H),N&=~H}if(m=Lt,E=bt,E=et(d,d===m?E:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),A=d.callbackNode,E===0||d===m&&(jt===2||jt===9)||d.cancelPendingCommit!==null)return A!==null&&A!==null&&Ut(A),d.callbackNode=null,d.callbackPriority=0;if((E&3)===0||rt(d,E)){if(m=E&-E,m===d.callbackPriority)return m;switch(A!==null&&Ut(A),dn(E)){case 2:case 8:E=tr;break;case 32:E=It;break;case 268435456:E=yr;break;default:E=It}return A=Jd.bind(null,d),E=Nt(E,A),d.callbackPriority=m,d.callbackNode=E,m}return A!==null&&A!==null&&Ut(A),d.callbackPriority=2,d.callbackNode=null,2}function Jd(d,m){if(ar!==0&&ar!==5)return d.callbackNode=null,d.callbackPriority=0,null;var E=d.callbackNode;if(Xo()&&d.callbackNode!==E)return null;var A=bt;return A=et(d,d===Lt?A:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),A===0?null:(Dd(d,A,m),Zd(d,Ot()),d.callbackNode!=null&&d.callbackNode===E?Jd.bind(null,d):null)}function ef(d,m){if(Xo())return null;Dd(d,m,!0)}function oh(){bh(function(){(At&6)!==0?Nt(Yt,ah):Qd()})}function Vl(){if(ri===0){var d=Yi;d===0&&(d=Nr,Nr<<=1,(Nr&261888)===0&&(Nr=256)),ri=d}return ri}function tf(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:fi(""+d)}function rf(d,m){var E=m.ownerDocument.createElement("input");return E.name=m.name,E.value=m.value,d.id&&E.setAttribute("form",d.id),m.parentNode.insertBefore(E,m),d=new FormData(d),E.parentNode.removeChild(E),d}function sh(d,m,E,A,M){if(m==="submit"&&E&&E.stateNode===M){var N=tf((M[K]||null).action),B=A.submitter;B&&(m=(m=B[K]||null)?tf(m.formAction):B.getAttribute("formAction"),m!==null&&(N=m,B=null));var H=new $t("action","action",null,A,M);d.push({event:H,listeners:[{instance:null,listener:function(){if(A.defaultPrevented){if(ri!==0){var ne=B?rf(M,B):new FormData(M);cl(E,{pending:!0,data:ne,method:M.method,action:N},null,ne)}}else typeof N=="function"&&(H.preventDefault(),ne=B?rf(M,B):new FormData(M),cl(E,{pending:!0,data:ne,method:M.method,action:N},N,ne))},currentTarget:M}]})}}for(var ql=0;ql<As.length;ql++){var Gl=As[ql],lh=Gl.toLowerCase(),ch=Gl[0].toUpperCase()+Gl.slice(1);Qr(lh,"on"+ch)}Qr(kc,"onAnimationEnd"),Qr(Dc,"onAnimationIteration"),Qr(Nc,"onAnimationStart"),Qr("dblclick","onDoubleClick"),Qr("focusin","onFocus"),Qr("focusout","onBlur"),Qr(Tp,"onTransitionRun"),Qr(Ap,"onTransitionStart"),Qr(Op,"onTransitionCancel"),Qr(Ic,"onTransitionEnd"),nr("onMouseEnter",["mouseout","mouseover"]),nr("onMouseLeave",["mouseout","mouseover"]),nr("onPointerEnter",["pointerout","pointerover"]),nr("onPointerLeave",["pointerout","pointerover"]),Et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Et("onBeforeInput",["compositionend","keypress","textInput","paste"]),Et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Za));function nf(d,m){m=(m&4)!==0;for(var E=0;E<d.length;E++){var A=d[E],M=A.event;A=A.listeners;e:{var N=void 0;if(m)for(var B=A.length-1;0<=B;B--){var H=A[B],ne=H.instance,ye=H.currentTarget;if(H=H.listener,ne!==N&&M.isPropagationStopped())break e;N=H,M.currentTarget=ye;try{N(M)}catch(Oe){po(Oe)}M.currentTarget=null,N=ne}else for(B=0;B<A.length;B++){if(H=A[B],ne=H.instance,ye=H.currentTarget,H=H.listener,ne!==N&&M.isPropagationStopped())break e;N=H,M.currentTarget=ye;try{N(M)}catch(Oe){po(Oe)}M.currentTarget=null,N=ne}}}}function gt(d,m){var E=m[le];E===void 0&&(E=m[le]=new Set);var A=d+"__bubble";E.has(A)||(af(m,d,2,!1),E.add(A))}function Wl(d,m,E){var A=0;m&&(A|=4),af(E,d,A,m)}var Jo="_reactListening"+Math.random().toString(36).slice(2);function Hl(d){if(!d[Jo]){d[Jo]=!0,Ee.forEach(function(E){E!=="selectionchange"&&(uh.has(E)||Wl(E,!1,d),Wl(E,!0,d))});var m=d.nodeType===9?d:d.ownerDocument;m===null||m[Jo]||(m[Jo]=!0,Wl("selectionchange",!1,m))}}function af(d,m,E,A){switch(Df(m)){case 2:var M=Lh;break;case 8:M=Bh;break;default:M=lc}E=M.bind(null,m,E,d),M=void 0,!Bi||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(M=!0),A?M!==void 0?d.addEventListener(m,E,{capture:!0,passive:M}):d.addEventListener(m,E,!0):M!==void 0?d.addEventListener(m,E,{passive:M}):d.addEventListener(m,E,!1)}function Kl(d,m,E,A,M){var N=A;if((m&1)===0&&(m&2)===0&&A!==null)e:for(;;){if(A===null)return;var B=A.tag;if(B===3||B===4){var H=A.stateNode.containerInfo;if(H===M)break;if(B===4)for(B=A.return;B!==null;){var ne=B.tag;if((ne===3||ne===4)&&B.stateNode.containerInfo===M)return;B=B.return}for(;H!==null;){if(B=ze(H),B===null)return;if(ne=B.tag,ne===5||ne===6||ne===26||ne===27){A=N=B;continue e}H=H.parentNode}}A=A.return}wa(function(){var ye=N,Oe=$i(E),Me=[];e:{var be=$c.get(d);if(be!==void 0){var _e=$t,Ve=d;switch(d){case"keypress":if(ve(E)===0)break e;case"keydown":case"keyup":_e=np;break;case"focusin":Ve="focus",_e=ys;break;case"focusout":Ve="blur",_e=ys;break;case"beforeblur":case"afterblur":_e=ys;break;case"click":if(E.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=Gf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=op;break;case kc:case Dc:case Nc:_e=Kf;break;case Ic:_e=lp;break;case"scroll":case"scrollend":_e=xr;break;case"wheel":_e=up;break;case"copy":case"cut":case"paste":_e=Xf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=hc;break;case"toggle":case"beforetoggle":_e=fp}var nt=(m&4)!==0,Dt=!nt&&(d==="scroll"||d==="scrollend"),fe=nt?be!==null?be+"Capture":null:be;nt=[];for(var oe=ye,ge;oe!==null;){var je=oe;if(ge=je.stateNode,je=je.tag,je!==5&&je!==26&&je!==27||ge===null||fe===null||(je=Fn(oe,fe),je!=null&&nt.push(Ja(oe,je,ge))),Dt)break;oe=oe.return}0<nt.length&&(be=new _e(be,Ve,null,E,Oe),Me.push({event:be,listeners:nt}))}}if((m&7)===0){e:{if(be=d==="mouseover"||d==="pointerover",_e=d==="mouseout"||d==="pointerout",be&&E!==Ii&&(Ve=E.relatedTarget||E.fromElement)&&(ze(Ve)||Ve[te]))break e;if((_e||be)&&(be=Oe.window===Oe?Oe:(be=Oe.ownerDocument)?be.defaultView||be.parentWindow:window,_e?(Ve=E.relatedTarget||E.toElement,_e=ye,Ve=Ve?ze(Ve):null,Ve!==null&&(Dt=f(Ve),nt=Ve.tag,Ve!==Dt||nt!==5&&nt!==27&&nt!==6)&&(Ve=null)):(_e=null,Ve=ye),_e!==Ve)){if(nt=yn,je="onMouseLeave",fe="onMouseEnter",oe="mouse",(d==="pointerout"||d==="pointerover")&&(nt=hc,je="onPointerLeave",fe="onPointerEnter",oe="pointer"),Dt=_e==null?be:vt(_e),ge=Ve==null?be:vt(Ve),be=new nt(je,oe+"leave",_e,E,Oe),be.target=Dt,be.relatedTarget=ge,je=null,ze(Oe)===ye&&(nt=new nt(fe,oe+"enter",Ve,E,Oe),nt.target=ge,nt.relatedTarget=Dt,je=nt),Dt=je,_e&&Ve)t:{for(nt=dh,fe=_e,oe=Ve,ge=0,je=fe;je;je=nt(je))ge++;je=0;for(var Qe=oe;Qe;Qe=nt(Qe))je++;for(;0<ge-je;)fe=nt(fe),ge--;for(;0<je-ge;)oe=nt(oe),je--;for(;ge--;){if(fe===oe||oe!==null&&fe===oe.alternate){nt=fe;break t}fe=nt(fe),oe=nt(oe)}nt=null}else nt=null;_e!==null&&of(Me,be,_e,nt,!1),Ve!==null&&Dt!==null&&of(Me,Dt,Ve,nt,!0)}}e:{if(be=ye?vt(ye):window,_e=be.nodeName&&be.nodeName.toLowerCase(),_e==="select"||_e==="input"&&be.type==="file")var St=wc;else if(vc(be))if(Ec)St=wp;else{St=vp;var Ye=xp}else _e=be.nodeName,!_e||_e.toLowerCase()!=="input"||be.type!=="checkbox"&&be.type!=="radio"?ye&&ot(ye.elementType)&&(St=wc):St=_p;if(St&&(St=St(d,ye))){_c(Me,St,E,Oe);break e}Ye&&Ye(d,be,ye),d==="focusout"&&ye&&be.type==="number"&&ye.memoizedProps.value!=null&&Bn(be,"number",be.value)}switch(Ye=ye?vt(ye):window,d){case"focusin":(vc(Ye)||Ye.contentEditable==="true")&&(zi=Ye,Es=ye,Oa=null);break;case"focusout":Oa=Es=zi=null;break;case"mousedown":Ss=!0;break;case"contextmenu":case"mouseup":case"dragend":Ss=!1,Cc(Me,E,Oe);break;case"selectionchange":if(Sp)break;case"keydown":case"keyup":Cc(Me,E,Oe)}var ct;if(xs)e:{switch(d){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else Fi?bc(d,E)&&(xt="onCompositionEnd"):d==="keydown"&&E.keyCode===229&&(xt="onCompositionStart");xt&&(mc&&E.locale!=="ko"&&(Fi||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&Fi&&(ct=me()):(G=Oe,J="value"in G?G.value:G.textContent,Fi=!0)),Ye=es(ye,xt),0<Ye.length&&(xt=new pc(xt,d,null,E,Oe),Me.push({event:xt,listeners:Ye}),ct?xt.data=ct:(ct=xc(E),ct!==null&&(xt.data=ct)))),(ct=hp?mp(d,E):gp(d,E))&&(xt=es(ye,"onBeforeInput"),0<xt.length&&(Ye=new pc("onBeforeInput","beforeinput",null,E,Oe),Me.push({event:Ye,listeners:xt}),Ye.data=ct)),sh(Me,d,ye,E,Oe)}nf(Me,m)})}function Ja(d,m,E){return{instance:d,listener:m,currentTarget:E}}function es(d,m){for(var E=m+"Capture",A=[];d!==null;){var M=d,N=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||N===null||(M=Fn(d,E),M!=null&&A.unshift(Ja(d,M,N)),M=Fn(d,m),M!=null&&A.push(Ja(d,M,N))),d.tag===3)return A;d=d.return}return[]}function dh(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function of(d,m,E,A,M){for(var N=m._reactName,B=[];E!==null&&E!==A;){var H=E,ne=H.alternate,ye=H.stateNode;if(H=H.tag,ne!==null&&ne===A)break;H!==5&&H!==26&&H!==27||ye===null||(ne=ye,M?(ye=Fn(E,N),ye!=null&&B.unshift(Ja(E,ye,ne))):M||(ye=Fn(E,N),ye!=null&&B.push(Ja(E,ye,ne)))),E=E.return}B.length!==0&&d.push({event:m,listeners:B})}var fh=/\r\n?/g,ph=/\u0000|\uFFFD/g;function sf(d){return(typeof d=="string"?d:""+d).replace(fh,`
`).replace(ph,"")}function lf(d,m){return m=sf(m),sf(d)===m}function kt(d,m,E,A,M,N){switch(E){case"children":typeof A=="string"?m==="body"||m==="textarea"&&A===""||hn(d,A):(typeof A=="number"||typeof A=="bigint")&&m!=="body"&&hn(d,""+A);break;case"className":fn(d,"class",A);break;case"tabIndex":fn(d,"tabindex",A);break;case"dir":case"role":case"viewBox":case"width":case"height":fn(d,E,A);break;case"style":st(d,A,N);break;case"data":if(m!=="object"){fn(d,"data",A);break}case"src":case"href":if(A===""&&(m!=="a"||E!=="href")){d.removeAttribute(E);break}if(A==null||typeof A=="function"||typeof A=="symbol"||typeof A=="boolean"){d.removeAttribute(E);break}A=fi(""+A),d.setAttribute(E,A);break;case"action":case"formAction":if(typeof A=="function"){d.setAttribute(E,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(E==="formAction"?(m!=="input"&&kt(d,m,"name",M.name,M,null),kt(d,m,"formEncType",M.formEncType,M,null),kt(d,m,"formMethod",M.formMethod,M,null),kt(d,m,"formTarget",M.formTarget,M,null)):(kt(d,m,"encType",M.encType,M,null),kt(d,m,"method",M.method,M,null),kt(d,m,"target",M.target,M,null)));if(A==null||typeof A=="symbol"||typeof A=="boolean"){d.removeAttribute(E);break}A=fi(""+A),d.setAttribute(E,A);break;case"onClick":A!=null&&(d.onclick=Lr);break;case"onScroll":A!=null&&gt("scroll",d);break;case"onScrollEnd":A!=null&&gt("scrollend",d);break;case"dangerouslySetInnerHTML":if(A!=null){if(typeof A!="object"||!("__html"in A))throw Error(i(61));if(E=A.__html,E!=null){if(M.children!=null)throw Error(i(60));d.innerHTML=E}}break;case"multiple":d.multiple=A&&typeof A!="function"&&typeof A!="symbol";break;case"muted":d.muted=A&&typeof A!="function"&&typeof A!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(A==null||typeof A=="function"||typeof A=="boolean"||typeof A=="symbol"){d.removeAttribute("xlink:href");break}E=fi(""+A),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",E);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":A!=null&&typeof A!="function"&&typeof A!="symbol"?d.setAttribute(E,""+A):d.removeAttribute(E);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":A&&typeof A!="function"&&typeof A!="symbol"?d.setAttribute(E,""):d.removeAttribute(E);break;case"capture":case"download":A===!0?d.setAttribute(E,""):A!==!1&&A!=null&&typeof A!="function"&&typeof A!="symbol"?d.setAttribute(E,A):d.removeAttribute(E);break;case"cols":case"rows":case"size":case"span":A!=null&&typeof A!="function"&&typeof A!="symbol"&&!isNaN(A)&&1<=A?d.setAttribute(E,A):d.removeAttribute(E);break;case"rowSpan":case"start":A==null||typeof A=="function"||typeof A=="symbol"||isNaN(A)?d.removeAttribute(E):d.setAttribute(E,A);break;case"popover":gt("beforetoggle",d),gt("toggle",d),ir(d,"popover",A);break;case"xlinkActuate":$r(d,"http://www.w3.org/1999/xlink","xlink:actuate",A);break;case"xlinkArcrole":$r(d,"http://www.w3.org/1999/xlink","xlink:arcrole",A);break;case"xlinkRole":$r(d,"http://www.w3.org/1999/xlink","xlink:role",A);break;case"xlinkShow":$r(d,"http://www.w3.org/1999/xlink","xlink:show",A);break;case"xlinkTitle":$r(d,"http://www.w3.org/1999/xlink","xlink:title",A);break;case"xlinkType":$r(d,"http://www.w3.org/1999/xlink","xlink:type",A);break;case"xmlBase":$r(d,"http://www.w3.org/XML/1998/namespace","xml:base",A);break;case"xmlLang":$r(d,"http://www.w3.org/XML/1998/namespace","xml:lang",A);break;case"xmlSpace":$r(d,"http://www.w3.org/XML/1998/namespace","xml:space",A);break;case"is":ir(d,"is",A);break;case"innerText":case"textContent":break;default:(!(2<E.length)||E[0]!=="o"&&E[0]!=="O"||E[1]!=="n"&&E[1]!=="N")&&(E=va.get(E)||E,ir(d,E,A))}}function Yl(d,m,E,A,M,N){switch(E){case"style":st(d,A,N);break;case"dangerouslySetInnerHTML":if(A!=null){if(typeof A!="object"||!("__html"in A))throw Error(i(61));if(E=A.__html,E!=null){if(M.children!=null)throw Error(i(60));d.innerHTML=E}}break;case"children":typeof A=="string"?hn(d,A):(typeof A=="number"||typeof A=="bigint")&&hn(d,""+A);break;case"onScroll":A!=null&&gt("scroll",d);break;case"onScrollEnd":A!=null&&gt("scrollend",d);break;case"onClick":A!=null&&(d.onclick=Lr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!dt.hasOwnProperty(E))e:{if(E[0]==="o"&&E[1]==="n"&&(M=E.endsWith("Capture"),m=E.slice(2,M?E.length-7:void 0),N=d[K]||null,N=N!=null?N[E]:null,typeof N=="function"&&d.removeEventListener(m,N,M),typeof A=="function")){typeof N!="function"&&N!==null&&(E in d?d[E]=null:d.hasAttribute(E)&&d.removeAttribute(E)),d.addEventListener(m,A,M);break e}E in d?d[E]=A:A===!0?d.setAttribute(E,""):ir(d,E,A)}}}function fr(d,m,E){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":gt("error",d),gt("load",d);var A=!1,M=!1,N;for(N in E)if(E.hasOwnProperty(N)){var B=E[N];if(B!=null)switch(N){case"src":A=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,m));default:kt(d,m,N,B,E,null)}}M&&kt(d,m,"srcSet",E.srcSet,E,null),A&&kt(d,m,"src",E.src,E,null);return;case"input":gt("invalid",d);var H=N=B=M=null,ne=null,ye=null;for(A in E)if(E.hasOwnProperty(A)){var Oe=E[A];if(Oe!=null)switch(A){case"name":M=Oe;break;case"type":B=Oe;break;case"checked":ne=Oe;break;case"defaultChecked":ye=Oe;break;case"value":N=Oe;break;case"defaultValue":H=Oe;break;case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(i(137,m));break;default:kt(d,m,A,Oe,E,null)}}ya(d,N,H,ne,ye,B,M,!1);return;case"select":gt("invalid",d),A=B=N=null;for(M in E)if(E.hasOwnProperty(M)&&(H=E[M],H!=null))switch(M){case"value":N=H;break;case"defaultValue":B=H;break;case"multiple":A=H;default:kt(d,m,M,H,E,null)}m=N,E=B,d.multiple=!!A,m!=null?pn(d,!!A,m,!1):E!=null&&pn(d,!!A,E,!0);return;case"textarea":gt("invalid",d),N=M=A=null;for(B in E)if(E.hasOwnProperty(B)&&(H=E[B],H!=null))switch(B){case"value":A=H;break;case"defaultValue":M=H;break;case"children":N=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(91));break;default:kt(d,m,B,H,E,null)}Di(d,A,M,N);return;case"option":for(ne in E)if(E.hasOwnProperty(ne)&&(A=E[ne],A!=null))switch(ne){case"selected":d.selected=A&&typeof A!="function"&&typeof A!="symbol";break;default:kt(d,m,ne,A,E,null)}return;case"dialog":gt("beforetoggle",d),gt("toggle",d),gt("cancel",d),gt("close",d);break;case"iframe":case"object":gt("load",d);break;case"video":case"audio":for(A=0;A<Za.length;A++)gt(Za[A],d);break;case"image":gt("error",d),gt("load",d);break;case"details":gt("toggle",d);break;case"embed":case"source":case"link":gt("error",d),gt("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ye in E)if(E.hasOwnProperty(ye)&&(A=E[ye],A!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,m));default:kt(d,m,ye,A,E,null)}return;default:if(ot(m)){for(Oe in E)E.hasOwnProperty(Oe)&&(A=E[Oe],A!==void 0&&Yl(d,m,Oe,A,E,void 0));return}}for(H in E)E.hasOwnProperty(H)&&(A=E[H],A!=null&&kt(d,m,H,A,E,null))}function hh(d,m,E,A){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,N=null,B=null,H=null,ne=null,ye=null,Oe=null;for(_e in E){var Me=E[_e];if(E.hasOwnProperty(_e)&&Me!=null)switch(_e){case"checked":break;case"value":break;case"defaultValue":ne=Me;default:A.hasOwnProperty(_e)||kt(d,m,_e,null,A,Me)}}for(var be in A){var _e=A[be];if(Me=E[be],A.hasOwnProperty(be)&&(_e!=null||Me!=null))switch(be){case"type":N=_e;break;case"name":M=_e;break;case"checked":ye=_e;break;case"defaultChecked":Oe=_e;break;case"value":B=_e;break;case"defaultValue":H=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(i(137,m));break;default:_e!==Me&&kt(d,m,be,_e,A,Me)}}ki(d,B,H,ne,ye,Oe,N,M);return;case"select":_e=B=H=be=null;for(N in E)if(ne=E[N],E.hasOwnProperty(N)&&ne!=null)switch(N){case"value":break;case"multiple":_e=ne;default:A.hasOwnProperty(N)||kt(d,m,N,null,A,ne)}for(M in A)if(N=A[M],ne=E[M],A.hasOwnProperty(M)&&(N!=null||ne!=null))switch(M){case"value":be=N;break;case"defaultValue":H=N;break;case"multiple":B=N;default:N!==ne&&kt(d,m,M,N,A,ne)}m=H,E=B,A=_e,be!=null?pn(d,!!E,be,!1):!!A!=!!E&&(m!=null?pn(d,!!E,m,!0):pn(d,!!E,E?[]:"",!1));return;case"textarea":_e=be=null;for(H in E)if(M=E[H],E.hasOwnProperty(H)&&M!=null&&!A.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:kt(d,m,H,null,A,M)}for(B in A)if(M=A[B],N=E[B],A.hasOwnProperty(B)&&(M!=null||N!=null))switch(B){case"value":be=M;break;case"defaultValue":_e=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:M!==N&&kt(d,m,B,M,A,N)}ba(d,be,_e);return;case"option":for(var Ve in E)if(be=E[Ve],E.hasOwnProperty(Ve)&&be!=null&&!A.hasOwnProperty(Ve))switch(Ve){case"selected":d.selected=!1;break;default:kt(d,m,Ve,null,A,be)}for(ne in A)if(be=A[ne],_e=E[ne],A.hasOwnProperty(ne)&&be!==_e&&(be!=null||_e!=null))switch(ne){case"selected":d.selected=be&&typeof be!="function"&&typeof be!="symbol";break;default:kt(d,m,ne,be,A,_e)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in E)be=E[nt],E.hasOwnProperty(nt)&&be!=null&&!A.hasOwnProperty(nt)&&kt(d,m,nt,null,A,be);for(ye in A)if(be=A[ye],_e=E[ye],A.hasOwnProperty(ye)&&be!==_e&&(be!=null||_e!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(i(137,m));break;default:kt(d,m,ye,be,A,_e)}return;default:if(ot(m)){for(var Dt in E)be=E[Dt],E.hasOwnProperty(Dt)&&be!==void 0&&!A.hasOwnProperty(Dt)&&Yl(d,m,Dt,void 0,A,be);for(Oe in A)be=A[Oe],_e=E[Oe],!A.hasOwnProperty(Oe)||be===_e||be===void 0&&_e===void 0||Yl(d,m,Oe,be,A,_e);return}}for(var fe in E)be=E[fe],E.hasOwnProperty(fe)&&be!=null&&!A.hasOwnProperty(fe)&&kt(d,m,fe,null,A,be);for(Me in A)be=A[Me],_e=E[Me],!A.hasOwnProperty(Me)||be===_e||be==null&&_e==null||kt(d,m,Me,be,A,_e)}function cf(d){switch(d){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mh(){if(typeof performance.getEntriesByType=="function"){for(var d=0,m=0,E=performance.getEntriesByType("resource"),A=0;A<E.length;A++){var M=E[A],N=M.transferSize,B=M.initiatorType,H=M.duration;if(N&&H&&cf(B)){for(B=0,H=M.responseEnd,A+=1;A<E.length;A++){var ne=E[A],ye=ne.startTime;if(ye>H)break;var Oe=ne.transferSize,Me=ne.initiatorType;Oe&&cf(Me)&&(ne=ne.responseEnd,B+=Oe*(ne<H?1:(H-ye)/(ne-ye)))}if(--A,m+=8*(N+B)/(M.duration/1e3),d++,10<d)break}}if(0<d)return m/d/1e6}return navigator.connection&&(d=navigator.connection.downlink,typeof d=="number")?d:5}var Xl=null,Ql=null;function ts(d){return d.nodeType===9?d:d.ownerDocument}function uf(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function df(d,m){if(d===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&m==="foreignObject"?0:d}function Zl(d,m){return d==="textarea"||d==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var Jl=null;function gh(){var d=window.event;return d&&d.type==="popstate"?d===Jl?!1:(Jl=d,!0):(Jl=null,!1)}var ff=typeof setTimeout=="function"?setTimeout:void 0,yh=typeof clearTimeout=="function"?clearTimeout:void 0,pf=typeof Promise=="function"?Promise:void 0,bh=typeof queueMicrotask=="function"?queueMicrotask:typeof pf<"u"?function(d){return pf.resolve(null).then(d).catch(xh)}:ff;function xh(d){setTimeout(function(){throw d})}function ni(d){return d==="head"}function hf(d,m){var E=m,A=0;do{var M=E.nextSibling;if(d.removeChild(E),M&&M.nodeType===8)if(E=M.data,E==="/$"||E==="/&"){if(A===0){d.removeChild(M),ha(m);return}A--}else if(E==="$"||E==="$?"||E==="$~"||E==="$!"||E==="&")A++;else if(E==="html")eo(d.ownerDocument.documentElement);else if(E==="head"){E=d.ownerDocument.head,eo(E);for(var N=E.firstChild;N;){var B=N.nextSibling,H=N.nodeName;N[Le]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&N.rel.toLowerCase()==="stylesheet"||E.removeChild(N),N=B}}else E==="body"&&eo(d.ownerDocument.body);E=M}while(E);ha(m)}function mf(d,m){var E=d;d=0;do{var A=E.nextSibling;if(E.nodeType===1?m?(E._stashedDisplay=E.style.display,E.style.display="none"):(E.style.display=E._stashedDisplay||"",E.getAttribute("style")===""&&E.removeAttribute("style")):E.nodeType===3&&(m?(E._stashedText=E.nodeValue,E.nodeValue=""):E.nodeValue=E._stashedText||""),A&&A.nodeType===8)if(E=A.data,E==="/$"){if(d===0)break;d--}else E!=="$"&&E!=="$?"&&E!=="$~"&&E!=="$!"||d++;E=A}while(E)}function ec(d){var m=d.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var E=m;switch(m=m.nextSibling,E.nodeName){case"HTML":case"HEAD":case"BODY":ec(E),Ke(E);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(E.rel.toLowerCase()==="stylesheet")continue}d.removeChild(E)}}function vh(d,m,E,A){for(;d.nodeType===1;){var M=E;if(d.nodeName.toLowerCase()!==m.toLowerCase()){if(!A&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(A){if(!d[Le])switch(m){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(N=d.getAttribute("rel"),N==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(N!==M.rel||d.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||d.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||d.getAttribute("title")!==(M.title==null?null:M.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(N=d.getAttribute("src"),(N!==(M.src==null?null:M.src)||d.getAttribute("type")!==(M.type==null?null:M.type)||d.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&N&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(m==="input"&&d.type==="hidden"){var N=M.name==null?null:""+M.name;if(M.type==="hidden"&&d.getAttribute("name")===N)return d}else return d;if(d=Wr(d.nextSibling),d===null)break}return null}function _h(d,m,E){if(m==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!E||(d=Wr(d.nextSibling),d===null))return null;return d}function gf(d,m){for(;d.nodeType!==8;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!m||(d=Wr(d.nextSibling),d===null))return null;return d}function tc(d){return d.data==="$?"||d.data==="$~"}function rc(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState!=="loading"}function wh(d,m){var E=d.ownerDocument;if(d.data==="$~")d._reactRetry=m;else if(d.data!=="$?"||E.readyState!=="loading")m();else{var A=function(){m(),E.removeEventListener("DOMContentLoaded",A)};E.addEventListener("DOMContentLoaded",A),d._reactRetry=A}}function Wr(d){for(;d!=null;d=d.nextSibling){var m=d.nodeType;if(m===1||m===3)break;if(m===8){if(m=d.data,m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"||m==="F!"||m==="F")break;if(m==="/$"||m==="/&")return null}}return d}var nc=null;function yf(d){d=d.nextSibling;for(var m=0;d;){if(d.nodeType===8){var E=d.data;if(E==="/$"||E==="/&"){if(m===0)return Wr(d.nextSibling);m--}else E!=="$"&&E!=="$!"&&E!=="$?"&&E!=="$~"&&E!=="&"||m++}d=d.nextSibling}return null}function bf(d){d=d.previousSibling;for(var m=0;d;){if(d.nodeType===8){var E=d.data;if(E==="$"||E==="$!"||E==="$?"||E==="$~"||E==="&"){if(m===0)return d;m--}else E!=="/$"&&E!=="/&"||m++}d=d.previousSibling}return null}function xf(d,m,E){switch(m=ts(E),d){case"html":if(d=m.documentElement,!d)throw Error(i(452));return d;case"head":if(d=m.head,!d)throw Error(i(453));return d;case"body":if(d=m.body,!d)throw Error(i(454));return d;default:throw Error(i(451))}}function eo(d){for(var m=d.attributes;m.length;)d.removeAttributeNode(m[0]);Ke(d)}var Hr=new Map,vf=new Set;function rs(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var Rn=q.d;q.d={f:Eh,r:Sh,D:Th,C:Ah,L:Oh,m:Ph,X:Mh,S:jh,M:Ch};function Eh(){var d=Rn.f(),m=Ho();return d||m}function Sh(d){var m=it(d);m!==null&&m.tag===5&&m.type==="form"?Iu(m):Rn.r(d)}var da=typeof document>"u"?null:document;function _f(d,m,E){var A=da;if(A&&typeof m=="string"&&m){var M=mr(m);M='link[rel="'+d+'"][href="'+M+'"]',typeof E=="string"&&(M+='[crossorigin="'+E+'"]'),vf.has(M)||(vf.add(M),d={rel:d,crossOrigin:E,href:m},A.querySelector(M)===null&&(m=A.createElement("link"),fr(m,"link",d),pt(m),A.head.appendChild(m)))}}function Th(d){Rn.D(d),_f("dns-prefetch",d,null)}function Ah(d,m){Rn.C(d,m),_f("preconnect",d,m)}function Oh(d,m,E){Rn.L(d,m,E);var A=da;if(A&&d&&m){var M='link[rel="preload"][as="'+mr(m)+'"]';m==="image"&&E&&E.imageSrcSet?(M+='[imagesrcset="'+mr(E.imageSrcSet)+'"]',typeof E.imageSizes=="string"&&(M+='[imagesizes="'+mr(E.imageSizes)+'"]')):M+='[href="'+mr(d)+'"]';var N=M;switch(m){case"style":N=fa(d);break;case"script":N=pa(d)}Hr.has(N)||(d=u({rel:"preload",href:m==="image"&&E&&E.imageSrcSet?void 0:d,as:m},E),Hr.set(N,d),A.querySelector(M)!==null||m==="style"&&A.querySelector(ro(N))||m==="script"&&A.querySelector(no(N))||(m=A.createElement("link"),fr(m,"link",d),pt(m),A.head.appendChild(m)))}}function Ph(d,m){Rn.m(d,m);var E=da;if(E&&d){var A=m&&typeof m.as=="string"?m.as:"script",M='link[rel="modulepreload"][as="'+mr(A)+'"][href="'+mr(d)+'"]',N=M;switch(A){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=pa(d)}if(!Hr.has(N)&&(d=u({rel:"modulepreload",href:d},m),Hr.set(N,d),E.querySelector(M)===null)){switch(A){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(E.querySelector(no(N)))return}A=E.createElement("link"),fr(A,"link",d),pt(A),E.head.appendChild(A)}}}function jh(d,m,E){Rn.S(d,m,E);var A=da;if(A&&d){var M=Bt(A).hoistableStyles,N=fa(d);m=m||"default";var B=M.get(N);if(!B){var H={loading:0,preload:null};if(B=A.querySelector(ro(N)))H.loading=5;else{d=u({rel:"stylesheet",href:d,"data-precedence":m},E),(E=Hr.get(N))&&ic(d,E);var ne=B=A.createElement("link");pt(ne),fr(ne,"link",d),ne._p=new Promise(function(ye,Oe){ne.onload=ye,ne.onerror=Oe}),ne.addEventListener("load",function(){H.loading|=1}),ne.addEventListener("error",function(){H.loading|=2}),H.loading|=4,ns(B,m,A)}B={type:"stylesheet",instance:B,count:1,state:H},M.set(N,B)}}}function Mh(d,m){Rn.X(d,m);var E=da;if(E&&d){var A=Bt(E).hoistableScripts,M=pa(d),N=A.get(M);N||(N=E.querySelector(no(M)),N||(d=u({src:d,async:!0},m),(m=Hr.get(M))&&ac(d,m),N=E.createElement("script"),pt(N),fr(N,"link",d),E.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},A.set(M,N))}}function Ch(d,m){Rn.M(d,m);var E=da;if(E&&d){var A=Bt(E).hoistableScripts,M=pa(d),N=A.get(M);N||(N=E.querySelector(no(M)),N||(d=u({src:d,async:!0,type:"module"},m),(m=Hr.get(M))&&ac(d,m),N=E.createElement("script"),pt(N),fr(N,"link",d),E.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},A.set(M,N))}}function wf(d,m,E,A){var M=(M=Ae.current)?rs(M):null;if(!M)throw Error(i(446));switch(d){case"meta":case"title":return null;case"style":return typeof E.precedence=="string"&&typeof E.href=="string"?(m=fa(E.href),E=Bt(M).hoistableStyles,A=E.get(m),A||(A={type:"style",instance:null,count:0,state:null},E.set(m,A)),A):{type:"void",instance:null,count:0,state:null};case"link":if(E.rel==="stylesheet"&&typeof E.href=="string"&&typeof E.precedence=="string"){d=fa(E.href);var N=Bt(M).hoistableStyles,B=N.get(d);if(B||(M=M.ownerDocument||M,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(d,B),(N=M.querySelector(ro(d)))&&!N._p&&(B.instance=N,B.state.loading=5),Hr.has(d)||(E={rel:"preload",as:"style",href:E.href,crossOrigin:E.crossOrigin,integrity:E.integrity,media:E.media,hrefLang:E.hrefLang,referrerPolicy:E.referrerPolicy},Hr.set(d,E),N||Rh(M,d,E,B.state))),m&&A===null)throw Error(i(528,""));return B}if(m&&A!==null)throw Error(i(529,""));return null;case"script":return m=E.async,E=E.src,typeof E=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=pa(E),E=Bt(M).hoistableScripts,A=E.get(m),A||(A={type:"script",instance:null,count:0,state:null},E.set(m,A)),A):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,d))}}function fa(d){return'href="'+mr(d)+'"'}function ro(d){return'link[rel="stylesheet"]['+d+"]"}function Ef(d){return u({},d,{"data-precedence":d.precedence,precedence:null})}function Rh(d,m,E,A){d.querySelector('link[rel="preload"][as="style"]['+m+"]")?A.loading=1:(m=d.createElement("link"),A.preload=m,m.addEventListener("load",function(){return A.loading|=1}),m.addEventListener("error",function(){return A.loading|=2}),fr(m,"link",E),pt(m),d.head.appendChild(m))}function pa(d){return'[src="'+mr(d)+'"]'}function no(d){return"script[async]"+d}function Sf(d,m,E){if(m.count++,m.instance===null)switch(m.type){case"style":var A=d.querySelector('style[data-href~="'+mr(E.href)+'"]');if(A)return m.instance=A,pt(A),A;var M=u({},E,{"data-href":E.href,"data-precedence":E.precedence,href:null,precedence:null});return A=(d.ownerDocument||d).createElement("style"),pt(A),fr(A,"style",M),ns(A,E.precedence,d),m.instance=A;case"stylesheet":M=fa(E.href);var N=d.querySelector(ro(M));if(N)return m.state.loading|=4,m.instance=N,pt(N),N;A=Ef(E),(M=Hr.get(M))&&ic(A,M),N=(d.ownerDocument||d).createElement("link"),pt(N);var B=N;return B._p=new Promise(function(H,ne){B.onload=H,B.onerror=ne}),fr(N,"link",A),m.state.loading|=4,ns(N,E.precedence,d),m.instance=N;case"script":return N=pa(E.src),(M=d.querySelector(no(N)))?(m.instance=M,pt(M),M):(A=E,(M=Hr.get(N))&&(A=u({},E),ac(A,M)),d=d.ownerDocument||d,M=d.createElement("script"),pt(M),fr(M,"link",A),d.head.appendChild(M),m.instance=M);case"void":return null;default:throw Error(i(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(A=m.instance,m.state.loading|=4,ns(A,E.precedence,d));return m.instance}function ns(d,m,E){for(var A=E.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=A.length?A[A.length-1]:null,N=M,B=0;B<A.length;B++){var H=A[B];if(H.dataset.precedence===m)N=H;else if(N!==M)break}N?N.parentNode.insertBefore(d,N.nextSibling):(m=E.nodeType===9?E.head:E,m.insertBefore(d,m.firstChild))}function ic(d,m){d.crossOrigin==null&&(d.crossOrigin=m.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=m.referrerPolicy),d.title==null&&(d.title=m.title)}function ac(d,m){d.crossOrigin==null&&(d.crossOrigin=m.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=m.referrerPolicy),d.integrity==null&&(d.integrity=m.integrity)}var as=null;function Tf(d,m,E){if(as===null){var A=new Map,M=as=new Map;M.set(E,A)}else M=as,A=M.get(E),A||(A=new Map,M.set(E,A));if(A.has(d))return A;for(A.set(d,null),E=E.getElementsByTagName(d),M=0;M<E.length;M++){var N=E[M];if(!(N[Le]||N[qt]||d==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var B=N.getAttribute(m)||"";B=d+B;var H=A.get(B);H?H.push(N):A.set(B,[N])}}return A}function Af(d,m,E){d=d.ownerDocument||d,d.head.insertBefore(E,m==="title"?d.querySelector("head > title"):null)}function kh(d,m,E){if(E===1||m.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return d=m.disabled,typeof m.precedence=="string"&&d==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function Of(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}function Dh(d,m,E,A){if(E.type==="stylesheet"&&(typeof A.media!="string"||matchMedia(A.media).matches!==!1)&&(E.state.loading&4)===0){if(E.instance===null){var M=fa(A.href),N=m.querySelector(ro(M));if(N){m=N._p,m!==null&&typeof m=="object"&&typeof m.then=="function"&&(d.count++,d=os.bind(d),m.then(d,d)),E.state.loading|=4,E.instance=N,pt(N);return}N=m.ownerDocument||m,A=Ef(A),(M=Hr.get(M))&&ic(A,M),N=N.createElement("link"),pt(N);var B=N;B._p=new Promise(function(H,ne){B.onload=H,B.onerror=ne}),fr(N,"link",A),E.instance=N}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(E,m),(m=E.state.preload)&&(E.state.loading&3)===0&&(d.count++,E=os.bind(d),m.addEventListener("load",E),m.addEventListener("error",E))}}var oc=0;function Nh(d,m){return d.stylesheets&&d.count===0&&ls(d,d.stylesheets),0<d.count||0<d.imgCount?function(E){var A=setTimeout(function(){if(d.stylesheets&&ls(d,d.stylesheets),d.unsuspend){var N=d.unsuspend;d.unsuspend=null,N()}},6e4+m);0<d.imgBytes&&oc===0&&(oc=62500*mh());var M=setTimeout(function(){if(d.waitingForImages=!1,d.count===0&&(d.stylesheets&&ls(d,d.stylesheets),d.unsuspend)){var N=d.unsuspend;d.unsuspend=null,N()}},(d.imgBytes>oc?50:800)+m);return d.unsuspend=E,function(){d.unsuspend=null,clearTimeout(A),clearTimeout(M)}}:null}function os(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ls(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var ss=null;function ls(d,m){d.stylesheets=null,d.unsuspend!==null&&(d.count++,ss=new Map,m.forEach(Ih,d),ss=null,os.call(d))}function Ih(d,m){if(!(m.state.loading&4)){var E=ss.get(d);if(E)var A=E.get(null);else{E=new Map,ss.set(d,E);for(var M=d.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<M.length;N++){var B=M[N];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(E.set(B.dataset.precedence,B),A=B)}A&&E.set(null,A)}M=m.instance,B=M.getAttribute("data-precedence"),N=E.get(B)||A,N===A&&E.set(null,M),E.set(B,M),this.count++,A=os.bind(this),M.addEventListener("load",A),M.addEventListener("error",A),N?N.parentNode.insertBefore(M,N.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(M,d.firstChild)),m.state.loading|=4}}var io={$$typeof:C,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function $h(d,m,E,A,M,N,B,H,ne){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cn(0),this.hiddenUpdates=cn(null),this.identifierPrefix=A,this.onUncaughtError=M,this.onCaughtError=N,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function Pf(d,m,E,A,M,N,B,H,ne,ye,Oe,Me){return d=new $h(d,m,E,B,ne,ye,Oe,Me,H),m=1,N===!0&&(m|=24),N=Pr(3,null,null,m),d.current=N,N.stateNode=d,m=Bs(),m.refCount++,d.pooledCache=m,m.refCount++,N.memoizedState={element:A,isDehydrated:E,cache:m},Vs(N),d}function jf(d){return d?(d=qi,d):qi}function Mf(d,m,E,A,M,N){M=jf(M),A.context===null?A.context=M:A.pendingContext=M,A=Wn(m),A.payload={element:E},N=N===void 0?null:N,N!==null&&(A.callback=N),E=Hn(d,A,m),E!==null&&(Tr(E,d,m),Na(E,d,m))}function Cf(d,m){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var E=d.retryLane;d.retryLane=E!==0&&E<m?E:m}}function sc(d,m){Cf(d,m),(d=d.alternate)&&Cf(d,m)}function Rf(d){if(d.tag===13||d.tag===31){var m=gi(d,67108864);m!==null&&Tr(m,d,67108864),sc(d,67108864)}}function kf(d){if(d.tag===13||d.tag===31){var m=Dr();m=un(m);var E=gi(d,m);E!==null&&Tr(E,d,m),sc(d,m)}}var cs=!0;function Lh(d,m,E,A){var M=z.T;z.T=null;var N=q.p;try{q.p=2,lc(d,m,E,A)}finally{q.p=N,z.T=M}}function Bh(d,m,E,A){var M=z.T;z.T=null;var N=q.p;try{q.p=8,lc(d,m,E,A)}finally{q.p=N,z.T=M}}function lc(d,m,E,A){if(cs){var M=cc(A);if(M===null)Kl(d,m,A,us,E),Nf(d,A);else if(zh(M,d,m,E,A))A.stopPropagation();else if(Nf(d,A),m&4&&-1<Fh.indexOf(d)){for(;M!==null;){var N=it(M);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var B=tt(N.pendingLanes);if(B!==0){var H=N;for(H.pendingLanes|=2,H.entangledLanes|=2;B;){var ne=1<<31-or(B);H.entanglements[1]|=ne,B&=~ne}sn(N),(At&6)===0&&(Go=Ot()+500,Qa(0))}}break;case 31:case 13:H=gi(N,2),H!==null&&Tr(H,N,2),Ho(),sc(N,2)}if(N=cc(A),N===null&&Kl(d,m,A,us,E),N===M)break;M=N}M!==null&&A.stopPropagation()}else Kl(d,m,A,null,E)}}function cc(d){return d=$i(d),uc(d)}var us=null;function uc(d){if(us=null,d=ze(d),d!==null){var m=f(d);if(m===null)d=null;else{var E=m.tag;if(E===13){if(d=p(m),d!==null)return d;d=null}else if(E===31){if(d=b(m),d!==null)return d;d=null}else if(E===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;d=null}else m!==d&&(d=null)}}return us=d,null}function Df(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(We()){case Yt:return 2;case tr:return 8;case It:case Xt:return 32;case yr:return 268435456;default:return 32}default:return 32}}var dc=!1,ii=null,ai=null,oi=null,ao=new Map,oo=new Map,si=[],Fh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nf(d,m){switch(d){case"focusin":case"focusout":ii=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":oi=null;break;case"pointerover":case"pointerout":ao.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":oo.delete(m.pointerId)}}function so(d,m,E,A,M,N){return d===null||d.nativeEvent!==N?(d={blockedOn:m,domEventName:E,eventSystemFlags:A,nativeEvent:N,targetContainers:[M]},m!==null&&(m=it(m),m!==null&&Rf(m)),d):(d.eventSystemFlags|=A,m=d.targetContainers,M!==null&&m.indexOf(M)===-1&&m.push(M),d)}function zh(d,m,E,A,M){switch(m){case"focusin":return ii=so(ii,d,m,E,A,M),!0;case"dragenter":return ai=so(ai,d,m,E,A,M),!0;case"mouseover":return oi=so(oi,d,m,E,A,M),!0;case"pointerover":var N=M.pointerId;return ao.set(N,so(ao.get(N)||null,d,m,E,A,M)),!0;case"gotpointercapture":return N=M.pointerId,oo.set(N,so(oo.get(N)||null,d,m,E,A,M)),!0}return!1}function $f(d){var m=ze(d.target);if(m!==null){var E=f(m);if(E!==null){if(m=E.tag,m===13){if(m=p(E),m!==null){d.blockedOn=m,$n(d.priority,function(){kf(E)});return}}else if(m===31){if(m=b(E),m!==null){d.blockedOn=m,$n(d.priority,function(){kf(E)});return}}else if(m===3&&E.stateNode.current.memoizedState.isDehydrated){d.blockedOn=E.tag===3?E.stateNode.containerInfo:null;return}}}d.blockedOn=null}function ds(d){if(d.blockedOn!==null)return!1;for(var m=d.targetContainers;0<m.length;){var E=cc(d.nativeEvent);if(E===null){E=d.nativeEvent;var A=new E.constructor(E.type,E);Ii=A,E.target.dispatchEvent(A),Ii=null}else return m=it(E),m!==null&&Rf(m),d.blockedOn=E,!1;m.shift()}return!0}function Lf(d,m,E){ds(d)&&E.delete(m)}function Uh(){dc=!1,ii!==null&&ds(ii)&&(ii=null),ai!==null&&ds(ai)&&(ai=null),oi!==null&&ds(oi)&&(oi=null),ao.forEach(Lf),oo.forEach(Lf)}function fs(d,m){d.blockedOn===m&&(d.blockedOn=null,dc||(dc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Uh)))}var ps=null;function Bf(d){ps!==d&&(ps=d,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ps===d&&(ps=null);for(var m=0;m<d.length;m+=3){var E=d[m],A=d[m+1],M=d[m+2];if(typeof A!="function"){if(uc(A||E)===null)continue;break}var N=it(E);N!==null&&(d.splice(m,3),m-=3,cl(N,{pending:!0,data:M,method:E.method,action:A},A,M))}}))}function ha(d){function m(ne){return fs(ne,d)}ii!==null&&fs(ii,d),ai!==null&&fs(ai,d),oi!==null&&fs(oi,d),ao.forEach(m),oo.forEach(m);for(var E=0;E<si.length;E++){var A=si[E];A.blockedOn===d&&(A.blockedOn=null)}for(;0<si.length&&(E=si[0],E.blockedOn===null);)$f(E),E.blockedOn===null&&si.shift();if(E=(d.ownerDocument||d).$$reactFormReplay,E!=null)for(A=0;A<E.length;A+=3){var M=E[A],N=E[A+1],B=M[K]||null;if(typeof N=="function")B||Bf(E);else if(B){var H=null;if(N&&N.hasAttribute("formAction")){if(M=N,B=N[K]||null)H=B.formAction;else if(uc(M)!==null)continue}else H=B.action;typeof H=="function"?E[A+1]=H:(E.splice(A,3),A-=3),Bf(E)}}}function Ff(){function d(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function(B){return M=B})},focusReset:"manual",scroll:"manual"})}function m(){M!==null&&(M(),M=null),A||setTimeout(E,20)}function E(){if(!A&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var A=!1,M=null;return navigation.addEventListener("navigate",d),navigation.addEventListener("navigatesuccess",m),navigation.addEventListener("navigateerror",m),setTimeout(E,100),function(){A=!0,navigation.removeEventListener("navigate",d),navigation.removeEventListener("navigatesuccess",m),navigation.removeEventListener("navigateerror",m),M!==null&&(M(),M=null)}}}function fc(d){this._internalRoot=d}hs.prototype.render=fc.prototype.render=function(d){var m=this._internalRoot;if(m===null)throw Error(i(409));var E=m.current,A=Dr();Mf(E,A,d,m,null,null)},hs.prototype.unmount=fc.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var m=d.containerInfo;Mf(d.current,2,null,d,null,null),Ho(),m[te]=null}};function hs(d){this._internalRoot=d}hs.prototype.unstable_scheduleHydration=function(d){if(d){var m=In();d={blockedOn:null,target:d,priority:m};for(var E=0;E<si.length&&m!==0&&m<si[E].priority;E++);si.splice(E,0,d),E===0&&$f(d)}};var zf=e.version;if(zf!=="19.2.0")throw Error(i(527,zf,"19.2.0"));q.findDOMNode=function(d){var m=d._reactInternals;if(m===void 0)throw typeof d.render=="function"?Error(i(188)):(d=Object.keys(d).join(","),Error(i(268,d)));return d=v(m),d=d!==null?g(d):null,d=d===null?null:d.stateNode,d};var Vh={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ms=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ms.isDisabled&&ms.supportsFiber)try{Ar=ms.inject(Vh),He=ms}catch{}}return reactDomClient_production.createRoot=function(d,m){if(!l(d))throw Error(i(299));var E=!1,A="",M=Wu,N=Hu,B=Ku;return m!=null&&(m.unstable_strictMode===!0&&(E=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onUncaughtError!==void 0&&(M=m.onUncaughtError),m.onCaughtError!==void 0&&(N=m.onCaughtError),m.onRecoverableError!==void 0&&(B=m.onRecoverableError)),m=Pf(d,1,!1,null,null,E,A,null,M,N,B,Ff),d[te]=m.current,Hl(d),new fc(m)},reactDomClient_production.hydrateRoot=function(d,m,E){if(!l(d))throw Error(i(299));var A=!1,M="",N=Wu,B=Hu,H=Ku,ne=null;return E!=null&&(E.unstable_strictMode===!0&&(A=!0),E.identifierPrefix!==void 0&&(M=E.identifierPrefix),E.onUncaughtError!==void 0&&(N=E.onUncaughtError),E.onCaughtError!==void 0&&(B=E.onCaughtError),E.onRecoverableError!==void 0&&(H=E.onRecoverableError),E.formState!==void 0&&(ne=E.formState)),m=Pf(d,1,!0,m,E??null,A,M,ne,N,B,H,Ff),m.context=jf(null),E=m.current,A=Dr(),A=un(A),M=Wn(A),M.callback=null,Hn(E,M,A),E=A,m.current.lanes=E,Yr(m,E),sn(m),d[te]=m.current,Hl(d),new hs(m)},reactDomClient_production.version="19.2.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports),pitchDeckData=[{title:"Investment Thesis",narrative:"Welcome. We present the Visu-Sewer investment thesis. In the beginning, there were pipessilent arteries beneath cities. And there were people, founders who saw not just infrastructure, but a promise. This is not a spreadsheet. It is a story told in the language of human values, financial realities, and strategic ambition. A story of how a family business became a national platform, and how that platform must now evolve to endure another fifty years.",content:{type:"cover",title:"From Roots to Resilience: The VisuSewer Story",subtitle:"A Financial Document That Reads Like a Legacy",backgroundImage:"/images/finished-tunnel.png",methodology:" Methodology & Validation: All financial projections use conservative assumptions validated against comparable companies. Client retention and operational metrics are calculated from internal systems (CRM, project management, HR). Industry benchmarks are from third-party trade associations and government agencies. Technology ROI is based on pilot programs and vendor-provided case studies adjusted for VisuSewer-specific implementation.",advisory:" Evidence-Based Analysis: Every chart, metric, and financial projection in this presentation is grounded in verifiable data sources. For comprehensive references and detailed source documentation, see Page 20: Evidence & References."}},{title:"Presentation Index",narrative:"Welcome to the VisuSewer strategic presentation. This index provides a roadmap of our journeyfrom founding covenant to future vision. Each section builds upon the last, revealing how a 50-year commitment to excellence has created a platform for transformational growth. This presentation guides you through the story of From Roots to Resilience.",content:{type:"index",sections:[{id:3,title:"The Four Pillars: Values as Competitive Advantage",description:"Core values as competitive advantage$25-30M quantifiable annual benefit"},{id:4,title:"Love Story #1: Falling in Love with the Craft",description:"Falling in love with trenchless technology and engineering excellence"},{id:5,title:"Executive Summary",description:"Strategic inflection pointtranslating 50 years of credibility into national scale"},{id:6,title:"Timeline & Growth Evolution",description:"From Wisconsin 1975 to national platform 2025a history of value-accretive growth"},{id:7,title:"Love Story #3: Falling in Love with the Future",description:"AI transformation and technology modernization$2.1M Year 1 ROI"},{id:8,title:"The Technology Transformation: Three-Phase Modernization",description:"Three-phase modernization: AI Inspection, FSM, Predictive Analytics"},{id:9,title:"The Resilience Framework: Shielding the Bottom Line",description:"Four pillars protecting $3-7M annually: Political, Supply Chain, Weather, Safety"},{id:10,title:"Love Story #2: Falling in Love with Operational Excellence",description:"Scaling without losing soulsystems thinking and operational discipline"},{id:11,title:"Leadership Structure: Field-Born Expertise",description:"Field-first leadership philosophyevery manager earned their way up"},{id:12,title:"The Service Stack: Full Lifecycle Control",description:"Integrated end-to-end lifecycle: Inspect  Maintain  Rehabilitate"},{id:13,title:"Case Studies in Execution Excellence",description:"Execution excellence across $18M+ projects and 20-year partnerships"},{id:14,title:"Human Capital Analytics: Linking People to Profitability",description:"Linking people metrics to profitabilityretention, training, safety, utilization"},{id:15,title:"Growth Thesis & Financial Projections",description:"Disciplined M&A strategy: $37M to $300M by 2045"},{id:16,title:"Love Story #4: Falling in Love with Legacy",description:"Building something that outlasts usthree transformations over 20 years"},{id:17,title:"The Four Tests of Transformation",description:"Critical tensions: Automate, Scale, Predict, Profitwithout compromising values"},{id:18,title:"Toward the Horizon: 50 Years Underground, Infinite Years Ahead",description:"50 years underground, infinite years aheadthe covenant endures"},{id:20,title:"Evidence & References: Data Sources for Every Claim",description:"Comprehensive references and data sources for all metrics and projections"},{id:21,title:"Thank You: The Journey Continues",description:"Agent Lee's farewell messagethe journey continues"}]}},{title:"The Four Pillars: Values as Competitive Advantage",narrative:"From that covenant emerged four core values that became Visu-Sewer's operational DNA. These were not abstractionsthey were reflected in labor practices, technology adoption, and client relationships. By the 1990s, Visu-Sewer was recognized as one of the most established and trusted companies in the United States, not because of aggressive marketing, but because municipalities recommended them to each other.",content:{type:"summary",message:'At $150M scale, these "soft" values deliver $25-30M in quantifiable annual financial advantage.',points:["Responsiveness: Answer at 2 AM  <2hr response time  95% retention = $15M revenue difference","Integrity: Tell the truth  0% report revisions  10-15% premium pricing = $5-10M profit uplift","Dedication: Show up in blizzards  98% on-time delivery  95% retention = $2M annual savings","Reputation: Last job is next pitch  NPS >70, 50% referrals  $3M marketing savings"]}},{title:"Love Story #1: Falling in Love with the Craft",narrative:"The first love story was between the founders and the work itself. They fell in love with the elegance of trenchless rehabilitationsolving problems without destroying streets. The detective work of CCTV inspectiondiagnosing invisible failures through pixel patterns and flow anomalies. The engineering beauty of CIPP liningtransforming resin-soaked fabric into a structural liner stronger than the original pipe. This passion for craft attracted like-minded professionals. Early employees weren't just looking for jobs; they were joining a mission.",content:{type:"summary",message:"Excellence attracted excellence. Reputation compounded reputation. The culture became a self-reinforcing cycle.",points:["Trenchless Rehabilitation: Solving problems without destroying infrastructure","CCTV Inspection: Diagnosing invisible failures with precision and expertise","CIPP Technology: Engineering solutions that last 50+ years","Cultural Magnet: Attracting professionals who shared the passion for excellence"]}},{title:"Executive Summary",narrative:"Visu-Sewer is at a strategic inflection point. Having established a 50-year foundation of operational credibility, the company is now poised to translate this field-level expertise into a scalable national platform. The backing of Fort Point Capital provides the catalyst. Our path forward is an integrated strategy: amplifying proven operational models with a robust, data-driven human capital architecture to drive predictable growth and margin expansion.",content:{type:"summary",message:"Our thesis posits that scaling field-honed operational excellence through a disciplined, data-centric human capital framework will unlock significant enterprise value.",points:["Legacy of Excellence: A 50-year track record of technical mastery and operational reliability.","Strategic Inflection Point: Transitioning from a regional leader to a scalable, national buy-and-build platform.","Capital Infusion: Fort Point Capital partnership provides the resources to accelerate a disciplined growth strategy.","The Path to Value Creation: Executing a dual-pronged strategy of operational scaling and human capital optimization."]}},{title:"A History of Strategic Evolution",narrative:"Our trajectory demonstrates a consistent pattern of deliberate, value-accretive growth. From Wisconsin in 1975 to a national platform in 2025, each phasegeographic expansion, technological adoption, strategic M&Ahas systematically de-risked the business and fortified market position. The 2023 Fort Point Capital partnership wasn't a sellout; it was a strategic catalyst to accelerate modernization while preserving cultural identity. This is Love Story number two: falling in love with operational excellence.",content:{type:"timeline",milestones:[{year:"1975",milestone:"Founded in Pewaukee, WI",impact:"The covenant begins: Peace of mind",category:"geo"},{year:"1980s",milestone:"Trenchless Rehab Adopted",impact:"Grouting & slip-lining added",category:"tech"},{year:"1988",milestone:"First Satellite Office  MN",impact:"Regional expansion begins",category:"geo"},{year:"1994",milestone:"CIPP Lining Main Service",impact:"Core competency established",category:"tech"},{year:"2012",milestone:"Walden Tech Acquired (IL)",impact:"Inspection capacity growth",category:"m&a"},{year:"2023",milestone:"Fort Point Capital Investment",impact:"Buy-and-build platform created",category:"m&a"},{year:"2025",milestone:"MOR Construction Acquisition",impact:"Entry into PA/DE/NJ markets",category:"m&a"}],image:"/images/geographic-footprint.png"}},{title:"Love Story #3: Falling in Love with the Future",narrative:"By 2023, Visu-Sewer leadership confronted a sobering reality: competitors like Aegion and Insituform were leapfrogging them in AI-driven automation95 to 97 percent accuracy defect detection, client dashboards, predictive analytics pilots. Meanwhile, Visu-Sewer's technology stack was aging. The risk: becoming a premium-priced dinosaur, expensive because of craftsmanship but slow and opaque compared to digitally-native competitors. Leadership's response was to fall in love with possibilitythe vision of what Visu-Sewer could become.",content:{type:"summary",message:"The 2024 Fort Point Capital partnership unlocked $1M Year 1 technology budget, M&A capital, and operational consultingaccelerating modernization while preserving culture.",points:["The Wake-Up Call: Competitors deploying AI inspection, real-time dashboards, predictive analytics","The Risk: Becoming slow and opaque despite premium craftsmanship quality","The Response: Strategic partnership with Fort Point Capital ($2B AUM)","The Catalyst: $1M technology budget + M&A capital + digital transformation expertise"]}},{title:"The Technology Transformation: Three-Phase Modernization",narrative:"The leadership committed to a three-phase modernization anchored in the original values. Phase One: AI Inspection delivers responsiveness at machine speed with 96 to 98 percent defect detection accuracy, reducing coding time from 8 to 12 hours down to 30 to 60 minutes. Phase Two: Field Service Management brings dedication through digital workflows with ServiceTitan FSM for 60-plus field personnel. Phase Three: ERP and Predictive Analytics builds reputation on intelligence, transforming from inspection vendor to strategic infrastructure advisor.",content:{type:"summary",message:"Year 1 ROI: $1M investment  $2.1M benefits = 110% return with 5.7-month payback period",points:["Phase 1 (Months 1-6): AI Inspection$200K investment, 24-48hr delivery vs 5-7 day standard, $140K annual savings","Phase 2 (Months 4-9): ServiceTitan FSM$250K investment, 10-15% utilization gain, 40% admin reduction","Phase 3 (Year 2-3): Procore ERP + Info360$375-575K, predictive analytics, $1-2M recurring revenue","Values Alignment: Responsiveness (speed), Dedication (workflows), Reputation (intelligence)"]}},{title:"The Resilience Framework: Shielding the Bottom Line",narrative:"The CFO, Asset Manager, and COO collaborate on pinch point mitigation across four critical dimensions. Political and Regulatory Shielding with AI compliance dashboards and industry engagement. Geopolitical and Supply Chain Hardening through dual-source suppliers and in-house manufacturing. Weatherization and Emergency Response with digital twin simulations and pre-staged kits. Safety and Training Excellence using VR AR simulators and wearable tech. Combined impact: protecting millions in potential losses while capturing new revenue opportunities.",content:{type:"summary",message:"Four pillars of protection delivering $3-7M annual risk mitigation and $2-4M emergency revenue capture.",points:["Political & Regulatory: AI compliance dashboards, NASSCO/WEF engagementavoid $500K-1M fines, reduce bid risk 15%","Supply Chain: Dual-source materials, IoT tracking, in-house manufacturing20% delay reduction, avoid $300-500K costs","Weatherization: Digital twins, AR field response, pre-staged kitscapture $2-4M emergency contracts, 40% faster mobilization","Safety & Training: VR/AR simulators, smart helmets, apprenticeships30% injury reduction = $150-200K savings"]}},{title:"Love Story #2: Falling in Love with Operational Excellence",narrative:"As Visu-Sewer expanded from local specialist to regional powerhouse, leadership faced the classic tension: How do you scale without losing your soul? The answer was to fall in love againthis time with systems thinking and operational discipline. We realized that values are not enough. Values must be embedded in processes, measured in KPIs, and reinforced through technology. This led to NASSCO PACP certification, digital inspection records, fleet tracking, ERP systems, and a cultural integration playbook for acquisitions.",content:{type:"summary",message:"Acquisitions are not just financial transactionsthey are cultural mergers requiring explicit values communication and incentive alignment.",points:["Standardization: NASSCO/PACP certification ensuring consistent quality across all crews","Technology: Digital inspection records, GPS fleet tracking, predictive maintenance systems","Financial Discipline: ERP job costing, supply chain optimization, vertical integration","Cultural Integration: 180-day playbook for M&A with values-first due diligence (MOR case study)"]}},{title:"Human Capital: The Core Asset",narrative:"Our leadership philosophy is simple yet powerful: every manager started in the field and worked their way up through the ranks. This isn't just about experience; it's about credibility, practical knowledge, and understanding the challenges our crews face daily. From CEO Keith Alexander's 35 years in the trenches to our division managers who still walk job sites, we don't bid from behind desks. This field-first approach is our competitive advantage, and our teams role is to scale this culture through data-driven systems and analytics.",content:{type:"org_chart",leadership:{name:"Keith Alexander",title:"CEO",tagline:"Field-born leader | 35 yrs in industry",photoUrl:"https://i.ibb.co/3kMmxKx/keith-alexander.png",children:[{name:"Lou Hall",title:"COO",tagline:"30+ yrs operational expertise",photoUrl:"https://i.ibb.co/LQr01tQ/lou-hall.png"},{name:"Dawn Herman",title:"CFO",tagline:"25+ yrs financial leadership",photoUrl:"https://i.ibb.co/2Fq1g22/dawn-herman.png"},{name:"Greg Sunner",title:"CPO, SPHR",tagline:"People & Culture Champion",photoUrl:"https://i.ibb.co/FbfVJyL/greg-sunner.png",children:[]},{name:"Randy Belanger",title:"VP, Sales",tagline:"Client relationship strategist",photoUrl:"https://i.ibb.co/svC9qD1/placeholder-male.png"},{name:"John Nelson",title:"VP, Service Division",tagline:"Service delivery leader",photoUrl:"https://i.ibb.co/svC9qD1/placeholder-male.png"},{name:"Nicholas Vavra",title:"Controller",tagline:"Financial operations",photoUrl:"https://i.ibb.co/svC9qD1/placeholder-male.png"},{name:"Shaun Ritter",title:"Director, National Liner",tagline:"CIPP technical specialist",photoUrl:"https://i.ibb.co/svC9qD1/placeholder-male.png"},{name:"Division Managers",title:"Regional Operations",tagline:"Field-first execution leaders",photoUrl:"https://i.ibb.co/svC9qD1/placeholder-male.png",children:[{name:"Alex Rossebo",title:"President, Wisconsin",tagline:"WI operations",photoUrl:"https://i.ibb.co/svC9qD1/placeholder-male.png"},{name:"Jason Kowalski",title:"Division Manager, Illinois",tagline:"IL operations",photoUrl:"https://i.ibb.co/svC9qD1/placeholder-male.png"},{name:"Shawn Nico",title:"Division Manager, Minnesota",tagline:"MN operations",photoUrl:"https://i.ibb.co/svC9qD1/placeholder-male.png"},{name:"James Bohn",title:"Division Manager, Missouri",tagline:"MO operations",photoUrl:"https://i.ibb.co/svC9qD1/placeholder-male.png"},{name:"John Murphy",title:"Division Manager, Ohio",tagline:"OH operations",photoUrl:"https://i.ibb.co/svC9qD1/placeholder-male.png"},{name:"Mark Burcham",title:"Division Manager, Virginia",tagline:"VA operations",photoUrl:"https://i.ibb.co/svC9qD1/placeholder-male.png"},{name:"Mike Bright",title:"Water Blasting Division Manager",tagline:"Cleaning operations",photoUrl:"https://i.ibb.co/svC9qD1/placeholder-male.png"},{name:"Todd Bonk",title:"CIPP Division Manager",tagline:"CIPP operations",photoUrl:"https://i.ibb.co/svC9qD1/placeholder-male.png"},{name:"Drew Setzer",title:"Service Division Manager",tagline:"Service delivery",photoUrl:"https://i.ibb.co/svC9qD1/placeholder-male.png"}]}]},image:"/images/feild-technician-first-guy.png"}},{title:"Integrated Service Delivery Model",narrative:"We control the end-to-end asset lifecycle, from diagnostic inspection to trenchless rehabilitation. This integrated model provides superior engineering outcomes for municipalities while creating significant economic advantages for Visu-Sewer, including diversified revenue streams, enhanced margin control, and high client lifetime value.",content:{type:"service_stack",stack:[{stage:"Inspect",activities:"CCTV, LETS, Smoke/Dye Testing",deliverable:"Actionable Condition Assessment Data"},{stage:"Maintain",activities:"Jet/Vac Cleaning, Root Cutting",deliverable:"Optimized Hydraulic Capacity"},{stage:"Rehabilitate",activities:"CIPP, Sectional Liners, Manhole Epoxy",deliverable:"50-Year Structural Asset Renewal"}],image:"/images/visu-sewer-truck.png"}},{title:"Case Studies in Execution Excellence",narrative:"Our thesis is validated by a portfolio of complex, high-stakes projects. These case studies are not merely jobs completed; they are evidence of our capacity to deliver long-term, engineered solutions under challenging operational constraints, cementing multi-decade client partnerships and demonstrating our technical and financial reliability.",content:{type:"projects",projects:[{title:"Heart of the Valley Interceptor",details:[" $18M Value","5.5 miles CIPP Rehab","Live flow, night & over-water work","50-Year Design Life Extension"],chart:{type:"gantt",data:[{task:"Phase 1: Mobilization",start:0,end:3},{task:"Phase 2: Bypass & Cleaning",start:2,end:9},{task:"Phase 3: CIPP Lining",start:6,end:15},{task:"Phase 4: Reinstatement & CCTV",start:15,end:17},{task:"Phase 5: Closeout",start:17,end:18}],units:{x:"Months"}}},{title:"Village of Fox Point Program",details:["20-Year Ongoing Partnership","7,000 ft Rehabilitated Annually","Demonstrates high client retention"],chart:{type:"stacked-bar",data:[{year:"2021",revenue:.8,footage:6500},{year:"2022",revenue:.9,footage:7100},{year:"2023",revenue:1.1,footage:6900},{year:"2024",revenue:1.2,footage:7300}],units:{y:"M"}}},{title:"Wauwatosa Lateral Sealing",details:["2,500+ Laterals Sealed","Significant Groundwater Infiltration Reduction"],chart:{type:"line",data:[{year:"2020",mgd:1.5},{year:"2021",mgd:1.2},{year:"2022",mgd:.9},{year:"2023",mgd:.7},{year:"2024",mgd:.5}],units:{y:"MGD"}}}],image:"/images/feild-project-work.png"}},{title:"Human Capital Analytics: Linking People to Profitability",narrative:"This is the core of our human capital thesis. We correlate investment in our workforce directly to financial performance. As championed by our CPO, Greg Sunner, these metrics are not vanity numbers; they are leading indicators of operational efficiency, risk mitigation, and margin protection. Our teams role is to deploy the analytical systems that optimize these KPIs across the enterprise.",content:{type:"people_metrics",metrics:[{metric:"Employee Retention",current:"91%",target:"> 95%",why:"Reduces direct replacement costs (avg. $4.1k/hire) & preserves institutional knowledge. (Source: SHRM)"},{metric:"Training Hours / Employee",current:"22",target:"40",why:"Correlates to crew productivity and deployment of higher-margin services. (Source: ATD)"},{metric:"Safety TRIR",current:"1.9",target:"< 1.5",why:"Leading indicator of operational discipline; directly reduces insurance premiums & lost time. (Source: OSHA)"},{metric:"Crew Utilization",current:"72%",target:"85%",why:"Each 1% increase directly impacts revenue & fixed cost absorption, driving operating leverage. (Source: FMI Corp)"}],image:"/images/visu-sewer-people-matter.png"}},{title:"Growth Thesis & Financial Projections",narrative:"Our forward-looking strategy is centered on disciplined capital allocation. We will execute strategic tuck-in acquisitions within target geographies, leveraging our integration playbook to realize synergies. This will be supported by investments in digital QA/QC and predictive analytics for workforce planning, ensuring profitable, scalable growth from $37 million in 2024 to $70 million by 2027, with a clear path to $300 million by 2045.",content:{type:"roadmap",data:{mapUrl:"https://i.ibb.co/qNq3hV7/us-map-visu-sewer.png",funnelUrl:"https://i.ibb.co/kKxGfDd/acq-funnel.png",projection:[{label:"2024",value:37},{label:"2025",value:48},{label:"2026",value:59},{label:"2027",value:70}]}}},{title:"Love Story #4: Falling in Love with Legacy",narrative:"The ultimate question: How do you build something that outlasts you? The founders are now in their sixties and seventies. Fort Point Capital has a 5 to 7 year investment horizon. The next generation of leadership must internalize the covenant while adapting to a world the founders never imagined. The 20-year strategic vision balances continuity and evolution: from technology-enabled national platform in 2025 through 2030, to predictive intelligence as core product from 2030 to 2035, to climate resilience leadership from 2035 to 2045.",content:{type:"summary",message:"Three transformations over 20 years: National Platform  Intelligence Company  Climate Resilience Leader",points:["2025-2030: Technology-Enabled National Platform$37M  $85M revenue, 18%  24% EBITDA, 70%  95% retention","2030-2035: Predictive Intelligence as Core Product$85M  $150M revenue, 40% recurring, 10-15x EBITDA valuation","2035-2045: Climate Resilience Leadership$150M  $300M revenue, 20% international, top decile ESG","The Covenant Lives On: Values translated into measurable KPIs embedded in compensation and culture"]}},{title:"The Four Tests of Transformation",narrative:"We have seen companies rise and fall. We have calculated the half-life of market leadership. We know that most transformations failnot for lack of capital or technology, but for lack of belief. Visu-Sewer's story is rare in its foundation: a covenant made underground, tested by growth, and now extended into the digital age. But here is what the data cannot fully capture: Values are not constraintsthey are competitive advantages delivering $25 to $30 million in quantifiable annual financial benefit at $150 million revenue scale.",content:{type:"summary",message:"The next 20 years will test whether VisuSewer can balance four critical tensions:",points:["Test 1: Automate without dehumanizingUsing AI to amplify craftsmanship, not replace it","Test 2: Scale without dilutingGrowing to 500+ employees while maintaining cultural coherence","Test 3: Predict without arroganceOffering data-driven intelligence while respecting unpredictability","Test 4: Profit without compromisingDelivering shareholder returns while honoring the covenant"]}},{title:"Toward the Horizon: 50 Years Underground, Infinite Years Ahead",narrative:"This is not a story with a predetermined ending. It is a story still being writtenby CFOs managing budgets, asset managers optimizing lifecycles, COOs coordinating crews, and technicians crawling through manholes at 3 AM. The founders' love for craft became operational excellence. That excellence became client trust. That trust became recurring revenue. That revenue became capital for expansion. And that expansion must now become systemic resilience. But if the next 50 years honor the founding covenant as fiercely as the first 50, then Visu-Sewer will not just survive the digital transformationit will define it.",content:{type:"summary",message:"As we look toward the horizon, the sun sets on one era and rises on another. The covenant endures.",points:["Responsiveness: 95% retention vs 70% industry = $15M revenue advantage at scale","Integrity: 10-15% premium pricing = $5-10M annual profit uplift","Dedication: 95% vs 60% technician retention = $2M annual savings","Reputation: 50% referral-based revenue = $3M marketing savings"]}},{title:"Evidence & References: Data Sources for Every Claim",narrative:"Every chart, every metric, every financial projection in this presentation is grounded in verifiable data sources. This page provides comprehensive references for all claims made throughout the deck, organized by page number. We believe in transparent, evidence-based storytellingnot just compelling narratives, but provable facts.",content:{type:"references",pageReferences:[{pageNumber:3,pageTitle:"The Four Pillars: Values as Competitive Advantage",claims:[{claim:"95% client retention vs 70% industry average",sources:["NASSCO State of the Industry Report 2024","VisuSewer CRM retention data 2020-2024"],filePaths:["Public/Industry_Benchmarks/NASSCO_2024.pdf","AO-Request/CRM_Reports/Clients_Master.csv"],visibility:"Public"},{claim:"$15M revenue impact from retention advantage",sources:["Client Lifetime Value Analysis financial model","Churn cost calculator: $37M revenue  25% retention gap"],filePaths:["AO-Request/Finance/Tech_ROI_2024.xlsx","AO-Request/Finance/Tech_ROI_2024.xlsx"],visibility:"AO-Request"},{claim:"10-15% premium pricing capability",sources:["Pricing analysis: VisuSewer vs competitors (Aegion, Insituform, Miller)","Municipal RFP award data 2022-2024"],filePaths:["AO-Request/CRM_Reports/Clients_Master.csv","AO-Request/RFP_Awards/Municipal_Awards_2022_2024/"],visibility:"AO-Request"},{claim:"98% on-time delivery vs 85% industry",sources:["Project management database: 500+ projects 2020-2024","Construction Industry Institute benchmarks"],filePaths:["AO-Request/Project_Data/Procore_Export_2020_2024.xlsx","Public/Industry_Benchmarks/CII_Construction_Benchmarks.pdf"],visibility:"AO-Request"},{claim:"50% referral-based revenue vs 20-30% industry",sources:["CRM lead source tracking","B2B services marketing benchmarks"],filePaths:["AO-Request/CRM_Reports/Leads_Attribution.xlsx","Public/Industry_Benchmarks/B2B_Marketing_Benchmarks.pdf"],visibility:"AO-Request"}]},{pageNumber:6,pageTitle:"The Evolution Timeline",claims:[{claim:"Founded 1975 by field technicians",sources:["Company incorporation documents","Founder interviews with Gene Nico Sr."]},{claim:"Survived 2008 financial crisis with zero layoffs",sources:["HR records 2007-2010","Financial statements 2008-2009"]},{claim:"2024 Fort Point Capital partnership",sources:["Private equity transaction documents","Fort Point Capital portfolio announcement"]}]},{pageNumber:7,pageTitle:"Love Story #3: Falling in Love with the Future",claims:[{claim:"Competitors achieving 95-97% AI accuracy by 2023",sources:["Aegion Technology Report Q3 2023","Insituform AI Platform White Paper 2023","NASSCO Technology Survey 2023"],filePaths:["Public/Vendor_CaseStudies/Aegion_Tech_Report_Q3_2023.pdf","Public/Vendor_CaseStudies/Insituform_AI_Whitepaper.pdf","Public/Industry_Benchmarks/NASSCO_Tech_Survey_2023.pdf"],visibility:"Public"},{claim:"VisuSewer 60% accuracy pre-partnership",sources:["Internal QC audit 2023","Manual coding time tracking"],filePaths:["AO-Request/AI_Validation/QC_Audit_2023.pdf","AO-Request/Project_Data/Coding_Time_Study.xlsx"],visibility:"AO-Request"},{claim:"$1M Year 1 technology budget from Fort Point",sources:["Capital plan 2024-2026","Fort Point partnership agreement Schedule B"],filePaths:["Public/Press_Releases/FortPoint_Partnership_2024.pdf","AO-Request/Finance/Capital_Plan_2024_2026.xlsx"],visibility:"Public"},{claim:"2.1x ROI in Year 1",sources:["Technology investment tracking","Revenue attribution model (AI inspection revenue)"],filePaths:["AO-Request/Finance/Tech_ROI_2024.xlsx","AO-Request/Finance/Tech_ROI_2024.xlsx"],visibility:"AO-Request"}]},{pageNumber:8,pageTitle:"The Technology Transformation",claims:[{claim:"AI reduces coding time from 10 hours to 0.75 hours",sources:["Time study: Pre-AI (Jan-Mar 2024) vs Post-AI (Oct-Dec 2024)","Staff utilization reports"],filePaths:["Public/Vendor_CaseStudies/SewerAI_AutoCode.pdf","AO-Request/AI_Validation/Time_Study_2024.xlsx"],visibility:"Public"},{claim:"96-98% defect detection accuracy",sources:["AI platform validation study","QC comparison: AI vs manual coding on 200 projects"],filePaths:["AO-Request/AI_Validation/Accuracy_Report.pdf","AO-Request/AI_Validation/Accuracy_Report.pdf"],visibility:"AO-Request"},{claim:"ServiceTitan FSM 60+ field personnel deployment",sources:["FSM implementation project plan","User license count"],filePaths:["AO-Request/IT_Systems/ServiceTitan_Implementation.pdf","AO-Request/HR_Safety/User_Licenses.xlsx"],visibility:"AO-Request"},{claim:"$500K-2M recurring revenue from Phase 3",sources:["SaaS revenue model","Procore + Info360 customer projections"],filePaths:["AO-Request/Finance/Tech_ROI_2024.xlsx","AO-Request/Finance/SaaS_Revenue_Model.xlsx"],visibility:"AO-Request"}]},{pageNumber:9,pageTitle:"The Resilience Framework",claims:[{claim:"$500K-1M fines avoided via AI compliance",sources:["EPA compliance risk assessment","Historical violation data (industry)"],filePaths:["Public/Industry_Benchmarks/OSHA_TRIR.xlsx","AO-Request/Finance/Emergency_Contracts.csv"],visibility:"Public"},{claim:"20% supply chain delay reduction",sources:["Dual-source supplier pilot program results","Lead time tracking 2023 vs 2024"],filePaths:["AO-Request/Operations/Supply_Chain_Analysis.xlsx","AO-Request/Operations/Lead_Time_Tracking.xlsx"],visibility:"AO-Request"},{claim:"$2-4M emergency contract capture potential",sources:["Historical emergency response revenue","Digital twin pilot with City of Milwaukee"],filePaths:["AO-Request/Finance/Emergency_Contracts.csv","AO-Request/Project_Data/Milwaukee_Digital_Twin_Pilot.pdf"],visibility:"AO-Request"},{claim:"30% injury reduction = $150-200K savings",sources:["OSHA recordable incidents 2020-2024","Workers comp claims data","VR/AR training program metrics"],filePaths:["Public/Industry_Benchmarks/OSHA_TRIR.xlsx","AO-Request/HR_Safety/Workers_Comp_2020_2024.xlsx","AO-Request/HR_Safety/VR_Training_Metrics.pdf"],visibility:"AO-Request"}]},{pageNumber:11,pageTitle:"The Leadership Architecture",claims:[{claim:"8 of 9 division managers promoted from field",sources:["HR org chart with tenure/promotion history","Leadership bio database"],filePaths:["AO-Request/HR_Safety/OrgChart_2024.pdf","AO-Request/HR_Safety/Tenure.xlsx"],visibility:"AO-Request"},{claim:"Average 15+ years industry experience",sources:["Resume database","HR employee records"],filePaths:["AO-Request/HR_Safety/Tenure.xlsx","AO-Request/HR_Safety/OrgChart_2024.pdf"],visibility:"AO-Request"}]},{pageNumber:12,pageTitle:"Integrated Service Delivery Model",claims:[{claim:"AI inspection: 10hrs  0.75hrs coding time",sources:["Time study data","AI platform performance logs"],filePaths:["Public/Vendor_CaseStudies/SewerAI_AutoCode.pdf","AO-Request/AI_Validation/Time_Study_2024.xlsx"],visibility:"Public"},{claim:"Cost per report: $450  $125",sources:["Fully-loaded labor cost model","AI platform subscription cost allocation"],filePaths:["AO-Request/Finance/Tech_ROI_2024.xlsx","AO-Request/Finance/Tech_ROI_2024.xlsx"],visibility:"AO-Request"},{claim:"FSM route optimization: 65%  92%",sources:["ServiceTitan pilot data (60-day trial)","GPS tracking analysis"],filePaths:["AO-Request/Operations/ServiceTitan_Pilot.xlsx","AO-Request/Operations/GPS_Analytics.pdf"],visibility:"AO-Request"},{claim:"Equipment utilization: 70%  88%",sources:["Telematics data","Job completion rate tracking"],filePaths:["AO-Request/Operations/Equipment_Utilization.xlsx","AO-Request/Project_Data/Procore_Export_2020_2024.xlsx"],visibility:"AO-Request"},{claim:"Material tracking: 75%  98%",sources:["Procore ERP pilot (future state)","Current inventory variance reports"],filePaths:["AO-Request/Project_Data/Procore_Export_2020_2024.xlsx","AO-Request/Operations/Inventory_Variance.xlsx"],visibility:"AO-Request"},{claim:"Cost overruns: 15%  4%",sources:["Project financial closeout data 2020-2024","Procore case studies (similar contractors)"],filePaths:["AO-Request/Project_Data/Procore_Export_2020_2024.xlsx","Public/Vendor_CaseStudies/Procore_Case_Studies.pdf"],visibility:"AO-Request"}]},{pageNumber:13,pageTitle:"Flagship Case Studies",claims:[{claim:"Heart of Valley: $4.2M contract, 18-month timeline",sources:["Contract award documents","Project schedule in Procore"]},{claim:"Fox Point: $4M program, 15,000 LF over 3 years",sources:["Multi-year service agreement","Annual reports to Village of Fox Point"]},{claim:"Wauwatosa: 72% infiltration reduction (3.1  0.85 MGD)",sources:["Flow monitoring data 2019-2023","City of Wauwatosa Infiltration Study"]}]},{pageNumber:15,pageTitle:"The Growth Roadmap",claims:[{claim:"$37M  $70M revenue by 2028",sources:["5-year strategic plan","M&A pipeline model (50 targets)","Organic growth projections"],filePaths:["AO-Request/Finance/Strategic_Plan_2024_2029.pdf","AO-Request/Finance/MA_Pipeline.xlsx","AO-Request/Finance/Tech_ROI_2024.xlsx"],visibility:"AO-Request"},{claim:"18%  24% EBITDA margin",sources:["Financial model with technology leverage","Margin improvement plan (labor, AI efficiency)"],filePaths:["AO-Request/Finance/Tech_ROI_2024.xlsx","AO-Request/Finance/Strategic_Plan_2024_2029.pdf"],visibility:"AO-Request"},{claim:"95% retention vs 65% industry",sources:["Internal CRM data","NASSCO benchmark report"],filePaths:["AO-Request/CRM_Reports/Clients_Master.csv","Public/Industry_Benchmarks/NASSCO_2024.pdf"],visibility:"AO-Request"},{claim:"50 M&A targets identified, 1 closed by 2025",sources:["Corporate development pipeline spreadsheet","Fort Point Capital deal sourcing support"],filePaths:["AO-Request/Finance/MA_Pipeline.xlsx","Public/Press_Releases/FortPoint_Partnership_2024.pdf"],visibility:"Public"}]},{pageNumber:16,pageTitle:"Love Story #4: Falling in Love with Legacy",claims:[{claim:"2025-2030: $37M  $85M revenue",sources:["Strategic plan Phase 1","Market expansion model (6  15 states)"]},{claim:"2030-2035: $85M  $150M, 40% recurring",sources:["Strategic plan Phase 2","SaaS/managed services revenue model"]},{claim:"2035-2045: $150M  $300M, 20% international",sources:["Strategic plan Phase 3","International expansion feasibility study"]},{claim:"10-15x EBITDA valuation for SaaS-hybrid",sources:["Private equity valuation benchmarks","Comparable company analysis (software-enabled services)"]}]},{pageNumber:18,pageTitle:"Toward the Horizon",claims:[{claim:"Combined value impact: $25-30M at $150M scale",sources:["Financial impact model aggregating all four pillars","Sensitivity analysis at various revenue scales"]},{claim:"Technician retention: 95% vs 60% industry",sources:["HR turnover reports 2020-2024","Bureau of Labor Statistics: Construction turnover rates"]},{claim:"$2M savings from retention advantage",sources:["Hiring cost model: $50K per technician replacement","Training time cost allocation"]},{claim:"50% referral revenue saves $3M marketing",sources:["CRM lead attribution","Marketing budget benchmarks (8-10% of revenue for B2B services)"]}]}],generalSources:[{category:"Industry Benchmarks",sources:["NASSCO (National Association of Sewer Service Companies) Annual Reports 2020-2024","WEF (Water Environment Federation) Technical Reports","EPA Municipal Wastewater Infrastructure Reports"]},{category:"Technology Validation",sources:["AI platform vendor documentation (InfoSense, WinCan)","ServiceTitan FSM case studies","Procore construction ERP benchmarks"]},{category:"Financial Modeling",sources:["VisuSewer audited financials 2020-2023","Fort Point Capital due diligence reports","Private equity valuation comps (infrastructure services sector)"]},{category:"Market Research",sources:["IBISWorld: Sewer & Pipeline Maintenance Industry Report","Grand View Research: Trenchless Technology Market Analysis","McKinsey: Infrastructure Digitalization Report 2023"]}],methodology:"All financial projections use conservative assumptions validated against comparable companies. Client retention and operational metrics are calculated from internal systems (CRM, project management, HR). Industry benchmarks are from third-party trade associations and government agencies. Technology ROI is based on pilot programs and vendor-provided case studies adjusted for VisuSewer-specific implementation."}},{title:"Thank You: The Journey Continues",narrative:"We have reached the end of our presentation, but this is not an endingit is an invitation. Thank you for experiencing the VisuSewer story with us. From the founding covenant made underground in 1975 to the AI-powered future we are building today, every chapter has been written by people who believe that infrastructure work is sacred work. If you share that belief, if you see the potential in a company that measures success not just in revenue but in relationships, not just in pipes rehabilitated but in communities served, then we invite you to join us on this journey. The next 50 years begin now.",content:{type:"closing",message:"It has been our honor to walk you through this story. The numbers tell one truth: VisuSewer is a $37M company on track to $300M. But the deeper truth is thiswe are stewards of systems that millions depend on, and we take that responsibility seriously. The covenant made in 1975 still guides us today: Give customers peace of mind that their jobs will be done right. Everything else flows from that promise.",callToAction:"Ready to discuss partnership opportunities? Let's continue the conversation."}}],curatedBaseNames=["Libby","Maisie","Ryan","Sonia","Thomas","Ana","Andrew","Aria","Ava","Brian","Christopher","Emma","Eric","Guy","Jenny","Michelle","Roger","Steffan"],allowedLocales=["en-US","en-GB"];function isCuratedMicrosoftNatural(t){const e=((t==null?void 0:t.name)||"").toLowerCase(),n=((t==null?void 0:t.lang)||"").toLowerCase();return!(e.includes("microsoft")&&e.includes("natural")&&e.includes("online"))||!allowedLocales.some(p=>n.includes(p.toLowerCase()))?!1:curatedBaseNames.some(p=>e.includes(p.toLowerCase()))}function filterCuratedVoices(t){const e=(t||[]).filter(isCuratedMicrosoftNatural),n=i=>{const l=(i.name||"").toLowerCase();for(let f=0;f<curatedBaseNames.length;f++)if(l.includes(curatedBaseNames[f].toLowerCase()))return f;return Number.MAX_SAFE_INTEGER};return e.sort((i,l)=>n(i)-n(l))}const __vite_import_meta_env__$2={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_OPENROUTER:"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",VITE_OPENROUTER_API_KEY:""};function useTTS(t={}){const{onEnded:e,onError:n}=t,i=(__vite_import_meta_env__$2==null?void 0:__vite_import_meta_env__$2.VITE_TTS_DEFAULT_ENGINE)||"browser",f=new Set(["browser","azure","gemini","orpheus"]).has(i)?i:"browser",p=String((__vite_import_meta_env__$2==null?void 0:__vite_import_meta_env__$2.VITE_TTS_ENGINE_LOCK)||"").toLowerCase()==="true",b=String((__vite_import_meta_env__$2==null?void 0:__vite_import_meta_env__$2.VITE_TTS_VOICE_LOCK)||"").toLowerCase()==="true",[w,v]=reactExports.useState(f),g=pe=>{p||v(pe)},[u,o]=reactExports.useState(!1),[h,_]=reactExports.useState(!1),S=reactExports.useRef(null),T=reactExports.useRef(null),O=reactExports.useRef(null),j=reactExports.useRef(!1),C=reactExports.useRef(!1),[D,R]=reactExports.useState([]),[I,$]=reactExports.useState(!1);reactExports.useEffect(()=>{const pe=()=>{try{if(typeof window>"u"||!("speechSynthesis"in window))return;const Ae=window.speechSynthesis.getVoices();Ae&&Ae.length>0&&(R(Ae),$(!0))}catch{}};return pe(),typeof window<"u"&&"speechSynthesis"in window&&(window.speechSynthesis.onvoiceschanged=pe),()=>{typeof window<"u"&&"speechSynthesis"in window&&(window.speechSynthesis.onvoiceschanged=null)}},[]);const F=()=>{var pe,Ae;if(!S.current){const Ce=window.AudioContext||window.webkitAudioContext;S.current=new Ce,T.current=S.current.createGain(),T.current.gain.value=1,T.current.connect(S.current.destination)}S.current.state==="suspended"&&((Ae=(pe=S.current).resume)==null||Ae.call(pe))},L=reactExports.useCallback(()=>{var pe,Ae;j.current=!0;try{(pe=window.speechSynthesis)==null||pe.cancel()}catch{}try{(Ae=O.current)==null||Ae.stop()}catch{}o(!1),_(!1)},[]),V=reactExports.useCallback(async pe=>{pe=($e=>{let se=$e;return se=se.replace(/[\*_~`]+/g,""),se=se.replace(/:[a-zA-Z0-9_+-]+:/g," "),se=se.replace(/[\p{Emoji_Presentation}\p{Extended_Pictographic}]/gu," "),se=se.replace(/[.!?]{2,}/g,"."),se=se.replace(/\n\./g,`
`),se=se.replace(/\s{2,}/g," "),se=se.replace(/^[\s.,;:!?-]+|[\s.,;:!?-]+$/g,""),se.trim()})(pe);const Ce=(()=>{const se=[],ke=pe.replace(/\s+/g," ").split(/([.!?]\s)/).reduce((Ie,de,qe,Fe)=>(/([.!?]\s)/.test(de)?Ie.length===0?Ie.push(Fe[qe-1]+de):Ie[Ie.length-1]=(Ie[Ie.length-1]||"")+de:de.trim()&&Ie.push(de),Ie),[]).filter(Ie=>Ie.trim());for(const Ie of ke){if(Ie.length<=280){se.push(Ie);continue}let de=0;for(;de<Ie.length;)se.push(Ie.slice(de,de+280)),de+=280}return se})();return new Promise($e=>{try{if(typeof window>"u"||!("speechSynthesis"in window)){$e(!1);return}const se=window.speechSynthesis;se.cancel(),j.current=!1;const ke=se.getVoices(),Ie=filterCuratedVoices(ke);let de=null;const qe=(__vite_import_meta_env__$2==null?void 0:__vite_import_meta_env__$2.VITE_TTS_SELECTED_VOICE)||window.TTS_SELECTED_VOICE,Fe=(()=>{var Ue;try{return((Ue=window.localStorage)==null?void 0:Ue.getItem("agentLee.voice"))||""}catch{return""}})(),Ne=b?qe:t.selectedVoice||t.preferredVoice||Fe||qe;if(Ne&&(de=ke.find(Ue=>Ue.name===Ne)||null,!de)){const Ue=Ne.toLowerCase();de=ke.find(Ze=>Ze.name.toLowerCase().includes(Ue))||null}!de&&Ie.length>0&&(de=Ie[0]),de||(de=ke.find(Ue=>Ue.localService&&/en-/i.test(Ue.lang))||null),de||(de=ke.find(Ue=>/en-/i.test(Ue.lang))||null),!de&&ke.length>0&&(de=ke[0]);const Ge=Ue=>new Promise(Ze=>{const yt=new SpeechSynthesisUtterance(Ue);de&&(yt.voice=de),yt.rate=1,yt.pitch=1,yt.volume=1;let Nt=!1;const Ut=performance.now();yt.onstart=()=>{Nt=!0,o(!0)},yt.onend=()=>{o(!1);const Ct=performance.now()-Ut;Ze(Nt&&Ct>=50)},yt.onerror=Ct=>{o(!1),n==null||n(Ct),Ze(!1)},se.speak(yt),setTimeout(()=>{if(!Nt){try{!se.speaking&&!se.pending&&se.cancel()}catch{}Ze(!1)}},1500)});if(!C.current){$e(!1);return}(async()=>{var Ze;let Ue=!1;for(const yt of Ce){if(j.current)break;await Ge(yt)&&(Ue=!0)}Ue?(e==null||e(),$e(!0)):((Ze=t.onFailure)==null||Ze.call(t),$e(!1))})()}catch(se){n==null||n(se),$e(!1)}})},[t.preferredVoice,e,n]),Y=()=>{var ke,Ie;const pe=(__vite_import_meta_env__$2==null?void 0:__vite_import_meta_env__$2.VITE_AZURE_TTS_KEY)||window.AZURE_TTS_KEY,Ae=pe&&typeof pe=="string"&&!/^REPLACE_/i.test(pe)?pe:"",Ce=(__vite_import_meta_env__$2==null?void 0:__vite_import_meta_env__$2.VITE_AZURE_TTS_REGION)||window.AZURE_TTS_REGION,$e=((ke=t.azure)==null?void 0:ke.voice)||(__vite_import_meta_env__$2==null?void 0:__vite_import_meta_env__$2.VITE_AZURE_TTS_VOICE)||"en-US-JennyNeural",se=((Ie=t.azure)==null?void 0:Ie.style)||(__vite_import_meta_env__$2==null?void 0:__vite_import_meta_env__$2.VITE_AZURE_TTS_STYLE)||"general";return{key:Ae,region:Ce,voice:$e,style:se}},Q=(pe,Ae,Ce)=>`<?xml version="1.0"?>
<speak version="1.0" xml:lang="en-US">
  <voice name="${Ae}">
    <prosody rate="0%" pitch="0%">
      <mstts:express-as style="${Ce}" xmlns:mstts="https://www.w3.org/2001/mstts">
        ${(se=>se.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))(pe)}
      </mstts:express-as>
    </prosody>
  </voice>
</speak>`,ee=async pe=>{const{key:Ae,region:Ce,voice:$e,style:se}=Y();if(!Ae||!Ce)throw new Error("Missing Azure TTS configuration");const ke=Q(pe,$e,se),Ie=`https://${Ce}.tts.speech.microsoft.com/cognitiveservices/v1`,de=await fetch(Ie,{method:"POST",headers:{"Ocp-Apim-Subscription-Key":Ae,"Content-Type":"application/ssml+xml","X-Microsoft-OutputFormat":"audio-24khz-48kbitrate-mono-mp3"},body:ke});if(!de.ok)throw new Error(`Azure TTS HTTP ${de.status}`);return await de.arrayBuffer()},X=(pe,Ae=2800)=>{const Ce=[];let $e=0;for(;$e<pe.length;)Ce.push(pe.slice($e,$e+Ae)),$e+=Ae;return Ce},W=async(pe,Ae)=>{F();const Ce=S.current;let $e;if(Ae){const ke=new Int16Array(pe);$e=Ce.createBuffer(1,ke.length,Ae);const Ie=$e.getChannelData(0);for(let de=0;de<ke.length;de++)Ie[de]=ke[de]/32768}else $e=await Ce.decodeAudioData(pe.slice(0));if(j.current)return;const se=Ce.createBufferSource();return se.buffer=$e,O.current=se,se.connect(T.current),new Promise(ke=>{se.onended=()=>ke(),se.start()})},z=reactExports.useCallback(async pe=>{try{_(!0),j.current=!1;const Ae=X(pe,2800);for(const Ce of Ae){if(j.current)break;const $e=await ee(Ce);if(j.current)break;o(!0),await W($e)}return o(!1),_(!1),j.current||e==null||e(),!j.current}catch(Ae){return o(!1),_(!1),n==null||n(Ae),!1}},[e,n]),q=()=>{var $e,se;const pe=(__vite_import_meta_env__$2==null?void 0:__vite_import_meta_env__$2.VITE_GEMINI_API_KEY)||window.GEMINI_API_KEY,Ae=(($e=t.gemini)==null?void 0:$e.model)||(__vite_import_meta_env__$2==null?void 0:__vite_import_meta_env__$2.VITE_GEMINI_MODEL)||"gemini-2.5-flash-preview-tts",Ce=((se=t.gemini)==null?void 0:se.voice)||(__vite_import_meta_env__$2==null?void 0:__vite_import_meta_env__$2.VITE_GEMINI_VOICE)||"Kore";return{apiKey:pe,model:Ae,voice:Ce}},ce=async pe=>{var Ue,Ze,yt,Nt,Ut,ht;const{apiKey:Ae,model:Ce,voice:$e}=q();if(!Ae)throw new Error("Missing Gemini API key");const se=`https://generativelanguage.googleapis.com/v1beta/models/${Ce}:generateContent`,Ie=await fetch(se,{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-key":Ae},body:JSON.stringify({contents:[{parts:[{text:pe}]}],generationConfig:{responseModalities:["AUDIO"],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:$e}}}},model:Ce})});if(!Ie.ok)throw new Error(`Gemini TTS HTTP ${Ie.status}`);const de=await Ie.json(),qe=(ht=(Ut=(Nt=(yt=(Ze=(Ue=de==null?void 0:de.candidates)==null?void 0:Ue[0])==null?void 0:Ze.content)==null?void 0:yt.parts)==null?void 0:Nt[0])==null?void 0:Ut.inlineData)==null?void 0:ht.data;if(!qe)throw new Error("Gemini TTS: no audio data returned");const Fe=atob(qe),Ne=Fe.length,Ge=new Uint8Array(Ne);for(let Ct=0;Ct<Ne;Ct++)Ge[Ct]=Fe.charCodeAt(Ct);return Ge.buffer},ae=reactExports.useCallback(async pe=>{try{_(!0),j.current=!1;const Ae=X(pe,2e3);for(const Ce of Ae){if(j.current)break;const $e=await ce(Ce);if(j.current)break;o(!0),await W($e,24e3)}return o(!1),_(!1),j.current||e==null||e(),!j.current}catch(Ae){return o(!1),_(!1),n==null||n(Ae),!1}},[e,n]),we=()=>{var se,ke;const pe=(__vite_import_meta_env__$2==null?void 0:__vite_import_meta_env__$2.VITE_ORPHEUS_API_URL)||window.ORPHEUS_API_URL||"",Ae=(__vite_import_meta_env__$2==null?void 0:__vite_import_meta_env__$2.VITE_ORPHEUS_API_KEY)||window.ORPHEUS_API_KEY||"",Ce=((se=t.orpheus)==null?void 0:se.model)||(__vite_import_meta_env__$2==null?void 0:__vite_import_meta_env__$2.VITE_ORPHEUS_MODEL)||"canopylabs/orpheus-tts-0.1-finetune-prod",$e=((ke=t.orpheus)==null?void 0:ke.voice)||(__vite_import_meta_env__$2==null?void 0:__vite_import_meta_env__$2.VITE_ORPHEUS_VOICE)||"tara";return{endpoint:pe,apiKey:Ae,model:Ce,voice:$e}},Z=async pe=>{const{endpoint:Ae,apiKey:Ce,model:$e,voice:se}=we();if(!Ae)throw new Error("Missing Orpheus API endpoint (VITE_ORPHEUS_API_URL)");const ke=await fetch(Ae,{method:"POST",headers:{"Content-Type":"application/json",...Ce?{Authorization:`Bearer ${Ce}`}:{}},body:JSON.stringify({text:pe,model:$e,voice:se})});if(!ke.ok)throw new Error(`Orpheus TTS HTTP ${ke.status}`);const Ie=await ke.json(),de=Ie==null?void 0:Ie.audio;if(!de||typeof de!="string")throw new Error("Orpheus TTS: invalid audio payload");const qe=atob(de),Fe=qe.length,Ne=new Uint8Array(Fe);for(let Ge=0;Ge<Fe;Ge++)Ne[Ge]=qe.charCodeAt(Ge);return Ne.buffer},ue=reactExports.useCallback(async pe=>{try{_(!0),j.current=!1;const Ae=X(pe,1500);for(const Ce of Ae){if(j.current)break;const $e=await Z(Ce);if(j.current)break;o(!0),await W($e,24e3)}return o(!1),_(!1),j.current||e==null||e(),!j.current}catch(Ae){return o(!1),_(!1),n==null||n(Ae),!1}},[e,n]),Pe=reactExports.useCallback(async()=>{try{F();const pe=S.current,Ae=pe.createOscillator(),Ce=pe.createGain();Ce.gain.setValueAtTime(1e-4,pe.currentTime),Ce.gain.exponentialRampToValueAtTime(.4,pe.currentTime+.02),Ce.gain.exponentialRampToValueAtTime(1e-4,pe.currentTime+.35),Ae.type="sine",Ae.frequency.value=660,Ae.connect(Ce).connect(pe.destination),await new Promise($e=>{Ae.onended=()=>$e(),Ae.start(),Ae.stop(pe.currentTime+.36)})}catch{}},[]),Re=reactExports.useCallback(async pe=>{var se,ke;j.current=!1,C.current=!0;const Ae=pe==null?void 0:pe.trim(),$e=Ae&&(Ie=>{let de=Ie;return de=de.replace(/[\*_~`]+/g,""),de=de.replace(/:[a-zA-Z0-9_+-]+:/g," "),de=de.replace(/[\p{Emoji_Presentation}\p{Extended_Pictographic}]/gu," "),de=de.replace(/[.!?]{2,}/g,"."),de=de.replace(/\n\./g,`
`),de=de.replace(/\s{2,}/g," "),de=de.replace(/^[\s.,;:!?-]+|[\s.,;:!?-]+$/g,""),de.trim()})(Ae);if(!$e)return e==null||e(),!0;if(w==="browser"){if(await V($e))return!0;if(!(!p&&String((__vite_import_meta_env__$2==null?void 0:__vite_import_meta_env__$2.VITE_TTS_FALLBACK_ON_FAILURE)||"").toLowerCase()==="true"))return await Pe(),(se=t.onFailure)==null||se.call(t),e==null||e(),!1;const{key:qe,region:Fe}=Y(),{apiKey:Ne}=q();return qe&&Fe?(v("azure"),await z($e)):Ne?(v("gemini"),await ae($e)):(await Pe(),(ke=t.onFailure)==null||ke.call(t),e==null||e(),!1)}return w==="azure"?await z($e):w==="gemini"?await ae($e):w==="orpheus"?await ue($e):!1},[w,V,z,ae,ue,Pe,e,t]);return reactExports.useEffect(()=>()=>{L()},[L]),reactExports.useMemo(()=>({play:Re,stop:L,isPlaying:u,isLoading:h,engine:w,setEngine:p?(()=>{}):g,availableVoices:D,voicesLoaded:I}),[Re,L,u,h,w,D,I])}const __vite_import_meta_env__$1={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_OPENROUTER:"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",VITE_OPENROUTER_API_KEY:""};class GemmaLLM{constructor(){this.model=null,this.isLoaded=!1,this.isLoading=!1,this.useOpenRouter=!1,this.orModel="google/gemma-3n-e2b-it:free",this.orKey="",this.siteUrl="",this.siteTitle="",this.fallbackModels=["Xenova/LaMini-Flan-T5-248M","Xenova/distilgpt2","microsoft/DialoGPT-medium"],this.modelName=this.fallbackModels[0],this.maxTokens=1024,this.loadingProgress=0}async initialize(){if(this.isLoaded||this.isLoading)return this.model;console.log(" Initializing GemmaLLM...");try{let e={};try{e=__vite_import_meta_env__$1||{}}catch{e={}}if(this.orKey=e.VITE_OPENROUTER_API_KEY||window.OPENROUTER_API_KEY||"",this.orModel=e.VITE_OPENROUTER_MODEL||window.OPENROUTER_MODEL||"google/gemma-3n-e2b-it:free",this.siteUrl=e.VITE_SITE_URL||window.SITE_URL||"",this.siteTitle=e.VITE_SITE_TITLE||window.SITE_TITLE||"",this.orKey)return this.useOpenRouter=!0,this.isLoaded=!0,console.log(` OpenRouter configured, using remote model: ${this.orModel}`),window.dispatchEvent(new CustomEvent("llmReady",{detail:{model:"gemma",hemisphere:"openrouter"}})),null}catch(e){console.warn("OpenRouter env read failed, falling back to local model:",e)}this.isLoading=!0,console.log(" Loading Gemma compatible model...");for(const e of this.fallbackModels)try{return console.log(` Attempting to load: ${e}`),this.model=await pipeline$1("text-generation",e,{progress_callback:n=>{n.status==="downloading"&&(this.loadingProgress=Math.round(n.loaded/n.total*100),console.log(` Gemma loading: ${this.loadingProgress}%`),window.dispatchEvent(new CustomEvent("llmLoadingProgress",{detail:{model:"gemma",progress:this.loadingProgress}})))}}),this.modelName=e,this.isLoaded=!0,this.isLoading=!1,console.log(` Gemma loaded successfully: ${e}`),window.dispatchEvent(new CustomEvent("llmReady",{detail:{model:"gemma",hemisphere:"gemini"}})),this.model}catch(n){console.error(` Failed to load ${e}: ${n.message}`)}throw this.isLoading=!1,new Error("Failed to load any Gemma compatible model")}async chatOpenRouter(e,n=[]){var g,u,o;const i="https://openrouter.ai/api/v1/chat/completions",l={Authorization:`Bearer ${this.orKey}`,"Content-Type":"application/json"};this.siteUrl&&(l["HTTP-Referer"]=this.siteUrl),this.siteTitle&&(l["X-Title"]=this.siteTitle);const f=n.map(h=>({role:h.role==="model"?"assistant":h.role,content:h.content||h.text||""}));f.push({role:"user",content:e});const p={model:this.orModel,messages:f};let b=0;const w=3,v=2e3;for(;b<w;)try{const h=await fetch(i,{method:"POST",headers:l,body:JSON.stringify(p)});if(h.status===429){console.warn("Rate limit exceeded. Retrying..."),b++,await new Promise(T=>setTimeout(T,v*b));continue}if(!h.ok){const T=await h.text().catch(()=>"");throw new Error(`OpenRouter HTTP ${h.status}: ${T}`)}const _=await h.json(),S=((o=(u=(g=_==null?void 0:_.choices)==null?void 0:g[0])==null?void 0:u.message)==null?void 0:o.content)||"";return{text:S,model:this.orModel,tokens:S.split(/\s+/).length,hemisphere:"openrouter"}}catch(h){if(console.error(`Error during OpenRouter request: ${h.message}`),b++,b>=w)return console.warn("Max retries reached. Falling back to local model."),this.chatLocalFallback(e,n)}}async chatLocalFallback(e,n=[]){console.log("Using local fallback model.");const i=n.map(f=>`${f.role}: ${f.content}`).join(`
`)+`
User: ${e}
Assistant:`,l=await this.model(i,{max_length:this.maxTokens});return{text:l,model:this.modelName,tokens:l.split(/\s+/).length,hemisphere:"local"}}async generate(e,n={}){if(this.isLoaded||await this.initialize(),this.useOpenRouter)return{...await this.chatOpenRouter(e,[]),model:this.orModel};const i={max_new_tokens:n.maxTokens||100,temperature:n.temperature||.75,do_sample:!0,top_p:n.topP||.92,top_k:50,repetition_penalty:1.15,num_beams:1,early_stopping:!0,...n};try{console.log(" Gemma generating response (optimized for speed)...");const l=performance.now(),f=await this.model(e,i),p=performance.now(),b=Math.round(p-l),w=f[0].generated_text.replace(e,"").trim();return console.log(` Gemma response generated in ${b}ms`),{text:w,model:"gemma",tokens:w.split(" ").length,hemisphere:"gemini",responseTime:b}}catch(l){throw console.error(" Gemma generation failed:",l),l}}async chat(e,n=[]){if(this.isLoaded||await this.initialize(),this.useOpenRouter)try{return await this.chatOpenRouter(e,n)}catch(f){console.warn("OpenRouter chat failed, falling back to local model:",f)}let i="";const l=n.slice(-3);return l.length>0&&l.forEach(f=>{const p=f.role==="system"?"System":f.role==="user"?"User":"Assistant";i+=`${p}: ${f.content}

`}),i+=`User: ${e}

Assistant:`,await this.generate(i,{maxTokens:120,temperature:.8})}async agentOperation(e,n=""){let i=`Agent Operation Task

`;return n&&(i+=`Context: ${n}

`),i+=`Task: ${e}

Agent Response:`,await this.generate(i,{maxTokens:150})}async generateEcho(e,n){const i=`Generate an intelligent echo response for Agent Lee system.

User Input: ${e}
System State: ${JSON.stringify(n)}

Generate a helpful, contextual response that acknowledges the input and provides relevant information or next steps:`;return await this.generate(i,{maxTokens:100,temperature:.8})}async processWithContext(e,n){this.isLoaded||await this.initialize();const i=`${n}
${e}`;return console.log("Processing with context:",i),await this.model(i,{max_length:this.maxTokens})}getStatus(){return{model:"gemma",name:"Gemma 2B",isLoaded:this.isLoaded,isLoading:this.isLoading,progress:this.loadingProgress,hemisphere:"gemini",color:"#FF8C00",capabilities:["chat","agents","echo","summarization"],contextLength:this.maxTokens}}}const gemmaLLM=new GemmaLLM;window.gemmaLLM=gemmaLLM;window.GemmaLLM=GemmaLLM;function dispatchCallback(t,e){t&&t(e)}function reverseDictionary(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[n,e]))}function escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const Callable=class{constructor(){let t=function(...e){return t._call(...e)};return Object.setPrototypeOf(t,new.target.prototype)}_call(...t){throw Error("Must implement _call method in subclass")}};function isTypedArray$1(t){var e,n,i;return((i=(n=(e=t==null?void 0:t.prototype)==null?void 0:e.__proto__)==null?void 0:n.constructor)==null?void 0:i.name)==="TypedArray"}function isIntegralNumber(t){return Number.isInteger(t)||typeof t=="bigint"}function exists(t){return t!=null}function calculateDimensions(t){const e=[];let n=t;for(;Array.isArray(n);)e.push(n.length),n=n[0];return e}function pop(t,e,n=void 0){const i=t[e];if(i!==void 0)return delete t[e],i;if(n===void 0)throw Error(`Key ${e} does not exist in object.`);return n}function mergeArrays(...t){return Array.prototype.concat.apply([],t)}function product(...t){return t.reduce((e,n)=>e.flatMap(i=>n.map(l=>[i,l])))}function calculateReflectOffset(t,e){return Math.abs((t+e)%(2*e)-e)}const sharp={},ONNX_NODE=Object.freeze(Object.defineProperty({__proto__:null,default:sharp},Symbol.toStringTag,{value:"Module"}));var ortWeb_min$1={exports:{}};const backends={},backendsSortedByPriority=[],registerBackend=(t,e,n)=>{if(e&&typeof e.init=="function"&&typeof e.createSessionHandler=="function"){const i=backends[t];if(i===void 0)backends[t]={backend:e,priority:n};else{if(i.priority>n)return;if(i.priority===n&&i.backend!==e)throw new Error(`cannot register backend "${t}" using priority ${n}`)}if(n>=0){const l=backendsSortedByPriority.indexOf(t);l!==-1&&backendsSortedByPriority.splice(l,1);for(let f=0;f<backendsSortedByPriority.length;f++)if(backends[backendsSortedByPriority[f]].priority<=n){backendsSortedByPriority.splice(f,0,t);return}backendsSortedByPriority.push(t)}return}throw new TypeError("not a valid backend")},resolveBackend=async t=>{const e=t.length===0?backendsSortedByPriority:t,n=[];for(const i of e){const l=backends[i];if(l){if(l.initialized)return l.backend;if(l.aborted)continue;const f=!!l.initPromise;try{return f||(l.initPromise=l.backend.init()),await l.initPromise,l.initialized=!0,l.backend}catch(p){f||n.push({name:i,err:p}),l.aborted=!0}finally{delete l.initPromise}}}throw new Error(`no available backend found. ERR: ${n.map(i=>`[${i.name}] ${i.err}`).join(", ")}`)};class EnvImpl{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);this.logLevelInternal=e}}get logLevel(){return this.logLevelInternal}}const env$2=new EnvImpl,isBigInt64ArrayAvailable=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",isBigUint64ArrayAvailable=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function",NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);isBigInt64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64"));isBigUint64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64"));const calculateSize=t=>{let e=1;for(let n=0;n<t.length;n++){const i=t[n];if(typeof i!="number"||!Number.isSafeInteger(i))throw new TypeError(`dims[${n}] must be an integer, got: ${i}`);if(i<0)throw new RangeError(`dims[${n}] must be a non-negative integer, got: ${i}`);e*=i}return e};let Tensor$2=class ji{constructor(e,n,i){let l,f,p;if(typeof e=="string")if(l=e,p=i,e==="string"){if(!Array.isArray(n))throw new TypeError("A string tensor's data must be a string array.");f=n}else{const w=NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(e);if(w===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(n))f=w.from(n);else if(n instanceof w)f=n;else throw new TypeError(`A ${l} tensor's data must be type of ${w}`)}else if(p=n,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const w=typeof e[0];if(w==="string")l="string",f=e;else if(w==="boolean")l="bool",f=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${w}.`)}else{const w=NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(e.constructor);if(w===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);l=w,f=e}if(p===void 0)p=[f.length];else if(!Array.isArray(p))throw new TypeError("A tensor's dims must be a number array");const b=calculateSize(p);if(b!==f.length)throw new Error(`Tensor's size(${b}) does not match data length(${f.length}).`);this.dims=p,this.type=l,this.data=f,this.size=b}static bufferToTensor(e,n){if(e===void 0)throw new Error("Image buffer must be defined");if(n.height===void 0||n.width===void 0)throw new Error("Image height and width must be defined");const{height:i,width:l}=n,f=n.norm;let p,b;f===void 0||f.mean===void 0?p=255:p=f.mean,f===void 0||f.bias===void 0?b=0:b=f.bias;const w=n.bitmapFormat!==void 0?n.bitmapFormat:"RGBA",v=n.tensorFormat!==void 0&&n.tensorFormat!==void 0?n.tensorFormat:"RGB",g=i*l,u=v==="RGBA"?new Float32Array(g*4):new Float32Array(g*3);let o=4,h=0,_=1,S=2,T=3,O=0,j=g,C=g*2,D=-1;w==="RGB"&&(o=3,h=0,_=1,S=2,T=-1),v==="RGBA"?D=g*3:v==="RBG"?(O=0,C=g,j=g*2):v==="BGR"&&(C=0,j=g,O=g*2);for(let I=0;I<g;I++,h+=o,S+=o,_+=o,T+=o)u[O++]=(e[h]+b)/p,u[j++]=(e[_]+b)/p,u[C++]=(e[S]+b)/p,D!==-1&&T!==-1&&(u[D++]=(e[T]+b)/p);return v==="RGBA"?new ji("float32",u,[1,4,i,l]):new ji("float32",u,[1,3,i,l])}static async fromImage(e,n){const i=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,l=typeof ImageData<"u"&&e instanceof ImageData,f=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,p=typeof String<"u"&&(e instanceof String||typeof e=="string");let b,w={};if(i){const v=document.createElement("canvas"),g=v.getContext("2d");if(g!=null){let u=e.naturalHeight,o=e.naturalWidth;if(n!==void 0&&n.resizedHeight!==void 0&&n.resizedWidth!==void 0&&(u=n.resizedHeight,o=n.resizedWidth),n!==void 0){if(w=n,n.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(w.tensorFormat="RGBA",n.height!==void 0&&n.height!==u)throw new Error("Image input config height doesn't match HTMLImageElement height");if(w.height=u,n.width!==void 0&&n.width!==o)throw new Error("Image input config width doesn't match HTMLImageElement width");w.width=o}else w.tensorFormat="RGBA",w.height=u,w.width=o;v.width=o,v.height=u,g.drawImage(e,0,0,o,u),b=g.getImageData(0,0,o,u).data}else throw new Error("Can not access image data")}else if(l){const v="RGBA";let g,u;if(n!==void 0&&n.resizedWidth!==void 0&&n.resizedHeight!==void 0?(g=n.resizedHeight,u=n.resizedWidth):(g=e.height,u=e.width),n!==void 0){if(w=n,n.bitmapFormat!==void 0&&n.bitmapFormat!==v)throw new Error("Image input config format must be RGBA for ImageData");w.bitmapFormat="RGBA"}else w.bitmapFormat="RGBA";if(w.height=g,w.width=u,n!==void 0){const o=document.createElement("canvas");o.width=u,o.height=g;const h=o.getContext("2d");if(h!=null)h.putImageData(e,0,0),b=h.getImageData(0,0,u,g).data;else throw new Error("Can not access image data")}else b=e.data}else if(f){if(n===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(n.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const v=document.createElement("canvas").getContext("2d");if(v!=null){const g=e.height,u=e.width;if(v.drawImage(e,0,0,u,g),b=v.getImageData(0,0,u,g).data,n!==void 0){if(n.height!==void 0&&n.height!==g)throw new Error("Image input config height doesn't match ImageBitmap height");if(w.height=g,n.width!==void 0&&n.width!==u)throw new Error("Image input config width doesn't match ImageBitmap width");w.width=u}else w.height=g,w.width=u;return ji.bufferToTensor(b,w)}else throw new Error("Can not access image data")}else{if(p)return new Promise((v,g)=>{const u=document.createElement("canvas"),o=u.getContext("2d");if(!e||!o)return g();const h=new Image;h.crossOrigin="Anonymous",h.src=e,h.onload=()=>{u.width=h.width,u.height=h.height,o.drawImage(h,0,0,u.width,u.height);const _=o.getImageData(0,0,u.width,u.height);if(n!==void 0){if(n.height!==void 0&&n.height!==u.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(w.height=u.height,n.width!==void 0&&n.width!==u.width)throw new Error("Image input config width doesn't match ImageBitmap width");w.width=u.width}else w.height=u.height,w.width=u.width;v(ji.bufferToTensor(_.data,w))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(b!==void 0)return ji.bufferToTensor(b,w);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(e){var n,i;const l=document.createElement("canvas").getContext("2d");let f;if(l!=null){const p=this.dims[3],b=this.dims[2],w=this.dims[1],v=e!==void 0&&e.format!==void 0?e.format:"RGB",g=e!==void 0&&((n=e.norm)===null||n===void 0?void 0:n.mean)!==void 0?e.norm.mean:255,u=e!==void 0&&((i=e.norm)===null||i===void 0?void 0:i.bias)!==void 0?e.norm.bias:0,o=b*p;if(e!==void 0){if(e.height!==void 0&&e.height!==b)throw new Error("Image output config height doesn't match tensor height");if(e.width!==void 0&&e.width!==p)throw new Error("Image output config width doesn't match tensor width");if(e.format!==void 0&&w===4&&e.format!=="RGBA"||w===3&&e.format!=="RGB"&&e.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const h=4;let _=0,S=1,T=2,O=3,j=0,C=o,D=o*2,R=-1;v==="RGBA"?(j=0,C=o,D=o*2,R=o*3):v==="RGB"?(j=0,C=o,D=o*2):v==="RBG"&&(j=0,D=o,C=o*2),f=l.createImageData(p,b);for(let I=0;I<b*p;_+=h,S+=h,T+=h,O+=h,I++)f.data[_]=(this.data[j++]-u)*g,f.data[S]=(this.data[C++]-u)*g,f.data[T]=(this.data[D++]-u)*g,f.data[O]=R===-1?255:(this.data[R++]-u)*g}else throw new Error("Can not access image data");return f}reshape(e){return new ji(this.type,this.data,e)}};const Tensor$1=Tensor$2;let InferenceSession$2=class Vf{constructor(e){this.handler=e}async run(e,n,i){const l={};let f={};if(typeof e!="object"||e===null||e instanceof Tensor$1||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let p=!0;if(typeof n=="object"){if(n===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(n instanceof Tensor$1)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(n)){if(n.length===0)throw new TypeError("'fetches' cannot be an empty array.");p=!1;for(const v of n){if(typeof v!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(v)===-1)throw new RangeError(`'fetches' contains invalid output name: ${v}.`);l[v]=null}if(typeof i=="object"&&i!==null)f=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else{let v=!1;const g=Object.getOwnPropertyNames(n);for(const u of this.outputNames)if(g.indexOf(u)!==-1){const o=n[u];(o===null||o instanceof Tensor$1)&&(v=!0,p=!1,l[u]=o)}if(v){if(typeof i=="object"&&i!==null)f=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else f=n}}else if(typeof n<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const v of this.inputNames)if(typeof e[v]>"u")throw new Error(`input '${v}' is missing in 'feeds'.`);if(p)for(const v of this.outputNames)l[v]=null;const b=await this.handler.run(e,l,f),w={};for(const v in b)Object.hasOwnProperty.call(b,v)&&(w[v]=new Tensor$1(b[v].type,b[v].data,b[v].dims));return w}static async create(e,n,i,l){let f,p={};if(typeof e=="string"){if(f=e,typeof n=="object"&&n!==null)p=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(f=e,typeof n=="object"&&n!==null)p=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){const u=e;let o=0,h=e.byteLength;if(typeof n=="object"&&n!==null)p=n;else if(typeof n=="number"){if(o=n,!Number.isSafeInteger(o))throw new RangeError("'byteOffset' must be an integer.");if(o<0||o>=u.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${u.byteLength}).`);if(h=e.byteLength-o,typeof i=="number"){if(h=i,!Number.isSafeInteger(h))throw new RangeError("'byteLength' must be an integer.");if(h<=0||o+h>u.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${u.byteLength-o}].`);if(typeof l=="object"&&l!==null)p=l;else if(typeof l<"u")throw new TypeError("'options' must be an object.")}else if(typeof i<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof n<"u")throw new TypeError("'options' must be an object.");f=new Uint8Array(u,o,h)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const w=(p.executionProviders||[]).map(u=>typeof u=="string"?u:u.name),g=await(await resolveBackend(w)).createSessionHandler(f,p);return new Vf(g)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const InferenceSession$1=InferenceSession$2,lib=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:InferenceSession$1,Tensor:Tensor$1,env:env$2,registerBackend},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(lib);/*!
* ONNX Runtime Web v1.14.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/var hasRequiredOrtWeb_min;function requireOrtWeb_min(){return hasRequiredOrtWeb_min||(hasRequiredOrtWeb_min=1,(function(module,exports$1){(function(t,e){module.exports=e(require$$0)})(self,(__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(t,e,n)=>{var i,l=(i=(i=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(f){function p(){return ae.buffer!=Z&&qe(ae.buffer),ue}function b(){return ae.buffer!=Z&&qe(ae.buffer),Pe}function w(){return ae.buffer!=Z&&qe(ae.buffer),Re}function v(){return ae.buffer!=Z&&qe(ae.buffer),pe}function g(){return ae.buffer!=Z&&qe(ae.buffer),Ae}var u,o,h;f=f||{},u||(u=f!==void 0?f:{}),u.ready=new Promise((function(U,G){o=U,h=G}));var _,S,T,O,j,C,D=Object.assign({},u),R="./this.program",I=(U,G)=>{throw G},$=typeof window=="object",F=typeof importScripts=="function",L=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",V=u.ENVIRONMENT_IS_PTHREAD||!1,Y="";function Q(U){return u.locateFile?u.locateFile(U,Y):Y+U}if(L){let U;Y=F?n(908).dirname(Y)+"/":"//",C=()=>{j||(O=n(1384),j=n(908))},_=function(G,J){return C(),G=j.normalize(G),O.readFileSync(G,J?void 0:"utf8")},T=G=>((G=_(G,!0)).buffer||(G=new Uint8Array(G)),G),S=(G,J,ie)=>{C(),G=j.normalize(G),O.readFile(G,(function(me,ve){me?ie(me):J(ve.buffer)}))},1<process.argv.length&&(R=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(G){if(!(G instanceof Xt))throw G})),process.on("unhandledRejection",(function(G){throw G})),I=(G,J)=>{if(Nt())throw process.exitCode=G,J;J instanceof Xt||q("exiting due to exception: "+J),process.exit(G)},u.inspect=function(){return"[Emscripten Module object]"};try{U=n(9925)}catch(G){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),G}n.g.Worker=U.Worker}else($||F)&&(F?Y=self.location.href:typeof document<"u"&&document.currentScript&&(Y=document.currentScript.src),i&&(Y=i),Y=Y.indexOf("blob:")!==0?Y.substr(0,Y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",L||(_=U=>{var G=new XMLHttpRequest;return G.open("GET",U,!1),G.send(null),G.responseText},F&&(T=U=>{var G=new XMLHttpRequest;return G.open("GET",U,!1),G.responseType="arraybuffer",G.send(null),new Uint8Array(G.response)}),S=(U,G,J)=>{var ie=new XMLHttpRequest;ie.open("GET",U,!0),ie.responseType="arraybuffer",ie.onload=()=>{ie.status==200||ie.status==0&&ie.response?G(ie.response):J()},ie.onerror=J,ie.send(null)}));L&&typeof performance>"u"&&(n.g.performance=n(6953).performance);var ee=console.log.bind(console),X=console.warn.bind(console);L&&(C(),ee=U=>O.writeSync(1,U+`
`),X=U=>O.writeSync(2,U+`
`));var W,z=u.print||ee,q=u.printErr||X;Object.assign(u,D),D=null,u.thisProgram&&(R=u.thisProgram),u.quit&&(I=u.quit),u.wasmBinary&&(W=u.wasmBinary);var ce=u.noExitRuntime||!1;typeof WebAssembly!="object"&&We("no native wasm support detected");var ae,we,Z,ue,Pe,Re,pe,Ae,Ce=!1,$e=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function se(U,G,J){var ie=(G>>>=0)+J;for(J=G;U[J]&&!(J>=ie);)++J;if(16<J-G&&U.buffer&&$e)return $e.decode(U.buffer instanceof SharedArrayBuffer?U.slice(G,J):U.subarray(G,J));for(ie="";G<J;){var me=U[G++];if(128&me){var ve=63&U[G++];if((224&me)==192)ie+=String.fromCharCode((31&me)<<6|ve);else{var Be=63&U[G++];65536>(me=(240&me)==224?(15&me)<<12|ve<<6|Be:(7&me)<<18|ve<<12|Be<<6|63&U[G++])?ie+=String.fromCharCode(me):(me-=65536,ie+=String.fromCharCode(55296|me>>10,56320|1023&me))}}else ie+=String.fromCharCode(me)}return ie}function ke(U,G){return(U>>>=0)?se(b(),U,G):""}function Ie(U,G,J,ie){if(!(0<ie))return 0;var me=J>>>=0;ie=J+ie-1;for(var ve=0;ve<U.length;++ve){var Be=U.charCodeAt(ve);if(55296<=Be&&57343>=Be&&(Be=65536+((1023&Be)<<10)|1023&U.charCodeAt(++ve)),127>=Be){if(J>=ie)break;G[J++>>>0]=Be}else{if(2047>=Be){if(J+1>=ie)break;G[J++>>>0]=192|Be>>6}else{if(65535>=Be){if(J+2>=ie)break;G[J++>>>0]=224|Be>>12}else{if(J+3>=ie)break;G[J++>>>0]=240|Be>>18,G[J++>>>0]=128|Be>>12&63}G[J++>>>0]=128|Be>>6&63}G[J++>>>0]=128|63&Be}}return G[J>>>0]=0,J-me}function de(U){for(var G=0,J=0;J<U.length;++J){var ie=U.charCodeAt(J);127>=ie?G++:2047>=ie?G+=2:55296<=ie&&57343>=ie?(G+=4,++J):G+=3}return G}function qe(U){Z=U,u.HEAP8=ue=new Int8Array(U),u.HEAP16=new Int16Array(U),u.HEAP32=Re=new Int32Array(U),u.HEAPU8=Pe=new Uint8Array(U),u.HEAPU16=new Uint16Array(U),u.HEAPU32=pe=new Uint32Array(U),u.HEAPF32=new Float32Array(U),u.HEAPF64=Ae=new Float64Array(U)}V&&(Z=u.buffer);var Fe=u.INITIAL_MEMORY||16777216;if(V)ae=u.wasmMemory,Z=u.buffer;else if(u.wasmMemory)ae=u.wasmMemory;else if(!((ae=new WebAssembly.Memory({initial:Fe/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw q("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),L&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");ae&&(Z=ae.buffer),Fe=Z.byteLength,qe(Z);var Ne,Ge=[],Ue=[],Ze=[],yt=[];function Nt(){return ce||!1}function Ut(){var U=u.preRun.shift();Ge.unshift(U)}var ht,Ct=0,Ot=null;function We(U){throw V?postMessage({cmd:"onAbort",arg:U}):u.onAbort&&u.onAbort(U),q(U="Aborted("+U+")"),Ce=!0,U=new WebAssembly.RuntimeError(U+". Build with -sASSERTIONS for more info."),h(U),U}function Yt(){return ht.startsWith("data:application/octet-stream;base64,")}function tr(){var U=ht;try{if(U==ht&&W)return new Uint8Array(W);if(T)return T(U);throw"both async and sync fetching of the wasm failed"}catch(G){We(G)}}ht="ort-wasm-threaded.wasm",Yt()||(ht=Q(ht));var It={};function Xt(U){this.name="ExitStatus",this.message="Program terminated with exit("+U+")",this.status=U}function yr(U){(U=He.Vb[U])||We(),He.mc(U)}function en(U){var G=He.Cc();if(!G)return 6;He.ac.push(G),He.Vb[U.Ub]=G,G.Ub=U.Ub;var J={cmd:"run",start_routine:U.Ic,arg:U.zc,pthread_ptr:U.Ub};return G.$b=()=>{J.time=performance.now(),G.postMessage(J,U.Nc)},G.loaded&&(G.$b(),delete G.$b),0}function rr(U){if(V)return ze(1,1,U);Nt()||(He.oc(),u.onExit&&u.onExit(U),Ce=!0),I(U,new Xt(U))}function Ar(U,G){if(!G&&V)throw Mi(U),"unwind";Nt()||V||(ki(),lr(Ze),mr(0),Ci[1].length&&Ri(1,10),Ci[2].length&&Ri(2,10),He.oc()),rr(U)}var He={Yb:[],ac:[],qc:[],Vb:{},fc:function(){V&&He.Ec()},Pc:function(){},Ec:function(){He.receiveObjectTransfer=He.Gc,He.threadInitTLS=He.pc,He.setExitStatus=He.nc,ce=!1},nc:function(){},oc:function(){for(var U of Object.values(He.Vb))He.mc(U);for(U of He.Yb)U.terminate();He.Yb=[]},mc:function(U){var G=U.Ub;delete He.Vb[G],He.Yb.push(U),He.ac.splice(He.ac.indexOf(U),1),U.Ub=0,Di(G)},Gc:function(){},pc:function(){He.qc.forEach((U=>U()))},Fc:function(U,G){U.onmessage=J=>{var ie=(J=J.data).cmd;if(U.Ub&&(He.Bc=U.Ub),J.targetThread&&J.targetThread!=di()){var me=He.Vb[J.Qc];me?me.postMessage(J,J.transferList):q('Internal error! Worker sent a message "'+ie+'" to target pthread '+J.targetThread+", but that thread no longer exists!")}else ie==="processProxyingQueue"?le(J.queue):ie==="spawnThread"?en(J):ie==="cleanupThread"?yr(J.thread):ie==="killThread"?(J=J.thread,ie=He.Vb[J],delete He.Vb[J],ie.terminate(),Di(J),He.ac.splice(He.ac.indexOf(ie),1),ie.Ub=0):ie==="cancelThread"?He.Vb[J.thread].postMessage({cmd:"cancel"}):ie==="loaded"?(U.loaded=!0,G&&G(U),U.$b&&(U.$b(),delete U.$b)):ie==="print"?z("Thread "+J.threadId+": "+J.text):ie==="printErr"?q("Thread "+J.threadId+": "+J.text):ie==="alert"?alert("Thread "+J.threadId+": "+J.text):J.target==="setimmediate"?U.postMessage(J):ie==="onAbort"?u.onAbort&&u.onAbort(J.arg):ie&&q("worker sent an unknown command "+ie);He.Bc=void 0},U.onerror=J=>{throw q("worker sent an error! "+J.filename+":"+J.lineno+": "+J.message),J},L&&(U.on("message",(function(J){U.onmessage({data:J})})),U.on("error",(function(J){U.onerror(J)})),U.on("detachedExit",(function(){}))),U.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||i,wasmMemory:ae,wasmModule:we})},yc:function(){var U=Q("ort-wasm-threaded.worker.js");He.Yb.push(new Worker(U))},Cc:function(){return He.Yb.length==0&&(He.yc(),He.Fc(He.Yb[0])),He.Yb.pop()}};function lr(U){for(;0<U.length;)U.shift()(u)}function or(U){var G=st();return U=U(),ot(G),U}function Mi(U){if(V)return ze(2,0,U);try{Ar(U)}catch(G){G instanceof Xt||G=="unwind"||I(1,G)}}u.PThread=He,u.establishStackSpace=function(){var U=di(),G=w()[U+44>>2>>>0];U=w()[U+48>>2>>>0],xa(G,G-U),ot(G)};var Kr=[];function wt(U){var G=Kr[U];return G||(U>=Kr.length&&(Kr.length=U+1),Kr[U]=G=Ne.get(U)),G}u.invokeEntryPoint=function(U,G){U=wt(U)(G),Nt()?He.nc(U):hn(U)};var Nr,tn,Ir=[],tt=0,et=0;function rt(U){this.Zb=U,this.Sb=U-24,this.xc=function(G){v()[this.Sb+4>>2>>>0]=G},this.bc=function(){return v()[this.Sb+4>>2>>>0]},this.wc=function(G){v()[this.Sb+8>>2>>>0]=G},this.Dc=function(){return v()[this.Sb+8>>2>>>0]},this.rc=function(){w()[this.Sb>>2>>>0]=0},this.hc=function(G){G=G?1:0,p()[this.Sb+12>>0>>>0]=G},this.uc=function(){return p()[this.Sb+12>>0>>>0]!=0},this.ic=function(G){G=G?1:0,p()[this.Sb+13>>0>>>0]=G},this.kc=function(){return p()[this.Sb+13>>0>>>0]!=0},this.fc=function(G,J){this.cc(0),this.xc(G),this.wc(J),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(w(),this.Sb>>2,1)},this.Hc=function(){return Atomics.sub(w(),this.Sb>>2,1)===1},this.cc=function(G){v()[this.Sb+16>>2>>>0]=G},this.tc=function(){return v()[this.Sb+16>>2>>>0]},this.vc=function(){if(fi(this.bc()))return v()[this.Zb>>2>>>0];var G=this.tc();return G!==0?G:this.Zb}}function ci(U){return uo(new rt(U).Sb)}function rn(U,G,J,ie){return V?ze(3,1,U,G,J,ie):cn(U,G,J,ie)}function cn(U,G,J,ie){if(typeof SharedArrayBuffer>"u")return q("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var me=[];return V&&me.length===0?rn(U,G,J,ie):(U={Ic:J,Ub:U,zc:ie,Nc:me},V?(U.Oc="spawnThread",postMessage(U,me),0):en(U))}function Yr(U,G,J){return V?ze(4,1,U,G,J):0}function ui(U,G){if(V)return ze(5,1,U,G)}function kn(U,G){if(V)return ze(6,1,U,G)}function Dn(U,G,J){if(V)return ze(7,1,U,G,J)}function Nn(U,G,J){return V?ze(8,1,U,G,J):0}function un(U,G){if(V)return ze(9,1,U,G)}function dn(U,G,J){if(V)return ze(10,1,U,G,J)}function In(U,G,J,ie){if(V)return ze(11,1,U,G,J,ie)}function $n(U,G,J,ie){if(V)return ze(12,1,U,G,J,ie)}function br(U,G,J,ie){if(V)return ze(13,1,U,G,J,ie)}function qt(U){if(V)return ze(14,1,U)}function K(U,G){if(V)return ze(15,1,U,G)}function te(U,G,J){if(V)return ze(16,1,U,G,J)}function le(U){Atomics.store(w(),U>>2,1),di()&&ba(U),Atomics.compareExchange(w(),U>>2,1,0)}function he(U){return v()[U>>>2]+4294967296*w()[U+4>>>2]}function xe(U,G,J,ie,me,ve){return V?ze(17,1,U,G,J,ie,me,ve):-52}function Te(U,G,J,ie,me,ve){if(V)return ze(18,1,U,G,J,ie,me,ve)}function Le(U){var G=de(U)+1,J=Ln(G);return J&&Ie(U,p(),J,G),J}function Ke(U,G,J){function ie(at){return(at=at.toTimeString().match(/\(([A-Za-z ]+)\)$/))?at[1]:"GMT"}if(V)return ze(19,1,U,G,J);var me=new Date().getFullYear(),ve=new Date(me,0,1),Be=new Date(me,6,1);me=ve.getTimezoneOffset();var Xe=Be.getTimezoneOffset(),Je=Math.max(me,Xe);w()[U>>2>>>0]=60*Je,w()[G>>2>>>0]=+(me!=Xe),U=ie(ve),G=ie(Be),U=Le(U),G=Le(G),Xe<me?(v()[J>>2>>>0]=U,v()[J+4>>2>>>0]=G):(v()[J>>2>>>0]=G,v()[J+4>>2>>>0]=U)}function ze(U,G){var J=arguments.length-2,ie=arguments;return or((()=>{for(var me=va(8*J),ve=me>>3,Be=0;Be<J;Be++){var Xe=ie[2+Be];g()[ve+Be>>>0]=Xe}return pn(U,J,me,G)}))}u.executeNotifiedProxyingQueue=le,tn=L?()=>{var U=process.hrtime();return 1e3*U[0]+U[1]/1e6}:V?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var it,vt=[],Bt={};function pt(){if(!it){var U,G={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:R||"./this.program"};for(U in Bt)Bt[U]===void 0?delete G[U]:G[U]=Bt[U];var J=[];for(U in G)J.push(U+"="+G[U]);it=J}return it}function Ee(U,G){if(V)return ze(20,1,U,G);var J=0;return pt().forEach((function(ie,me){var ve=G+J;for(me=v()[U+4*me>>2>>>0]=ve,ve=0;ve<ie.length;++ve)p()[me++>>0>>>0]=ie.charCodeAt(ve);p()[me>>0>>>0]=0,J+=ie.length+1})),0}function dt(U,G){if(V)return ze(21,1,U,G);var J=pt();v()[U>>2>>>0]=J.length;var ie=0;return J.forEach((function(me){ie+=me.length+1})),v()[G>>2>>>0]=ie,0}function Et(U){return V?ze(22,1,U):52}function nr(U,G,J,ie){return V?ze(23,1,U,G,J,ie):52}function Xr(U,G,J,ie,me){return V?ze(24,1,U,G,J,ie,me):70}var Ci=[null,[],[]];function Ri(U,G){var J=Ci[U];G===0||G===10?((U===1?z:q)(se(J,0)),J.length=0):J.push(G)}function co(U,G,J,ie){if(V)return ze(25,1,U,G,J,ie);for(var me=0,ve=0;ve<J;ve++){var Be=v()[G>>2>>>0],Xe=v()[G+4>>2>>>0];G+=8;for(var Je=0;Je<Xe;Je++)Ri(U,b()[Be+Je>>>0]);me+=Xe}return v()[ie>>2>>>0]=me,0}var ir=0;function fn(U){return U%4==0&&(U%100!=0||U%400==0)}var $r=[31,29,31,30,31,30,31,31,30,31,30,31],hr=[31,28,31,30,31,30,31,31,30,31,30,31];function ma(U,G,J,ie){function me(Se,ft,Pt){for(Se=typeof Se=="number"?Se.toString():Se||"";Se.length<ft;)Se=Pt[0]+Se;return Se}function ve(Se,ft){return me(Se,ft,"0")}function Be(Se,ft){function Pt(yn){return 0>yn?-1:0<yn?1:0}var vr;return(vr=Pt(Se.getFullYear()-ft.getFullYear()))===0&&(vr=Pt(Se.getMonth()-ft.getMonth()))===0&&(vr=Pt(Se.getDate()-ft.getDate())),vr}function Xe(Se){switch(Se.getDay()){case 0:return new Date(Se.getFullYear()-1,11,29);case 1:return Se;case 2:return new Date(Se.getFullYear(),0,3);case 3:return new Date(Se.getFullYear(),0,2);case 4:return new Date(Se.getFullYear(),0,1);case 5:return new Date(Se.getFullYear()-1,11,31);case 6:return new Date(Se.getFullYear()-1,11,30)}}function Je(Se){var ft=Se.Wb;for(Se=new Date(new Date(Se.Xb+1900,0,1).getTime());0<ft;){var Pt=Se.getMonth(),vr=(fn(Se.getFullYear())?$r:hr)[Pt];if(!(ft>vr-Se.getDate())){Se.setDate(Se.getDate()+ft);break}ft-=vr-Se.getDate()+1,Se.setDate(1),11>Pt?Se.setMonth(Pt+1):(Se.setMonth(0),Se.setFullYear(Se.getFullYear()+1))}return Pt=new Date(Se.getFullYear()+1,0,4),ft=Xe(new Date(Se.getFullYear(),0,4)),Pt=Xe(Pt),0>=Be(ft,Se)?0>=Be(Pt,Se)?Se.getFullYear()+1:Se.getFullYear():Se.getFullYear()-1}var at=w()[ie+40>>2>>>0];for(var $t in ie={Lc:w()[ie>>2>>>0],Kc:w()[ie+4>>2>>>0],dc:w()[ie+8>>2>>>0],jc:w()[ie+12>>2>>>0],ec:w()[ie+16>>2>>>0],Xb:w()[ie+20>>2>>>0],Tb:w()[ie+24>>2>>>0],Wb:w()[ie+28>>2>>>0],Rc:w()[ie+32>>2>>>0],Jc:w()[ie+36>>2>>>0],Mc:at?ke(at):""},J=ke(J),at={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})J=J.replace(new RegExp($t,"g"),at[$t]);var pr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),xr="January February March April May June July August September October November December".split(" ");for($t in at={"%a":function(Se){return pr[Se.Tb].substring(0,3)},"%A":function(Se){return pr[Se.Tb]},"%b":function(Se){return xr[Se.ec].substring(0,3)},"%B":function(Se){return xr[Se.ec]},"%C":function(Se){return ve((Se.Xb+1900)/100|0,2)},"%d":function(Se){return ve(Se.jc,2)},"%e":function(Se){return me(Se.jc,2," ")},"%g":function(Se){return Je(Se).toString().substring(2)},"%G":function(Se){return Je(Se)},"%H":function(Se){return ve(Se.dc,2)},"%I":function(Se){return(Se=Se.dc)==0?Se=12:12<Se&&(Se-=12),ve(Se,2)},"%j":function(Se){for(var ft=0,Pt=0;Pt<=Se.ec-1;ft+=(fn(Se.Xb+1900)?$r:hr)[Pt++]);return ve(Se.jc+ft,3)},"%m":function(Se){return ve(Se.ec+1,2)},"%M":function(Se){return ve(Se.Kc,2)},"%n":function(){return`
`},"%p":function(Se){return 0<=Se.dc&&12>Se.dc?"AM":"PM"},"%S":function(Se){return ve(Se.Lc,2)},"%t":function(){return"	"},"%u":function(Se){return Se.Tb||7},"%U":function(Se){return ve(Math.floor((Se.Wb+7-Se.Tb)/7),2)},"%V":function(Se){var ft=Math.floor((Se.Wb+7-(Se.Tb+6)%7)/7);if(2>=(Se.Tb+371-Se.Wb-2)%7&&ft++,ft)ft==53&&((Pt=(Se.Tb+371-Se.Wb)%7)==4||Pt==3&&fn(Se.Xb)||(ft=1));else{ft=52;var Pt=(Se.Tb+7-Se.Wb-1)%7;(Pt==4||Pt==5&&fn(Se.Xb%400-1))&&ft++}return ve(ft,2)},"%w":function(Se){return Se.Tb},"%W":function(Se){return ve(Math.floor((Se.Wb+7-(Se.Tb+6)%7)/7),2)},"%y":function(Se){return(Se.Xb+1900).toString().substring(2)},"%Y":function(Se){return Se.Xb+1900},"%z":function(Se){var ft=0<=(Se=Se.Jc);return Se=Math.abs(Se)/60,(ft?"+":"-")+("0000"+(Se/60*100+Se%60)).slice(-4)},"%Z":function(Se){return Se.Mc},"%%":function(){return"%"}},J=J.replace(/%%/g,"\0\0"),at)J.includes($t)&&(J=J.replace(new RegExp($t,"g"),at[$t](ie)));return $t=(function(Se){var ft=Array(de(Se)+1);return Ie(Se,ft,0,ft.length),ft})(J=J.replace(/\0\0/g,"%")),$t.length>G?0:((function(Se,ft){p().set(Se,ft>>>0)})($t,U),$t.length-1)}He.fc();var gs=[null,rr,Mi,rn,Yr,ui,kn,Dn,Nn,un,dn,In,$n,br,qt,K,te,xe,Te,Ke,Ee,dt,Et,nr,Xr,co],ga={b:function(U){return Ln(U+24)+24},n:function(U){return(U=new rt(U)).uc()||(U.hc(!0),tt--),U.ic(!1),Ir.push(U),U.sc(),U.vc()},ma:function(U){throw q("Unexpected exception thrown, this is not properly supported - aborting"),Ce=!0,U},x:function(){ut(0);var U=Ir.pop();if(U.Hc()&&!U.kc()){var G=U.Dc();G&&wt(G)(U.Zb),ci(U.Zb)}et=0},e:function(){var U=et;if(!U)return ir=0;var G=new rt(U);G.cc(U);var J=G.bc();if(!J)return ir=0,U;for(var ie=Array.prototype.slice.call(arguments),me=0;me<ie.length;me++){var ve=ie[me];if(ve===0||ve===J)break;if(Ni(ve,J,G.Sb+16))return ir=ve,U}return ir=J,U},l:function(){var U=et;if(!U)return ir=0;var G=new rt(U);G.cc(U);var J=G.bc();if(!J)return ir=0,U;for(var ie=Array.prototype.slice.call(arguments),me=0;me<ie.length;me++){var ve=ie[me];if(ve===0||ve===J)break;if(Ni(ve,J,G.Sb+16))return ir=ve,U}return ir=J,U},h:function(){var U=et;if(!U)return ir=0;var G=new rt(U);G.cc(U);var J=G.bc();if(!J)return ir=0,U;for(var ie=Array.prototype.slice.call(arguments),me=0;me<ie.length;me++){var ve=ie[me];if(ve===0||ve===J)break;if(Ni(ve,J,G.Sb+16))return ir=ve,U}return ir=J,U},t:ci,M:function(){var U=Ir.pop();U||We("no exception to throw");var G=U.Zb;throw U.kc()||(Ir.push(U),U.ic(!0),U.hc(!1),tt++),et=G,G},c:function(U,G,J){throw new rt(U).fc(G,J),et=U,tt++,U},pa:function(){return tt},Fa:function(U){ya(U,!F,1,!$),He.pc()},T:function(U){V?postMessage({cmd:"cleanupThread",thread:U}):yr(U)},xa:cn,j:function(U){throw et||(et=U),U},H:Yr,Ma:ui,ua:kn,wa:Dn,oa:Nn,Ka:un,Ca:dn,Ja:In,V:$n,va:br,sa:qt,La:K,ta:te,Ta:function(){},X:function(){We("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){We("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(U,G,J,ie){if(U==G)setTimeout((()=>le(ie)));else if(V)postMessage({targetThread:U,cmd:"processProxyingQueue",queue:ie});else{if(!(U=He.Vb[U]))return;U.postMessage({cmd:"processProxyingQueue",queue:ie})}return 1},Ea:function(){return-1},Pa:function(U,G){U=new Date(1e3*he(U)),w()[G>>2>>>0]=U.getUTCSeconds(),w()[G+4>>2>>>0]=U.getUTCMinutes(),w()[G+8>>2>>>0]=U.getUTCHours(),w()[G+12>>2>>>0]=U.getUTCDate(),w()[G+16>>2>>>0]=U.getUTCMonth(),w()[G+20>>2>>>0]=U.getUTCFullYear()-1900,w()[G+24>>2>>>0]=U.getUTCDay(),U=(U.getTime()-Date.UTC(U.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,w()[G+28>>2>>>0]=U},Qa:function(U,G){U=new Date(1e3*he(U)),w()[G>>2>>>0]=U.getSeconds(),w()[G+4>>2>>>0]=U.getMinutes(),w()[G+8>>2>>>0]=U.getHours(),w()[G+12>>2>>>0]=U.getDate(),w()[G+16>>2>>>0]=U.getMonth(),w()[G+20>>2>>>0]=U.getFullYear()-1900,w()[G+24>>2>>>0]=U.getDay();var J=new Date(U.getFullYear(),0,1),ie=(U.getTime()-J.getTime())/864e5|0;w()[G+28>>2>>>0]=ie,w()[G+36>>2>>>0]=-60*U.getTimezoneOffset(),ie=new Date(U.getFullYear(),6,1).getTimezoneOffset(),U=0|(ie!=(J=J.getTimezoneOffset())&&U.getTimezoneOffset()==Math.min(J,ie)),w()[G+32>>2>>>0]=U},Ra:function(U){var G=new Date(w()[U+20>>2>>>0]+1900,w()[U+16>>2>>>0],w()[U+12>>2>>>0],w()[U+8>>2>>>0],w()[U+4>>2>>>0],w()[U>>2>>>0],0),J=w()[U+32>>2>>>0],ie=G.getTimezoneOffset(),me=new Date(G.getFullYear(),0,1),ve=new Date(G.getFullYear(),6,1).getTimezoneOffset(),Be=me.getTimezoneOffset(),Xe=Math.min(Be,ve);return 0>J?w()[U+32>>2>>>0]=+(ve!=Be&&Xe==ie):0<J!=(Xe==ie)&&(ve=Math.max(Be,ve),G.setTime(G.getTime()+6e4*((0<J?Xe:ve)-ie))),w()[U+24>>2>>>0]=G.getDay(),J=(G.getTime()-me.getTime())/864e5|0,w()[U+28>>2>>>0]=J,w()[U>>2>>>0]=G.getSeconds(),w()[U+4>>2>>>0]=G.getMinutes(),w()[U+8>>2>>>0]=G.getHours(),w()[U+12>>2>>>0]=G.getDate(),w()[U+16>>2>>>0]=G.getMonth(),G.getTime()/1e3|0},Aa:xe,Ba:Te,Sa:function U(G,J,ie){U.Ac||(U.Ac=!0,Ke(G,J,ie))},y:function(){We("")},U:function(){if(!L&&!F){var U="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";Nr||(Nr={}),Nr[U]||(Nr[U]=1,L&&(U="warning: "+U),q(U))}},ra:function(){return 4294901760},B:tn,Ia:function(U,G,J){b().copyWithin(U>>>0,G>>>0,G+J>>>0)},F:function(){return L?n(3993).cpus().length:navigator.hardwareConcurrency},Da:function(U,G,J){vt.length=G,J>>=3;for(var ie=0;ie<G;ie++)vt[ie]=g()[J+ie>>>0];return(0>U?It[-U-1]:gs[U]).apply(null,vt)},qa:function(U){var G=b().length;if((U>>>=0)<=G||4294901760<U)return!1;for(var J=1;4>=J;J*=2){var ie=G*(1+.2/J);ie=Math.min(ie,U+100663296);var me=Math;ie=Math.max(U,ie),me=me.min.call(me,4294901760,ie+(65536-ie%65536)%65536);e:{try{ae.grow(me-Z.byteLength+65535>>>16),qe(ae.buffer);var ve=1;break e}catch{}ve=void 0}if(ve)return!0}return!1},Na:function(){throw"unwind"},Ga:Ee,Ha:dt,J:Ar,I:Et,S:nr,ga:Xr,R:co,d:function(){return ir},na:function U(G,J){U.lc||(U.lc=(function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var me=new Uint8Array(1);return()=>(crypto.getRandomValues(me),me[0])}if(L)try{var ve=n(Object((function(){var Be=new Error("Cannot find module 'crypto'");throw Be.code="MODULE_NOT_FOUND",Be})()));return()=>ve.randomBytes(1)[0]}catch{}return()=>We("randomDevice")})());for(var ie=0;ie<J;ie++)p()[G+ie>>0>>>0]=U.lc();return 0},ia:function(U,G,J){var ie=st();try{return wt(U)(G,J)}catch(me){if(ot(ie),me!==me+0)throw me;ut(1,0)}},ja:function(U,G,J){var ie=st();try{return wt(U)(G,J)}catch(me){if(ot(ie),me!==me+0)throw me;ut(1,0)}},K:function(U){var G=st();try{return wt(U)()}catch(J){if(ot(G),J!==J+0)throw J;ut(1,0)}},f:function(U,G){var J=st();try{return wt(U)(G)}catch(ie){if(ot(J),ie!==ie+0)throw ie;ut(1,0)}},P:function(U,G,J){var ie=st();try{return wt(U)(G,J)}catch(me){if(ot(ie),me!==me+0)throw me;ut(1,0)}},Q:function(U,G,J){var ie=st();try{return wt(U)(G,J)}catch(me){if(ot(ie),me!==me+0)throw me;ut(1,0)}},k:function(U,G,J){var ie=st();try{return wt(U)(G,J)}catch(me){if(ot(ie),me!==me+0)throw me;ut(1,0)}},p:function(U,G,J,ie){var me=st();try{return wt(U)(G,J,ie)}catch(ve){if(ot(me),ve!==ve+0)throw ve;ut(1,0)}},q:function(U,G,J,ie,me){var ve=st();try{return wt(U)(G,J,ie,me)}catch(Be){if(ot(ve),Be!==Be+0)throw Be;ut(1,0)}},N:function(U,G,J,ie,me,ve){var Be=st();try{return wt(U)(G,J,ie,me,ve)}catch(Xe){if(ot(Be),Xe!==Xe+0)throw Xe;ut(1,0)}},s:function(U,G,J,ie,me,ve){var Be=st();try{return wt(U)(G,J,ie,me,ve)}catch(Xe){if(ot(Be),Xe!==Xe+0)throw Xe;ut(1,0)}},w:function(U,G,J,ie,me,ve,Be){var Xe=st();try{return wt(U)(G,J,ie,me,ve,Be)}catch(Je){if(ot(Xe),Je!==Je+0)throw Je;ut(1,0)}},L:function(U,G,J,ie,me,ve,Be,Xe){var Je=st();try{return wt(U)(G,J,ie,me,ve,Be,Xe)}catch(at){if(ot(Je),at!==at+0)throw at;ut(1,0)}},E:function(U,G,J,ie,me,ve,Be,Xe,Je,at,$t,pr){var xr=st();try{return wt(U)(G,J,ie,me,ve,Be,Xe,Je,at,$t,pr)}catch(Se){if(ot(xr),Se!==Se+0)throw Se;ut(1,0)}},aa:function(U,G,J,ie,me,ve,Be,Xe){var Je=st();try{return Fn(U,G,J,ie,me,ve,Be,Xe)}catch(at){if(ot(Je),at!==at+0)throw at;ut(1,0)}},_:function(U,G,J,ie,me,ve,Be){var Xe=st();try{return Ii(U,G,J,ie,me,ve,Be)}catch(Je){if(ot(Xe),Je!==Je+0)throw Je;ut(1,0)}},Z:function(U,G,J,ie,me){var ve=st();try{return Br(U,G,J,ie,me)}catch(Be){if(ot(ve),Be!==Be+0)throw Be;ut(1,0)}},ca:function(U,G,J,ie){var me=st();try{return Li(U,G,J,ie)}catch(ve){if(ot(me),ve!==ve+0)throw ve;ut(1,0)}},$:function(U){var G=st();try{return Lr(U)}catch(J){if(ot(G),J!==J+0)throw J;ut(1,0)}},ba:function(U,G){var J=st();try{return wa(U,G)}catch(ie){if(ot(J),ie!==ie+0)throw ie;ut(1,0)}},Y:function(U,G,J){var ie=st();try{return $i(U,G,J)}catch(me){if(ot(ie),me!==me+0)throw me;ut(1,0)}},g:function(U){var G=st();try{wt(U)()}catch(J){if(ot(G),J!==J+0)throw J;ut(1,0)}},r:function(U,G){var J=st();try{wt(U)(G)}catch(ie){if(ot(J),ie!==ie+0)throw ie;ut(1,0)}},i:function(U,G,J){var ie=st();try{wt(U)(G,J)}catch(me){if(ot(ie),me!==me+0)throw me;ut(1,0)}},ha:function(U,G,J,ie){var me=st();try{wt(U)(G,J,ie)}catch(ve){if(ot(me),ve!==ve+0)throw ve;ut(1,0)}},m:function(U,G,J,ie){var me=st();try{wt(U)(G,J,ie)}catch(ve){if(ot(me),ve!==ve+0)throw ve;ut(1,0)}},v:function(U,G,J,ie,me){var ve=st();try{wt(U)(G,J,ie,me)}catch(Be){if(ot(ve),Be!==Be+0)throw Be;ut(1,0)}},u:function(U,G,J,ie,me,ve){var Be=st();try{wt(U)(G,J,ie,me,ve)}catch(Xe){if(ot(Be),Xe!==Xe+0)throw Xe;ut(1,0)}},O:function(U,G,J,ie,me,ve,Be){var Xe=st();try{wt(U)(G,J,ie,me,ve,Be)}catch(Je){if(ot(Xe),Je!==Je+0)throw Je;ut(1,0)}},A:function(U,G,J,ie,me,ve,Be,Xe){var Je=st();try{wt(U)(G,J,ie,me,ve,Be,Xe)}catch(at){if(ot(Je),at!==at+0)throw at;ut(1,0)}},ka:function(U,G,J,ie,me,ve,Be,Xe,Je){var at=st();try{wt(U)(G,J,ie,me,ve,Be,Xe,Je)}catch($t){if(ot(at),$t!==$t+0)throw $t;ut(1,0)}},C:function(U,G,J,ie,me,ve,Be,Xe,Je,at,$t){var pr=st();try{wt(U)(G,J,ie,me,ve,Be,Xe,Je,at,$t)}catch(xr){if(ot(pr),xr!==xr+0)throw xr;ut(1,0)}},D:function(U,G,J,ie,me,ve,Be,Xe,Je,at,$t,pr,xr,Se,ft,Pt){var vr=st();try{wt(U)(G,J,ie,me,ve,Be,Xe,Je,at,$t,pr,xr,Se,ft,Pt)}catch(yn){if(ot(vr),yn!==yn+0)throw yn;ut(1,0)}},fa:function(U,G,J,ie,me,ve,Be,Xe){var Je=st();try{mn(U,G,J,ie,me,ve,Be,Xe)}catch(at){if(ot(Je),at!==at+0)throw at;ut(1,0)}},da:function(U,G,J,ie,me,ve,Be,Xe,Je,at,$t,pr){var xr=st();try{_a(U,G,J,ie,me,ve,Be,Xe,Je,at,$t,pr)}catch(Se){if(ot(xr),Se!==Se+0)throw Se;ut(1,0)}},ea:function(U,G,J,ie,me,ve){var Be=st();try{gn(U,G,J,ie,me,ve)}catch(Xe){if(ot(Be),Xe!==Xe+0)throw Xe;ut(1,0)}},o:function(U){return U},a:ae||u.wasmMemory,G:function(U){ir=U},la:ma,z:function(U,G,J,ie){return ma(U,G,J,ie)}};(function(){function U(me,ve){u.asm=me.exports,He.qc.push(u.asm.sb),Ne=u.asm.ub,Ue.unshift(u.asm.Va),we=ve,V||(Ct--,u.monitorRunDependencies&&u.monitorRunDependencies(Ct),Ct==0&&Ot&&(me=Ot,Ot=null,me()))}function G(me){U(me.instance,me.module)}function J(me){return(function(){if(!W&&($||F)){if(typeof fetch=="function"&&!ht.startsWith("file://"))return fetch(ht,{credentials:"same-origin"}).then((function(ve){if(!ve.ok)throw"failed to load wasm binary file at '"+ht+"'";return ve.arrayBuffer()})).catch((function(){return tr()}));if(S)return new Promise((function(ve,Be){S(ht,(function(Xe){ve(new Uint8Array(Xe))}),Be)}))}return Promise.resolve().then((function(){return tr()}))})().then((function(ve){return WebAssembly.instantiate(ve,ie)})).then((function(ve){return ve})).then(me,(function(ve){q("failed to asynchronously prepare wasm: "+ve),We(ve)}))}var ie={a:ga};if(V||(Ct++,u.monitorRunDependencies&&u.monitorRunDependencies(Ct)),u.instantiateWasm)try{return u.instantiateWasm(ie,U)}catch(me){return q("Module.instantiateWasm callback failed with error: "+me),!1}(W||typeof WebAssembly.instantiateStreaming!="function"||Yt()||ht.startsWith("file://")||L||typeof fetch!="function"?J(G):fetch(ht,{credentials:"same-origin"}).then((function(me){return WebAssembly.instantiateStreaming(me,ie).then(G,(function(ve){return q("wasm streaming compile failed: "+ve),q("falling back to ArrayBuffer instantiation"),J(G)}))}))).catch(h)})(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var di=u._pthread_self=function(){return(di=u._pthread_self=u.asm.ob).apply(null,arguments)},Ln=u._malloc=function(){return(Ln=u._malloc=u.asm.pb).apply(null,arguments)},uo=u._free=function(){return(uo=u._free=u.asm.qb).apply(null,arguments)},mr=u._fflush=function(){return(mr=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var ki=u.___funcs_on_exit=function(){return(ki=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ya=u.__emscripten_thread_init=function(){return(ya=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var Bn,pn=u._emscripten_run_in_main_runtime_thread_js=function(){return(pn=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},ba=u.__emscripten_proxy_execute_task_queue=function(){return(ba=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Di=u.__emscripten_thread_free_data=function(){return(Di=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},hn=u.__emscripten_thread_exit=function(){return(hn=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},ut=u._setThrew=function(){return(ut=u._setThrew=u.asm.Bb).apply(null,arguments)},xa=u._emscripten_stack_set_limits=function(){return(xa=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},st=u.stackSave=function(){return(st=u.stackSave=u.asm.Db).apply(null,arguments)},ot=u.stackRestore=function(){return(ot=u.stackRestore=u.asm.Eb).apply(null,arguments)},va=u.stackAlloc=function(){return(va=u.stackAlloc=u.asm.Fb).apply(null,arguments)},Ni=u.___cxa_can_catch=function(){return(Ni=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},fi=u.___cxa_is_pointer_type=function(){return(fi=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},Lr=u.dynCall_j=function(){return(Lr=u.dynCall_j=u.asm.Ib).apply(null,arguments)},Ii=u.dynCall_iiiiij=function(){return(Ii=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},$i=u.dynCall_jii=function(){return($i=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},mn=u.dynCall_viiiiij=function(){return(mn=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},gn=u.dynCall_vjji=function(){return(gn=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},_a=u.dynCall_viiijjjii=function(){return(_a=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Li=u.dynCall_iij=function(){return(Li=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},wa=u.dynCall_ji=function(){return(wa=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},Fn=u.dynCall_iiiiiij=function(){return(Fn=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Br=u.dynCall_iiij=function(){return(Br=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function Bi(){function U(){if(!Bn&&(Bn=!0,u.calledRun=!0,!Ce)&&(V||lr(Ue),o(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!V)){if(u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;){var G=u.postRun.shift();yt.unshift(G)}lr(yt)}}if(!(0<Ct))if(V)o(u),V||lr(Ue),postMessage({cmd:"loaded"});else{if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)Ut();lr(Ge),0<Ct||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),U()}),1)):U())}}if(u.UTF8ToString=ke,u.stringToUTF8=function(U,G,J){return Ie(U,b(),G,J)},u.lengthBytesUTF8=de,u.keepRuntimeAlive=Nt,u.wasmMemory=ae,u.stackSave=st,u.stackRestore=ot,u.stackAlloc=va,u.ExitStatus=Xt,u.PThread=He,Ot=function U(){Bn||Bi(),Bn||(Ot=U)},u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return Bi(),f.ready});t.exports=l},932:(t,e,n)=>{var i,l=(i=(i=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(f){var p,b,w;f=f||{},p||(p=f!==void 0?f:{}),p.ready=new Promise((function(K,te){b=K,w=te}));var v,g,u,o,h,_,S=Object.assign({},p),T="./this.program",O=(K,te)=>{throw te},j=typeof window=="object",C=typeof importScripts=="function",D=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",R="";D?(R=C?n(908).dirname(R)+"/":"//",_=()=>{h||(o=n(1384),h=n(908))},v=function(K,te){return _(),K=h.normalize(K),o.readFileSync(K,te?void 0:"utf8")},u=K=>((K=v(K,!0)).buffer||(K=new Uint8Array(K)),K),g=(K,te,le)=>{_(),K=h.normalize(K),o.readFile(K,(function(he,xe){he?le(he):te(xe.buffer)}))},1<process.argv.length&&(T=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(K){if(!(K instanceof Ue))throw K})),process.on("unhandledRejection",(function(K){throw K})),O=(K,te)=>{if(L||0<$e)throw process.exitCode=K,te;te instanceof Ue||F("exiting due to exception: "+te),process.exit(K)},p.inspect=function(){return"[Emscripten Module object]"}):(j||C)&&(C?R=self.location.href:typeof document<"u"&&document.currentScript&&(R=document.currentScript.src),i&&(R=i),R=R.indexOf("blob:")!==0?R.substr(0,R.replace(/[?#].*/,"").lastIndexOf("/")+1):"",v=K=>{var te=new XMLHttpRequest;return te.open("GET",K,!1),te.send(null),te.responseText},C&&(u=K=>{var te=new XMLHttpRequest;return te.open("GET",K,!1),te.responseType="arraybuffer",te.send(null),new Uint8Array(te.response)}),g=(K,te,le)=>{var he=new XMLHttpRequest;he.open("GET",K,!0),he.responseType="arraybuffer",he.onload=()=>{he.status==200||he.status==0&&he.response?te(he.response):le()},he.onerror=le,he.send(null)});var I,$=p.print||console.log.bind(console),F=p.printErr||console.warn.bind(console);Object.assign(p,S),S=null,p.thisProgram&&(T=p.thisProgram),p.quit&&(O=p.quit),p.wasmBinary&&(I=p.wasmBinary);var L=p.noExitRuntime||!1;typeof WebAssembly!="object"&&qe("no native wasm support detected");var V,Y,Q,ee,X,W,z=!1,q=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ce(K,te,le){var he=(te>>>=0)+le;for(le=te;K[le]&&!(le>=he);)++le;if(16<le-te&&K.buffer&&q)return q.decode(K.subarray(te,le));for(he="";te<le;){var xe=K[te++];if(128&xe){var Te=63&K[te++];if((224&xe)==192)he+=String.fromCharCode((31&xe)<<6|Te);else{var Le=63&K[te++];65536>(xe=(240&xe)==224?(15&xe)<<12|Te<<6|Le:(7&xe)<<18|Te<<12|Le<<6|63&K[te++])?he+=String.fromCharCode(xe):(xe-=65536,he+=String.fromCharCode(55296|xe>>10,56320|1023&xe))}}else he+=String.fromCharCode(xe)}return he}function ae(K,te){return(K>>>=0)?ce(ee,K,te):""}function we(K,te,le,he){if(!(0<he))return 0;var xe=le>>>=0;he=le+he-1;for(var Te=0;Te<K.length;++Te){var Le=K.charCodeAt(Te);if(55296<=Le&&57343>=Le&&(Le=65536+((1023&Le)<<10)|1023&K.charCodeAt(++Te)),127>=Le){if(le>=he)break;te[le++>>>0]=Le}else{if(2047>=Le){if(le+1>=he)break;te[le++>>>0]=192|Le>>6}else{if(65535>=Le){if(le+2>=he)break;te[le++>>>0]=224|Le>>12}else{if(le+3>=he)break;te[le++>>>0]=240|Le>>18,te[le++>>>0]=128|Le>>12&63}te[le++>>>0]=128|Le>>6&63}te[le++>>>0]=128|63&Le}}return te[le>>>0]=0,le-xe}function Z(K){for(var te=0,le=0;le<K.length;++le){var he=K.charCodeAt(le);127>=he?te++:2047>=he?te+=2:55296<=he&&57343>=he?(te+=4,++le):te+=3}return te}function ue(){var K=V.buffer;Y=K,p.HEAP8=Q=new Int8Array(K),p.HEAP16=new Int16Array(K),p.HEAP32=X=new Int32Array(K),p.HEAPU8=ee=new Uint8Array(K),p.HEAPU16=new Uint16Array(K),p.HEAPU32=W=new Uint32Array(K),p.HEAPF32=new Float32Array(K),p.HEAPF64=new Float64Array(K)}var Pe,Re=[],pe=[],Ae=[],Ce=[],$e=0;function se(){var K=p.preRun.shift();Re.unshift(K)}var ke,Ie=0,de=null;function qe(K){throw p.onAbort&&p.onAbort(K),F(K="Aborted("+K+")"),z=!0,K=new WebAssembly.RuntimeError(K+". Build with -sASSERTIONS for more info."),w(K),K}function Fe(){return ke.startsWith("data:application/octet-stream;base64,")}if(ke="ort-wasm.wasm",!Fe()){var Ne=ke;ke=p.locateFile?p.locateFile(Ne,R):R+Ne}function Ge(){var K=ke;try{if(K==ke&&I)return new Uint8Array(I);if(u)return u(K);throw"both async and sync fetching of the wasm failed"}catch(te){qe(te)}}function Ue(K){this.name="ExitStatus",this.message="Program terminated with exit("+K+")",this.status=K}function Ze(K){for(;0<K.length;)K.shift()(p)}var yt=[],Nt=0,Ut=0;function ht(K){this.Db=K,this.zb=K-24,this.Ub=function(te){W[this.zb+4>>2>>>0]=te},this.Eb=function(){return W[this.zb+4>>2>>>0]},this.Sb=function(te){W[this.zb+8>>2>>>0]=te},this.Wb=function(){return W[this.zb+8>>2>>>0]},this.Tb=function(){X[this.zb>>2>>>0]=0},this.Ib=function(te){Q[this.zb+12>>0>>>0]=te?1:0},this.Pb=function(){return Q[this.zb+12>>0>>>0]!=0},this.Jb=function(te){Q[this.zb+13>>0>>>0]=te?1:0},this.Lb=function(){return Q[this.zb+13>>0>>>0]!=0},this.Rb=function(te,le){this.Fb(0),this.Ub(te),this.Sb(le),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){X[this.zb>>2>>>0]+=1},this.Xb=function(){var te=X[this.zb>>2>>>0];return X[this.zb>>2>>>0]=te-1,te===1},this.Fb=function(te){W[this.zb+16>>2>>>0]=te},this.Ob=function(){return W[this.zb+16>>2>>>0]},this.Qb=function(){if(cn(this.Eb()))return W[this.Db>>2>>>0];var te=this.Ob();return te!==0?te:this.Db}}function Ct(K){return Nr(new ht(K).zb)}var Ot=[];function We(K){var te=Ot[K];return te||(K>=Ot.length&&(Ot.length=K+1),Ot[K]=te=Pe.get(K)),te}function Yt(K){var te=Z(K)+1,le=wt(te);return le&&we(K,Q,le,te),le}var tr={};function It(){if(!Xt){var K,te={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:T||"./this.program"};for(K in tr)tr[K]===void 0?delete te[K]:te[K]=tr[K];var le=[];for(K in te)le.push(K+"="+te[K]);Xt=le}return Xt}var Xt,yr=[null,[],[]];function en(K,te){var le=yr[K];te===0||te===10?((K===1?$:F)(ce(le,0)),le.length=0):le.push(te)}var rr=0;function Ar(K){return K%4==0&&(K%100!=0||K%400==0)}var He=[31,29,31,30,31,30,31,31,30,31,30,31],lr=[31,28,31,30,31,30,31,31,30,31,30,31];function or(K,te,le,he){function xe(Ee,dt,Et){for(Ee=typeof Ee=="number"?Ee.toString():Ee||"";Ee.length<dt;)Ee=Et[0]+Ee;return Ee}function Te(Ee,dt){return xe(Ee,dt,"0")}function Le(Ee,dt){function Et(Xr){return 0>Xr?-1:0<Xr?1:0}var nr;return(nr=Et(Ee.getFullYear()-dt.getFullYear()))===0&&(nr=Et(Ee.getMonth()-dt.getMonth()))===0&&(nr=Et(Ee.getDate()-dt.getDate())),nr}function Ke(Ee){switch(Ee.getDay()){case 0:return new Date(Ee.getFullYear()-1,11,29);case 1:return Ee;case 2:return new Date(Ee.getFullYear(),0,3);case 3:return new Date(Ee.getFullYear(),0,2);case 4:return new Date(Ee.getFullYear(),0,1);case 5:return new Date(Ee.getFullYear()-1,11,31);case 6:return new Date(Ee.getFullYear()-1,11,30)}}function ze(Ee){var dt=Ee.Bb;for(Ee=new Date(new Date(Ee.Cb+1900,0,1).getTime());0<dt;){var Et=Ee.getMonth(),nr=(Ar(Ee.getFullYear())?He:lr)[Et];if(!(dt>nr-Ee.getDate())){Ee.setDate(Ee.getDate()+dt);break}dt-=nr-Ee.getDate()+1,Ee.setDate(1),11>Et?Ee.setMonth(Et+1):(Ee.setMonth(0),Ee.setFullYear(Ee.getFullYear()+1))}return Et=new Date(Ee.getFullYear()+1,0,4),dt=Ke(new Date(Ee.getFullYear(),0,4)),Et=Ke(Et),0>=Le(dt,Ee)?0>=Le(Et,Ee)?Ee.getFullYear()+1:Ee.getFullYear():Ee.getFullYear()-1}var it=X[he+40>>2>>>0];for(var vt in he={$b:X[he>>2>>>0],Zb:X[he+4>>2>>>0],Gb:X[he+8>>2>>>0],Kb:X[he+12>>2>>>0],Hb:X[he+16>>2>>>0],Cb:X[he+20>>2>>>0],Ab:X[he+24>>2>>>0],Bb:X[he+28>>2>>>0],bc:X[he+32>>2>>>0],Yb:X[he+36>>2>>>0],ac:it?ae(it):""},le=ae(le),it={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})le=le.replace(new RegExp(vt,"g"),it[vt]);var Bt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),pt="January February March April May June July August September October November December".split(" ");for(vt in it={"%a":function(Ee){return Bt[Ee.Ab].substring(0,3)},"%A":function(Ee){return Bt[Ee.Ab]},"%b":function(Ee){return pt[Ee.Hb].substring(0,3)},"%B":function(Ee){return pt[Ee.Hb]},"%C":function(Ee){return Te((Ee.Cb+1900)/100|0,2)},"%d":function(Ee){return Te(Ee.Kb,2)},"%e":function(Ee){return xe(Ee.Kb,2," ")},"%g":function(Ee){return ze(Ee).toString().substring(2)},"%G":function(Ee){return ze(Ee)},"%H":function(Ee){return Te(Ee.Gb,2)},"%I":function(Ee){return(Ee=Ee.Gb)==0?Ee=12:12<Ee&&(Ee-=12),Te(Ee,2)},"%j":function(Ee){for(var dt=0,Et=0;Et<=Ee.Hb-1;dt+=(Ar(Ee.Cb+1900)?He:lr)[Et++]);return Te(Ee.Kb+dt,3)},"%m":function(Ee){return Te(Ee.Hb+1,2)},"%M":function(Ee){return Te(Ee.Zb,2)},"%n":function(){return`
`},"%p":function(Ee){return 0<=Ee.Gb&&12>Ee.Gb?"AM":"PM"},"%S":function(Ee){return Te(Ee.$b,2)},"%t":function(){return"	"},"%u":function(Ee){return Ee.Ab||7},"%U":function(Ee){return Te(Math.floor((Ee.Bb+7-Ee.Ab)/7),2)},"%V":function(Ee){var dt=Math.floor((Ee.Bb+7-(Ee.Ab+6)%7)/7);if(2>=(Ee.Ab+371-Ee.Bb-2)%7&&dt++,dt)dt==53&&((Et=(Ee.Ab+371-Ee.Bb)%7)==4||Et==3&&Ar(Ee.Cb)||(dt=1));else{dt=52;var Et=(Ee.Ab+7-Ee.Bb-1)%7;(Et==4||Et==5&&Ar(Ee.Cb%400-1))&&dt++}return Te(dt,2)},"%w":function(Ee){return Ee.Ab},"%W":function(Ee){return Te(Math.floor((Ee.Bb+7-(Ee.Ab+6)%7)/7),2)},"%y":function(Ee){return(Ee.Cb+1900).toString().substring(2)},"%Y":function(Ee){return Ee.Cb+1900},"%z":function(Ee){var dt=0<=(Ee=Ee.Yb);return Ee=Math.abs(Ee)/60,(dt?"+":"-")+("0000"+(Ee/60*100+Ee%60)).slice(-4)},"%Z":function(Ee){return Ee.ac},"%%":function(){return"%"}},le=le.replace(/%%/g,"\0\0"),it)le.includes(vt)&&(le=le.replace(new RegExp(vt,"g"),it[vt](he)));return vt=(function(Ee){var dt=Array(Z(Ee)+1);return we(Ee,dt,0,dt.length),dt})(le=le.replace(/\0\0/g,"%")),vt.length>te?0:(Q.set(vt,K>>>0),vt.length-1)}var Mi={a:function(K){return wt(K+24)+24},m:function(K){return(K=new ht(K)).Pb()||(K.Ib(!0),Nt--),K.Jb(!1),yt.push(K),K.Nb(),K.Qb()},ia:function(K){throw F("Unexpected exception thrown, this is not properly supported - aborting"),z=!0,K},w:function(){tt(0);var K=yt.pop();if(K.Xb()&&!K.Lb()){var te=K.Wb();te&&We(te)(K.Db),Ct(K.Db)}Ut=0},d:function(){var K=Ut;if(!K)return rr=0;var te=new ht(K);te.Fb(K);var le=te.Eb();if(!le)return rr=0,K;for(var he=Array.prototype.slice.call(arguments),xe=0;xe<he.length;xe++){var Te=he[xe];if(Te===0||Te===le)break;if(rn(Te,le,te.zb+16))return rr=Te,K}return rr=le,K},k:function(){var K=Ut;if(!K)return rr=0;var te=new ht(K);te.Fb(K);var le=te.Eb();if(!le)return rr=0,K;for(var he=Array.prototype.slice.call(arguments),xe=0;xe<he.length;xe++){var Te=he[xe];if(Te===0||Te===le)break;if(rn(Te,le,te.zb+16))return rr=Te,K}return rr=le,K},g:function(){var K=Ut;if(!K)return rr=0;var te=new ht(K);te.Fb(K);var le=te.Eb();if(!le)return rr=0,K;for(var he=Array.prototype.slice.call(arguments),xe=0;xe<he.length;xe++){var Te=he[xe];if(Te===0||Te===le)break;if(rn(Te,le,te.zb+16))return rr=Te,K}return rr=le,K},s:Ct,L:function(){var K=yt.pop();K||qe("no exception to throw");var te=K.Db;throw K.Lb()||(yt.push(K),K.Jb(!0),K.Ib(!1),Nt++),Ut=te,te},b:function(K,te,le){throw new ht(K).Rb(te,le),Ut=K,Nt++,K},la:function(){return Nt},i:function(K){throw Ut||(Ut=K),K},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){qe("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){qe("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(K,te){K=new Date(1e3*(W[K>>>2]+4294967296*X[K+4>>>2])),X[te>>2>>>0]=K.getUTCSeconds(),X[te+4>>2>>>0]=K.getUTCMinutes(),X[te+8>>2>>>0]=K.getUTCHours(),X[te+12>>2>>>0]=K.getUTCDate(),X[te+16>>2>>>0]=K.getUTCMonth(),X[te+20>>2>>>0]=K.getUTCFullYear()-1900,X[te+24>>2>>>0]=K.getUTCDay(),X[te+28>>2>>>0]=(K.getTime()-Date.UTC(K.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(K,te){K=new Date(1e3*(W[K>>>2]+4294967296*X[K+4>>>2])),X[te>>2>>>0]=K.getSeconds(),X[te+4>>2>>>0]=K.getMinutes(),X[te+8>>2>>>0]=K.getHours(),X[te+12>>2>>>0]=K.getDate(),X[te+16>>2>>>0]=K.getMonth(),X[te+20>>2>>>0]=K.getFullYear()-1900,X[te+24>>2>>>0]=K.getDay();var le=new Date(K.getFullYear(),0,1);X[te+28>>2>>>0]=(K.getTime()-le.getTime())/864e5|0,X[te+36>>2>>>0]=-60*K.getTimezoneOffset();var he=new Date(K.getFullYear(),6,1).getTimezoneOffset();le=le.getTimezoneOffset(),X[te+32>>2>>>0]=0|(he!=le&&K.getTimezoneOffset()==Math.min(le,he))},Fa:function(K){var te=new Date(X[K+20>>2>>>0]+1900,X[K+16>>2>>>0],X[K+12>>2>>>0],X[K+8>>2>>>0],X[K+4>>2>>>0],X[K>>2>>>0],0),le=X[K+32>>2>>>0],he=te.getTimezoneOffset(),xe=new Date(te.getFullYear(),0,1),Te=new Date(te.getFullYear(),6,1).getTimezoneOffset(),Le=xe.getTimezoneOffset(),Ke=Math.min(Le,Te);return 0>le?X[K+32>>2>>>0]=+(Te!=Le&&Ke==he):0<le!=(Ke==he)&&(Te=Math.max(Le,Te),te.setTime(te.getTime()+6e4*((0<le?Ke:Te)-he))),X[K+24>>2>>>0]=te.getDay(),X[K+28>>2>>>0]=(te.getTime()-xe.getTime())/864e5|0,X[K>>2>>>0]=te.getSeconds(),X[K+4>>2>>>0]=te.getMinutes(),X[K+8>>2>>>0]=te.getHours(),X[K+12>>2>>>0]=te.getDate(),X[K+16>>2>>>0]=te.getMonth(),te.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function K(te,le,he){K.Vb||(K.Vb=!0,(function(xe,Te,Le){function Ke(pt){return(pt=pt.toTimeString().match(/\(([A-Za-z ]+)\)$/))?pt[1]:"GMT"}var ze=new Date().getFullYear(),it=new Date(ze,0,1),vt=new Date(ze,6,1);ze=it.getTimezoneOffset();var Bt=vt.getTimezoneOffset();X[xe>>2>>>0]=60*Math.max(ze,Bt),X[Te>>2>>>0]=+(ze!=Bt),xe=Ke(it),Te=Ke(vt),xe=Yt(xe),Te=Yt(Te),Bt<ze?(W[Le>>2>>>0]=xe,W[Le+4>>2>>>0]=Te):(W[Le>>2>>>0]=Te,W[Le+4>>2>>>0]=xe)})(te,le,he))},B:function(){qe("")},ma:function(){return 4294901760},I:D?()=>{var K=process.hrtime();return 1e3*K[0]+K[1]/1e6}:()=>performance.now(),xa:function(K,te,le){ee.copyWithin(K>>>0,te>>>0,te+le>>>0)},G:function(K){var te=ee.length;if(4294901760<(K>>>=0))return!1;for(var le=1;4>=le;le*=2){var he=te*(1+.2/le);he=Math.min(he,K+100663296);var xe=Math;he=Math.max(K,he),xe=xe.min.call(xe,4294901760,he+(65536-he%65536)%65536);e:{try{V.grow(xe-Y.byteLength+65535>>>16),ue();var Te=1;break e}catch{}Te=void 0}if(Te)return!0}return!1},va:function(K,te){var le=0;return It().forEach((function(he,xe){var Te=te+le;for(xe=W[K+4*xe>>2>>>0]=Te,Te=0;Te<he.length;++Te)Q[xe++>>0>>>0]=he.charCodeAt(Te);Q[xe>>0>>>0]=0,le+=he.length+1})),0},wa:function(K,te){var le=It();W[K>>2>>>0]=le.length;var he=0;return le.forEach((function(xe){he+=xe.length+1})),W[te>>2>>>0]=he,0},ba:function(K){L||0<$e||(Ir(),Ze(Ae),tn(0),yr[1].length&&en(1,10),yr[2].length&&en(2,10)),L||0<$e||(p.onExit&&p.onExit(K),z=!0),O(K,new Ue(K))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(K,te,le,he){for(var xe=0,Te=0;Te<le;Te++){var Le=W[te>>2>>>0],Ke=W[te+4>>2>>>0];te+=8;for(var ze=0;ze<Ke;ze++)en(K,ee[Le+ze>>>0]);xe+=Ke}return W[he>>2>>>0]=xe,0},c:function(){return rr},ja:function K(te,le){K.Mb||(K.Mb=(function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var xe=new Uint8Array(1);return()=>(crypto.getRandomValues(xe),xe[0])}if(D)try{var Te=n(Object((function(){var Le=new Error("Cannot find module 'crypto'");throw Le.code="MODULE_NOT_FOUND",Le})()));return()=>Te.randomBytes(1)[0]}catch{}return()=>qe("randomDevice")})());for(var he=0;he<le;he++)Q[te+he>>0>>>0]=K.Mb();return 0},ea:function(K,te,le){var he=et();try{return We(K)(te,le)}catch(xe){if(rt(he),xe!==xe+0)throw xe;tt(1,0)}},fa:function(K,te,le){var he=et();try{return We(K)(te,le)}catch(xe){if(rt(he),xe!==xe+0)throw xe;tt(1,0)}},J:function(K){var te=et();try{return We(K)()}catch(le){if(rt(te),le!==le+0)throw le;tt(1,0)}},e:function(K,te){var le=et();try{return We(K)(te)}catch(he){if(rt(le),he!==he+0)throw he;tt(1,0)}},N:function(K,te,le){var he=et();try{return We(K)(te,le)}catch(xe){if(rt(he),xe!==xe+0)throw xe;tt(1,0)}},O:function(K,te,le){var he=et();try{return We(K)(te,le)}catch(xe){if(rt(he),xe!==xe+0)throw xe;tt(1,0)}},j:function(K,te,le){var he=et();try{return We(K)(te,le)}catch(xe){if(rt(he),xe!==xe+0)throw xe;tt(1,0)}},o:function(K,te,le,he){var xe=et();try{return We(K)(te,le,he)}catch(Te){if(rt(xe),Te!==Te+0)throw Te;tt(1,0)}},p:function(K,te,le,he,xe){var Te=et();try{return We(K)(te,le,he,xe)}catch(Le){if(rt(Te),Le!==Le+0)throw Le;tt(1,0)}},M:function(K,te,le,he,xe,Te){var Le=et();try{return We(K)(te,le,he,xe,Te)}catch(Ke){if(rt(Le),Ke!==Ke+0)throw Ke;tt(1,0)}},r:function(K,te,le,he,xe,Te){var Le=et();try{return We(K)(te,le,he,xe,Te)}catch(Ke){if(rt(Le),Ke!==Ke+0)throw Ke;tt(1,0)}},v:function(K,te,le,he,xe,Te,Le){var Ke=et();try{return We(K)(te,le,he,xe,Te,Le)}catch(ze){if(rt(Ke),ze!==ze+0)throw ze;tt(1,0)}},K:function(K,te,le,he,xe,Te,Le,Ke){var ze=et();try{return We(K)(te,le,he,xe,Te,Le,Ke)}catch(it){if(rt(ze),it!==it+0)throw it;tt(1,0)}},D:function(K,te,le,he,xe,Te,Le,Ke,ze,it,vt,Bt){var pt=et();try{return We(K)(te,le,he,xe,Te,Le,Ke,ze,it,vt,Bt)}catch(Ee){if(rt(pt),Ee!==Ee+0)throw Ee;tt(1,0)}},X:function(K,te,le,he,xe,Te,Le,Ke){var ze=et();try{return $n(K,te,le,he,xe,Te,Le,Ke)}catch(it){if(rt(ze),it!==it+0)throw it;tt(1,0)}},V:function(K,te,le,he,xe,Te,Le){var Ke=et();try{return ui(K,te,le,he,xe,Te,Le)}catch(ze){if(rt(Ke),ze!==ze+0)throw ze;tt(1,0)}},U:function(K,te,le,he,xe){var Te=et();try{return br(K,te,le,he,xe)}catch(Le){if(rt(Te),Le!==Le+0)throw Le;tt(1,0)}},Z:function(K,te,le,he){var xe=et();try{return dn(K,te,le,he)}catch(Te){if(rt(xe),Te!==Te+0)throw Te;tt(1,0)}},W:function(K){var te=et();try{return Yr(K)}catch(le){if(rt(te),le!==le+0)throw le;tt(1,0)}},Y:function(K,te){var le=et();try{return In(K,te)}catch(he){if(rt(le),he!==he+0)throw he;tt(1,0)}},T:function(K,te,le){var he=et();try{return kn(K,te,le)}catch(xe){if(rt(he),xe!==xe+0)throw xe;tt(1,0)}},f:function(K){var te=et();try{We(K)()}catch(le){if(rt(te),le!==le+0)throw le;tt(1,0)}},q:function(K,te){var le=et();try{We(K)(te)}catch(he){if(rt(le),he!==he+0)throw he;tt(1,0)}},h:function(K,te,le){var he=et();try{We(K)(te,le)}catch(xe){if(rt(he),xe!==xe+0)throw xe;tt(1,0)}},da:function(K,te,le,he){var xe=et();try{We(K)(te,le,he)}catch(Te){if(rt(xe),Te!==Te+0)throw Te;tt(1,0)}},l:function(K,te,le,he){var xe=et();try{We(K)(te,le,he)}catch(Te){if(rt(xe),Te!==Te+0)throw Te;tt(1,0)}},t:function(K,te,le,he,xe){var Te=et();try{We(K)(te,le,he,xe)}catch(Le){if(rt(Te),Le!==Le+0)throw Le;tt(1,0)}},u:function(K,te,le,he,xe,Te){var Le=et();try{We(K)(te,le,he,xe,Te)}catch(Ke){if(rt(Le),Ke!==Ke+0)throw Ke;tt(1,0)}},x:function(K,te,le,he,xe,Te,Le){var Ke=et();try{We(K)(te,le,he,xe,Te,Le)}catch(ze){if(rt(Ke),ze!==ze+0)throw ze;tt(1,0)}},z:function(K,te,le,he,xe,Te,Le,Ke){var ze=et();try{We(K)(te,le,he,xe,Te,Le,Ke)}catch(it){if(rt(ze),it!==it+0)throw it;tt(1,0)}},ga:function(K,te,le,he,xe,Te,Le,Ke,ze){var it=et();try{We(K)(te,le,he,xe,Te,Le,Ke,ze)}catch(vt){if(rt(it),vt!==vt+0)throw vt;tt(1,0)}},A:function(K,te,le,he,xe,Te,Le,Ke,ze,it,vt){var Bt=et();try{We(K)(te,le,he,xe,Te,Le,Ke,ze,it,vt)}catch(pt){if(rt(Bt),pt!==pt+0)throw pt;tt(1,0)}},C:function(K,te,le,he,xe,Te,Le,Ke,ze,it,vt,Bt,pt,Ee,dt,Et){var nr=et();try{We(K)(te,le,he,xe,Te,Le,Ke,ze,it,vt,Bt,pt,Ee,dt,Et)}catch(Xr){if(rt(nr),Xr!==Xr+0)throw Xr;tt(1,0)}},aa:function(K,te,le,he,xe,Te,Le,Ke){var ze=et();try{Dn(K,te,le,he,xe,Te,Le,Ke)}catch(it){if(rt(ze),it!==it+0)throw it;tt(1,0)}},_:function(K,te,le,he,xe,Te,Le,Ke,ze,it,vt,Bt){var pt=et();try{un(K,te,le,he,xe,Te,Le,Ke,ze,it,vt,Bt)}catch(Ee){if(rt(pt),Ee!==Ee+0)throw Ee;tt(1,0)}},$:function(K,te,le,he,xe,Te){var Le=et();try{Nn(K,te,le,he,xe,Te)}catch(Ke){if(rt(Le),Ke!==Ke+0)throw Ke;tt(1,0)}},n:function(K){return K},F:function(K){rr=K},ha:or,y:function(K,te,le,he){return or(K,te,le,he)}};(function(){function K(xe){p.asm=xe.exports,V=p.asm.Ka,ue(),Pe=p.asm.ib,pe.unshift(p.asm.La),Ie--,p.monitorRunDependencies&&p.monitorRunDependencies(Ie),Ie==0&&de&&(xe=de,de=null,xe())}function te(xe){K(xe.instance)}function le(xe){return(function(){if(!I&&(j||C)){if(typeof fetch=="function"&&!ke.startsWith("file://"))return fetch(ke,{credentials:"same-origin"}).then((function(Te){if(!Te.ok)throw"failed to load wasm binary file at '"+ke+"'";return Te.arrayBuffer()})).catch((function(){return Ge()}));if(g)return new Promise((function(Te,Le){g(ke,(function(Ke){Te(new Uint8Array(Ke))}),Le)}))}return Promise.resolve().then((function(){return Ge()}))})().then((function(Te){return WebAssembly.instantiate(Te,he)})).then((function(Te){return Te})).then(xe,(function(Te){F("failed to asynchronously prepare wasm: "+Te),qe(Te)}))}var he={a:Mi};if(Ie++,p.monitorRunDependencies&&p.monitorRunDependencies(Ie),p.instantiateWasm)try{return p.instantiateWasm(he,K)}catch(xe){return F("Module.instantiateWasm callback failed with error: "+xe),!1}(I||typeof WebAssembly.instantiateStreaming!="function"||Fe()||ke.startsWith("file://")||D||typeof fetch!="function"?le(te):fetch(ke,{credentials:"same-origin"}).then((function(xe){return WebAssembly.instantiateStreaming(xe,he).then(te,(function(Te){return F("wasm streaming compile failed: "+Te),F("falling back to ArrayBuffer instantiation"),le(te)}))}))).catch(w)})(),p.___wasm_call_ctors=function(){return(p.___wasm_call_ctors=p.asm.La).apply(null,arguments)},p._OrtInit=function(){return(p._OrtInit=p.asm.Ma).apply(null,arguments)},p._OrtCreateSessionOptions=function(){return(p._OrtCreateSessionOptions=p.asm.Na).apply(null,arguments)},p._OrtAppendExecutionProvider=function(){return(p._OrtAppendExecutionProvider=p.asm.Oa).apply(null,arguments)},p._OrtAddSessionConfigEntry=function(){return(p._OrtAddSessionConfigEntry=p.asm.Pa).apply(null,arguments)},p._OrtReleaseSessionOptions=function(){return(p._OrtReleaseSessionOptions=p.asm.Qa).apply(null,arguments)},p._OrtCreateSession=function(){return(p._OrtCreateSession=p.asm.Ra).apply(null,arguments)},p._OrtReleaseSession=function(){return(p._OrtReleaseSession=p.asm.Sa).apply(null,arguments)},p._OrtGetInputCount=function(){return(p._OrtGetInputCount=p.asm.Ta).apply(null,arguments)},p._OrtGetOutputCount=function(){return(p._OrtGetOutputCount=p.asm.Ua).apply(null,arguments)},p._OrtGetInputName=function(){return(p._OrtGetInputName=p.asm.Va).apply(null,arguments)},p._OrtGetOutputName=function(){return(p._OrtGetOutputName=p.asm.Wa).apply(null,arguments)},p._OrtFree=function(){return(p._OrtFree=p.asm.Xa).apply(null,arguments)},p._OrtCreateTensor=function(){return(p._OrtCreateTensor=p.asm.Ya).apply(null,arguments)},p._OrtGetTensorData=function(){return(p._OrtGetTensorData=p.asm.Za).apply(null,arguments)},p._OrtReleaseTensor=function(){return(p._OrtReleaseTensor=p.asm._a).apply(null,arguments)},p._OrtCreateRunOptions=function(){return(p._OrtCreateRunOptions=p.asm.$a).apply(null,arguments)},p._OrtAddRunConfigEntry=function(){return(p._OrtAddRunConfigEntry=p.asm.ab).apply(null,arguments)},p._OrtReleaseRunOptions=function(){return(p._OrtReleaseRunOptions=p.asm.bb).apply(null,arguments)},p._OrtRun=function(){return(p._OrtRun=p.asm.cb).apply(null,arguments)},p._OrtEndProfiling=function(){return(p._OrtEndProfiling=p.asm.db).apply(null,arguments)};var Kr,wt=p._malloc=function(){return(wt=p._malloc=p.asm.eb).apply(null,arguments)},Nr=p._free=function(){return(Nr=p._free=p.asm.fb).apply(null,arguments)},tn=p._fflush=function(){return(tn=p._fflush=p.asm.gb).apply(null,arguments)},Ir=p.___funcs_on_exit=function(){return(Ir=p.___funcs_on_exit=p.asm.hb).apply(null,arguments)},tt=p._setThrew=function(){return(tt=p._setThrew=p.asm.jb).apply(null,arguments)},et=p.stackSave=function(){return(et=p.stackSave=p.asm.kb).apply(null,arguments)},rt=p.stackRestore=function(){return(rt=p.stackRestore=p.asm.lb).apply(null,arguments)},ci=p.stackAlloc=function(){return(ci=p.stackAlloc=p.asm.mb).apply(null,arguments)},rn=p.___cxa_can_catch=function(){return(rn=p.___cxa_can_catch=p.asm.nb).apply(null,arguments)},cn=p.___cxa_is_pointer_type=function(){return(cn=p.___cxa_is_pointer_type=p.asm.ob).apply(null,arguments)},Yr=p.dynCall_j=function(){return(Yr=p.dynCall_j=p.asm.pb).apply(null,arguments)},ui=p.dynCall_iiiiij=function(){return(ui=p.dynCall_iiiiij=p.asm.qb).apply(null,arguments)},kn=p.dynCall_jii=function(){return(kn=p.dynCall_jii=p.asm.rb).apply(null,arguments)},Dn=p.dynCall_viiiiij=function(){return(Dn=p.dynCall_viiiiij=p.asm.sb).apply(null,arguments)},Nn=p.dynCall_vjji=function(){return(Nn=p.dynCall_vjji=p.asm.tb).apply(null,arguments)},un=p.dynCall_viiijjjii=function(){return(un=p.dynCall_viiijjjii=p.asm.ub).apply(null,arguments)},dn=p.dynCall_iij=function(){return(dn=p.dynCall_iij=p.asm.vb).apply(null,arguments)},In=p.dynCall_ji=function(){return(In=p.dynCall_ji=p.asm.wb).apply(null,arguments)},$n=p.dynCall_iiiiiij=function(){return($n=p.dynCall_iiiiiij=p.asm.xb).apply(null,arguments)},br=p.dynCall_iiij=function(){return(br=p.dynCall_iiij=p.asm.yb).apply(null,arguments)};function qt(){function K(){if(!Kr&&(Kr=!0,p.calledRun=!0,!z)){if(Ze(pe),b(p),p.onRuntimeInitialized&&p.onRuntimeInitialized(),p.postRun)for(typeof p.postRun=="function"&&(p.postRun=[p.postRun]);p.postRun.length;){var te=p.postRun.shift();Ce.unshift(te)}Ze(Ce)}}if(!(0<Ie)){if(p.preRun)for(typeof p.preRun=="function"&&(p.preRun=[p.preRun]);p.preRun.length;)se();Ze(Re),0<Ie||(p.setStatus?(p.setStatus("Running..."),setTimeout((function(){setTimeout((function(){p.setStatus("")}),1),K()}),1)):K())}}if(p.UTF8ToString=ae,p.stringToUTF8=function(K,te,le){return we(K,ee,te,le)},p.lengthBytesUTF8=Z,p.stackSave=et,p.stackRestore=rt,p.stackAlloc=ci,de=function K(){Kr||qt(),Kr||(de=K)},p.preInit)for(typeof p.preInit=="function"&&(p.preInit=[p.preInit]);0<p.preInit.length;)p.preInit.pop()();return qt(),f.ready});t.exports=l},4537:t=>{t.exports=function(e,n){for(var i=new Array(arguments.length-1),l=0,f=2,p=!0;f<arguments.length;)i[l++]=arguments[f++];return new Promise((function(b,w){i[l]=function(v){if(p)if(p=!1,v)w(v);else{for(var g=new Array(arguments.length-1),u=0;u<g.length;)g[u++]=arguments[u];b.apply(null,g)}};try{e.apply(n||null,i)}catch(v){p&&(p=!1,w(v))}}))}},7419:(t,e)=>{var n=e;n.length=function(b){var w=b.length;if(!w)return 0;for(var v=0;--w%4>1&&b.charAt(w)==="=";)++v;return Math.ceil(3*b.length)/4-v};for(var i=new Array(64),l=new Array(123),f=0;f<64;)l[i[f]=f<26?f+65:f<52?f+71:f<62?f-4:f-59|43]=f++;n.encode=function(b,w,v){for(var g,u=null,o=[],h=0,_=0;w<v;){var S=b[w++];switch(_){case 0:o[h++]=i[S>>2],g=(3&S)<<4,_=1;break;case 1:o[h++]=i[g|S>>4],g=(15&S)<<2,_=2;break;case 2:o[h++]=i[g|S>>6],o[h++]=i[63&S],_=0}h>8191&&((u||(u=[])).push(String.fromCharCode.apply(String,o)),h=0)}return _&&(o[h++]=i[g],o[h++]=61,_===1&&(o[h++]=61)),u?(h&&u.push(String.fromCharCode.apply(String,o.slice(0,h))),u.join("")):String.fromCharCode.apply(String,o.slice(0,h))};var p="invalid encoding";n.decode=function(b,w,v){for(var g,u=v,o=0,h=0;h<b.length;){var _=b.charCodeAt(h++);if(_===61&&o>1)break;if((_=l[_])===void 0)throw Error(p);switch(o){case 0:g=_,o=1;break;case 1:w[v++]=g<<2|(48&_)>>4,g=_,o=2;break;case 2:w[v++]=(15&g)<<4|(60&_)>>2,g=_,o=3;break;case 3:w[v++]=(3&g)<<6|_,o=0}}if(o===1)throw Error(p);return v-u},n.test=function(b){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(b)}},9211:t=>{function e(){this._listeners={}}t.exports=e,e.prototype.on=function(n,i,l){return(this._listeners[n]||(this._listeners[n]=[])).push({fn:i,ctx:l||this}),this},e.prototype.off=function(n,i){if(n===void 0)this._listeners={};else if(i===void 0)this._listeners[n]=[];else for(var l=this._listeners[n],f=0;f<l.length;)l[f].fn===i?l.splice(f,1):++f;return this},e.prototype.emit=function(n){var i=this._listeners[n];if(i){for(var l=[],f=1;f<arguments.length;)l.push(arguments[f++]);for(f=0;f<i.length;)i[f].fn.apply(i[f++].ctx,l)}return this}},945:t=>{function e(p){return typeof Float32Array<"u"?(function(){var b=new Float32Array([-0]),w=new Uint8Array(b.buffer),v=w[3]===128;function g(_,S,T){b[0]=_,S[T]=w[0],S[T+1]=w[1],S[T+2]=w[2],S[T+3]=w[3]}function u(_,S,T){b[0]=_,S[T]=w[3],S[T+1]=w[2],S[T+2]=w[1],S[T+3]=w[0]}function o(_,S){return w[0]=_[S],w[1]=_[S+1],w[2]=_[S+2],w[3]=_[S+3],b[0]}function h(_,S){return w[3]=_[S],w[2]=_[S+1],w[1]=_[S+2],w[0]=_[S+3],b[0]}p.writeFloatLE=v?g:u,p.writeFloatBE=v?u:g,p.readFloatLE=v?o:h,p.readFloatBE=v?h:o})():(function(){function b(v,g,u,o){var h=g<0?1:0;if(h&&(g=-g),g===0)v(1/g>0?0:2147483648,u,o);else if(isNaN(g))v(2143289344,u,o);else if(g>34028234663852886e22)v((h<<31|2139095040)>>>0,u,o);else if(g<11754943508222875e-54)v((h<<31|Math.round(g/1401298464324817e-60))>>>0,u,o);else{var _=Math.floor(Math.log(g)/Math.LN2);v((h<<31|_+127<<23|8388607&Math.round(g*Math.pow(2,-_)*8388608))>>>0,u,o)}}function w(v,g,u){var o=v(g,u),h=2*(o>>31)+1,_=o>>>23&255,S=8388607&o;return _===255?S?NaN:h*(1/0):_===0?1401298464324817e-60*h*S:h*Math.pow(2,_-150)*(S+8388608)}p.writeFloatLE=b.bind(null,n),p.writeFloatBE=b.bind(null,i),p.readFloatLE=w.bind(null,l),p.readFloatBE=w.bind(null,f)})(),typeof Float64Array<"u"?(function(){var b=new Float64Array([-0]),w=new Uint8Array(b.buffer),v=w[7]===128;function g(_,S,T){b[0]=_,S[T]=w[0],S[T+1]=w[1],S[T+2]=w[2],S[T+3]=w[3],S[T+4]=w[4],S[T+5]=w[5],S[T+6]=w[6],S[T+7]=w[7]}function u(_,S,T){b[0]=_,S[T]=w[7],S[T+1]=w[6],S[T+2]=w[5],S[T+3]=w[4],S[T+4]=w[3],S[T+5]=w[2],S[T+6]=w[1],S[T+7]=w[0]}function o(_,S){return w[0]=_[S],w[1]=_[S+1],w[2]=_[S+2],w[3]=_[S+3],w[4]=_[S+4],w[5]=_[S+5],w[6]=_[S+6],w[7]=_[S+7],b[0]}function h(_,S){return w[7]=_[S],w[6]=_[S+1],w[5]=_[S+2],w[4]=_[S+3],w[3]=_[S+4],w[2]=_[S+5],w[1]=_[S+6],w[0]=_[S+7],b[0]}p.writeDoubleLE=v?g:u,p.writeDoubleBE=v?u:g,p.readDoubleLE=v?o:h,p.readDoubleBE=v?h:o})():(function(){function b(v,g,u,o,h,_){var S=o<0?1:0;if(S&&(o=-o),o===0)v(0,h,_+g),v(1/o>0?0:2147483648,h,_+u);else if(isNaN(o))v(0,h,_+g),v(2146959360,h,_+u);else if(o>17976931348623157e292)v(0,h,_+g),v((S<<31|2146435072)>>>0,h,_+u);else{var T;if(o<22250738585072014e-324)v((T=o/5e-324)>>>0,h,_+g),v((S<<31|T/4294967296)>>>0,h,_+u);else{var O=Math.floor(Math.log(o)/Math.LN2);O===1024&&(O=1023),v(4503599627370496*(T=o*Math.pow(2,-O))>>>0,h,_+g),v((S<<31|O+1023<<20|1048576*T&1048575)>>>0,h,_+u)}}}function w(v,g,u,o,h){var _=v(o,h+g),S=v(o,h+u),T=2*(S>>31)+1,O=S>>>20&2047,j=4294967296*(1048575&S)+_;return O===2047?j?NaN:T*(1/0):O===0?5e-324*T*j:T*Math.pow(2,O-1075)*(j+4503599627370496)}p.writeDoubleLE=b.bind(null,n,0,4),p.writeDoubleBE=b.bind(null,i,4,0),p.readDoubleLE=w.bind(null,l,0,4),p.readDoubleBE=w.bind(null,f,4,0)})(),p}function n(p,b,w){b[w]=255&p,b[w+1]=p>>>8&255,b[w+2]=p>>>16&255,b[w+3]=p>>>24}function i(p,b,w){b[w]=p>>>24,b[w+1]=p>>>16&255,b[w+2]=p>>>8&255,b[w+3]=255&p}function l(p,b){return(p[b]|p[b+1]<<8|p[b+2]<<16|p[b+3]<<24)>>>0}function f(p,b){return(p[b]<<24|p[b+1]<<16|p[b+2]<<8|p[b+3])>>>0}t.exports=e(e)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},6662:t=>{t.exports=function(e,n,i){var l=i||8192,f=l>>>1,p=null,b=l;return function(w){if(w<1||w>f)return e(w);b+w>l&&(p=e(l),b=0);var v=n.call(p,b,b+=w);return 7&b&&(b=1+(7|b)),v}}},4997:(t,e)=>{var n=e;n.length=function(i){for(var l=0,f=0,p=0;p<i.length;++p)(f=i.charCodeAt(p))<128?l+=1:f<2048?l+=2:(64512&f)==55296&&(64512&i.charCodeAt(p+1))==56320?(++p,l+=4):l+=3;return l},n.read=function(i,l,f){if(f-l<1)return"";for(var p,b=null,w=[],v=0;l<f;)(p=i[l++])<128?w[v++]=p:p>191&&p<224?w[v++]=(31&p)<<6|63&i[l++]:p>239&&p<365?(p=((7&p)<<18|(63&i[l++])<<12|(63&i[l++])<<6|63&i[l++])-65536,w[v++]=55296+(p>>10),w[v++]=56320+(1023&p)):w[v++]=(15&p)<<12|(63&i[l++])<<6|63&i[l++],v>8191&&((b||(b=[])).push(String.fromCharCode.apply(String,w)),v=0);return b?(v&&b.push(String.fromCharCode.apply(String,w.slice(0,v))),b.join("")):String.fromCharCode.apply(String,w.slice(0,v))},n.write=function(i,l,f){for(var p,b,w=f,v=0;v<i.length;++v)(p=i.charCodeAt(v))<128?l[f++]=p:p<2048?(l[f++]=p>>6|192,l[f++]=63&p|128):(64512&p)==55296&&(64512&(b=i.charCodeAt(v+1)))==56320?(p=65536+((1023&p)<<10)+(1023&b),++v,l[f++]=p>>18|240,l[f++]=p>>12&63|128,l[f++]=p>>6&63|128,l[f++]=63&p|128):(l[f++]=p>>12|224,l[f++]=p>>6&63|128,l[f++]=63&p|128);return f-w}},3442:(t,e)=>{e.__esModule=!0;var n=(function(){function i(l){if(!l)throw new TypeError("Invalid argument; `value` has no value.");this.value=i.EMPTY,l&&i.isGuid(l)&&(this.value=l)}return i.isGuid=function(l){var f=l.toString();return l&&(l instanceof i||i.validator.test(f))},i.create=function(){return new i([i.gen(2),i.gen(1),i.gen(1),i.gen(1),i.gen(3)].join("-"))},i.createEmpty=function(){return new i("emptyguid")},i.parse=function(l){return new i(l)},i.raw=function(){return[i.gen(2),i.gen(1),i.gen(1),i.gen(1),i.gen(3)].join("-")},i.gen=function(l){for(var f="",p=0;p<l;p++)f+=(65536*(1+Math.random())|0).toString(16).substring(1);return f},i.prototype.equals=function(l){return i.isGuid(l)&&this.value===l.toString()},i.prototype.isEmpty=function(){return this.value===i.EMPTY},i.prototype.toString=function(){return this.value},i.prototype.toJSON=function(){return{value:this.value}},i.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),i.EMPTY="00000000-0000-0000-0000-000000000000",i})();e.Guid=n},3720:t=>{t.exports=n;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function n(L,V,Y){this.low=0|L,this.high=0|V,this.unsigned=!!Y}function i(L){return(L&&L.__isLong__)===!0}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=i;var l={},f={};function p(L,V){var Y,Q,ee;return V?(ee=0<=(L>>>=0)&&L<256)&&(Q=f[L])?Q:(Y=w(L,(0|L)<0?-1:0,!0),ee&&(f[L]=Y),Y):(ee=-128<=(L|=0)&&L<128)&&(Q=l[L])?Q:(Y=w(L,L<0?-1:0,!1),ee&&(l[L]=Y),Y)}function b(L,V){if(isNaN(L))return V?O:T;if(V){if(L<0)return O;if(L>=h)return I}else{if(L<=-_)return $;if(L+1>=_)return R}return L<0?b(-L,V).neg():w(L%o|0,L/o|0,V)}function w(L,V,Y){return new n(L,V,Y)}n.fromInt=p,n.fromNumber=b,n.fromBits=w;var v=Math.pow;function g(L,V,Y){if(L.length===0)throw Error("empty string");if(L==="NaN"||L==="Infinity"||L==="+Infinity"||L==="-Infinity")return T;if(typeof V=="number"?(Y=V,V=!1):V=!!V,(Y=Y||10)<2||36<Y)throw RangeError("radix");var Q;if((Q=L.indexOf("-"))>0)throw Error("interior hyphen");if(Q===0)return g(L.substring(1),V,Y).neg();for(var ee=b(v(Y,8)),X=T,W=0;W<L.length;W+=8){var z=Math.min(8,L.length-W),q=parseInt(L.substring(W,W+z),Y);if(z<8){var ce=b(v(Y,z));X=X.mul(ce).add(b(q))}else X=(X=X.mul(ee)).add(b(q))}return X.unsigned=V,X}function u(L,V){return typeof L=="number"?b(L,V):typeof L=="string"?g(L,V):w(L.low,L.high,typeof V=="boolean"?V:L.unsigned)}n.fromString=g,n.fromValue=u;var o=4294967296,h=o*o,_=h/2,S=p(1<<24),T=p(0);n.ZERO=T;var O=p(0,!0);n.UZERO=O;var j=p(1);n.ONE=j;var C=p(1,!0);n.UONE=C;var D=p(-1);n.NEG_ONE=D;var R=w(-1,2147483647,!1);n.MAX_VALUE=R;var I=w(-1,-1,!0);n.MAX_UNSIGNED_VALUE=I;var $=w(0,-2147483648,!1);n.MIN_VALUE=$;var F=n.prototype;F.toInt=function(){return this.unsigned?this.low>>>0:this.low},F.toNumber=function(){return this.unsigned?(this.high>>>0)*o+(this.low>>>0):this.high*o+(this.low>>>0)},F.toString=function(L){if((L=L||10)<2||36<L)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq($)){var V=b(L),Y=this.div(V),Q=Y.mul(V).sub(this);return Y.toString(L)+Q.toInt().toString(L)}return"-"+this.neg().toString(L)}for(var ee=b(v(L,6),this.unsigned),X=this,W="";;){var z=X.div(ee),q=(X.sub(z.mul(ee)).toInt()>>>0).toString(L);if((X=z).isZero())return q+W;for(;q.length<6;)q="0"+q;W=""+q+W}},F.getHighBits=function(){return this.high},F.getHighBitsUnsigned=function(){return this.high>>>0},F.getLowBits=function(){return this.low},F.getLowBitsUnsigned=function(){return this.low>>>0},F.getNumBitsAbs=function(){if(this.isNegative())return this.eq($)?64:this.neg().getNumBitsAbs();for(var L=this.high!=0?this.high:this.low,V=31;V>0&&(L&1<<V)==0;V--);return this.high!=0?V+33:V+1},F.isZero=function(){return this.high===0&&this.low===0},F.eqz=F.isZero,F.isNegative=function(){return!this.unsigned&&this.high<0},F.isPositive=function(){return this.unsigned||this.high>=0},F.isOdd=function(){return(1&this.low)==1},F.isEven=function(){return(1&this.low)==0},F.equals=function(L){return i(L)||(L=u(L)),(this.unsigned===L.unsigned||this.high>>>31!=1||L.high>>>31!=1)&&this.high===L.high&&this.low===L.low},F.eq=F.equals,F.notEquals=function(L){return!this.eq(L)},F.neq=F.notEquals,F.ne=F.notEquals,F.lessThan=function(L){return this.comp(L)<0},F.lt=F.lessThan,F.lessThanOrEqual=function(L){return this.comp(L)<=0},F.lte=F.lessThanOrEqual,F.le=F.lessThanOrEqual,F.greaterThan=function(L){return this.comp(L)>0},F.gt=F.greaterThan,F.greaterThanOrEqual=function(L){return this.comp(L)>=0},F.gte=F.greaterThanOrEqual,F.ge=F.greaterThanOrEqual,F.compare=function(L){if(i(L)||(L=u(L)),this.eq(L))return 0;var V=this.isNegative(),Y=L.isNegative();return V&&!Y?-1:!V&&Y?1:this.unsigned?L.high>>>0>this.high>>>0||L.high===this.high&&L.low>>>0>this.low>>>0?-1:1:this.sub(L).isNegative()?-1:1},F.comp=F.compare,F.negate=function(){return!this.unsigned&&this.eq($)?$:this.not().add(j)},F.neg=F.negate,F.add=function(L){i(L)||(L=u(L));var V=this.high>>>16,Y=65535&this.high,Q=this.low>>>16,ee=65535&this.low,X=L.high>>>16,W=65535&L.high,z=L.low>>>16,q=0,ce=0,ae=0,we=0;return ae+=(we+=ee+(65535&L.low))>>>16,ce+=(ae+=Q+z)>>>16,q+=(ce+=Y+W)>>>16,q+=V+X,w((ae&=65535)<<16|(we&=65535),(q&=65535)<<16|(ce&=65535),this.unsigned)},F.subtract=function(L){return i(L)||(L=u(L)),this.add(L.neg())},F.sub=F.subtract,F.multiply=function(L){if(this.isZero())return T;if(i(L)||(L=u(L)),e)return w(e.mul(this.low,this.high,L.low,L.high),e.get_high(),this.unsigned);if(L.isZero())return T;if(this.eq($))return L.isOdd()?$:T;if(L.eq($))return this.isOdd()?$:T;if(this.isNegative())return L.isNegative()?this.neg().mul(L.neg()):this.neg().mul(L).neg();if(L.isNegative())return this.mul(L.neg()).neg();if(this.lt(S)&&L.lt(S))return b(this.toNumber()*L.toNumber(),this.unsigned);var V=this.high>>>16,Y=65535&this.high,Q=this.low>>>16,ee=65535&this.low,X=L.high>>>16,W=65535&L.high,z=L.low>>>16,q=65535&L.low,ce=0,ae=0,we=0,Z=0;return we+=(Z+=ee*q)>>>16,ae+=(we+=Q*q)>>>16,we&=65535,ae+=(we+=ee*z)>>>16,ce+=(ae+=Y*q)>>>16,ae&=65535,ce+=(ae+=Q*z)>>>16,ae&=65535,ce+=(ae+=ee*W)>>>16,ce+=V*q+Y*z+Q*W+ee*X,w((we&=65535)<<16|(Z&=65535),(ce&=65535)<<16|(ae&=65535),this.unsigned)},F.mul=F.multiply,F.divide=function(L){if(i(L)||(L=u(L)),L.isZero())throw Error("division by zero");var V,Y,Q;if(e)return this.unsigned||this.high!==-2147483648||L.low!==-1||L.high!==-1?w((this.unsigned?e.div_u:e.div_s)(this.low,this.high,L.low,L.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?O:T;if(this.unsigned){if(L.unsigned||(L=L.toUnsigned()),L.gt(this))return O;if(L.gt(this.shru(1)))return C;Q=O}else{if(this.eq($))return L.eq(j)||L.eq(D)?$:L.eq($)?j:(V=this.shr(1).div(L).shl(1)).eq(T)?L.isNegative()?j:D:(Y=this.sub(L.mul(V)),Q=V.add(Y.div(L)));if(L.eq($))return this.unsigned?O:T;if(this.isNegative())return L.isNegative()?this.neg().div(L.neg()):this.neg().div(L).neg();if(L.isNegative())return this.div(L.neg()).neg();Q=T}for(Y=this;Y.gte(L);){V=Math.max(1,Math.floor(Y.toNumber()/L.toNumber()));for(var ee=Math.ceil(Math.log(V)/Math.LN2),X=ee<=48?1:v(2,ee-48),W=b(V),z=W.mul(L);z.isNegative()||z.gt(Y);)z=(W=b(V-=X,this.unsigned)).mul(L);W.isZero()&&(W=j),Q=Q.add(W),Y=Y.sub(z)}return Q},F.div=F.divide,F.modulo=function(L){return i(L)||(L=u(L)),e?w((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,L.low,L.high),e.get_high(),this.unsigned):this.sub(this.div(L).mul(L))},F.mod=F.modulo,F.rem=F.modulo,F.not=function(){return w(~this.low,~this.high,this.unsigned)},F.and=function(L){return i(L)||(L=u(L)),w(this.low&L.low,this.high&L.high,this.unsigned)},F.or=function(L){return i(L)||(L=u(L)),w(this.low|L.low,this.high|L.high,this.unsigned)},F.xor=function(L){return i(L)||(L=u(L)),w(this.low^L.low,this.high^L.high,this.unsigned)},F.shiftLeft=function(L){return i(L)&&(L=L.toInt()),(L&=63)==0?this:L<32?w(this.low<<L,this.high<<L|this.low>>>32-L,this.unsigned):w(0,this.low<<L-32,this.unsigned)},F.shl=F.shiftLeft,F.shiftRight=function(L){return i(L)&&(L=L.toInt()),(L&=63)==0?this:L<32?w(this.low>>>L|this.high<<32-L,this.high>>L,this.unsigned):w(this.high>>L-32,this.high>=0?0:-1,this.unsigned)},F.shr=F.shiftRight,F.shiftRightUnsigned=function(L){if(i(L)&&(L=L.toInt()),(L&=63)==0)return this;var V=this.high;return L<32?w(this.low>>>L|V<<32-L,V>>>L,this.unsigned):w(L===32?V:V>>>L-32,0,this.unsigned)},F.shru=F.shiftRightUnsigned,F.shr_u=F.shiftRightUnsigned,F.toSigned=function(){return this.unsigned?w(this.low,this.high,!1):this},F.toUnsigned=function(){return this.unsigned?this:w(this.low,this.high,!0)},F.toBytes=function(L){return L?this.toBytesLE():this.toBytesBE()},F.toBytesLE=function(){var L=this.high,V=this.low;return[255&V,V>>>8&255,V>>>16&255,V>>>24,255&L,L>>>8&255,L>>>16&255,L>>>24]},F.toBytesBE=function(){var L=this.high,V=this.low;return[L>>>24,L>>>16&255,L>>>8&255,255&L,V>>>24,V>>>16&255,V>>>8&255,255&V]},n.fromBytes=function(L,V,Y){return Y?n.fromBytesLE(L,V):n.fromBytesBE(L,V)},n.fromBytesLE=function(L,V){return new n(L[0]|L[1]<<8|L[2]<<16|L[3]<<24,L[4]|L[5]<<8|L[6]<<16|L[7]<<24,V)},n.fromBytesBE=function(L,V){return new n(L[4]<<24|L[5]<<16|L[6]<<8|L[7],L[0]<<24|L[1]<<16|L[2]<<8|L[3],V)}},1446:(t,e,n)=>{var i,l,f,p=n(2100),b=p.Reader,w=p.Writer,v=p.util,g=p.roots.default||(p.roots.default={});g.onnx=((f={}).Version=(i={},(l=Object.create(i))[i[0]="_START_VERSION"]=0,l[i[1]="IR_VERSION_2017_10_10"]=1,l[i[2]="IR_VERSION_2017_10_30"]=2,l[i[3]="IR_VERSION_2017_11_3"]=3,l[i[4]="IR_VERSION_2019_1_22"]=4,l[i[5]="IR_VERSION"]=5,l),f.AttributeProto=(function(){function u(o){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],o)for(var h=Object.keys(o),_=0;_<h.length;++_)o[h[_]]!=null&&(this[h[_]]=o[h[_]])}return u.prototype.name="",u.prototype.refAttrName="",u.prototype.docString="",u.prototype.type=0,u.prototype.f=0,u.prototype.i=v.Long?v.Long.fromBits(0,0,!1):0,u.prototype.s=v.newBuffer([]),u.prototype.t=null,u.prototype.g=null,u.prototype.floats=v.emptyArray,u.prototype.ints=v.emptyArray,u.prototype.strings=v.emptyArray,u.prototype.tensors=v.emptyArray,u.prototype.graphs=v.emptyArray,u.create=function(o){return new u(o)},u.encode=function(o,h){if(h||(h=w.create()),o.name!=null&&o.hasOwnProperty("name")&&h.uint32(10).string(o.name),o.f!=null&&o.hasOwnProperty("f")&&h.uint32(21).float(o.f),o.i!=null&&o.hasOwnProperty("i")&&h.uint32(24).int64(o.i),o.s!=null&&o.hasOwnProperty("s")&&h.uint32(34).bytes(o.s),o.t!=null&&o.hasOwnProperty("t")&&g.onnx.TensorProto.encode(o.t,h.uint32(42).fork()).ldelim(),o.g!=null&&o.hasOwnProperty("g")&&g.onnx.GraphProto.encode(o.g,h.uint32(50).fork()).ldelim(),o.floats!=null&&o.floats.length){h.uint32(58).fork();for(var _=0;_<o.floats.length;++_)h.float(o.floats[_]);h.ldelim()}if(o.ints!=null&&o.ints.length){for(h.uint32(66).fork(),_=0;_<o.ints.length;++_)h.int64(o.ints[_]);h.ldelim()}if(o.strings!=null&&o.strings.length)for(_=0;_<o.strings.length;++_)h.uint32(74).bytes(o.strings[_]);if(o.tensors!=null&&o.tensors.length)for(_=0;_<o.tensors.length;++_)g.onnx.TensorProto.encode(o.tensors[_],h.uint32(82).fork()).ldelim();if(o.graphs!=null&&o.graphs.length)for(_=0;_<o.graphs.length;++_)g.onnx.GraphProto.encode(o.graphs[_],h.uint32(90).fork()).ldelim();return o.docString!=null&&o.hasOwnProperty("docString")&&h.uint32(106).string(o.docString),o.type!=null&&o.hasOwnProperty("type")&&h.uint32(160).int32(o.type),o.refAttrName!=null&&o.hasOwnProperty("refAttrName")&&h.uint32(170).string(o.refAttrName),h},u.encodeDelimited=function(o,h){return this.encode(o,h).ldelim()},u.decode=function(o,h){o instanceof b||(o=b.create(o));for(var _=h===void 0?o.len:o.pos+h,S=new g.onnx.AttributeProto;o.pos<_;){var T=o.uint32();switch(T>>>3){case 1:S.name=o.string();break;case 21:S.refAttrName=o.string();break;case 13:S.docString=o.string();break;case 20:S.type=o.int32();break;case 2:S.f=o.float();break;case 3:S.i=o.int64();break;case 4:S.s=o.bytes();break;case 5:S.t=g.onnx.TensorProto.decode(o,o.uint32());break;case 6:S.g=g.onnx.GraphProto.decode(o,o.uint32());break;case 7:if(S.floats&&S.floats.length||(S.floats=[]),(7&T)==2)for(var O=o.uint32()+o.pos;o.pos<O;)S.floats.push(o.float());else S.floats.push(o.float());break;case 8:if(S.ints&&S.ints.length||(S.ints=[]),(7&T)==2)for(O=o.uint32()+o.pos;o.pos<O;)S.ints.push(o.int64());else S.ints.push(o.int64());break;case 9:S.strings&&S.strings.length||(S.strings=[]),S.strings.push(o.bytes());break;case 10:S.tensors&&S.tensors.length||(S.tensors=[]),S.tensors.push(g.onnx.TensorProto.decode(o,o.uint32()));break;case 11:S.graphs&&S.graphs.length||(S.graphs=[]),S.graphs.push(g.onnx.GraphProto.decode(o,o.uint32()));break;default:o.skipType(7&T)}}return S},u.decodeDelimited=function(o){return o instanceof b||(o=new b(o)),this.decode(o,o.uint32())},u.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.name!=null&&o.hasOwnProperty("name")&&!v.isString(o.name))return"name: string expected";if(o.refAttrName!=null&&o.hasOwnProperty("refAttrName")&&!v.isString(o.refAttrName))return"refAttrName: string expected";if(o.docString!=null&&o.hasOwnProperty("docString")&&!v.isString(o.docString))return"docString: string expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(o.f!=null&&o.hasOwnProperty("f")&&typeof o.f!="number")return"f: number expected";if(o.i!=null&&o.hasOwnProperty("i")&&!(v.isInteger(o.i)||o.i&&v.isInteger(o.i.low)&&v.isInteger(o.i.high)))return"i: integer|Long expected";if(o.s!=null&&o.hasOwnProperty("s")&&!(o.s&&typeof o.s.length=="number"||v.isString(o.s)))return"s: buffer expected";if(o.t!=null&&o.hasOwnProperty("t")&&(_=g.onnx.TensorProto.verify(o.t)))return"t."+_;if(o.g!=null&&o.hasOwnProperty("g")&&(_=g.onnx.GraphProto.verify(o.g)))return"g."+_;if(o.floats!=null&&o.hasOwnProperty("floats")){if(!Array.isArray(o.floats))return"floats: array expected";for(var h=0;h<o.floats.length;++h)if(typeof o.floats[h]!="number")return"floats: number[] expected"}if(o.ints!=null&&o.hasOwnProperty("ints")){if(!Array.isArray(o.ints))return"ints: array expected";for(h=0;h<o.ints.length;++h)if(!(v.isInteger(o.ints[h])||o.ints[h]&&v.isInteger(o.ints[h].low)&&v.isInteger(o.ints[h].high)))return"ints: integer|Long[] expected"}if(o.strings!=null&&o.hasOwnProperty("strings")){if(!Array.isArray(o.strings))return"strings: array expected";for(h=0;h<o.strings.length;++h)if(!(o.strings[h]&&typeof o.strings[h].length=="number"||v.isString(o.strings[h])))return"strings: buffer[] expected"}if(o.tensors!=null&&o.hasOwnProperty("tensors")){if(!Array.isArray(o.tensors))return"tensors: array expected";for(h=0;h<o.tensors.length;++h)if(_=g.onnx.TensorProto.verify(o.tensors[h]))return"tensors."+_}if(o.graphs!=null&&o.hasOwnProperty("graphs")){if(!Array.isArray(o.graphs))return"graphs: array expected";for(h=0;h<o.graphs.length;++h){var _;if(_=g.onnx.GraphProto.verify(o.graphs[h]))return"graphs."+_}}return null},u.fromObject=function(o){if(o instanceof g.onnx.AttributeProto)return o;var h=new g.onnx.AttributeProto;switch(o.name!=null&&(h.name=String(o.name)),o.refAttrName!=null&&(h.refAttrName=String(o.refAttrName)),o.docString!=null&&(h.docString=String(o.docString)),o.type){case"UNDEFINED":case 0:h.type=0;break;case"FLOAT":case 1:h.type=1;break;case"INT":case 2:h.type=2;break;case"STRING":case 3:h.type=3;break;case"TENSOR":case 4:h.type=4;break;case"GRAPH":case 5:h.type=5;break;case"FLOATS":case 6:h.type=6;break;case"INTS":case 7:h.type=7;break;case"STRINGS":case 8:h.type=8;break;case"TENSORS":case 9:h.type=9;break;case"GRAPHS":case 10:h.type=10}if(o.f!=null&&(h.f=Number(o.f)),o.i!=null&&(v.Long?(h.i=v.Long.fromValue(o.i)).unsigned=!1:typeof o.i=="string"?h.i=parseInt(o.i,10):typeof o.i=="number"?h.i=o.i:typeof o.i=="object"&&(h.i=new v.LongBits(o.i.low>>>0,o.i.high>>>0).toNumber())),o.s!=null&&(typeof o.s=="string"?v.base64.decode(o.s,h.s=v.newBuffer(v.base64.length(o.s)),0):o.s.length&&(h.s=o.s)),o.t!=null){if(typeof o.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");h.t=g.onnx.TensorProto.fromObject(o.t)}if(o.g!=null){if(typeof o.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");h.g=g.onnx.GraphProto.fromObject(o.g)}if(o.floats){if(!Array.isArray(o.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");h.floats=[];for(var _=0;_<o.floats.length;++_)h.floats[_]=Number(o.floats[_])}if(o.ints){if(!Array.isArray(o.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(h.ints=[],_=0;_<o.ints.length;++_)v.Long?(h.ints[_]=v.Long.fromValue(o.ints[_])).unsigned=!1:typeof o.ints[_]=="string"?h.ints[_]=parseInt(o.ints[_],10):typeof o.ints[_]=="number"?h.ints[_]=o.ints[_]:typeof o.ints[_]=="object"&&(h.ints[_]=new v.LongBits(o.ints[_].low>>>0,o.ints[_].high>>>0).toNumber())}if(o.strings){if(!Array.isArray(o.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(h.strings=[],_=0;_<o.strings.length;++_)typeof o.strings[_]=="string"?v.base64.decode(o.strings[_],h.strings[_]=v.newBuffer(v.base64.length(o.strings[_])),0):o.strings[_].length&&(h.strings[_]=o.strings[_])}if(o.tensors){if(!Array.isArray(o.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(h.tensors=[],_=0;_<o.tensors.length;++_){if(typeof o.tensors[_]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");h.tensors[_]=g.onnx.TensorProto.fromObject(o.tensors[_])}}if(o.graphs){if(!Array.isArray(o.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(h.graphs=[],_=0;_<o.graphs.length;++_){if(typeof o.graphs[_]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");h.graphs[_]=g.onnx.GraphProto.fromObject(o.graphs[_])}}return h},u.toObject=function(o,h){h||(h={});var _={};if((h.arrays||h.defaults)&&(_.floats=[],_.ints=[],_.strings=[],_.tensors=[],_.graphs=[]),h.defaults){if(_.name="",_.f=0,v.Long){var S=new v.Long(0,0,!1);_.i=h.longs===String?S.toString():h.longs===Number?S.toNumber():S}else _.i=h.longs===String?"0":0;h.bytes===String?_.s="":(_.s=[],h.bytes!==Array&&(_.s=v.newBuffer(_.s))),_.t=null,_.g=null,_.docString="",_.type=h.enums===String?"UNDEFINED":0,_.refAttrName=""}if(o.name!=null&&o.hasOwnProperty("name")&&(_.name=o.name),o.f!=null&&o.hasOwnProperty("f")&&(_.f=h.json&&!isFinite(o.f)?String(o.f):o.f),o.i!=null&&o.hasOwnProperty("i")&&(typeof o.i=="number"?_.i=h.longs===String?String(o.i):o.i:_.i=h.longs===String?v.Long.prototype.toString.call(o.i):h.longs===Number?new v.LongBits(o.i.low>>>0,o.i.high>>>0).toNumber():o.i),o.s!=null&&o.hasOwnProperty("s")&&(_.s=h.bytes===String?v.base64.encode(o.s,0,o.s.length):h.bytes===Array?Array.prototype.slice.call(o.s):o.s),o.t!=null&&o.hasOwnProperty("t")&&(_.t=g.onnx.TensorProto.toObject(o.t,h)),o.g!=null&&o.hasOwnProperty("g")&&(_.g=g.onnx.GraphProto.toObject(o.g,h)),o.floats&&o.floats.length){_.floats=[];for(var T=0;T<o.floats.length;++T)_.floats[T]=h.json&&!isFinite(o.floats[T])?String(o.floats[T]):o.floats[T]}if(o.ints&&o.ints.length)for(_.ints=[],T=0;T<o.ints.length;++T)typeof o.ints[T]=="number"?_.ints[T]=h.longs===String?String(o.ints[T]):o.ints[T]:_.ints[T]=h.longs===String?v.Long.prototype.toString.call(o.ints[T]):h.longs===Number?new v.LongBits(o.ints[T].low>>>0,o.ints[T].high>>>0).toNumber():o.ints[T];if(o.strings&&o.strings.length)for(_.strings=[],T=0;T<o.strings.length;++T)_.strings[T]=h.bytes===String?v.base64.encode(o.strings[T],0,o.strings[T].length):h.bytes===Array?Array.prototype.slice.call(o.strings[T]):o.strings[T];if(o.tensors&&o.tensors.length)for(_.tensors=[],T=0;T<o.tensors.length;++T)_.tensors[T]=g.onnx.TensorProto.toObject(o.tensors[T],h);if(o.graphs&&o.graphs.length)for(_.graphs=[],T=0;T<o.graphs.length;++T)_.graphs[T]=g.onnx.GraphProto.toObject(o.graphs[T],h);return o.docString!=null&&o.hasOwnProperty("docString")&&(_.docString=o.docString),o.type!=null&&o.hasOwnProperty("type")&&(_.type=h.enums===String?g.onnx.AttributeProto.AttributeType[o.type]:o.type),o.refAttrName!=null&&o.hasOwnProperty("refAttrName")&&(_.refAttrName=o.refAttrName),_},u.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},u.AttributeType=(function(){var o={},h=Object.create(o);return h[o[0]="UNDEFINED"]=0,h[o[1]="FLOAT"]=1,h[o[2]="INT"]=2,h[o[3]="STRING"]=3,h[o[4]="TENSOR"]=4,h[o[5]="GRAPH"]=5,h[o[6]="FLOATS"]=6,h[o[7]="INTS"]=7,h[o[8]="STRINGS"]=8,h[o[9]="TENSORS"]=9,h[o[10]="GRAPHS"]=10,h})(),u})(),f.ValueInfoProto=(function(){function u(o){if(o)for(var h=Object.keys(o),_=0;_<h.length;++_)o[h[_]]!=null&&(this[h[_]]=o[h[_]])}return u.prototype.name="",u.prototype.type=null,u.prototype.docString="",u.create=function(o){return new u(o)},u.encode=function(o,h){return h||(h=w.create()),o.name!=null&&o.hasOwnProperty("name")&&h.uint32(10).string(o.name),o.type!=null&&o.hasOwnProperty("type")&&g.onnx.TypeProto.encode(o.type,h.uint32(18).fork()).ldelim(),o.docString!=null&&o.hasOwnProperty("docString")&&h.uint32(26).string(o.docString),h},u.encodeDelimited=function(o,h){return this.encode(o,h).ldelim()},u.decode=function(o,h){o instanceof b||(o=b.create(o));for(var _=h===void 0?o.len:o.pos+h,S=new g.onnx.ValueInfoProto;o.pos<_;){var T=o.uint32();switch(T>>>3){case 1:S.name=o.string();break;case 2:S.type=g.onnx.TypeProto.decode(o,o.uint32());break;case 3:S.docString=o.string();break;default:o.skipType(7&T)}}return S},u.decodeDelimited=function(o){return o instanceof b||(o=new b(o)),this.decode(o,o.uint32())},u.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.name!=null&&o.hasOwnProperty("name")&&!v.isString(o.name))return"name: string expected";if(o.type!=null&&o.hasOwnProperty("type")){var h=g.onnx.TypeProto.verify(o.type);if(h)return"type."+h}return o.docString!=null&&o.hasOwnProperty("docString")&&!v.isString(o.docString)?"docString: string expected":null},u.fromObject=function(o){if(o instanceof g.onnx.ValueInfoProto)return o;var h=new g.onnx.ValueInfoProto;if(o.name!=null&&(h.name=String(o.name)),o.type!=null){if(typeof o.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");h.type=g.onnx.TypeProto.fromObject(o.type)}return o.docString!=null&&(h.docString=String(o.docString)),h},u.toObject=function(o,h){h||(h={});var _={};return h.defaults&&(_.name="",_.type=null,_.docString=""),o.name!=null&&o.hasOwnProperty("name")&&(_.name=o.name),o.type!=null&&o.hasOwnProperty("type")&&(_.type=g.onnx.TypeProto.toObject(o.type,h)),o.docString!=null&&o.hasOwnProperty("docString")&&(_.docString=o.docString),_},u.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},u})(),f.NodeProto=(function(){function u(o){if(this.input=[],this.output=[],this.attribute=[],o)for(var h=Object.keys(o),_=0;_<h.length;++_)o[h[_]]!=null&&(this[h[_]]=o[h[_]])}return u.prototype.input=v.emptyArray,u.prototype.output=v.emptyArray,u.prototype.name="",u.prototype.opType="",u.prototype.domain="",u.prototype.attribute=v.emptyArray,u.prototype.docString="",u.create=function(o){return new u(o)},u.encode=function(o,h){if(h||(h=w.create()),o.input!=null&&o.input.length)for(var _=0;_<o.input.length;++_)h.uint32(10).string(o.input[_]);if(o.output!=null&&o.output.length)for(_=0;_<o.output.length;++_)h.uint32(18).string(o.output[_]);if(o.name!=null&&o.hasOwnProperty("name")&&h.uint32(26).string(o.name),o.opType!=null&&o.hasOwnProperty("opType")&&h.uint32(34).string(o.opType),o.attribute!=null&&o.attribute.length)for(_=0;_<o.attribute.length;++_)g.onnx.AttributeProto.encode(o.attribute[_],h.uint32(42).fork()).ldelim();return o.docString!=null&&o.hasOwnProperty("docString")&&h.uint32(50).string(o.docString),o.domain!=null&&o.hasOwnProperty("domain")&&h.uint32(58).string(o.domain),h},u.encodeDelimited=function(o,h){return this.encode(o,h).ldelim()},u.decode=function(o,h){o instanceof b||(o=b.create(o));for(var _=h===void 0?o.len:o.pos+h,S=new g.onnx.NodeProto;o.pos<_;){var T=o.uint32();switch(T>>>3){case 1:S.input&&S.input.length||(S.input=[]),S.input.push(o.string());break;case 2:S.output&&S.output.length||(S.output=[]),S.output.push(o.string());break;case 3:S.name=o.string();break;case 4:S.opType=o.string();break;case 7:S.domain=o.string();break;case 5:S.attribute&&S.attribute.length||(S.attribute=[]),S.attribute.push(g.onnx.AttributeProto.decode(o,o.uint32()));break;case 6:S.docString=o.string();break;default:o.skipType(7&T)}}return S},u.decodeDelimited=function(o){return o instanceof b||(o=new b(o)),this.decode(o,o.uint32())},u.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.input!=null&&o.hasOwnProperty("input")){if(!Array.isArray(o.input))return"input: array expected";for(var h=0;h<o.input.length;++h)if(!v.isString(o.input[h]))return"input: string[] expected"}if(o.output!=null&&o.hasOwnProperty("output")){if(!Array.isArray(o.output))return"output: array expected";for(h=0;h<o.output.length;++h)if(!v.isString(o.output[h]))return"output: string[] expected"}if(o.name!=null&&o.hasOwnProperty("name")&&!v.isString(o.name))return"name: string expected";if(o.opType!=null&&o.hasOwnProperty("opType")&&!v.isString(o.opType))return"opType: string expected";if(o.domain!=null&&o.hasOwnProperty("domain")&&!v.isString(o.domain))return"domain: string expected";if(o.attribute!=null&&o.hasOwnProperty("attribute")){if(!Array.isArray(o.attribute))return"attribute: array expected";for(h=0;h<o.attribute.length;++h){var _=g.onnx.AttributeProto.verify(o.attribute[h]);if(_)return"attribute."+_}}return o.docString!=null&&o.hasOwnProperty("docString")&&!v.isString(o.docString)?"docString: string expected":null},u.fromObject=function(o){if(o instanceof g.onnx.NodeProto)return o;var h=new g.onnx.NodeProto;if(o.input){if(!Array.isArray(o.input))throw TypeError(".onnx.NodeProto.input: array expected");h.input=[];for(var _=0;_<o.input.length;++_)h.input[_]=String(o.input[_])}if(o.output){if(!Array.isArray(o.output))throw TypeError(".onnx.NodeProto.output: array expected");for(h.output=[],_=0;_<o.output.length;++_)h.output[_]=String(o.output[_])}if(o.name!=null&&(h.name=String(o.name)),o.opType!=null&&(h.opType=String(o.opType)),o.domain!=null&&(h.domain=String(o.domain)),o.attribute){if(!Array.isArray(o.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(h.attribute=[],_=0;_<o.attribute.length;++_){if(typeof o.attribute[_]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");h.attribute[_]=g.onnx.AttributeProto.fromObject(o.attribute[_])}}return o.docString!=null&&(h.docString=String(o.docString)),h},u.toObject=function(o,h){h||(h={});var _={};if((h.arrays||h.defaults)&&(_.input=[],_.output=[],_.attribute=[]),h.defaults&&(_.name="",_.opType="",_.docString="",_.domain=""),o.input&&o.input.length){_.input=[];for(var S=0;S<o.input.length;++S)_.input[S]=o.input[S]}if(o.output&&o.output.length)for(_.output=[],S=0;S<o.output.length;++S)_.output[S]=o.output[S];if(o.name!=null&&o.hasOwnProperty("name")&&(_.name=o.name),o.opType!=null&&o.hasOwnProperty("opType")&&(_.opType=o.opType),o.attribute&&o.attribute.length)for(_.attribute=[],S=0;S<o.attribute.length;++S)_.attribute[S]=g.onnx.AttributeProto.toObject(o.attribute[S],h);return o.docString!=null&&o.hasOwnProperty("docString")&&(_.docString=o.docString),o.domain!=null&&o.hasOwnProperty("domain")&&(_.domain=o.domain),_},u.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},u})(),f.ModelProto=(function(){function u(o){if(this.opsetImport=[],this.metadataProps=[],o)for(var h=Object.keys(o),_=0;_<h.length;++_)o[h[_]]!=null&&(this[h[_]]=o[h[_]])}return u.prototype.irVersion=v.Long?v.Long.fromBits(0,0,!1):0,u.prototype.opsetImport=v.emptyArray,u.prototype.producerName="",u.prototype.producerVersion="",u.prototype.domain="",u.prototype.modelVersion=v.Long?v.Long.fromBits(0,0,!1):0,u.prototype.docString="",u.prototype.graph=null,u.prototype.metadataProps=v.emptyArray,u.create=function(o){return new u(o)},u.encode=function(o,h){if(h||(h=w.create()),o.irVersion!=null&&o.hasOwnProperty("irVersion")&&h.uint32(8).int64(o.irVersion),o.producerName!=null&&o.hasOwnProperty("producerName")&&h.uint32(18).string(o.producerName),o.producerVersion!=null&&o.hasOwnProperty("producerVersion")&&h.uint32(26).string(o.producerVersion),o.domain!=null&&o.hasOwnProperty("domain")&&h.uint32(34).string(o.domain),o.modelVersion!=null&&o.hasOwnProperty("modelVersion")&&h.uint32(40).int64(o.modelVersion),o.docString!=null&&o.hasOwnProperty("docString")&&h.uint32(50).string(o.docString),o.graph!=null&&o.hasOwnProperty("graph")&&g.onnx.GraphProto.encode(o.graph,h.uint32(58).fork()).ldelim(),o.opsetImport!=null&&o.opsetImport.length)for(var _=0;_<o.opsetImport.length;++_)g.onnx.OperatorSetIdProto.encode(o.opsetImport[_],h.uint32(66).fork()).ldelim();if(o.metadataProps!=null&&o.metadataProps.length)for(_=0;_<o.metadataProps.length;++_)g.onnx.StringStringEntryProto.encode(o.metadataProps[_],h.uint32(114).fork()).ldelim();return h},u.encodeDelimited=function(o,h){return this.encode(o,h).ldelim()},u.decode=function(o,h){o instanceof b||(o=b.create(o));for(var _=h===void 0?o.len:o.pos+h,S=new g.onnx.ModelProto;o.pos<_;){var T=o.uint32();switch(T>>>3){case 1:S.irVersion=o.int64();break;case 8:S.opsetImport&&S.opsetImport.length||(S.opsetImport=[]),S.opsetImport.push(g.onnx.OperatorSetIdProto.decode(o,o.uint32()));break;case 2:S.producerName=o.string();break;case 3:S.producerVersion=o.string();break;case 4:S.domain=o.string();break;case 5:S.modelVersion=o.int64();break;case 6:S.docString=o.string();break;case 7:S.graph=g.onnx.GraphProto.decode(o,o.uint32());break;case 14:S.metadataProps&&S.metadataProps.length||(S.metadataProps=[]),S.metadataProps.push(g.onnx.StringStringEntryProto.decode(o,o.uint32()));break;default:o.skipType(7&T)}}return S},u.decodeDelimited=function(o){return o instanceof b||(o=new b(o)),this.decode(o,o.uint32())},u.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.irVersion!=null&&o.hasOwnProperty("irVersion")&&!(v.isInteger(o.irVersion)||o.irVersion&&v.isInteger(o.irVersion.low)&&v.isInteger(o.irVersion.high)))return"irVersion: integer|Long expected";if(o.opsetImport!=null&&o.hasOwnProperty("opsetImport")){if(!Array.isArray(o.opsetImport))return"opsetImport: array expected";for(var h=0;h<o.opsetImport.length;++h)if(_=g.onnx.OperatorSetIdProto.verify(o.opsetImport[h]))return"opsetImport."+_}if(o.producerName!=null&&o.hasOwnProperty("producerName")&&!v.isString(o.producerName))return"producerName: string expected";if(o.producerVersion!=null&&o.hasOwnProperty("producerVersion")&&!v.isString(o.producerVersion))return"producerVersion: string expected";if(o.domain!=null&&o.hasOwnProperty("domain")&&!v.isString(o.domain))return"domain: string expected";if(o.modelVersion!=null&&o.hasOwnProperty("modelVersion")&&!(v.isInteger(o.modelVersion)||o.modelVersion&&v.isInteger(o.modelVersion.low)&&v.isInteger(o.modelVersion.high)))return"modelVersion: integer|Long expected";if(o.docString!=null&&o.hasOwnProperty("docString")&&!v.isString(o.docString))return"docString: string expected";if(o.graph!=null&&o.hasOwnProperty("graph")&&(_=g.onnx.GraphProto.verify(o.graph)))return"graph."+_;if(o.metadataProps!=null&&o.hasOwnProperty("metadataProps")){if(!Array.isArray(o.metadataProps))return"metadataProps: array expected";for(h=0;h<o.metadataProps.length;++h){var _;if(_=g.onnx.StringStringEntryProto.verify(o.metadataProps[h]))return"metadataProps."+_}}return null},u.fromObject=function(o){if(o instanceof g.onnx.ModelProto)return o;var h=new g.onnx.ModelProto;if(o.irVersion!=null&&(v.Long?(h.irVersion=v.Long.fromValue(o.irVersion)).unsigned=!1:typeof o.irVersion=="string"?h.irVersion=parseInt(o.irVersion,10):typeof o.irVersion=="number"?h.irVersion=o.irVersion:typeof o.irVersion=="object"&&(h.irVersion=new v.LongBits(o.irVersion.low>>>0,o.irVersion.high>>>0).toNumber())),o.opsetImport){if(!Array.isArray(o.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");h.opsetImport=[];for(var _=0;_<o.opsetImport.length;++_){if(typeof o.opsetImport[_]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");h.opsetImport[_]=g.onnx.OperatorSetIdProto.fromObject(o.opsetImport[_])}}if(o.producerName!=null&&(h.producerName=String(o.producerName)),o.producerVersion!=null&&(h.producerVersion=String(o.producerVersion)),o.domain!=null&&(h.domain=String(o.domain)),o.modelVersion!=null&&(v.Long?(h.modelVersion=v.Long.fromValue(o.modelVersion)).unsigned=!1:typeof o.modelVersion=="string"?h.modelVersion=parseInt(o.modelVersion,10):typeof o.modelVersion=="number"?h.modelVersion=o.modelVersion:typeof o.modelVersion=="object"&&(h.modelVersion=new v.LongBits(o.modelVersion.low>>>0,o.modelVersion.high>>>0).toNumber())),o.docString!=null&&(h.docString=String(o.docString)),o.graph!=null){if(typeof o.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");h.graph=g.onnx.GraphProto.fromObject(o.graph)}if(o.metadataProps){if(!Array.isArray(o.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(h.metadataProps=[],_=0;_<o.metadataProps.length;++_){if(typeof o.metadataProps[_]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");h.metadataProps[_]=g.onnx.StringStringEntryProto.fromObject(o.metadataProps[_])}}return h},u.toObject=function(o,h){h||(h={});var _={};if((h.arrays||h.defaults)&&(_.opsetImport=[],_.metadataProps=[]),h.defaults){if(v.Long){var S=new v.Long(0,0,!1);_.irVersion=h.longs===String?S.toString():h.longs===Number?S.toNumber():S}else _.irVersion=h.longs===String?"0":0;_.producerName="",_.producerVersion="",_.domain="",v.Long?(S=new v.Long(0,0,!1),_.modelVersion=h.longs===String?S.toString():h.longs===Number?S.toNumber():S):_.modelVersion=h.longs===String?"0":0,_.docString="",_.graph=null}if(o.irVersion!=null&&o.hasOwnProperty("irVersion")&&(typeof o.irVersion=="number"?_.irVersion=h.longs===String?String(o.irVersion):o.irVersion:_.irVersion=h.longs===String?v.Long.prototype.toString.call(o.irVersion):h.longs===Number?new v.LongBits(o.irVersion.low>>>0,o.irVersion.high>>>0).toNumber():o.irVersion),o.producerName!=null&&o.hasOwnProperty("producerName")&&(_.producerName=o.producerName),o.producerVersion!=null&&o.hasOwnProperty("producerVersion")&&(_.producerVersion=o.producerVersion),o.domain!=null&&o.hasOwnProperty("domain")&&(_.domain=o.domain),o.modelVersion!=null&&o.hasOwnProperty("modelVersion")&&(typeof o.modelVersion=="number"?_.modelVersion=h.longs===String?String(o.modelVersion):o.modelVersion:_.modelVersion=h.longs===String?v.Long.prototype.toString.call(o.modelVersion):h.longs===Number?new v.LongBits(o.modelVersion.low>>>0,o.modelVersion.high>>>0).toNumber():o.modelVersion),o.docString!=null&&o.hasOwnProperty("docString")&&(_.docString=o.docString),o.graph!=null&&o.hasOwnProperty("graph")&&(_.graph=g.onnx.GraphProto.toObject(o.graph,h)),o.opsetImport&&o.opsetImport.length){_.opsetImport=[];for(var T=0;T<o.opsetImport.length;++T)_.opsetImport[T]=g.onnx.OperatorSetIdProto.toObject(o.opsetImport[T],h)}if(o.metadataProps&&o.metadataProps.length)for(_.metadataProps=[],T=0;T<o.metadataProps.length;++T)_.metadataProps[T]=g.onnx.StringStringEntryProto.toObject(o.metadataProps[T],h);return _},u.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},u})(),f.StringStringEntryProto=(function(){function u(o){if(o)for(var h=Object.keys(o),_=0;_<h.length;++_)o[h[_]]!=null&&(this[h[_]]=o[h[_]])}return u.prototype.key="",u.prototype.value="",u.create=function(o){return new u(o)},u.encode=function(o,h){return h||(h=w.create()),o.key!=null&&o.hasOwnProperty("key")&&h.uint32(10).string(o.key),o.value!=null&&o.hasOwnProperty("value")&&h.uint32(18).string(o.value),h},u.encodeDelimited=function(o,h){return this.encode(o,h).ldelim()},u.decode=function(o,h){o instanceof b||(o=b.create(o));for(var _=h===void 0?o.len:o.pos+h,S=new g.onnx.StringStringEntryProto;o.pos<_;){var T=o.uint32();switch(T>>>3){case 1:S.key=o.string();break;case 2:S.value=o.string();break;default:o.skipType(7&T)}}return S},u.decodeDelimited=function(o){return o instanceof b||(o=new b(o)),this.decode(o,o.uint32())},u.verify=function(o){return typeof o!="object"||o===null?"object expected":o.key!=null&&o.hasOwnProperty("key")&&!v.isString(o.key)?"key: string expected":o.value!=null&&o.hasOwnProperty("value")&&!v.isString(o.value)?"value: string expected":null},u.fromObject=function(o){if(o instanceof g.onnx.StringStringEntryProto)return o;var h=new g.onnx.StringStringEntryProto;return o.key!=null&&(h.key=String(o.key)),o.value!=null&&(h.value=String(o.value)),h},u.toObject=function(o,h){h||(h={});var _={};return h.defaults&&(_.key="",_.value=""),o.key!=null&&o.hasOwnProperty("key")&&(_.key=o.key),o.value!=null&&o.hasOwnProperty("value")&&(_.value=o.value),_},u.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},u})(),f.TensorAnnotation=(function(){function u(o){if(this.quantParameterTensorNames=[],o)for(var h=Object.keys(o),_=0;_<h.length;++_)o[h[_]]!=null&&(this[h[_]]=o[h[_]])}return u.prototype.tensorName="",u.prototype.quantParameterTensorNames=v.emptyArray,u.create=function(o){return new u(o)},u.encode=function(o,h){if(h||(h=w.create()),o.tensorName!=null&&o.hasOwnProperty("tensorName")&&h.uint32(10).string(o.tensorName),o.quantParameterTensorNames!=null&&o.quantParameterTensorNames.length)for(var _=0;_<o.quantParameterTensorNames.length;++_)g.onnx.StringStringEntryProto.encode(o.quantParameterTensorNames[_],h.uint32(18).fork()).ldelim();return h},u.encodeDelimited=function(o,h){return this.encode(o,h).ldelim()},u.decode=function(o,h){o instanceof b||(o=b.create(o));for(var _=h===void 0?o.len:o.pos+h,S=new g.onnx.TensorAnnotation;o.pos<_;){var T=o.uint32();switch(T>>>3){case 1:S.tensorName=o.string();break;case 2:S.quantParameterTensorNames&&S.quantParameterTensorNames.length||(S.quantParameterTensorNames=[]),S.quantParameterTensorNames.push(g.onnx.StringStringEntryProto.decode(o,o.uint32()));break;default:o.skipType(7&T)}}return S},u.decodeDelimited=function(o){return o instanceof b||(o=new b(o)),this.decode(o,o.uint32())},u.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.tensorName!=null&&o.hasOwnProperty("tensorName")&&!v.isString(o.tensorName))return"tensorName: string expected";if(o.quantParameterTensorNames!=null&&o.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(o.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var h=0;h<o.quantParameterTensorNames.length;++h){var _=g.onnx.StringStringEntryProto.verify(o.quantParameterTensorNames[h]);if(_)return"quantParameterTensorNames."+_}}return null},u.fromObject=function(o){if(o instanceof g.onnx.TensorAnnotation)return o;var h=new g.onnx.TensorAnnotation;if(o.tensorName!=null&&(h.tensorName=String(o.tensorName)),o.quantParameterTensorNames){if(!Array.isArray(o.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");h.quantParameterTensorNames=[];for(var _=0;_<o.quantParameterTensorNames.length;++_){if(typeof o.quantParameterTensorNames[_]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");h.quantParameterTensorNames[_]=g.onnx.StringStringEntryProto.fromObject(o.quantParameterTensorNames[_])}}return h},u.toObject=function(o,h){h||(h={});var _={};if((h.arrays||h.defaults)&&(_.quantParameterTensorNames=[]),h.defaults&&(_.tensorName=""),o.tensorName!=null&&o.hasOwnProperty("tensorName")&&(_.tensorName=o.tensorName),o.quantParameterTensorNames&&o.quantParameterTensorNames.length){_.quantParameterTensorNames=[];for(var S=0;S<o.quantParameterTensorNames.length;++S)_.quantParameterTensorNames[S]=g.onnx.StringStringEntryProto.toObject(o.quantParameterTensorNames[S],h)}return _},u.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},u})(),f.GraphProto=(function(){function u(o){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],o)for(var h=Object.keys(o),_=0;_<h.length;++_)o[h[_]]!=null&&(this[h[_]]=o[h[_]])}return u.prototype.node=v.emptyArray,u.prototype.name="",u.prototype.initializer=v.emptyArray,u.prototype.docString="",u.prototype.input=v.emptyArray,u.prototype.output=v.emptyArray,u.prototype.valueInfo=v.emptyArray,u.prototype.quantizationAnnotation=v.emptyArray,u.create=function(o){return new u(o)},u.encode=function(o,h){if(h||(h=w.create()),o.node!=null&&o.node.length)for(var _=0;_<o.node.length;++_)g.onnx.NodeProto.encode(o.node[_],h.uint32(10).fork()).ldelim();if(o.name!=null&&o.hasOwnProperty("name")&&h.uint32(18).string(o.name),o.initializer!=null&&o.initializer.length)for(_=0;_<o.initializer.length;++_)g.onnx.TensorProto.encode(o.initializer[_],h.uint32(42).fork()).ldelim();if(o.docString!=null&&o.hasOwnProperty("docString")&&h.uint32(82).string(o.docString),o.input!=null&&o.input.length)for(_=0;_<o.input.length;++_)g.onnx.ValueInfoProto.encode(o.input[_],h.uint32(90).fork()).ldelim();if(o.output!=null&&o.output.length)for(_=0;_<o.output.length;++_)g.onnx.ValueInfoProto.encode(o.output[_],h.uint32(98).fork()).ldelim();if(o.valueInfo!=null&&o.valueInfo.length)for(_=0;_<o.valueInfo.length;++_)g.onnx.ValueInfoProto.encode(o.valueInfo[_],h.uint32(106).fork()).ldelim();if(o.quantizationAnnotation!=null&&o.quantizationAnnotation.length)for(_=0;_<o.quantizationAnnotation.length;++_)g.onnx.TensorAnnotation.encode(o.quantizationAnnotation[_],h.uint32(114).fork()).ldelim();return h},u.encodeDelimited=function(o,h){return this.encode(o,h).ldelim()},u.decode=function(o,h){o instanceof b||(o=b.create(o));for(var _=h===void 0?o.len:o.pos+h,S=new g.onnx.GraphProto;o.pos<_;){var T=o.uint32();switch(T>>>3){case 1:S.node&&S.node.length||(S.node=[]),S.node.push(g.onnx.NodeProto.decode(o,o.uint32()));break;case 2:S.name=o.string();break;case 5:S.initializer&&S.initializer.length||(S.initializer=[]),S.initializer.push(g.onnx.TensorProto.decode(o,o.uint32()));break;case 10:S.docString=o.string();break;case 11:S.input&&S.input.length||(S.input=[]),S.input.push(g.onnx.ValueInfoProto.decode(o,o.uint32()));break;case 12:S.output&&S.output.length||(S.output=[]),S.output.push(g.onnx.ValueInfoProto.decode(o,o.uint32()));break;case 13:S.valueInfo&&S.valueInfo.length||(S.valueInfo=[]),S.valueInfo.push(g.onnx.ValueInfoProto.decode(o,o.uint32()));break;case 14:S.quantizationAnnotation&&S.quantizationAnnotation.length||(S.quantizationAnnotation=[]),S.quantizationAnnotation.push(g.onnx.TensorAnnotation.decode(o,o.uint32()));break;default:o.skipType(7&T)}}return S},u.decodeDelimited=function(o){return o instanceof b||(o=new b(o)),this.decode(o,o.uint32())},u.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.node!=null&&o.hasOwnProperty("node")){if(!Array.isArray(o.node))return"node: array expected";for(var h=0;h<o.node.length;++h)if(_=g.onnx.NodeProto.verify(o.node[h]))return"node."+_}if(o.name!=null&&o.hasOwnProperty("name")&&!v.isString(o.name))return"name: string expected";if(o.initializer!=null&&o.hasOwnProperty("initializer")){if(!Array.isArray(o.initializer))return"initializer: array expected";for(h=0;h<o.initializer.length;++h)if(_=g.onnx.TensorProto.verify(o.initializer[h]))return"initializer."+_}if(o.docString!=null&&o.hasOwnProperty("docString")&&!v.isString(o.docString))return"docString: string expected";if(o.input!=null&&o.hasOwnProperty("input")){if(!Array.isArray(o.input))return"input: array expected";for(h=0;h<o.input.length;++h)if(_=g.onnx.ValueInfoProto.verify(o.input[h]))return"input."+_}if(o.output!=null&&o.hasOwnProperty("output")){if(!Array.isArray(o.output))return"output: array expected";for(h=0;h<o.output.length;++h)if(_=g.onnx.ValueInfoProto.verify(o.output[h]))return"output."+_}if(o.valueInfo!=null&&o.hasOwnProperty("valueInfo")){if(!Array.isArray(o.valueInfo))return"valueInfo: array expected";for(h=0;h<o.valueInfo.length;++h)if(_=g.onnx.ValueInfoProto.verify(o.valueInfo[h]))return"valueInfo."+_}if(o.quantizationAnnotation!=null&&o.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(o.quantizationAnnotation))return"quantizationAnnotation: array expected";for(h=0;h<o.quantizationAnnotation.length;++h){var _;if(_=g.onnx.TensorAnnotation.verify(o.quantizationAnnotation[h]))return"quantizationAnnotation."+_}}return null},u.fromObject=function(o){if(o instanceof g.onnx.GraphProto)return o;var h=new g.onnx.GraphProto;if(o.node){if(!Array.isArray(o.node))throw TypeError(".onnx.GraphProto.node: array expected");h.node=[];for(var _=0;_<o.node.length;++_){if(typeof o.node[_]!="object")throw TypeError(".onnx.GraphProto.node: object expected");h.node[_]=g.onnx.NodeProto.fromObject(o.node[_])}}if(o.name!=null&&(h.name=String(o.name)),o.initializer){if(!Array.isArray(o.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(h.initializer=[],_=0;_<o.initializer.length;++_){if(typeof o.initializer[_]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");h.initializer[_]=g.onnx.TensorProto.fromObject(o.initializer[_])}}if(o.docString!=null&&(h.docString=String(o.docString)),o.input){if(!Array.isArray(o.input))throw TypeError(".onnx.GraphProto.input: array expected");for(h.input=[],_=0;_<o.input.length;++_){if(typeof o.input[_]!="object")throw TypeError(".onnx.GraphProto.input: object expected");h.input[_]=g.onnx.ValueInfoProto.fromObject(o.input[_])}}if(o.output){if(!Array.isArray(o.output))throw TypeError(".onnx.GraphProto.output: array expected");for(h.output=[],_=0;_<o.output.length;++_){if(typeof o.output[_]!="object")throw TypeError(".onnx.GraphProto.output: object expected");h.output[_]=g.onnx.ValueInfoProto.fromObject(o.output[_])}}if(o.valueInfo){if(!Array.isArray(o.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(h.valueInfo=[],_=0;_<o.valueInfo.length;++_){if(typeof o.valueInfo[_]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");h.valueInfo[_]=g.onnx.ValueInfoProto.fromObject(o.valueInfo[_])}}if(o.quantizationAnnotation){if(!Array.isArray(o.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(h.quantizationAnnotation=[],_=0;_<o.quantizationAnnotation.length;++_){if(typeof o.quantizationAnnotation[_]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");h.quantizationAnnotation[_]=g.onnx.TensorAnnotation.fromObject(o.quantizationAnnotation[_])}}return h},u.toObject=function(o,h){h||(h={});var _={};if((h.arrays||h.defaults)&&(_.node=[],_.initializer=[],_.input=[],_.output=[],_.valueInfo=[],_.quantizationAnnotation=[]),h.defaults&&(_.name="",_.docString=""),o.node&&o.node.length){_.node=[];for(var S=0;S<o.node.length;++S)_.node[S]=g.onnx.NodeProto.toObject(o.node[S],h)}if(o.name!=null&&o.hasOwnProperty("name")&&(_.name=o.name),o.initializer&&o.initializer.length)for(_.initializer=[],S=0;S<o.initializer.length;++S)_.initializer[S]=g.onnx.TensorProto.toObject(o.initializer[S],h);if(o.docString!=null&&o.hasOwnProperty("docString")&&(_.docString=o.docString),o.input&&o.input.length)for(_.input=[],S=0;S<o.input.length;++S)_.input[S]=g.onnx.ValueInfoProto.toObject(o.input[S],h);if(o.output&&o.output.length)for(_.output=[],S=0;S<o.output.length;++S)_.output[S]=g.onnx.ValueInfoProto.toObject(o.output[S],h);if(o.valueInfo&&o.valueInfo.length)for(_.valueInfo=[],S=0;S<o.valueInfo.length;++S)_.valueInfo[S]=g.onnx.ValueInfoProto.toObject(o.valueInfo[S],h);if(o.quantizationAnnotation&&o.quantizationAnnotation.length)for(_.quantizationAnnotation=[],S=0;S<o.quantizationAnnotation.length;++S)_.quantizationAnnotation[S]=g.onnx.TensorAnnotation.toObject(o.quantizationAnnotation[S],h);return _},u.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},u})(),f.TensorProto=(function(){function u(o){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],o)for(var h=Object.keys(o),_=0;_<h.length;++_)o[h[_]]!=null&&(this[h[_]]=o[h[_]])}return u.prototype.dims=v.emptyArray,u.prototype.dataType=0,u.prototype.segment=null,u.prototype.floatData=v.emptyArray,u.prototype.int32Data=v.emptyArray,u.prototype.stringData=v.emptyArray,u.prototype.int64Data=v.emptyArray,u.prototype.name="",u.prototype.docString="",u.prototype.rawData=v.newBuffer([]),u.prototype.externalData=v.emptyArray,u.prototype.dataLocation=0,u.prototype.doubleData=v.emptyArray,u.prototype.uint64Data=v.emptyArray,u.create=function(o){return new u(o)},u.encode=function(o,h){if(h||(h=w.create()),o.dims!=null&&o.dims.length){h.uint32(10).fork();for(var _=0;_<o.dims.length;++_)h.int64(o.dims[_]);h.ldelim()}if(o.dataType!=null&&o.hasOwnProperty("dataType")&&h.uint32(16).int32(o.dataType),o.segment!=null&&o.hasOwnProperty("segment")&&g.onnx.TensorProto.Segment.encode(o.segment,h.uint32(26).fork()).ldelim(),o.floatData!=null&&o.floatData.length){for(h.uint32(34).fork(),_=0;_<o.floatData.length;++_)h.float(o.floatData[_]);h.ldelim()}if(o.int32Data!=null&&o.int32Data.length){for(h.uint32(42).fork(),_=0;_<o.int32Data.length;++_)h.int32(o.int32Data[_]);h.ldelim()}if(o.stringData!=null&&o.stringData.length)for(_=0;_<o.stringData.length;++_)h.uint32(50).bytes(o.stringData[_]);if(o.int64Data!=null&&o.int64Data.length){for(h.uint32(58).fork(),_=0;_<o.int64Data.length;++_)h.int64(o.int64Data[_]);h.ldelim()}if(o.name!=null&&o.hasOwnProperty("name")&&h.uint32(66).string(o.name),o.rawData!=null&&o.hasOwnProperty("rawData")&&h.uint32(74).bytes(o.rawData),o.doubleData!=null&&o.doubleData.length){for(h.uint32(82).fork(),_=0;_<o.doubleData.length;++_)h.double(o.doubleData[_]);h.ldelim()}if(o.uint64Data!=null&&o.uint64Data.length){for(h.uint32(90).fork(),_=0;_<o.uint64Data.length;++_)h.uint64(o.uint64Data[_]);h.ldelim()}if(o.docString!=null&&o.hasOwnProperty("docString")&&h.uint32(98).string(o.docString),o.externalData!=null&&o.externalData.length)for(_=0;_<o.externalData.length;++_)g.onnx.StringStringEntryProto.encode(o.externalData[_],h.uint32(106).fork()).ldelim();return o.dataLocation!=null&&o.hasOwnProperty("dataLocation")&&h.uint32(112).int32(o.dataLocation),h},u.encodeDelimited=function(o,h){return this.encode(o,h).ldelim()},u.decode=function(o,h){o instanceof b||(o=b.create(o));for(var _=h===void 0?o.len:o.pos+h,S=new g.onnx.TensorProto;o.pos<_;){var T=o.uint32();switch(T>>>3){case 1:if(S.dims&&S.dims.length||(S.dims=[]),(7&T)==2)for(var O=o.uint32()+o.pos;o.pos<O;)S.dims.push(o.int64());else S.dims.push(o.int64());break;case 2:S.dataType=o.int32();break;case 3:S.segment=g.onnx.TensorProto.Segment.decode(o,o.uint32());break;case 4:if(S.floatData&&S.floatData.length||(S.floatData=[]),(7&T)==2)for(O=o.uint32()+o.pos;o.pos<O;)S.floatData.push(o.float());else S.floatData.push(o.float());break;case 5:if(S.int32Data&&S.int32Data.length||(S.int32Data=[]),(7&T)==2)for(O=o.uint32()+o.pos;o.pos<O;)S.int32Data.push(o.int32());else S.int32Data.push(o.int32());break;case 6:S.stringData&&S.stringData.length||(S.stringData=[]),S.stringData.push(o.bytes());break;case 7:if(S.int64Data&&S.int64Data.length||(S.int64Data=[]),(7&T)==2)for(O=o.uint32()+o.pos;o.pos<O;)S.int64Data.push(o.int64());else S.int64Data.push(o.int64());break;case 8:S.name=o.string();break;case 12:S.docString=o.string();break;case 9:S.rawData=o.bytes();break;case 13:S.externalData&&S.externalData.length||(S.externalData=[]),S.externalData.push(g.onnx.StringStringEntryProto.decode(o,o.uint32()));break;case 14:S.dataLocation=o.int32();break;case 10:if(S.doubleData&&S.doubleData.length||(S.doubleData=[]),(7&T)==2)for(O=o.uint32()+o.pos;o.pos<O;)S.doubleData.push(o.double());else S.doubleData.push(o.double());break;case 11:if(S.uint64Data&&S.uint64Data.length||(S.uint64Data=[]),(7&T)==2)for(O=o.uint32()+o.pos;o.pos<O;)S.uint64Data.push(o.uint64());else S.uint64Data.push(o.uint64());break;default:o.skipType(7&T)}}return S},u.decodeDelimited=function(o){return o instanceof b||(o=new b(o)),this.decode(o,o.uint32())},u.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.dims!=null&&o.hasOwnProperty("dims")){if(!Array.isArray(o.dims))return"dims: array expected";for(var h=0;h<o.dims.length;++h)if(!(v.isInteger(o.dims[h])||o.dims[h]&&v.isInteger(o.dims[h].low)&&v.isInteger(o.dims[h].high)))return"dims: integer|Long[] expected"}if(o.dataType!=null&&o.hasOwnProperty("dataType")&&!v.isInteger(o.dataType))return"dataType: integer expected";if(o.segment!=null&&o.hasOwnProperty("segment")&&(_=g.onnx.TensorProto.Segment.verify(o.segment)))return"segment."+_;if(o.floatData!=null&&o.hasOwnProperty("floatData")){if(!Array.isArray(o.floatData))return"floatData: array expected";for(h=0;h<o.floatData.length;++h)if(typeof o.floatData[h]!="number")return"floatData: number[] expected"}if(o.int32Data!=null&&o.hasOwnProperty("int32Data")){if(!Array.isArray(o.int32Data))return"int32Data: array expected";for(h=0;h<o.int32Data.length;++h)if(!v.isInteger(o.int32Data[h]))return"int32Data: integer[] expected"}if(o.stringData!=null&&o.hasOwnProperty("stringData")){if(!Array.isArray(o.stringData))return"stringData: array expected";for(h=0;h<o.stringData.length;++h)if(!(o.stringData[h]&&typeof o.stringData[h].length=="number"||v.isString(o.stringData[h])))return"stringData: buffer[] expected"}if(o.int64Data!=null&&o.hasOwnProperty("int64Data")){if(!Array.isArray(o.int64Data))return"int64Data: array expected";for(h=0;h<o.int64Data.length;++h)if(!(v.isInteger(o.int64Data[h])||o.int64Data[h]&&v.isInteger(o.int64Data[h].low)&&v.isInteger(o.int64Data[h].high)))return"int64Data: integer|Long[] expected"}if(o.name!=null&&o.hasOwnProperty("name")&&!v.isString(o.name))return"name: string expected";if(o.docString!=null&&o.hasOwnProperty("docString")&&!v.isString(o.docString))return"docString: string expected";if(o.rawData!=null&&o.hasOwnProperty("rawData")&&!(o.rawData&&typeof o.rawData.length=="number"||v.isString(o.rawData)))return"rawData: buffer expected";if(o.externalData!=null&&o.hasOwnProperty("externalData")){if(!Array.isArray(o.externalData))return"externalData: array expected";for(h=0;h<o.externalData.length;++h){var _;if(_=g.onnx.StringStringEntryProto.verify(o.externalData[h]))return"externalData."+_}}if(o.dataLocation!=null&&o.hasOwnProperty("dataLocation"))switch(o.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(o.doubleData!=null&&o.hasOwnProperty("doubleData")){if(!Array.isArray(o.doubleData))return"doubleData: array expected";for(h=0;h<o.doubleData.length;++h)if(typeof o.doubleData[h]!="number")return"doubleData: number[] expected"}if(o.uint64Data!=null&&o.hasOwnProperty("uint64Data")){if(!Array.isArray(o.uint64Data))return"uint64Data: array expected";for(h=0;h<o.uint64Data.length;++h)if(!(v.isInteger(o.uint64Data[h])||o.uint64Data[h]&&v.isInteger(o.uint64Data[h].low)&&v.isInteger(o.uint64Data[h].high)))return"uint64Data: integer|Long[] expected"}return null},u.fromObject=function(o){if(o instanceof g.onnx.TensorProto)return o;var h=new g.onnx.TensorProto;if(o.dims){if(!Array.isArray(o.dims))throw TypeError(".onnx.TensorProto.dims: array expected");h.dims=[];for(var _=0;_<o.dims.length;++_)v.Long?(h.dims[_]=v.Long.fromValue(o.dims[_])).unsigned=!1:typeof o.dims[_]=="string"?h.dims[_]=parseInt(o.dims[_],10):typeof o.dims[_]=="number"?h.dims[_]=o.dims[_]:typeof o.dims[_]=="object"&&(h.dims[_]=new v.LongBits(o.dims[_].low>>>0,o.dims[_].high>>>0).toNumber())}if(o.dataType!=null&&(h.dataType=0|o.dataType),o.segment!=null){if(typeof o.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");h.segment=g.onnx.TensorProto.Segment.fromObject(o.segment)}if(o.floatData){if(!Array.isArray(o.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(h.floatData=[],_=0;_<o.floatData.length;++_)h.floatData[_]=Number(o.floatData[_])}if(o.int32Data){if(!Array.isArray(o.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(h.int32Data=[],_=0;_<o.int32Data.length;++_)h.int32Data[_]=0|o.int32Data[_]}if(o.stringData){if(!Array.isArray(o.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(h.stringData=[],_=0;_<o.stringData.length;++_)typeof o.stringData[_]=="string"?v.base64.decode(o.stringData[_],h.stringData[_]=v.newBuffer(v.base64.length(o.stringData[_])),0):o.stringData[_].length&&(h.stringData[_]=o.stringData[_])}if(o.int64Data){if(!Array.isArray(o.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(h.int64Data=[],_=0;_<o.int64Data.length;++_)v.Long?(h.int64Data[_]=v.Long.fromValue(o.int64Data[_])).unsigned=!1:typeof o.int64Data[_]=="string"?h.int64Data[_]=parseInt(o.int64Data[_],10):typeof o.int64Data[_]=="number"?h.int64Data[_]=o.int64Data[_]:typeof o.int64Data[_]=="object"&&(h.int64Data[_]=new v.LongBits(o.int64Data[_].low>>>0,o.int64Data[_].high>>>0).toNumber())}if(o.name!=null&&(h.name=String(o.name)),o.docString!=null&&(h.docString=String(o.docString)),o.rawData!=null&&(typeof o.rawData=="string"?v.base64.decode(o.rawData,h.rawData=v.newBuffer(v.base64.length(o.rawData)),0):o.rawData.length&&(h.rawData=o.rawData)),o.externalData){if(!Array.isArray(o.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(h.externalData=[],_=0;_<o.externalData.length;++_){if(typeof o.externalData[_]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");h.externalData[_]=g.onnx.StringStringEntryProto.fromObject(o.externalData[_])}}switch(o.dataLocation){case"DEFAULT":case 0:h.dataLocation=0;break;case"EXTERNAL":case 1:h.dataLocation=1}if(o.doubleData){if(!Array.isArray(o.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(h.doubleData=[],_=0;_<o.doubleData.length;++_)h.doubleData[_]=Number(o.doubleData[_])}if(o.uint64Data){if(!Array.isArray(o.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(h.uint64Data=[],_=0;_<o.uint64Data.length;++_)v.Long?(h.uint64Data[_]=v.Long.fromValue(o.uint64Data[_])).unsigned=!0:typeof o.uint64Data[_]=="string"?h.uint64Data[_]=parseInt(o.uint64Data[_],10):typeof o.uint64Data[_]=="number"?h.uint64Data[_]=o.uint64Data[_]:typeof o.uint64Data[_]=="object"&&(h.uint64Data[_]=new v.LongBits(o.uint64Data[_].low>>>0,o.uint64Data[_].high>>>0).toNumber(!0))}return h},u.toObject=function(o,h){h||(h={});var _={};if((h.arrays||h.defaults)&&(_.dims=[],_.floatData=[],_.int32Data=[],_.stringData=[],_.int64Data=[],_.doubleData=[],_.uint64Data=[],_.externalData=[]),h.defaults&&(_.dataType=0,_.segment=null,_.name="",h.bytes===String?_.rawData="":(_.rawData=[],h.bytes!==Array&&(_.rawData=v.newBuffer(_.rawData))),_.docString="",_.dataLocation=h.enums===String?"DEFAULT":0),o.dims&&o.dims.length){_.dims=[];for(var S=0;S<o.dims.length;++S)typeof o.dims[S]=="number"?_.dims[S]=h.longs===String?String(o.dims[S]):o.dims[S]:_.dims[S]=h.longs===String?v.Long.prototype.toString.call(o.dims[S]):h.longs===Number?new v.LongBits(o.dims[S].low>>>0,o.dims[S].high>>>0).toNumber():o.dims[S]}if(o.dataType!=null&&o.hasOwnProperty("dataType")&&(_.dataType=o.dataType),o.segment!=null&&o.hasOwnProperty("segment")&&(_.segment=g.onnx.TensorProto.Segment.toObject(o.segment,h)),o.floatData&&o.floatData.length)for(_.floatData=[],S=0;S<o.floatData.length;++S)_.floatData[S]=h.json&&!isFinite(o.floatData[S])?String(o.floatData[S]):o.floatData[S];if(o.int32Data&&o.int32Data.length)for(_.int32Data=[],S=0;S<o.int32Data.length;++S)_.int32Data[S]=o.int32Data[S];if(o.stringData&&o.stringData.length)for(_.stringData=[],S=0;S<o.stringData.length;++S)_.stringData[S]=h.bytes===String?v.base64.encode(o.stringData[S],0,o.stringData[S].length):h.bytes===Array?Array.prototype.slice.call(o.stringData[S]):o.stringData[S];if(o.int64Data&&o.int64Data.length)for(_.int64Data=[],S=0;S<o.int64Data.length;++S)typeof o.int64Data[S]=="number"?_.int64Data[S]=h.longs===String?String(o.int64Data[S]):o.int64Data[S]:_.int64Data[S]=h.longs===String?v.Long.prototype.toString.call(o.int64Data[S]):h.longs===Number?new v.LongBits(o.int64Data[S].low>>>0,o.int64Data[S].high>>>0).toNumber():o.int64Data[S];if(o.name!=null&&o.hasOwnProperty("name")&&(_.name=o.name),o.rawData!=null&&o.hasOwnProperty("rawData")&&(_.rawData=h.bytes===String?v.base64.encode(o.rawData,0,o.rawData.length):h.bytes===Array?Array.prototype.slice.call(o.rawData):o.rawData),o.doubleData&&o.doubleData.length)for(_.doubleData=[],S=0;S<o.doubleData.length;++S)_.doubleData[S]=h.json&&!isFinite(o.doubleData[S])?String(o.doubleData[S]):o.doubleData[S];if(o.uint64Data&&o.uint64Data.length)for(_.uint64Data=[],S=0;S<o.uint64Data.length;++S)typeof o.uint64Data[S]=="number"?_.uint64Data[S]=h.longs===String?String(o.uint64Data[S]):o.uint64Data[S]:_.uint64Data[S]=h.longs===String?v.Long.prototype.toString.call(o.uint64Data[S]):h.longs===Number?new v.LongBits(o.uint64Data[S].low>>>0,o.uint64Data[S].high>>>0).toNumber(!0):o.uint64Data[S];if(o.docString!=null&&o.hasOwnProperty("docString")&&(_.docString=o.docString),o.externalData&&o.externalData.length)for(_.externalData=[],S=0;S<o.externalData.length;++S)_.externalData[S]=g.onnx.StringStringEntryProto.toObject(o.externalData[S],h);return o.dataLocation!=null&&o.hasOwnProperty("dataLocation")&&(_.dataLocation=h.enums===String?g.onnx.TensorProto.DataLocation[o.dataLocation]:o.dataLocation),_},u.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},u.DataType=(function(){var o={},h=Object.create(o);return h[o[0]="UNDEFINED"]=0,h[o[1]="FLOAT"]=1,h[o[2]="UINT8"]=2,h[o[3]="INT8"]=3,h[o[4]="UINT16"]=4,h[o[5]="INT16"]=5,h[o[6]="INT32"]=6,h[o[7]="INT64"]=7,h[o[8]="STRING"]=8,h[o[9]="BOOL"]=9,h[o[10]="FLOAT16"]=10,h[o[11]="DOUBLE"]=11,h[o[12]="UINT32"]=12,h[o[13]="UINT64"]=13,h[o[14]="COMPLEX64"]=14,h[o[15]="COMPLEX128"]=15,h[o[16]="BFLOAT16"]=16,h})(),u.Segment=(function(){function o(h){if(h)for(var _=Object.keys(h),S=0;S<_.length;++S)h[_[S]]!=null&&(this[_[S]]=h[_[S]])}return o.prototype.begin=v.Long?v.Long.fromBits(0,0,!1):0,o.prototype.end=v.Long?v.Long.fromBits(0,0,!1):0,o.create=function(h){return new o(h)},o.encode=function(h,_){return _||(_=w.create()),h.begin!=null&&h.hasOwnProperty("begin")&&_.uint32(8).int64(h.begin),h.end!=null&&h.hasOwnProperty("end")&&_.uint32(16).int64(h.end),_},o.encodeDelimited=function(h,_){return this.encode(h,_).ldelim()},o.decode=function(h,_){h instanceof b||(h=b.create(h));for(var S=_===void 0?h.len:h.pos+_,T=new g.onnx.TensorProto.Segment;h.pos<S;){var O=h.uint32();switch(O>>>3){case 1:T.begin=h.int64();break;case 2:T.end=h.int64();break;default:h.skipType(7&O)}}return T},o.decodeDelimited=function(h){return h instanceof b||(h=new b(h)),this.decode(h,h.uint32())},o.verify=function(h){return typeof h!="object"||h===null?"object expected":h.begin!=null&&h.hasOwnProperty("begin")&&!(v.isInteger(h.begin)||h.begin&&v.isInteger(h.begin.low)&&v.isInteger(h.begin.high))?"begin: integer|Long expected":h.end!=null&&h.hasOwnProperty("end")&&!(v.isInteger(h.end)||h.end&&v.isInteger(h.end.low)&&v.isInteger(h.end.high))?"end: integer|Long expected":null},o.fromObject=function(h){if(h instanceof g.onnx.TensorProto.Segment)return h;var _=new g.onnx.TensorProto.Segment;return h.begin!=null&&(v.Long?(_.begin=v.Long.fromValue(h.begin)).unsigned=!1:typeof h.begin=="string"?_.begin=parseInt(h.begin,10):typeof h.begin=="number"?_.begin=h.begin:typeof h.begin=="object"&&(_.begin=new v.LongBits(h.begin.low>>>0,h.begin.high>>>0).toNumber())),h.end!=null&&(v.Long?(_.end=v.Long.fromValue(h.end)).unsigned=!1:typeof h.end=="string"?_.end=parseInt(h.end,10):typeof h.end=="number"?_.end=h.end:typeof h.end=="object"&&(_.end=new v.LongBits(h.end.low>>>0,h.end.high>>>0).toNumber())),_},o.toObject=function(h,_){_||(_={});var S={};if(_.defaults){if(v.Long){var T=new v.Long(0,0,!1);S.begin=_.longs===String?T.toString():_.longs===Number?T.toNumber():T}else S.begin=_.longs===String?"0":0;v.Long?(T=new v.Long(0,0,!1),S.end=_.longs===String?T.toString():_.longs===Number?T.toNumber():T):S.end=_.longs===String?"0":0}return h.begin!=null&&h.hasOwnProperty("begin")&&(typeof h.begin=="number"?S.begin=_.longs===String?String(h.begin):h.begin:S.begin=_.longs===String?v.Long.prototype.toString.call(h.begin):_.longs===Number?new v.LongBits(h.begin.low>>>0,h.begin.high>>>0).toNumber():h.begin),h.end!=null&&h.hasOwnProperty("end")&&(typeof h.end=="number"?S.end=_.longs===String?String(h.end):h.end:S.end=_.longs===String?v.Long.prototype.toString.call(h.end):_.longs===Number?new v.LongBits(h.end.low>>>0,h.end.high>>>0).toNumber():h.end),S},o.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},o})(),u.DataLocation=(function(){var o={},h=Object.create(o);return h[o[0]="DEFAULT"]=0,h[o[1]="EXTERNAL"]=1,h})(),u})(),f.TensorShapeProto=(function(){function u(o){if(this.dim=[],o)for(var h=Object.keys(o),_=0;_<h.length;++_)o[h[_]]!=null&&(this[h[_]]=o[h[_]])}return u.prototype.dim=v.emptyArray,u.create=function(o){return new u(o)},u.encode=function(o,h){if(h||(h=w.create()),o.dim!=null&&o.dim.length)for(var _=0;_<o.dim.length;++_)g.onnx.TensorShapeProto.Dimension.encode(o.dim[_],h.uint32(10).fork()).ldelim();return h},u.encodeDelimited=function(o,h){return this.encode(o,h).ldelim()},u.decode=function(o,h){o instanceof b||(o=b.create(o));for(var _=h===void 0?o.len:o.pos+h,S=new g.onnx.TensorShapeProto;o.pos<_;){var T=o.uint32();T>>>3==1?(S.dim&&S.dim.length||(S.dim=[]),S.dim.push(g.onnx.TensorShapeProto.Dimension.decode(o,o.uint32()))):o.skipType(7&T)}return S},u.decodeDelimited=function(o){return o instanceof b||(o=new b(o)),this.decode(o,o.uint32())},u.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.dim!=null&&o.hasOwnProperty("dim")){if(!Array.isArray(o.dim))return"dim: array expected";for(var h=0;h<o.dim.length;++h){var _=g.onnx.TensorShapeProto.Dimension.verify(o.dim[h]);if(_)return"dim."+_}}return null},u.fromObject=function(o){if(o instanceof g.onnx.TensorShapeProto)return o;var h=new g.onnx.TensorShapeProto;if(o.dim){if(!Array.isArray(o.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");h.dim=[];for(var _=0;_<o.dim.length;++_){if(typeof o.dim[_]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");h.dim[_]=g.onnx.TensorShapeProto.Dimension.fromObject(o.dim[_])}}return h},u.toObject=function(o,h){h||(h={});var _={};if((h.arrays||h.defaults)&&(_.dim=[]),o.dim&&o.dim.length){_.dim=[];for(var S=0;S<o.dim.length;++S)_.dim[S]=g.onnx.TensorShapeProto.Dimension.toObject(o.dim[S],h)}return _},u.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},u.Dimension=(function(){function o(_){if(_)for(var S=Object.keys(_),T=0;T<S.length;++T)_[S[T]]!=null&&(this[S[T]]=_[S[T]])}var h;return o.prototype.dimValue=v.Long?v.Long.fromBits(0,0,!1):0,o.prototype.dimParam="",o.prototype.denotation="",Object.defineProperty(o.prototype,"value",{get:v.oneOfGetter(h=["dimValue","dimParam"]),set:v.oneOfSetter(h)}),o.create=function(_){return new o(_)},o.encode=function(_,S){return S||(S=w.create()),_.dimValue!=null&&_.hasOwnProperty("dimValue")&&S.uint32(8).int64(_.dimValue),_.dimParam!=null&&_.hasOwnProperty("dimParam")&&S.uint32(18).string(_.dimParam),_.denotation!=null&&_.hasOwnProperty("denotation")&&S.uint32(26).string(_.denotation),S},o.encodeDelimited=function(_,S){return this.encode(_,S).ldelim()},o.decode=function(_,S){_ instanceof b||(_=b.create(_));for(var T=S===void 0?_.len:_.pos+S,O=new g.onnx.TensorShapeProto.Dimension;_.pos<T;){var j=_.uint32();switch(j>>>3){case 1:O.dimValue=_.int64();break;case 2:O.dimParam=_.string();break;case 3:O.denotation=_.string();break;default:_.skipType(7&j)}}return O},o.decodeDelimited=function(_){return _ instanceof b||(_=new b(_)),this.decode(_,_.uint32())},o.verify=function(_){if(typeof _!="object"||_===null)return"object expected";var S={};if(_.dimValue!=null&&_.hasOwnProperty("dimValue")&&(S.value=1,!(v.isInteger(_.dimValue)||_.dimValue&&v.isInteger(_.dimValue.low)&&v.isInteger(_.dimValue.high))))return"dimValue: integer|Long expected";if(_.dimParam!=null&&_.hasOwnProperty("dimParam")){if(S.value===1)return"value: multiple values";if(S.value=1,!v.isString(_.dimParam))return"dimParam: string expected"}return _.denotation!=null&&_.hasOwnProperty("denotation")&&!v.isString(_.denotation)?"denotation: string expected":null},o.fromObject=function(_){if(_ instanceof g.onnx.TensorShapeProto.Dimension)return _;var S=new g.onnx.TensorShapeProto.Dimension;return _.dimValue!=null&&(v.Long?(S.dimValue=v.Long.fromValue(_.dimValue)).unsigned=!1:typeof _.dimValue=="string"?S.dimValue=parseInt(_.dimValue,10):typeof _.dimValue=="number"?S.dimValue=_.dimValue:typeof _.dimValue=="object"&&(S.dimValue=new v.LongBits(_.dimValue.low>>>0,_.dimValue.high>>>0).toNumber())),_.dimParam!=null&&(S.dimParam=String(_.dimParam)),_.denotation!=null&&(S.denotation=String(_.denotation)),S},o.toObject=function(_,S){S||(S={});var T={};return S.defaults&&(T.denotation=""),_.dimValue!=null&&_.hasOwnProperty("dimValue")&&(typeof _.dimValue=="number"?T.dimValue=S.longs===String?String(_.dimValue):_.dimValue:T.dimValue=S.longs===String?v.Long.prototype.toString.call(_.dimValue):S.longs===Number?new v.LongBits(_.dimValue.low>>>0,_.dimValue.high>>>0).toNumber():_.dimValue,S.oneofs&&(T.value="dimValue")),_.dimParam!=null&&_.hasOwnProperty("dimParam")&&(T.dimParam=_.dimParam,S.oneofs&&(T.value="dimParam")),_.denotation!=null&&_.hasOwnProperty("denotation")&&(T.denotation=_.denotation),T},o.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},o})(),u})(),f.TypeProto=(function(){function u(h){if(h)for(var _=Object.keys(h),S=0;S<_.length;++S)h[_[S]]!=null&&(this[_[S]]=h[_[S]])}var o;return u.prototype.tensorType=null,u.prototype.denotation="",Object.defineProperty(u.prototype,"value",{get:v.oneOfGetter(o=["tensorType"]),set:v.oneOfSetter(o)}),u.create=function(h){return new u(h)},u.encode=function(h,_){return _||(_=w.create()),h.tensorType!=null&&h.hasOwnProperty("tensorType")&&g.onnx.TypeProto.Tensor.encode(h.tensorType,_.uint32(10).fork()).ldelim(),h.denotation!=null&&h.hasOwnProperty("denotation")&&_.uint32(50).string(h.denotation),_},u.encodeDelimited=function(h,_){return this.encode(h,_).ldelim()},u.decode=function(h,_){h instanceof b||(h=b.create(h));for(var S=_===void 0?h.len:h.pos+_,T=new g.onnx.TypeProto;h.pos<S;){var O=h.uint32();switch(O>>>3){case 1:T.tensorType=g.onnx.TypeProto.Tensor.decode(h,h.uint32());break;case 6:T.denotation=h.string();break;default:h.skipType(7&O)}}return T},u.decodeDelimited=function(h){return h instanceof b||(h=new b(h)),this.decode(h,h.uint32())},u.verify=function(h){if(typeof h!="object"||h===null)return"object expected";if(h.tensorType!=null&&h.hasOwnProperty("tensorType")){var _=g.onnx.TypeProto.Tensor.verify(h.tensorType);if(_)return"tensorType."+_}return h.denotation!=null&&h.hasOwnProperty("denotation")&&!v.isString(h.denotation)?"denotation: string expected":null},u.fromObject=function(h){if(h instanceof g.onnx.TypeProto)return h;var _=new g.onnx.TypeProto;if(h.tensorType!=null){if(typeof h.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");_.tensorType=g.onnx.TypeProto.Tensor.fromObject(h.tensorType)}return h.denotation!=null&&(_.denotation=String(h.denotation)),_},u.toObject=function(h,_){_||(_={});var S={};return _.defaults&&(S.denotation=""),h.tensorType!=null&&h.hasOwnProperty("tensorType")&&(S.tensorType=g.onnx.TypeProto.Tensor.toObject(h.tensorType,_),_.oneofs&&(S.value="tensorType")),h.denotation!=null&&h.hasOwnProperty("denotation")&&(S.denotation=h.denotation),S},u.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},u.Tensor=(function(){function h(_){if(_)for(var S=Object.keys(_),T=0;T<S.length;++T)_[S[T]]!=null&&(this[S[T]]=_[S[T]])}return h.prototype.elemType=0,h.prototype.shape=null,h.create=function(_){return new h(_)},h.encode=function(_,S){return S||(S=w.create()),_.elemType!=null&&_.hasOwnProperty("elemType")&&S.uint32(8).int32(_.elemType),_.shape!=null&&_.hasOwnProperty("shape")&&g.onnx.TensorShapeProto.encode(_.shape,S.uint32(18).fork()).ldelim(),S},h.encodeDelimited=function(_,S){return this.encode(_,S).ldelim()},h.decode=function(_,S){_ instanceof b||(_=b.create(_));for(var T=S===void 0?_.len:_.pos+S,O=new g.onnx.TypeProto.Tensor;_.pos<T;){var j=_.uint32();switch(j>>>3){case 1:O.elemType=_.int32();break;case 2:O.shape=g.onnx.TensorShapeProto.decode(_,_.uint32());break;default:_.skipType(7&j)}}return O},h.decodeDelimited=function(_){return _ instanceof b||(_=new b(_)),this.decode(_,_.uint32())},h.verify=function(_){if(typeof _!="object"||_===null)return"object expected";if(_.elemType!=null&&_.hasOwnProperty("elemType")&&!v.isInteger(_.elemType))return"elemType: integer expected";if(_.shape!=null&&_.hasOwnProperty("shape")){var S=g.onnx.TensorShapeProto.verify(_.shape);if(S)return"shape."+S}return null},h.fromObject=function(_){if(_ instanceof g.onnx.TypeProto.Tensor)return _;var S=new g.onnx.TypeProto.Tensor;if(_.elemType!=null&&(S.elemType=0|_.elemType),_.shape!=null){if(typeof _.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");S.shape=g.onnx.TensorShapeProto.fromObject(_.shape)}return S},h.toObject=function(_,S){S||(S={});var T={};return S.defaults&&(T.elemType=0,T.shape=null),_.elemType!=null&&_.hasOwnProperty("elemType")&&(T.elemType=_.elemType),_.shape!=null&&_.hasOwnProperty("shape")&&(T.shape=g.onnx.TensorShapeProto.toObject(_.shape,S)),T},h.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},h})(),u})(),f.OperatorSetIdProto=(function(){function u(o){if(o)for(var h=Object.keys(o),_=0;_<h.length;++_)o[h[_]]!=null&&(this[h[_]]=o[h[_]])}return u.prototype.domain="",u.prototype.version=v.Long?v.Long.fromBits(0,0,!1):0,u.create=function(o){return new u(o)},u.encode=function(o,h){return h||(h=w.create()),o.domain!=null&&o.hasOwnProperty("domain")&&h.uint32(10).string(o.domain),o.version!=null&&o.hasOwnProperty("version")&&h.uint32(16).int64(o.version),h},u.encodeDelimited=function(o,h){return this.encode(o,h).ldelim()},u.decode=function(o,h){o instanceof b||(o=b.create(o));for(var _=h===void 0?o.len:o.pos+h,S=new g.onnx.OperatorSetIdProto;o.pos<_;){var T=o.uint32();switch(T>>>3){case 1:S.domain=o.string();break;case 2:S.version=o.int64();break;default:o.skipType(7&T)}}return S},u.decodeDelimited=function(o){return o instanceof b||(o=new b(o)),this.decode(o,o.uint32())},u.verify=function(o){return typeof o!="object"||o===null?"object expected":o.domain!=null&&o.hasOwnProperty("domain")&&!v.isString(o.domain)?"domain: string expected":o.version!=null&&o.hasOwnProperty("version")&&!(v.isInteger(o.version)||o.version&&v.isInteger(o.version.low)&&v.isInteger(o.version.high))?"version: integer|Long expected":null},u.fromObject=function(o){if(o instanceof g.onnx.OperatorSetIdProto)return o;var h=new g.onnx.OperatorSetIdProto;return o.domain!=null&&(h.domain=String(o.domain)),o.version!=null&&(v.Long?(h.version=v.Long.fromValue(o.version)).unsigned=!1:typeof o.version=="string"?h.version=parseInt(o.version,10):typeof o.version=="number"?h.version=o.version:typeof o.version=="object"&&(h.version=new v.LongBits(o.version.low>>>0,o.version.high>>>0).toNumber())),h},u.toObject=function(o,h){h||(h={});var _={};if(h.defaults)if(_.domain="",v.Long){var S=new v.Long(0,0,!1);_.version=h.longs===String?S.toString():h.longs===Number?S.toNumber():S}else _.version=h.longs===String?"0":0;return o.domain!=null&&o.hasOwnProperty("domain")&&(_.domain=o.domain),o.version!=null&&o.hasOwnProperty("version")&&(typeof o.version=="number"?_.version=h.longs===String?String(o.version):o.version:_.version=h.longs===String?v.Long.prototype.toString.call(o.version):h.longs===Number?new v.LongBits(o.version.low>>>0,o.version.high>>>0).toNumber():o.version),_},u.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},u})(),f),t.exports=g},2100:(t,e,n)=>{t.exports=n(9482)},9482:(t,e,n)=>{var i=e;function l(){i.util._configure(),i.Writer._configure(i.BufferWriter),i.Reader._configure(i.BufferReader)}i.build="minimal",i.Writer=n(1173),i.BufferWriter=n(3155),i.Reader=n(1408),i.BufferReader=n(593),i.util=n(9693),i.rpc=n(5994),i.roots=n(5054),i.configure=l,l()},1408:(t,e,n)=>{t.exports=w;var i,l=n(9693),f=l.LongBits,p=l.utf8;function b(S,T){return RangeError("index out of range: "+S.pos+" + "+(T||1)+" > "+S.len)}function w(S){this.buf=S,this.pos=0,this.len=S.length}var v,g=typeof Uint8Array<"u"?function(S){if(S instanceof Uint8Array||Array.isArray(S))return new w(S);throw Error("illegal buffer")}:function(S){if(Array.isArray(S))return new w(S);throw Error("illegal buffer")},u=function(){return l.Buffer?function(S){return(w.create=function(T){return l.Buffer.isBuffer(T)?new i(T):g(T)})(S)}:g};function o(){var S=new f(0,0),T=0;if(!(this.len-this.pos>4)){for(;T<3;++T){if(this.pos>=this.len)throw b(this);if(S.lo=(S.lo|(127&this.buf[this.pos])<<7*T)>>>0,this.buf[this.pos++]<128)return S}return S.lo=(S.lo|(127&this.buf[this.pos++])<<7*T)>>>0,S}for(;T<4;++T)if(S.lo=(S.lo|(127&this.buf[this.pos])<<7*T)>>>0,this.buf[this.pos++]<128)return S;if(S.lo=(S.lo|(127&this.buf[this.pos])<<28)>>>0,S.hi=(S.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return S;if(T=0,this.len-this.pos>4){for(;T<5;++T)if(S.hi=(S.hi|(127&this.buf[this.pos])<<7*T+3)>>>0,this.buf[this.pos++]<128)return S}else for(;T<5;++T){if(this.pos>=this.len)throw b(this);if(S.hi=(S.hi|(127&this.buf[this.pos])<<7*T+3)>>>0,this.buf[this.pos++]<128)return S}throw Error("invalid varint encoding")}function h(S,T){return(S[T-4]|S[T-3]<<8|S[T-2]<<16|S[T-1]<<24)>>>0}function _(){if(this.pos+8>this.len)throw b(this,8);return new f(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}w.create=u(),w.prototype._slice=l.Array.prototype.subarray||l.Array.prototype.slice,w.prototype.uint32=(v=4294967295,function(){if(v=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(v=(v|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(v=(v|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(v=(v|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(v=(v|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return v;if((this.pos+=5)>this.len)throw this.pos=this.len,b(this,10);return v}),w.prototype.int32=function(){return 0|this.uint32()},w.prototype.sint32=function(){var S=this.uint32();return S>>>1^-(1&S)|0},w.prototype.bool=function(){return this.uint32()!==0},w.prototype.fixed32=function(){if(this.pos+4>this.len)throw b(this,4);return h(this.buf,this.pos+=4)},w.prototype.sfixed32=function(){if(this.pos+4>this.len)throw b(this,4);return 0|h(this.buf,this.pos+=4)},w.prototype.float=function(){if(this.pos+4>this.len)throw b(this,4);var S=l.float.readFloatLE(this.buf,this.pos);return this.pos+=4,S},w.prototype.double=function(){if(this.pos+8>this.len)throw b(this,4);var S=l.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,S},w.prototype.bytes=function(){var S=this.uint32(),T=this.pos,O=this.pos+S;if(O>this.len)throw b(this,S);return this.pos+=S,Array.isArray(this.buf)?this.buf.slice(T,O):T===O?new this.buf.constructor(0):this._slice.call(this.buf,T,O)},w.prototype.string=function(){var S=this.bytes();return p.read(S,0,S.length)},w.prototype.skip=function(S){if(typeof S=="number"){if(this.pos+S>this.len)throw b(this,S);this.pos+=S}else do if(this.pos>=this.len)throw b(this);while(128&this.buf[this.pos++]);return this},w.prototype.skipType=function(S){switch(S){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(S=7&this.uint32())!=4;)this.skipType(S);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+S+" at offset "+this.pos)}return this},w._configure=function(S){i=S,w.create=u(),i._configure();var T=l.Long?"toLong":"toNumber";l.merge(w.prototype,{int64:function(){return o.call(this)[T](!1)},uint64:function(){return o.call(this)[T](!0)},sint64:function(){return o.call(this).zzDecode()[T](!1)},fixed64:function(){return _.call(this)[T](!0)},sfixed64:function(){return _.call(this)[T](!1)}})}},593:(t,e,n)=>{t.exports=f;var i=n(1408);(f.prototype=Object.create(i.prototype)).constructor=f;var l=n(9693);function f(p){i.call(this,p)}f._configure=function(){l.Buffer&&(f.prototype._slice=l.Buffer.prototype.slice)},f.prototype.string=function(){var p=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+p,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+p,this.len))},f._configure()},5054:t=>{t.exports={}},5994:(t,e,n)=>{e.Service=n(7948)},7948:(t,e,n)=>{t.exports=l;var i=n(9693);function l(f,p,b){if(typeof f!="function")throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this),this.rpcImpl=f,this.requestDelimited=!!p,this.responseDelimited=!!b}(l.prototype=Object.create(i.EventEmitter.prototype)).constructor=l,l.prototype.rpcCall=function f(p,b,w,v,g){if(!v)throw TypeError("request must be specified");var u=this;if(!g)return i.asPromise(f,u,p,b,w,v);if(u.rpcImpl)try{return u.rpcImpl(p,b[u.requestDelimited?"encodeDelimited":"encode"](v).finish(),(function(o,h){if(o)return u.emit("error",o,p),g(o);if(h!==null){if(!(h instanceof w))try{h=w[u.responseDelimited?"decodeDelimited":"decode"](h)}catch(_){return u.emit("error",_,p),g(_)}return u.emit("data",h,p),g(null,h)}u.end(!0)}))}catch(o){return u.emit("error",o,p),void setTimeout((function(){g(o)}),0)}else setTimeout((function(){g(Error("already ended"))}),0)},l.prototype.end=function(f){return this.rpcImpl&&(f||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(t,e,n)=>{t.exports=l;var i=n(9693);function l(w,v){this.lo=w>>>0,this.hi=v>>>0}var f=l.zero=new l(0,0);f.toNumber=function(){return 0},f.zzEncode=f.zzDecode=function(){return this},f.length=function(){return 1};var p=l.zeroHash="\0\0\0\0\0\0\0\0";l.fromNumber=function(w){if(w===0)return f;var v=w<0;v&&(w=-w);var g=w>>>0,u=(w-g)/4294967296>>>0;return v&&(u=~u>>>0,g=~g>>>0,++g>4294967295&&(g=0,++u>4294967295&&(u=0))),new l(g,u)},l.from=function(w){if(typeof w=="number")return l.fromNumber(w);if(i.isString(w)){if(!i.Long)return l.fromNumber(parseInt(w,10));w=i.Long.fromString(w)}return w.low||w.high?new l(w.low>>>0,w.high>>>0):f},l.prototype.toNumber=function(w){if(!w&&this.hi>>>31){var v=1+~this.lo>>>0,g=~this.hi>>>0;return v||(g=g+1>>>0),-(v+4294967296*g)}return this.lo+4294967296*this.hi},l.prototype.toLong=function(w){return i.Long?new i.Long(0|this.lo,0|this.hi,!!w):{low:0|this.lo,high:0|this.hi,unsigned:!!w}};var b=String.prototype.charCodeAt;l.fromHash=function(w){return w===p?f:new l((b.call(w,0)|b.call(w,1)<<8|b.call(w,2)<<16|b.call(w,3)<<24)>>>0,(b.call(w,4)|b.call(w,5)<<8|b.call(w,6)<<16|b.call(w,7)<<24)>>>0)},l.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},l.prototype.zzEncode=function(){var w=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^w)>>>0,this.lo=(this.lo<<1^w)>>>0,this},l.prototype.zzDecode=function(){var w=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^w)>>>0,this.hi=(this.hi>>>1^w)>>>0,this},l.prototype.length=function(){var w=this.lo,v=(this.lo>>>28|this.hi<<4)>>>0,g=this.hi>>>24;return g===0?v===0?w<16384?w<128?1:2:w<2097152?3:4:v<16384?v<128?5:6:v<2097152?7:8:g<128?9:10}},9693:function(t,e,n){var i=e;function l(p,b,w){for(var v=Object.keys(b),g=0;g<v.length;++g)p[v[g]]!==void 0&&w||(p[v[g]]=b[v[g]]);return p}function f(p){function b(w,v){if(!(this instanceof b))return new b(w,v);Object.defineProperty(this,"message",{get:function(){return w}}),Error.captureStackTrace?Error.captureStackTrace(this,b):Object.defineProperty(this,"stack",{value:new Error().stack||""}),v&&l(this,v)}return(b.prototype=Object.create(Error.prototype)).constructor=b,Object.defineProperty(b.prototype,"name",{get:function(){return p}}),b.prototype.toString=function(){return this.name+": "+this.message},b}i.asPromise=n(4537),i.base64=n(7419),i.EventEmitter=n(9211),i.float=n(945),i.inquire=n(7199),i.utf8=n(4997),i.pool=n(6662),i.LongBits=n(1945),i.isNode=!!(n.g!==void 0&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),i.global=i.isNode&&n.g||typeof window<"u"&&window||typeof self<"u"&&self||this,i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isInteger=Number.isInteger||function(p){return typeof p=="number"&&isFinite(p)&&Math.floor(p)===p},i.isString=function(p){return typeof p=="string"||p instanceof String},i.isObject=function(p){return p&&typeof p=="object"},i.isset=i.isSet=function(p,b){var w=p[b];return!(w==null||!p.hasOwnProperty(b))&&(typeof w!="object"||(Array.isArray(w)?w.length:Object.keys(w).length)>0)},i.Buffer=(function(){try{var p=i.inquire("buffer").Buffer;return p.prototype.utf8Write?p:null}catch{return null}})(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(p){return typeof p=="number"?i.Buffer?i._Buffer_allocUnsafe(p):new i.Array(p):i.Buffer?i._Buffer_from(p):typeof Uint8Array>"u"?p:new Uint8Array(p)},i.Array=typeof Uint8Array<"u"?Uint8Array:Array,i.Long=i.global.dcodeIO&&i.global.dcodeIO.Long||i.global.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(p){return p?i.LongBits.from(p).toHash():i.LongBits.zeroHash},i.longFromHash=function(p,b){var w=i.LongBits.fromHash(p);return i.Long?i.Long.fromBits(w.lo,w.hi,b):w.toNumber(!!b)},i.merge=l,i.lcFirst=function(p){return p.charAt(0).toLowerCase()+p.substring(1)},i.newError=f,i.ProtocolError=f("ProtocolError"),i.oneOfGetter=function(p){for(var b={},w=0;w<p.length;++w)b[p[w]]=1;return function(){for(var v=Object.keys(this),g=v.length-1;g>-1;--g)if(b[v[g]]===1&&this[v[g]]!==void 0&&this[v[g]]!==null)return v[g]}},i.oneOfSetter=function(p){return function(b){for(var w=0;w<p.length;++w)p[w]!==b&&delete this[p[w]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var p=i.Buffer;p?(i._Buffer_from=p.from!==Uint8Array.from&&p.from||function(b,w){return new p(b,w)},i._Buffer_allocUnsafe=p.allocUnsafe||function(b){return new p(b)}):i._Buffer_from=i._Buffer_allocUnsafe=null}},1173:(t,e,n)=>{t.exports=u;var i,l=n(9693),f=l.LongBits,p=l.base64,b=l.utf8;function w(j,C,D){this.fn=j,this.len=C,this.next=void 0,this.val=D}function v(){}function g(j){this.head=j.head,this.tail=j.tail,this.len=j.len,this.next=j.states}function u(){this.len=0,this.head=new w(v,0,0),this.tail=this.head,this.states=null}var o=function(){return l.Buffer?function(){return(u.create=function(){return new i})()}:function(){return new u}};function h(j,C,D){C[D]=255&j}function _(j,C){this.len=j,this.next=void 0,this.val=C}function S(j,C,D){for(;j.hi;)C[D++]=127&j.lo|128,j.lo=(j.lo>>>7|j.hi<<25)>>>0,j.hi>>>=7;for(;j.lo>127;)C[D++]=127&j.lo|128,j.lo=j.lo>>>7;C[D++]=j.lo}function T(j,C,D){C[D]=255&j,C[D+1]=j>>>8&255,C[D+2]=j>>>16&255,C[D+3]=j>>>24}u.create=o(),u.alloc=function(j){return new l.Array(j)},l.Array!==Array&&(u.alloc=l.pool(u.alloc,l.Array.prototype.subarray)),u.prototype._push=function(j,C,D){return this.tail=this.tail.next=new w(j,C,D),this.len+=C,this},_.prototype=Object.create(w.prototype),_.prototype.fn=function(j,C,D){for(;j>127;)C[D++]=127&j|128,j>>>=7;C[D]=j},u.prototype.uint32=function(j){return this.len+=(this.tail=this.tail.next=new _((j>>>=0)<128?1:j<16384?2:j<2097152?3:j<268435456?4:5,j)).len,this},u.prototype.int32=function(j){return j<0?this._push(S,10,f.fromNumber(j)):this.uint32(j)},u.prototype.sint32=function(j){return this.uint32((j<<1^j>>31)>>>0)},u.prototype.uint64=function(j){var C=f.from(j);return this._push(S,C.length(),C)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(j){var C=f.from(j).zzEncode();return this._push(S,C.length(),C)},u.prototype.bool=function(j){return this._push(h,1,j?1:0)},u.prototype.fixed32=function(j){return this._push(T,4,j>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(j){var C=f.from(j);return this._push(T,4,C.lo)._push(T,4,C.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(j){return this._push(l.float.writeFloatLE,4,j)},u.prototype.double=function(j){return this._push(l.float.writeDoubleLE,8,j)};var O=l.Array.prototype.set?function(j,C,D){C.set(j,D)}:function(j,C,D){for(var R=0;R<j.length;++R)C[D+R]=j[R]};u.prototype.bytes=function(j){var C=j.length>>>0;if(!C)return this._push(h,1,0);if(l.isString(j)){var D=u.alloc(C=p.length(j));p.decode(j,D,0),j=D}return this.uint32(C)._push(O,C,j)},u.prototype.string=function(j){var C=b.length(j);return C?this.uint32(C)._push(b.write,C,j):this._push(h,1,0)},u.prototype.fork=function(){return this.states=new g(this),this.head=this.tail=new w(v,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new w(v,0,0),this.len=0),this},u.prototype.ldelim=function(){var j=this.head,C=this.tail,D=this.len;return this.reset().uint32(D),D&&(this.tail.next=j.next,this.tail=C,this.len+=D),this},u.prototype.finish=function(){for(var j=this.head.next,C=this.constructor.alloc(this.len),D=0;j;)j.fn(j.val,C,D),D+=j.len,j=j.next;return C},u._configure=function(j){i=j,u.create=o(),i._configure()}},3155:(t,e,n)=>{t.exports=f;var i=n(1173);(f.prototype=Object.create(i.prototype)).constructor=f;var l=n(9693);function f(){i.call(this)}function p(b,w,v){b.length<40?l.utf8.write(b,w,v):w.utf8Write?w.utf8Write(b,v):w.write(b,v)}f._configure=function(){f.alloc=l._Buffer_allocUnsafe,f.writeBytesBuffer=l.Buffer&&l.Buffer.prototype instanceof Uint8Array&&l.Buffer.prototype.set.name==="set"?function(b,w,v){w.set(b,v)}:function(b,w,v){if(b.copy)b.copy(w,v,0,b.length);else for(var g=0;g<b.length;)w[v++]=b[g++]}},f.prototype.bytes=function(b){l.isString(b)&&(b=l._Buffer_from(b,"base64"));var w=b.length>>>0;return this.uint32(w),w&&this._push(f.writeBytesBuffer,w,b),this},f.prototype.string=function(b){var w=l.Buffer.byteLength(b);return this.uint32(w),w&&this._push(p,w,b),this},f._configure()},7714:(t,e,n)=>{e.R=void 0;const i=n(6919),l=n(7448);e.R=new class{async init(){}async createSessionHandler(f,p){const b=new i.Session(p);return await b.loadModel(f),new l.OnnxjsSessionHandler(b)}}},4200:(t,e,n)=>{e.c8=e.rX=void 0;const i=n(1670),l=n(5381),f=n(2157),p=n(2306);e.rX=()=>{if((typeof i.env.wasm.initTimeout!="number"||i.env.wasm.initTimeout<0)&&(i.env.wasm.initTimeout=0),typeof i.env.wasm.simd!="boolean"&&(i.env.wasm.simd=!0),typeof i.env.wasm.proxy!="boolean"&&(i.env.wasm.proxy=!1),typeof i.env.wasm.numThreads!="number"||!Number.isInteger(i.env.wasm.numThreads)||i.env.wasm.numThreads<=0){const b=typeof navigator>"u"?(0,l.cpus)().length:navigator.hardwareConcurrency;i.env.wasm.numThreads=Math.min(4,Math.ceil((b||1)/2))}},e.c8=new class{async init(){(0,e.rX)(),await(0,f.initWasm)()}async createSessionHandler(b,w){const v=new p.OnnxruntimeWebAssemblySessionHandler;return await v.loadModel(b,w),Promise.resolve(v)}}},6018:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(p,b,w,v){v===void 0&&(v=w);var g=Object.getOwnPropertyDescriptor(b,w);g&&!("get"in g?!b.__esModule:g.writable||g.configurable)||(g={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(p,v,g)}:function(p,b,w,v){v===void 0&&(v=w),p[v]=b[w]}),l=this&&this.__exportStar||function(p,b){for(var w in p)w==="default"||Object.prototype.hasOwnProperty.call(b,w)||i(b,p,w)};Object.defineProperty(e,"__esModule",{value:!0}),l(n(1670),e);const f=n(1670);{const p=n(7714).R;(0,f.registerBackend)("webgl",p,-10)}{const p=n(4200).c8;(0,f.registerBackend)("cpu",p,10),(0,f.registerBackend)("wasm",p,10),(0,f.registerBackend)("xnnpack",p,9)}},246:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;class n{constructor(l){Object.assign(this,l)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map((l=>`${this[l]}`)).join(";")),this._cacheKey}}e.createAttributeWithCacheKey=i=>new n(i)},7778:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;const i=n(1446),l=n(9395),f=n(9162),p=n(2517);var b=l.onnxruntime.experimental.fbs;class w{constructor(g){if(this._attributes=new Map,g!=null){for(const u of g)u instanceof i.onnx.AttributeProto?this._attributes.set(u.name,[w.getValue(u),w.getType(u)]):u instanceof b.Attribute&&this._attributes.set(u.name(),[w.getValue(u),w.getType(u)]);if(this._attributes.size<g.length)throw new Error("duplicated attribute names")}}set(g,u,o){this._attributes.set(g,[o,u])}delete(g){this._attributes.delete(g)}getFloat(g,u){return this.get(g,"float",u)}getInt(g,u){return this.get(g,"int",u)}getString(g,u){return this.get(g,"string",u)}getTensor(g,u){return this.get(g,"tensor",u)}getFloats(g,u){return this.get(g,"floats",u)}getInts(g,u){return this.get(g,"ints",u)}getStrings(g,u){return this.get(g,"strings",u)}getTensors(g,u){return this.get(g,"tensors",u)}get(g,u,o){const h=this._attributes.get(g);if(h===void 0){if(o!==void 0)return o;throw new Error(`required attribute not found: ${g}`)}if(h[1]!==u)throw new Error(`type mismatch: expected ${u} but got ${h[1]}`);return h[0]}static getType(g){const u=g instanceof i.onnx.AttributeProto?g.type:g.type();switch(u){case i.onnx.AttributeProto.AttributeType.FLOAT:return"float";case i.onnx.AttributeProto.AttributeType.INT:return"int";case i.onnx.AttributeProto.AttributeType.STRING:return"string";case i.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case i.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case i.onnx.AttributeProto.AttributeType.INTS:return"ints";case i.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case i.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${i.onnx.AttributeProto.AttributeType[u]}`)}}static getValue(g){const u=g instanceof i.onnx.AttributeProto?g.type:g.type();if(u===i.onnx.AttributeProto.AttributeType.GRAPH||u===i.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const o=this.getValueNoCheck(g);if(u===i.onnx.AttributeProto.AttributeType.INT&&p.LongUtil.isLong(o))return p.LongUtil.longToNumber(o);if(u===i.onnx.AttributeProto.AttributeType.INTS){const h=o,_=new Array(h.length);for(let S=0;S<h.length;S++){const T=h[S];_[S]=p.LongUtil.longToNumber(T)}return _}if(u===i.onnx.AttributeProto.AttributeType.TENSOR)return g instanceof i.onnx.AttributeProto?f.Tensor.fromProto(o):f.Tensor.fromOrtTensor(o);if(u===i.onnx.AttributeProto.AttributeType.TENSORS){if(g instanceof i.onnx.AttributeProto)return o.map((h=>f.Tensor.fromProto(h)));if(g instanceof b.Attribute)return o.map((h=>f.Tensor.fromOrtTensor(h)))}if(u===i.onnx.AttributeProto.AttributeType.STRING&&g instanceof i.onnx.AttributeProto){const h=o;return(0,p.decodeUtf8String)(h)}return u===i.onnx.AttributeProto.AttributeType.STRINGS&&g instanceof i.onnx.AttributeProto?o.map(p.decodeUtf8String):o}static getValueNoCheck(g){return g instanceof i.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(g):this.getValueNoCheckFromOrtFormat(g)}static getValueNoCheckFromOnnxFormat(g){switch(g.type){case i.onnx.AttributeProto.AttributeType.FLOAT:return g.f;case i.onnx.AttributeProto.AttributeType.INT:return g.i;case i.onnx.AttributeProto.AttributeType.STRING:return g.s;case i.onnx.AttributeProto.AttributeType.TENSOR:return g.t;case i.onnx.AttributeProto.AttributeType.GRAPH:return g.g;case i.onnx.AttributeProto.AttributeType.FLOATS:return g.floats;case i.onnx.AttributeProto.AttributeType.INTS:return g.ints;case i.onnx.AttributeProto.AttributeType.STRINGS:return g.strings;case i.onnx.AttributeProto.AttributeType.TENSORS:return g.tensors;case i.onnx.AttributeProto.AttributeType.GRAPHS:return g.graphs;default:throw new Error(`unsupported attribute type: ${i.onnx.AttributeProto.AttributeType[g.type]}`)}}static getValueNoCheckFromOrtFormat(g){switch(g.type()){case b.AttributeType.FLOAT:return g.f();case b.AttributeType.INT:return g.i();case b.AttributeType.STRING:return g.s();case b.AttributeType.TENSOR:return g.t();case b.AttributeType.GRAPH:return g.g();case b.AttributeType.FLOATS:return g.floatsArray();case b.AttributeType.INTS:{const u=[];for(let o=0;o<g.intsLength();o++)u.push(g.ints(o));return u}case b.AttributeType.STRINGS:{const u=[];for(let o=0;o<g.stringsLength();o++)u.push(g.strings(o));return u}case b.AttributeType.TENSORS:{const u=[];for(let o=0;o<g.tensorsLength();o++)u.push(g.tensors(o));return u}default:throw new Error(`unsupported attribute type: ${b.AttributeType[g.type()]}`)}}}e.Attribute=w},7091:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.backend=void 0;const i=n(5038),l=new Map;async function f(p){const b=e.backend;if(b[p]!==void 0&&(function(w){const v=w;return"initialize"in v&&typeof v.initialize=="function"&&"createSessionHandler"in v&&typeof v.createSessionHandler=="function"&&"dispose"in v&&typeof v.dispose=="function"})(b[p])){const w=b[p];let v=w.initialize();if(typeof v=="object"&&"then"in v&&(v=await v),v)return l.set(p,w),w}}e.backend={webgl:new i.WebGLBackend},e.resolveBackend=async function p(b){if(!b)return p(["webgl"]);{const w=typeof b=="string"?[b]:b;for(const v of w){const g=l.get(v);if(g)return g;const u=await f(v);if(u)return u}}throw new Error("no available backend to use")}},5038:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBackend=void 0;const i=n(1670),l=n(6231),f=n(6416),p=n(7305);e.WebGLBackend=class{get contextId(){return i.env.webgl.contextId}set contextId(b){i.env.webgl.contextId=b}get matmulMaxBatchSize(){return i.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(b){i.env.webgl.matmulMaxBatchSize=b}get textureCacheMode(){return i.env.webgl.textureCacheMode}set textureCacheMode(b){i.env.webgl.textureCacheMode=b}get pack(){return i.env.webgl.pack}set pack(b){i.env.webgl.pack=b}get async(){return i.env.webgl.async}set async(b){i.env.webgl.async=b}initialize(){try{return this.glContext=(0,p.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),l.Logger.setWithEnv(i.env),l.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(b){return l.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${b}`),!1}}createSessionHandler(b){return new f.WebGLSessionHandler(this,b)}dispose(){this.glContext.dispose()}}},5107:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CoordsGlslLib=void 0;const i=n(2517),l=n(8520),f=n(5060),p=n(7859),b=n(9390);class w extends l.GlslLib{constructor(g){super(g)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new l.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new l.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const g=this.context.outputTextureLayout;return g.isPacked?this.getPackedOutputSamplingSnippet(g):this.getUnpackedOutputSamplingSnippet(g)}getPackedOutputSamplingSnippet(g){const u=g.unpackedShape,o=[g.width,g.height],h={},_="getOutputCoords";switch(u.length){case 0:h[_]=this.getOutputScalarCoords();break;case 1:h[_]=this.getOutputPacked1DCoords(u,o);break;case 2:h[_]=this.getOutputPacked2DCoords(u,o);break;case 3:h[_]=this.getOutputPacked3DCoords(u,o);break;default:h[_]=this.getOutputPackedNDCoords(u,o)}const S=`
      void setOutput(vec4 val) {
        ${(0,f.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return h.floatTextureSetRGBA=new l.GlslLibRoutine(S),h}getUnpackedOutputSamplingSnippet(g){const u=g.unpackedShape,o=[g.width,g.height],h={},_="getOutputCoords";switch(u.length){case 0:h[_]=this.getOutputScalarCoords();break;case 1:h[_]=this.getOutputUnpacked1DCoords(u,o);break;case 2:h[_]=this.getOutputUnpacked2DCoords(u,o);break;case 3:h[_]=this.getOutputUnpacked3DCoords(u,o);break;case 4:h[_]=this.getOutputUnpacked4DCoords(u,o);break;case 5:h[_]=this.getOutputUnpacked5DCoords(u,o);break;case 6:h[_]=this.getOutputUnpacked6DCoords(u,o);break;default:throw new Error(`Unsupported output dimensionality: ${u.length}`)}const S=`
        void setOutput(float val) {
          ${(0,f.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return h.floatTextureSetR=new l.GlslLibRoutine(S),h}getOutputScalarCoords(){return new l.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(g,u){const o=u;let h="";return o[0]===1?(h=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${o[1]}.0);
          }
        `,new l.GlslLibRoutine(h)):o[1]===1?(h=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${o[0]}.0);
          }
        `,new l.GlslLibRoutine(h)):(h=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${o[0]}, ${o[1]}));
          return 2 * (resTexRC.y * ${o[0]} + resTexRC.x);
        }
      `,new l.GlslLibRoutine(h))}getOutputPacked2DCoords(g,u){let o="";if(i.ArrayUtil.arraysEqual(g,u))return o=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${u[0]}, ${u[1]}));
        }
      `,new l.GlslLibRoutine(o);const h=u,_=Math.ceil(g[1]/2);return o=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${h[0]}, ${h[1]}));

          int index = resTexRC.y * ${h[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${_}) * 2;
          int c = 2 * (index / ${_});

          return ivec2(r, c);
        }
      `,new l.GlslLibRoutine(o)}getOutputPacked3DCoords(g,u){const o=[u[0],u[1]],h=Math.ceil(g[2]/2),_=h*Math.ceil(g[1]/2),S=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${o[0]}, ${o[1]}));
          int index = resTexRC.y * ${o[0]} + resTexRC.x;

          int b = index / ${_};
          index -= b * ${_};

          // reverse r and c order for packed texture
          int r = imod(index, ${h}) * 2;
          int c = 2 * (index / ${h});

          return ivec3(b, r, c);
        }
      `;return new l.GlslLibRoutine(S)}getOutputPackedNDCoords(g,u){const o=[u[0],u[1]],h=Math.ceil(g[g.length-1]/2),_=h*Math.ceil(g[g.length-2]/2);let S=_,T="",O="b, r, c";for(let C=2;C<g.length-1;C++)S*=g[g.length-C-1],T=`
      int b${C} = index / ${S};
      index -= b${C} * ${S};
    `+T,O=`b${C}, `+O;const j=`
      ivec${g.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${o[0]}, ${o[1]}));
        int index = resTexRC.y * ${o[0]} + resTexRC.x;

        ${T}

        int b = index / ${_};
        index -= b * ${_};

        // reverse r and c order for packed texture
        int r = imod(index, ${h}) * 2;
        int c = 2 * (index / ${h});

        return ivec${g.length}(${O});
      }
    `;return new l.GlslLibRoutine(j)}getOutputUnpacked1DCoords(g,u){const o=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${u[0]}, ${u[1]}));
          return resTexRC.y * ${u[0]} + resTexRC.x;
        }
      `;return new l.GlslLibRoutine(o)}getOutputUnpacked2DCoords(g,u){const o=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${u[0]}, ${u[1]}));
          int index = resTexRC.y * ${u[0]} + resTexRC.x;
          int r = index / ${g[1]};
          int c = index - r * ${g[1]};
          return ivec2(r, c);
        }
      `;return new l.GlslLibRoutine(o)}getOutputUnpacked3DCoords(g,u){let o="";const h=g.length;let _=null;h<2&&(_=[]),_=new Array(h-1),_[h-2]=g[h-1];for(let O=h-3;O>=0;--O)_[O]=_[O+1]*g[O+1];const S=["r","c","d"],T=_.map(((O,j)=>`int ${S[j]} = index / ${O}; ${j===_.length-1?`int ${S[j+1]} = index - ${S[j]} * ${O}`:`index -= ${S[j]} * ${O}`};`)).join("");return o=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${u[0]}, ${u[1]}));
          int index = resTexRC.y * ${u[0]} + resTexRC.x;
          ${T}
          return ivec3(r, c, d);
        }
      `,new l.GlslLibRoutine(o)}getOutputUnpacked4DCoords(g,u){let o="";const h=g.length;let _=null;h<2&&(_=[]),_=new Array(h-1),_[h-2]=g[h-1];for(let O=h-3;O>=0;--O)_[O]=_[O+1]*g[O+1];const S=["r","c","d","d2"],T=_.map(((O,j)=>`int ${S[j]} = index / ${O}; ${j===_.length-1?`int ${S[j+1]} = index - ${S[j]} * ${O}`:`index -= ${S[j]} * ${O}`};`)).join("");return o=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${u[0]}, ${u[1]}));
          int index = resTexRC.y * ${u[0]} + resTexRC.x;
          ${T}
          return ivec4(r, c, d, d2);
        }
      `,new l.GlslLibRoutine(o)}getOutputUnpacked5DCoords(g,u){let o="";const h=g.length;let _=null;h<2&&(_=[]),_=new Array(h-1),_[h-2]=g[h-1];for(let O=h-3;O>=0;--O)_[O]=_[O+1]*g[O+1];const S=["r","c","d","d2","d3"],T=_.map(((O,j)=>`int ${S[j]} = index / ${O}; ${j===_.length-1?`int ${S[j+1]} = index - ${S[j]} * ${O}`:`index -= ${S[j]} * ${O}`};`)).join("");return o=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${u[0]}, ${u[1]}));
          int index = resTexRC.y * ${u[0]} + resTexRC.x;
          ${T}
          return ivec5(r, c, d, d2, d3);
        }
      `,new l.GlslLibRoutine(o)}getOutputUnpacked6DCoords(g,u){let o="";const h=g.length;let _=null;h<2&&(_=[]),_=new Array(h-1),_[h-2]=g[h-1];for(let O=h-3;O>=0;--O)_[O]=_[O+1]*g[O+1];const S=["r","c","d","d2","d3","d4"],T=_.map(((O,j)=>`int ${S[j]} = index / ${O}; ${j===_.length-1?`int ${S[j+1]} = index - ${S[j]} * ${O}`:`index -= ${S[j]} * ${O}`};`)).join("");return o=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${u[0]}, ${u[1]}));
         int index = resTexRC.y * ${u[0]} + resTexRC.x;
         ${T}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new l.GlslLibRoutine(o)}getCommonUtilFuncs(){const g={};let u="uvFromFlat";g[u]=new l.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),u="packedUVfrom1D",g[u]=new l.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),u="packedUVfrom2D",g[u]=new l.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),u="packedUVfrom3D",g[u]=new l.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),u="sampleTexture";const o=(0,f.getGlsl)(this.context.glContext.version);return g[u]=new l.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${o.texture2D}(textureSampler, uv).r;
        }`),g}getInputsSamplingSnippets(){const g={},u=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach(((o,h)=>{const _=this.context.inputTextureLayouts[h],S=(0,b.generateShaderFuncNameFromInputSamplerName)(o);_.isPacked?g[S]=this.getPackedSamplerFromInput(S,o,_):g[S]=this.getUnpackedSamplerFromInput(S,o,_);const T=(0,b.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(o);_.unpackedShape.length<=u.unpackedShape.length&&(_.isPacked?g[T]=this.getPackedSamplerAtOutputCoords(T,_,u,o):g[T]=this.getUnpackedSamplerAtOutputCoords(T,_,u,o))})),g}getPackedSamplerAtOutputCoords(g,u,o,h){const _=u.unpackedShape,S=o.unpackedShape,T=h,O=(0,b.generateShaderFuncNameFromInputSamplerName)(T),j=_.length,C=S.length,D=i.BroadcastUtil.getBroadcastDims(_,S),R=(0,b.getCoordsDataType)(C),I=C-j;let $;const F=(0,b.getGlChannels)();$=j===0?"":C<2&&D.length>=1?"coords = 0;":D.map((X=>`coords.${F[X+I]} = 0;`)).join(`
`);let L="";L=C<2&&j>0?"coords":_.map(((X,W)=>`coords.${F[W+I]}`)).join(", ");let V="return outputValue;";const Y=i.ShapeUtil.size(_)===1,Q=i.ShapeUtil.size(S)===1;if(j!==1||Y||Q){if(Y&&!Q)V=C===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(D.length){const X=j-2,W=j-1;D.indexOf(X)>-1&&D.indexOf(W)>-1?V="return vec4(outputValue.x);":D.indexOf(X)>-1?V="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":D.indexOf(W)>-1&&(V="return vec4(outputValue.xx, outputValue.zz);")}}else V=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const ee=`
      vec4 ${g}() {
        ${R} coords = getOutputCoords();
        
        int lastDim = coords.${F[C-1]};
        coords.${F[C-1]} = coords.${F[C-2]};
        coords.${F[C-2]} = lastDim;
      
        ${$}
        vec4 outputValue = ${O}(${L});
        ${V}
      }
    `;return new l.GlslLibRoutine(ee,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(g,u,o,h){const _=[o.width,o.height],S=[u.width,u.height],T=u.unpackedShape.length,O=o.unpackedShape.length,j=u.unpackedShape,C=o.unpackedShape,D=(0,b.generateShaderFuncNameFromInputSamplerName)(h);if(T===O&&i.ArrayUtil.arraysEqual(S,_)){const Q=`
          float ${g}() {
            return sampleTexture(${h}, TexCoords);
          }
        `;return new l.GlslLibRoutine(Q,["coordinates.sampleTexture"])}const R=(0,b.getCoordsDataType)(O),I=i.BroadcastUtil.getBroadcastDims(j,C),$=O-T;let F;const L=(0,b.getGlChannels)();F=T===0?"":O<2&&I.length>=1?"coords = 0;":I.map((Q=>`coords.${L[Q+$]} = 0;`)).join(`
`);let V="";V=O<2&&T>0?"coords":u.unpackedShape.map(((Q,ee)=>`coords.${L[ee+$]}`)).join(", ");const Y=`
        float ${g}() {
          ${R} coords = getOutputCoords();
          ${F}
          return ${D}(${V});
        }
      `;return new l.GlslLibRoutine(Y,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(g,u,o){switch(o.unpackedShape.length){case 0:return this.getPackedSamplerScalar(g,u);case 1:return this.getPackedSampler1D(g,u,o);case 2:return this.getPackedSampler2D(g,u,o);case 3:return this.getPackedSampler3D(g,u,o);default:return this.getPackedSamplerND(g,u,o)}}getUnpackedSamplerFromInput(g,u,o){const h=o.unpackedShape;switch(h.length){case 0:return this.getUnpackedSamplerScalar(g,u,o);case 1:return this.getUnpackedSampler1D(g,u,o);case 2:return this.getUnpackedSampler2D(g,u,o);case 3:return this.getUnpackedSampler3D(g,u,o);case 4:return this.getUnpackedSampler4D(g,u,o);case 5:return this.getUnpackedSampler5D(g,u,o);case 6:return this.getUnpackedSampler6D(g,u,o);default:throw new Error(`Unsupported dimension ${h.length}-D`)}}getPackedSamplerScalar(g,u){const o=`
          vec4 ${g}() {
            return ${(0,f.getGlsl)(this.context.glContext.version).texture2D}(${u}, halfCR);
          }
        `;return new l.GlslLibRoutine(o)}getPackedSampler1D(g,u,o){const h=[o.width,o.height],_=[h[1],h[0]],S=(0,f.getGlsl)(this.context.glContext.version),T=`vec4 ${g}(int index) {
      vec2 uv = packedUVfrom1D(
      ${_[0]}, ${_[1]}, index);
      return ${S.texture2D}(${u}, uv);
    }`;return new l.GlslLibRoutine(T,["coordinates.packedUVfrom1D"])}getPackedSampler2D(g,u,o){const h=o.unpackedShape,_=[o.width,o.height],S=(0,f.getGlsl)(this.context.glContext.version),T=_[0],O=_[1];if(_!=null&&i.ArrayUtil.arraysEqual(h,_)){const R=`vec4 ${g}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${O}.0, ${T}.0);
        return ${S.texture2D}(${u}, uv);
      }`;return new l.GlslLibRoutine(R)}const j=_,C=Math.ceil(h[1]/2),D=`vec4 ${g}(int row, int col) {
      vec2 uv = packedUVfrom2D(${j[1]}, ${j[0]}, ${C}, row, col);
      return ${S.texture2D}(${u}, uv);
    }`;return new l.GlslLibRoutine(D,["coordinates.packedUVfrom2D"])}getPackedSampler3D(g,u,o){const h=o.unpackedShape,_=[o.width,o.height],S=[_[0],_[1]],T=(0,f.getGlsl)(this.context.glContext.version);if(h[0]===1){const R=h.slice(1),I=[1,2],$=(0,b.squeezeInputShape)(h,R),F=["b","row","col"],L=JSON.parse(JSON.stringify(o));L.unpackedShape=$;const V=this.getPackedSamplerFromInput(g,u,L),Y=`${V.routineBody}
      vec4 ${g}(int b, int row, int col) {
        return ${g}(${(0,b.getSqueezedParams)(F,I)});
      } `;return new l.GlslLibRoutine(Y,V.dependencies)}const O=S[0],j=S[1],C=Math.ceil(h[2]/2),D=`vec4 ${g}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${j}, ${O}, ${C*Math.ceil(h[1]/2)}, ${C}, b, row, col);
      return ${T.texture2D}(${u}, uv);}`;return new l.GlslLibRoutine(D,["coordinates.packedUVfrom3D"])}getPackedSamplerND(g,u,o){const h=o.unpackedShape,_=h.length,S=[o.width,o.height],T=(0,f.getGlsl)(this.context.glContext.version),O=[S[0],S[1]],j=O[1],C=O[0],D=Math.ceil(h[_-1]/2);let R=D*Math.ceil(h[_-2]/2),I="int b, int row, int col",$=`b * ${R} + (row / 2) * ${D} + (col / 2)`;for(let L=2;L<_-1;L++)I=`int b${L}, `+I,R*=h[_-L-1],$=`b${L} * ${R} + `+$;const F=`vec4 ${g}(${I}) {
      int index = ${$};
      int texR = index / ${C};
      int texC = index - texR * ${C};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${C}, ${j});
      return ${T.texture2D}(${u}, uv);
    }`;return new l.GlslLibRoutine(F)}getUnpackedSamplerScalar(g,u,o){const[h,_]=[o.width,o.height];if(h===1&&_===1){const T=`
          float ${g}() {
            return sampleTexture(${u}, halfCR);
          }
        `;return new l.GlslLibRoutine(T,["coordinates.sampleTexture"])}const S=`
        float ${g}() {
          int offset_${u} = coordsToOffset(TexCoords, ${h}, ${_});
          vec2 uv = uvFromFlat(${h}, ${_}, offset_${u});
          return sampleTexture(${u}, uv);
        }
      `;return new l.GlslLibRoutine(S,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(g,u,o){const h=o.width,_=o.height;if(_===1&&h===1){const T=`
        float ${g}(int index) {
          return sampleTexture(${u}, halfCR);
        }
      `;return new l.GlslLibRoutine(T,["coordinates.sampleTexture"])}if(_===1){const T=`
          float ${g}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${h}.0, 0.5);
            return sampleTexture(${u}, uv);
          }
        `;return new l.GlslLibRoutine(T,["coordinates.sampleTexture"])}if(h===1){const T=`
          float ${g}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${_}.0);
            return sampleTexture(${u}, uv);
          }
        `;return new l.GlslLibRoutine(T,["coordinates.sampleTexture"])}const S=`
        float ${g}(int index) {
          vec2 uv = uvFromFlat(${h}, ${_}, index);
          return sampleTexture(${u}, uv);
        }
      `;return new l.GlslLibRoutine(S,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(g,u,o){const h=o.unpackedShape,_=[o.height,o.width];if(_!=null&&i.ArrayUtil.arraysEqual(h,_)){const R=`
          float ${g}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${_[1]}.0, ${_[0]}.0);
            return sampleTexture(${u}, uv);
          }
        `;return new l.GlslLibRoutine(R,["coordinates.sampleTexture"])}const{newShape:S,keptDims:T}=(0,p.squeezeShape)(h),O=S;if(O.length<h.length){const R=(0,b.squeezeInputShape)(h,O),I=JSON.parse(JSON.stringify(o));I.unpackedShape=R;const $=["col","row"],F=`
          ${this.getUnpackedSamplerFromInput(g,u,I).routineBody}
          float ${g}(int row, int col) {
            return ${g}(${(0,b.getSqueezedParams)($,T)});
          }
        `;return new l.GlslLibRoutine(F,["coordinates.sampleTexture"])}const j=_[1],C=_[0];if(C===1){const R=`
          float ${g}(int row, int col) {
            int offset_${u} = coordsToOffset(TexCoords, ${j}, ${C});
            float index = dot(vec3(row, col, offset_${u}), vec3(${h[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${j}.0);
            return sampleTexture(${u}, uv);
          }
        `;return new l.GlslLibRoutine(R,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(j===1){const R=`
          float ${g}(int row, int col) {
            int offset_${u} = coordsToOffset(TexCoords, ${j}, ${C});
            float index = dot(vec3(row, col, offset_${u}), vec3(${h[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${C}.0, 0.5);
            return sampleTexture(${u}, uv);
          }
        `;return new l.GlslLibRoutine(R,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const D=`
        float ${g}(int row, int col) {
          int index = col * ${h[1]} + row;
          vec2 uv = uvFromFlat(${j}, ${C}, index);
          return sampleTexture(${u}, uv);
        }
      `;return new l.GlslLibRoutine(D,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(g,u,o){const h=o.unpackedShape,_=h[1]*h[2],S=h[2],{newShape:T,keptDims:O}=(0,p.squeezeShape)(h),j=T;if(j.length<h.length){const D=(0,b.squeezeInputShape)(h,j),R=["batch","col","row"],I=JSON.parse(JSON.stringify(o));I.unpackedShape=D;const $=this.getUnpackedSamplerFromInput(g,u,I),F=O.reverse(),L=`
          ${$.routineBody}
          float ${g}(int batch, int row, int col) {
            return ${g}(${(0,b.getSqueezedParams)(R,F)});
          }
        `;return new l.GlslLibRoutine(L,$.dependencies)}const C=`
          float ${g}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${_} + col * ${S} + row;
            vec2 uv = uvFromFlat(${o.width}, ${o.height}, index);
            return sampleTexture(${u}, uv);
          }
      `;return new l.GlslLibRoutine(C,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(g,u,o){const h=o.unpackedShape,_=h[3],S=h[2]*_,T=`
        float ${g}(int row, int col, int depth, int depth2) {
          int index = row * ${h[1]*S} + col * ${S} +
              depth2 * ${_} + depth;
          vec2 uv = uvFromFlat(${o.width}, ${o.height}, index);
          return sampleTexture(${u}, uv);
        }
      `;return new l.GlslLibRoutine(T,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(g,u,o){const h=o.unpackedShape,_=h[4],S=h[3]*_,T=h[2]*S,O=h[1]*T,{newShape:j,keptDims:C}=(0,p.squeezeShape)(h);if(j.length<h.length){const R=(0,b.squeezeInputShape)(h,j),I=["row","col","depth","depth2","depth3"],$=JSON.parse(JSON.stringify(o));$.unpackedShape=R;const F=`
          ${this.getUnpackedSamplerFromInput(g,u,$).routineBody}
          float ${g}(int row, int col, int depth, int depth2, int depth3) {
            return ${g}(${(0,b.getSqueezedParams)(I,C)});
          }
        `;return new l.GlslLibRoutine(F,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const D=`
        float ${g}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${O} + col * ${T} + depth * ${S} +
          depth3 * ${_} + depth2;
          vec2 uv = uvFromFlat(${o.width}, ${o.height}, index);
          return sampleTexture(${u}, uv);
        }
      `;return new l.GlslLibRoutine(D,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(g,u,o){const h=o.unpackedShape,_=h[5],S=h[4]*_,T=h[3]*S,O=h[2]*T,j=h[1]*O,{newShape:C,keptDims:D}=(0,p.squeezeShape)(h);if(C.length<h.length){const I=(0,b.squeezeInputShape)(h,C),$=["row","col","depth","depth2","depth3","depth4"],F=JSON.parse(JSON.stringify(o));F.unpackedShape=I;const L=`
            ${this.getUnpackedSamplerFromInput(g,u,F).routineBody}
            float ${g}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${g}(${(0,b.getSqueezedParams)($,D)});
            }
          `;return new l.GlslLibRoutine(L,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const R=`
          float ${g}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${j} + col * ${O} + depth * ${T} +
            depth2 * ${S} + depth3 * ${_} + depth4;
            vec2 uv = uvFromFlat(${o.width}, ${o.height}, index);
            return sampleTexture(${u}, uv);
          }
        `;return new l.GlslLibRoutine(R,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const g=this.context.outputTextureLayout,u=g.shape.length,o=g.strides,h=g.width,_=g.height,S=[];for(let O=0;O<u-1;++O)S.push(`
        c[${O}] = offset / ${o[O]};`),S.push(`
        offset -= c[${O}] * ${o[O]};`);S.push(`
        c[${u-1}] = offset;`);const T=`
      void toVec(vec2 texCoords, out int c[${u}]) {
        int offset = coordsToOffset(texCoords, ${h}, ${_});
        ${S.join("")}
      }
      void toVec(int offset, out int c[${u}]) {
        ${S.join("")}
      }
    `;return{toVec:new l.GlslLibRoutine(T,["coordinates.coordsToOffset"])}}valueFrom(){const g={};return this.context.programInfo.inputNames.forEach(((u,o)=>{const h=this.context.inputTextureLayouts[o],_=(h.unpackedShape.length>0?h.unpackedShape:h.shape).length;let S=`_${u}`;g[S]=new l.GlslLibRoutine(this.getValueFromSingle(u,_,h.width,h.height,!1),[`shapeUtils.indicesToOffset${S}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),S+="_T",g[S]=new l.GlslLibRoutine(this.getValueFromSingle(u,_,h.width,h.height,!0),[`shapeUtils.indicesToOffset${S}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])})),g}getValueFromSingle(g,u,o,h,_){let S=`_${g}`;return _&&(S+="_T"),`
        float ${S}(int m[${u}]) {
          int offset = indicesToOffset${S}(m);
          vec2 coords = offsetToCoords(offset, ${o}, ${h});
          float value = getColorAsFloat(${(0,f.getGlsl)(this.context.glContext.version).texture2D}(${g}, coords));
          return value;
        }
        `}getPackedValueFrom(g,u,o,h,_){let S=`_${g}_Pack`;return _&&(S+="_T"),`
        vec4 ${S}(int m[${u}]) {
          int offset = indicesToOffset_${g}(m);
          vec2 coords = offsetToCoords(offset, ${o}, ${h});
          return ${(0,f.getGlsl)(this.context.glContext.version).texture2D}(${g}, coords);
        }
        `}}e.CoordsGlslLib=w},8520:(t,e)=>{var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TopologicalSortGlslRoutines=e.GlslLibRoutineNode=e.GlslLibRoutine=e.GlslLib=e.GlslContext=e.FunctionType=void 0,(n=e.FunctionType||(e.FunctionType={}))[n.ValueBased=0]="ValueBased",n[n.Positional=1]="Positional",e.GlslContext=class{constructor(i,l,f,p){this.glContext=i,this.programInfo=l,this.inputTextureLayouts=f,this.outputTextureLayout=p}},e.GlslLib=class{constructor(i){this.context=i}},e.GlslLibRoutine=class{constructor(i,l){this.routineBody=i,this.dependencies=l}},e.GlslLibRoutineNode=class{constructor(i,l,f){this.name=i,this.dependencies=f||[],l&&(this.routineBody=l)}addDependency(i){i&&this.dependencies.push(i)}},e.TopologicalSortGlslRoutines=class{static returnOrderedNodes(i){if(!i||i.length===0)return[];if(i.length===1)return i;const l=new Set,f=new Set,p=new Array;return this.createOrderedNodes(i,l,f,p),p}static createOrderedNodes(i,l,f,p){for(let b=0;b<i.length;++b)this.dfsTraverse(i[b],l,f,p)}static dfsTraverse(i,l,f,p){if(!i||f.has(i.name))return;if(l.has(i.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");l.add(i.name);const b=i.dependencies;if(b&&b.length>0)for(let w=0;w<b.length;++w)this.dfsTraverse(b[w],l,f,p);p.push(i),f.add(i.name),l.delete(i.name)}}},7341:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EncodingGlslLib=void 0;const i=n(8520);class l extends i.GlslLib{constructor(p){super(p)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new i.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new i.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const p=l.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new i.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${p}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const p=l.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new i.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${p}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const p=new ArrayBuffer(4),b=new Uint32Array(p),w=new Uint8Array(p);if(b[0]=3735928559,w[0]===239)return!0;if(w[0]===222)return!1;throw new Error("unknown endianness")}}e.EncodingGlslLib=l},9894:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FragColorGlslLib=void 0;const i=n(8520),l=n(5060);class f extends i.GlslLib{constructor(b){super(b)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const b=(0,l.getGlsl)(this.context.glContext.version);return{setFragColor:new i.GlslLibRoutine(`
        void setFragColor(float value) {
            ${b.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new i.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}e.FragColorGlslLib=f},2848:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.replaceInlines=void 0;const n=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;e.replaceInlines=function(i){const l={};let f;for(;(f=n.exec(i))!==null;){const p=f[3].split(",").map((b=>{const w=b.trim().split(" ");return w&&w.length===2?{type:w[0],name:w[1]}:null})).filter((b=>b!==null));l[f[2]]={params:p,body:f[4]}}for(const p in l){const b="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",p),w=new RegExp(b,"gm");for(;(f=w.exec(i))!==null;){const v=f[1],g=f[2],u=f[3].split(","),o=v?`${v} ${g};`:"";let h=l[p].body,_="";l[p].params.forEach(((T,O)=>{T&&(_+=`${T.type} ${T.name} = ${u[O]};
`)})),h=`${_}
 ${h}`,h=h.replace("return",`${g} = `);const S=`
      ${o}
      {
        ${h}
      }
      `;i=i.replace(f[0],S)}}return i.replace(n,"")}},8879:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlslPreprocessor=void 0;const i=n(8520),l=n(2848),f=n(5483),p=n(5060);e.GlslPreprocessor=class{constructor(b,w,v,g){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new i.GlslContext(b,w,v,g),Object.keys(f.glslRegistry).forEach((o=>{const h=new f.glslRegistry[o](this.context);this.libs[o]=h}));const u=this.glslLibRoutineDependencyGraph;for(const o in this.libs){const h=this.libs[o].getFunctions();for(const _ in h){const S=o+"."+_;let T;u[S]?(T=u[S],T.routineBody=h[_].routineBody):(T=new i.GlslLibRoutineNode(S,h[_].routineBody),u[S]=T);const O=h[_].dependencies;if(O)for(let j=0;j<O.length;++j)if(u[O[j]])T.addDependency(u[O[j]]);else{const C=new i.GlslLibRoutineNode(O[j]);u[O[j]]=C,T.addDependency(C)}}}}preprocess(){const b=this.context.programInfo;let w=b.shaderSource;return this.context.programInfo.hasMain||(w=`${w}
      ${(0,p.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),w=(0,l.replaceInlines)(w),`${(0,p.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(b.inputNames,b.variables)}
    ${this.getImports(w)}
    ${w}`}getImports(b){const w=this.selectGlslLibRoutinesToBeIncluded(b);if(w.length===0)return"";let v="";for(let g=0;g<w.length;++g){if(!w[g].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${w[g].name}`);v+=w[g].routineBody+`
`}return v}selectGlslLibRoutinesToBeIncluded(b){const w=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach((v=>{const g=v.split(".")[1];b.indexOf(g)!==-1&&w.push(this.glslLibRoutineDependencyGraph[v])})),i.TopologicalSortGlslRoutines.returnOrderedNodes(w)}getUniforms(b,w){const v=[];if(b)for(const g of b)v.push(`uniform sampler2D ${g};`);if(w)for(const g of w)v.push(`uniform ${g.type} ${g.name}${g.arrayLength?`[${g.arrayLength}]`:""};`);return v.join(`
`)}}},5483:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.glslRegistry=void 0;const i=n(5107),l=n(7341),f=n(9894),p=n(2655),b=n(3891);e.glslRegistry={encoding:l.EncodingGlslLib,fragcolor:f.FragColorGlslLib,vec:b.VecGlslLib,shapeUtils:p.ShapeUtilsGlslLib,coordinates:i.CoordsGlslLib}},2655:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeUtilsGlslLib=void 0;const i=n(8520);class l extends i.GlslLib{constructor(p){super(p)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const p=this.context.outputTextureLayout.shape.length,b={};return this.context.programInfo.inputNames.forEach(((w,v)=>{const g=this.context.inputTextureLayouts[v].unpackedShape;if(g.length<=p){const u=g.length,o=p-u,h=`bcastIndices_${w}`;let _="";for(let T=0;T<u;++T)_+=`
          realIndices[${T}] = int( mod(float(bcastedIndices[${o+T}]), ${g[T]}.0) );
          `;const S=`
        void ${h} (int bcastedIndices[${p}], out int realIndices[${u}]) {
          ${_}
        }
        `;b[h]=new i.GlslLibRoutine(S)}})),b}bcastMatmulIndex(){const p=this.context.outputTextureLayout.shape.length,b={};return this.context.programInfo.inputNames.forEach(((w,v)=>{const g=this.context.inputTextureLayouts[v].shape;if(!(g.length<2||g.length>p)){const u=g.length,o=p-u,h=`bcastMatmulIndices_${w}`;let _="";for(let T=0;T<u-2;++T)_+=`
          realIndices[${T}] = int( mod(float(bcastedIndices[${o+T}]), ${g[T]}.0) );
          `;const S=`
        void ${h}(int bcastedIndices[${p}], out int realIndices[${u}]) {
          ${_}
          realIndices[${u-1}] = bcastedIndices[${p-1}];
          realIndices[${u-2}] = bcastedIndices[${p-2}];
        }
        `;b[h]=new i.GlslLibRoutine(S)}})),b}indicesToOffset(){const p={};return this.context.programInfo.inputNames.forEach(((b,w)=>{const v=this.context.inputTextureLayouts[w].shape,g=this.context.inputTextureLayouts[w].strides,u=v.length;let o=`indicesToOffset_${b}`;p[o]=new i.GlslLibRoutine(l.indexToOffsetSingle(o,u,g)),o=`indicesToOffset_${b}_T`,p[o]=new i.GlslLibRoutine(l.indexToOffsetSingle(o,u,g.slice().reverse()))})),p}static indexToOffsetSingle(p,b,w){let v="";for(let g=b-1;g>=0;--g)v+=`
        offset += indices[${g}] * ${w[g]};
        `;return`
      int ${p}(int indices[${b}]) {
        int offset = 0;
        ${v}
        return offset;
      }
      `}offsetToIndices(){const p={};return this.context.programInfo.inputNames.forEach(((b,w)=>{const v=this.context.inputTextureLayouts[w].shape,g=this.context.inputTextureLayouts[w].strides,u=v.length;let o=`offsetToIndices_${b}`;p[o]=new i.GlslLibRoutine(l.offsetToIndicesSingle(o,u,g)),o=`offsetToIndices_${b}_T`,p[o]=new i.GlslLibRoutine(l.offsetToIndicesSingle(o,u,g.slice().reverse()))})),p}static offsetToIndicesSingle(p,b,w){const v=[];for(let g=0;g<b-1;++g)v.push(`
      indices[${g}] = offset / ${w[g]};`),v.push(`
        offset -= indices[${g}] * ${w[g]};`);return v.push(`
      indices[${b-1}] = offset;`),`
      void ${p}(int offset, out int indices[${b}]) {
        ${v.join("")}
      }
      `}incrementIndices(){const p={};return this.context.programInfo.inputNames.forEach(((b,w)=>{const v=this.context.inputTextureLayouts[w].shape,g=v.length,u=`incrementIndices_${b}`;let o="";for(let _=0;_<g;++_)o+=`
        shape[${_}] = ${v[_]};`;const h=`
        void ${u}(int axis, out int indices[${g}]) {
          int shape[${g}];
          ${o};
          for(int i = ${g} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;p[u]=new i.GlslLibRoutine(h)})),p}}e.ShapeUtilsGlslLib=l},5060:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultFragShaderMain=e.getFragShaderPreamble=e.getVertexShaderSource=e.getGlsl=void 0;const n={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},i={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function l(f){return f===1?n:i}e.getGlsl=l,e.getVertexShaderSource=function(f){const p=l(f);return`${p.version}
      precision highp float;
      ${p.attribute} vec3 position;
      ${p.attribute} vec2 textureCoord;

      ${p.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},e.getFragShaderPreamble=function(f){const p=l(f);return`${p.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${p.varyingFrag} vec2 TexCoords;
    ${p.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},e.getDefaultFragShaderMain=function(f,p){return`
  void main() {
    int indices[${p}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${l(f).output} = result;
  }
  `}},3891:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VecGlslLib=void 0;const i=n(8520);class l extends i.GlslLib{constructor(p){super(p)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const p=this.context.outputTextureLayout.shape.length,b={add:"+=",sub:"-=",mul:"*=",div:"/="},w={};for(const v in b){const g=`${v}Vec`;let u="";for(let h=0;h<p;++h)u+=`
          dest[${h}] ${b[v]} src[${h}];
          `;const o=`
        void ${g}(int src[${p}], out int dest[${p}]) {
          ${u}
        }
        `;w[g]=new i.GlslLibRoutine(o)}return w}copyVec(){const p=this.context.outputTextureLayout.shape.length;let b="";for(let v=0;v<p;++v)b+=`
        dest[${v}] = src[${v}];
        `;const w=`
      void copyVec(int src[${p}], out int dest[${p}]) {
        ${b}
      }
      `;return{copyVec:new i.GlslLibRoutine(w)}}setVecItem(){const p=this.context.outputTextureLayout.shape.length;let b=`
        if(index < 0)
            index =${p} + index;
        if (index == 0)
            m[0] = value;
        `;for(let v=1;v<p-1;++v)b+=`
        else if (index == ${v})
            m[${v}] = value;
            `;b+=`
        else
            m[${p-1}] = value;
        `;const w=`
      void setVecItem(out int m[${p}], int index, int value) {
        ${b}
      }
        `;return{setVecItem:new i.GlslLibRoutine(w)}}getVecItem(){const p=this.context.outputTextureLayout.shape.length;let b=`
        if(index < 0)
            index = ${p} + index;
        if (index == 0)
            return m[0];
      `;for(let v=1;v<p-1;++v)b+=`
        else if (index == ${v})
            return m[${v}];
      `;b+=`
        else
            return m[${p-1}];
        `;const w=`
      int getVecItem(int m[${p}], int index) {
        ${b}
      }
    `;return{getVecItem:new i.GlslLibRoutine(w)}}}e.VecGlslLib=l},8316:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLInferenceHandler=void 0;const i=n(6231),l=n(9162),f=n(2517),p=n(2403),b=n(7019),w=n(8710),v=n(5611),g=n(4057),u=n(2039);e.WebGLInferenceHandler=class{constructor(o){this.session=o,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(o,h){return(0,g.calculateTextureWidthAndHeight)(this.session.layoutStrategy,o,h)}executeProgram(o,h){if(h.length<o.inputNames.length)throw new Error(`Input size mustn't be less than ${o.inputNames.length}.`);if(o.inputNames.length!==o.inputTypes.length)throw new Error("input names size does not match input types");const _=[];for(let D=0;D<o.inputNames.length;++D)_[D]=this.getOrCreateTextureData(h[D],o.inputTypes[D]);const S=((D,R)=>{const I=R.map((F=>`${F.unpackedShape.join(",")};${F.width}x${F.height}`)).join("_");let $=D.name;return D.cacheHint&&($+="["+D.cacheHint+"]"),$+=":"+I,$})(o,_);let T=this.session.programManager.getArtifact(S);const O=T?T.programInfo:typeof o.get=="function"?o.get():o,j=(0,g.createTextureLayoutFromTextureType)(this.session.layoutStrategy,O.output.dims,O.output.textureType),C=this.createTextureData(j,O.output.type);return T||(T=this.session.programManager.build(O,_,C),this.session.programManager.setArtifact(S,T)),this.runProgram(T,_,C),C}run(o,h){return this.executeProgram(o,h).tensor}runProgram(o,h,_){for(let S=0;S<h.length;++S)if(!!h[S].isPacked!=(o.programInfo.inputTypes[S]===u.TextureType.packed))throw new Error(`input[${S}] property packed inconsistent`);if(!!_.isPacked!=(o.programInfo.output.textureType===u.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(o,h,_)}getOrCreateTextureData(o,h){let _=this.getTextureData(o.dataId,h===u.TextureType.packed);if(!_&&(_=this.getTextureData(o.dataId,h!==u.TextureType.packed),_))return h===u.TextureType.packed?this.pack(_):this.unpack(_);if(!_){const S=(0,g.createTextureLayoutFromTextureType)(this.session.layoutStrategy,o.dims,h);if(h===u.TextureType.packedLastDimension){const j=o.dims;if(j.length===4){const C=[j[0],Math.ceil(j[1]*j[2]*j[3]/4)],D=(0,g.createTextureLayoutFromTextureType)(this.session.layoutStrategy,C,h);let R=o.numberData;if(j[1]*j[2]*j[3]%4!=0){const I=j[0],$=j[1]*j[2]*j[3],F=Math.ceil($*1/4)*4;R=new Float32Array(I*F);for(let L=0;L<I;++L){const V=L*$,Y=L*F+L%1*$;R.set(o.numberData.subarray(V,V+$),Y)}}return this.createTextureData(D,o.type,R,o,1)}}if(h===u.TextureType.packed){const T=(0,g.createTextureLayoutFromShape)(this.session.layoutStrategy,o.dims,1,[],{reverseWH:!0}),O=this.createTextureData(T,o.type,o.numberData,o,1);_=this.pack(O)}else _=this.createTextureData(S,o.type,o.numberData,o,1)}return _}createTextureDataFromLayoutBindTensor(o,h,_,S){return this.createTextureData(o,h,_,S,1)}createTextureData(o,h,_,S,T){i.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(o)}]`);const O=this.session.textureManager.createTextureFromLayout(h,o,_,T);return this.createTextureDataFromTexture(o,h,O,S)}reshapeUnpacked(o,h){const _=this.getOrCreateTextureData(o,u.TextureType.unpacked),S={channels:_.channels,height:_.height,width:_.width,shape:h.length!==0?h:[1],strides:f.ShapeUtil.computeStrides(h),unpackedShape:h};return this.createTextureDataFromTexture(S,o.type,_.texture).tensor}reshapePacked(o,h){const _=this.getOrCreateTextureData(o,u.TextureType.packed);if((0,b.isReshapeCheap)(o.dims,h)){const C={channels:_.channels,height:_.height,width:_.width,shape:h.length!==0?h:[1],strides:f.ShapeUtil.computeStrides(h),unpackedShape:h,isPacked:!0};return this.createTextureDataFromTexture(C,o.type,_.texture).tensor}const S=(0,b.processDims3D)(o.dims),T=(0,b.processDims3D)(h),O=this.reshapePacked(o,S),j=this.run((0,b.createPackedReshape3DProgramInfoLoader)(this,O,T),[O]);return this.reshapePacked(j,h)}cast(o,h){const _=this.getOrCreateTextureData(o,u.TextureType.unpacked);return this.createTextureDataFromTexture(_,h,_.texture).tensor}createTextureDataFromTexture(o,h,_,S,T){const O=Object.assign(Object.assign({},o),{tensor:S||new l.Tensor(o.unpackedShape,h,(j=>this.readTexture(O)),(async j=>this.readTextureAsync(O)),void 0,T),texture:_});return this.setTextureData(O.tensor.dataId,O,o.isPacked),O}getTextureData(o,h=!1){return this.session.isInitializer(o)?this.session.getTextureData(o,h):h?this.packedTextureDataCache.get(o):this.unpackedTextureDataCache.get(o)}setTextureData(o,h,_=!1){this.session.isInitializer(o)?this.session.setTextureData(o,h,_):(_?this.packedTextureDataCache:this.unpackedTextureDataCache).set(o,h)}isTextureLayoutCached(o,h=!1){return!!this.getTextureData(o.dataId,h)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach((o=>this.session.textureManager.releaseTexture(o))),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach((o=>this.session.textureManager.releaseTexture(o))),this.unpackedTextureDataCache=new Map}readTexture(o){return o.isPacked?this.readTexture(this.unpack(o)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(o,o.tensor.type,o.channels):this.session.textureManager.readUint8TextureAsFloat((0,w.encodeAsUint8)(this,o))}async readTextureAsync(o){return o.isPacked?this.readTextureAsync(this.unpack(o)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(o,o.tensor.type,o.channels):this.session.textureManager.readUint8TextureAsFloat((0,w.encodeAsUint8)(this,o))}pack(o){return this.executeProgram((0,p.createPackProgramInfoLoader)(this,o.tensor),[o.tensor])}unpack(o){return this.executeProgram((0,v.createUnpackProgramInfoLoader)(this,o.tensor),[o.tensor])}}},1640:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(ae,we,Z,ue){ue===void 0&&(ue=Z);var Pe=Object.getOwnPropertyDescriptor(we,Z);Pe&&!("get"in Pe?!we.__esModule:Pe.writable||Pe.configurable)||(Pe={enumerable:!0,get:function(){return we[Z]}}),Object.defineProperty(ae,ue,Pe)}:function(ae,we,Z,ue){ue===void 0&&(ue=Z),ae[ue]=we[Z]}),l=this&&this.__setModuleDefault||(Object.create?function(ae,we){Object.defineProperty(ae,"default",{enumerable:!0,value:we})}:function(ae,we){ae.default=we}),f=this&&this.__importStar||function(ae){if(ae&&ae.__esModule)return ae;var we={};if(ae!=null)for(var Z in ae)Z!=="default"&&Object.prototype.hasOwnProperty.call(ae,Z)&&i(we,ae,Z);return l(we,ae),we};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGL_OP_RESOLVE_RULES=void 0;const p=n(2898),b=f(n(7839)),w=n(4196),v=n(2069),g=n(8138),u=n(9663),o=n(5193),h=n(7992),_=n(1253),S=n(4776),T=n(6572),O=n(3346),j=n(5623),C=n(2870),D=n(2143),R=n(4939),I=n(718),$=n(2268),F=n(8117),L=n(2278),V=n(5524),Y=n(5975),Q=n(3933),ee=n(6558),X=n(5723),W=n(3738),z=f(n(4909)),q=n(8428),ce=n(9793);e.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",z.abs],["Acos","","7+",z.acos],["Add","","7+",b.add],["And","","7+",b.and],["Asin","","7+",z.asin],["Atan","","7+",z.atan],["AveragePool","","7+",D.averagePool,D.parseAveragePoolAttributes],["BatchNormalization","","7+",p.batchNormalization,p.parseBatchNormalizationAttributes],["Cast","","6+",w.cast,w.parseCastAttributes],["Ceil","","6+",z.ceil],["Clip","","6-10",z.clip,z.parseClipAttributes],["Clip","","11+",z.clipV11],["Concat","","4+",v.concat,v.parseConcatAttributes],["Conv","","1+",g.conv,g.parseConvAttributes],["ConvTranspose","","1+",u.convTranspose,u.parseConvTransposeAttributes],["Cos","","7+",z.cos],["Div","","7+",b.div],["Dropout","","7+",z.identity],["DepthToSpace","","1+",o.depthToSpace,o.parseDepthToSpaceAttributes],["Equal","","7+",b.equal],["Elu","","6+",z.elu,z.parseEluAttributes],["Exp","","6+",z.exp],["Flatten","","1+",h.flatten,h.parseFlattenAttributes],["Floor","","6+",z.floor],["FusedConv","com.microsoft","1+",g.conv,g.parseConvAttributes],["Gather","","1+",_.gather,_.parseGatherAttributes],["Gemm","","7-10",S.gemm,S.parseGemmAttributesV7],["Gemm","","11+",S.gemm,S.parseGemmAttributesV11],["GlobalAveragePool","","1+",D.globalAveragePool,D.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",D.globalMaxPool],["Greater","","7+",b.greater],["Identity","","1+",z.identity],["ImageScaler","","1+",T.imageScaler,T.parseImageScalerAttributes],["InstanceNormalization","","6+",O.instanceNormalization,O.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",z.leakyRelu,z.parseLeakyReluAttributes],["Less","","7+",b.less],["Log","","6+",z.log],["MatMul","","1+",j.matMul,j.parseMatMulAttributes],["MaxPool","","1+",D.maxPool,D.parseMaxPoolAttributes],["Mul","","7+",b.mul],["Neg","","6+",z.neg],["Not","","1+",z.not],["Or","","7+",b.or],["Pad","","2-10",C.padV2,C.parsePadAttributesV2],["Pad","","11+",C.padV11,C.parsePadAttributesV11],["Pow","","7+",b.pow],["PRelu","","7+",b.pRelu],["ReduceLogSum","","1+",R.reduceLogSum,R.parseReduceAttributes],["ReduceMax","","1+",R.reduceMax,R.parseReduceAttributes],["ReduceMean","","1+",R.reduceMean,R.parseReduceAttributes],["ReduceMin","","1+",R.reduceMin,R.parseReduceAttributes],["ReduceProd","","1+",R.reduceProd,R.parseReduceAttributes],["ReduceSum","","1-12",R.reduceSum,R.parseReduceAttributes],["ReduceSumSquare","","1+",R.reduceLogSumSquare,R.parseReduceAttributes],["Relu","","6+",z.relu],["Reshape","","5+",I.reshape],["Resize","","10",$.resize,$.parseResizeAttributesV10],["Resize","","11+",$.resize,$.parseResizeAttributesV11],["Shape","","1+",F.shape],["Sigmoid","","6+",z.sigmoid],["Sin","","7+",z.sin],["Slice","","10+",L.sliceV10],["Slice","","1-9",L.slice,L.parseSliceAttributes],["Softmax","","1-12",V.softmax,V.parseSoftmaxAttributes],["Softmax","","13+",V.softmaxV13,V.parseSoftmaxAttributesV13],["Split","","2-12",Y.split,Y.parseSplitAttributes],["Sqrt","","6+",z.sqrt],["Squeeze","","1-12",Q.squeeze,Q.parseSqueezeAttributes],["Squeeze","","13+",Q.squeezeV13],["Sub","","7+",b.sub],["Sum","","6+",ee.sum],["Tan","","7+",z.tan],["Tanh","","6+",z.tanh],["Tile","","6+",X.tile],["Transpose","","1+",W.transpose,W.parseTransposeAttributes],["Upsample","","7-8",ce.upsample,ce.parseUpsampleAttributesV7],["Upsample","","9",ce.upsample,ce.parseUpsampleAttributesV9],["Unsqueeze","","1-12",q.unsqueeze,q.parseUnsqueezeAttributes],["Unsqueeze","","13+",q.unsqueezeV13],["Xor","","7+",b.xor]]},2898:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseBatchNormalizationAttributes=e.batchNormalization=void 0;const i=n(246),l=n(5060),f=n(2039),p={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[f.TextureType.unpacked,f.TextureType.unpacked,f.TextureType.unpacked,f.TextureType.unpacked,f.TextureType.unpacked]};e.batchNormalization=(v,g,u)=>(w(g),[v.run(Object.assign(Object.assign({},p),{cacheHint:u.cacheKey,get:()=>b(v,g,u)}),g)]),e.parseBatchNormalizationAttributes=v=>{const g=v.attributes.getFloat("epsilon",1e-5),u=v.attributes.getFloat("momentum",.9),o=v.attributes.getInt("spatial",1);return(0,i.createAttributeWithCacheKey)({epsilon:g,momentum:u,spatial:o})};const b=(v,g,u)=>{const o=(0,l.getGlsl)(v.session.backend.glContext.version),h=g[0].dims.length,[_,S]=v.calculateTextureWidthAndHeight(g[1].dims,f.TextureType.unpacked),T=`
  float process(int[${h}] indices) {
    vec2 position = offsetToCoords(indices[1], ${_}, ${S});
    float scale = getColorAsFloat(${o.texture2D}(Scale, position));
    float mean = getColorAsFloat(${o.texture2D}(Mean, position));
    float variance = getColorAsFloat(${o.texture2D}(Variance, position));
    float b = getColorAsFloat(${o.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${u.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},p),{output:{dims:g[0].dims,type:g[0].type,textureType:f.TextureType.unpacked},shaderSource:T})},w=v=>{if(!v||v.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const g=v[0],u=v[1],o=v[2],h=v[3],_=v[4];if(g.dims.length<3||u.dims.length!==1||o.dims.length!==1||h.dims.length!==1||_.dims.length!==1)throw new Error("invalid input shape.");if(u.dims[0]!==g.dims[1]||o.dims[0]!==g.dims[1]||h.dims[0]!==g.dims[1]||_.dims[0]!==g.dims[1])throw new Error("invalid input shape.");if(g.type!=="float32"&&g.type!=="float64"||u.type!=="float32"&&u.type!=="float64"||o.type!=="float32"&&o.type!=="float64"||h.type!=="float32"&&h.type!=="float64"||_.type!=="float32"&&_.type!=="float64")throw new Error("invalid input tensor types.")}},7839:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.xor=e.sub=e.pRelu=e.pow=e.or=e.mul=e.less=e.greater=e.equal=e.div=e.and=e.add=e.glslPRelu=e.glslPow=e.glslXor=e.glslOr=e.glslAnd=e.glslLess=e.glslGreater=e.glslEqual=e.glslSub=e.glslMul=e.glslDiv=e.glslAdd=void 0;const i=n(2517),l=n(8520),f=n(5060),p=n(2039);function b(){const R="add_";return{body:`
  float ${R}(float a, float b) {
    return a + b;
  }
  vec4 ${R}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:R,type:l.FunctionType.ValueBased}}function w(){const R="div_";return{body:`
  float ${R}(float a, float b) {
    return a / b;
  }
  vec4 ${R}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:R,type:l.FunctionType.ValueBased}}function v(){const R="mul_";return{body:`
  float ${R}(float a, float b) {
    return a * b;
  }
  vec4 ${R}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:R,type:l.FunctionType.ValueBased}}function g(){const R="sub_";return{body:`
  float ${R}(float a, float b) {
    return a - b;
  }
  vec4 ${R}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:R,type:l.FunctionType.ValueBased}}function u(){const R="equal_";return{body:`
  float ${R}(float a, float b) {
    return float(a == b);
  }
  vec4 ${R}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:R,type:l.FunctionType.ValueBased}}function o(){const R="greater_";return{body:`
  float ${R}(float a, float b) {
    return float(a > b);
  }
  vec4 ${R}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:R,type:l.FunctionType.ValueBased}}function h(){const R="less_";return{body:`
  float ${R}(float a, float b) {
    return float(a < b);
  }
  vec4 ${R}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:R,type:l.FunctionType.ValueBased}}function _(){const R="and_";return{body:`
  float ${R}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${R}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:R,type:l.FunctionType.ValueBased}}function S(){return{body:`
  float or_(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 or_(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:"or_",type:l.FunctionType.ValueBased}}function T(){const R="xor_";return{body:`
  float ${R}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${R}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:R,type:l.FunctionType.ValueBased}}function O(){return(function(R){const I=`${R}_`;return{body:`
  float ${I}(float a, float b) {
    return ${R}(a, b);
  }
  vec4 ${I}(vec4 v1, vec4 v2) {
    return ${R}(v1, v2);
  }
  `,name:I,type:l.FunctionType.ValueBased}})("pow")}function j(){const R="prelu_";return{body:`
  float ${R}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${R}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:R,type:l.FunctionType.ValueBased}}e.glslAdd=b,e.glslDiv=w,e.glslMul=v,e.glslSub=g,e.glslEqual=u,e.glslGreater=o,e.glslLess=h,e.glslAnd=_,e.glslOr=S,e.glslXor=T,e.glslPow=O,e.glslPRelu=j;const C=(R,I,$,F=I[0].type,L)=>{const V=R.session.pack?p.TextureType.packed:p.TextureType.unpacked;return{name:$.name,inputNames:["A","B"],inputTypes:[V,V],cacheHint:L,get:()=>D(R,I,$,F)}},D=(R,I,$,F=I[0].type)=>{const L=R.session.pack?p.TextureType.packed:p.TextureType.unpacked,V=!i.ShapeUtil.areEqual(I[0].dims,I[1].dims);let Y=I[0].dims;const Q=R.session.pack;if(V){const W=i.BroadcastUtil.calcShape(I[0].dims,I[1].dims,!1);if(!W)throw new Error("Can't perform binary op on the given tensors");Y=W;const z=Y.length,q=I[0].dims.length!==0?I[0].dims.length:1,ce=I[1].dims.length!==0?I[1].dims.length:1,ae=I[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",we=I[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",Z=(0,f.getGlsl)(R.session.backend.glContext.version),ue=Q?`
      ${$.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${$.name}(a, b);
        ${Z.output} = result;
      }`:`
      ${$.body}
      float process(int indices[${z}]) {
        int aindices[${q}];
        int bindices[${ce}];
        ${ae}
        ${we}
        return ${$.name}(_A(aindices), _B(bindices));
      }`;return{name:$.name,inputNames:["A","B"],inputTypes:[L,L],output:{dims:Y,type:F,textureType:L},shaderSource:ue,hasMain:Q}}const ee=(0,f.getGlsl)(R.session.backend.glContext.version),X=`
    ${$.body}
    void main() {
      vec4 v1 = ${ee.texture2D}(A, TexCoords);
      vec4 v2 = ${ee.texture2D}(B, TexCoords);
      vec4 result = ${$.name}(v1, v2);
      ${ee.output} = result;
    }
    `;return{name:$.name,inputNames:["A","B"],inputTypes:[L,L],output:{dims:I[0].dims,type:F,textureType:L},shaderSource:X,hasMain:!0}};e.add=(R,I)=>[R.run(C(R,I,b()),I)],e.and=(R,I)=>[R.run(C(R,I,_(),"bool"),I)],e.div=(R,I)=>[R.run(C(R,I,w()),I)],e.equal=(R,I)=>[R.run(C(R,I,u(),"bool"),I)],e.greater=(R,I)=>[R.run(C(R,I,o(),"bool"),I)],e.less=(R,I)=>[R.run(C(R,I,h(),"bool"),I)],e.mul=(R,I)=>[R.run(C(R,I,v()),I)],e.or=(R,I)=>[R.run(C(R,I,S(),"bool"),I)],e.pow=(R,I)=>[R.run(C(R,I,O()),I)],e.pRelu=(R,I)=>[R.run(C(R,I,j()),I)],e.sub=(R,I)=>[R.run(C(R,I,g()),I)],e.xor=(R,I)=>[R.run(C(R,I,T(),"bool"),I)]},4196:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseCastAttributes=e.cast=void 0;const i=n(2517);e.cast=(f,p,b)=>(l(p),[f.cast(p[0],b)]),e.parseCastAttributes=f=>i.ProtoUtil.tensorDataTypeFromProto(f.attributes.getInt("to"));const l=f=>{if(!f||f.length!==1)throw new Error("Cast requires 1 input.");if(f[0].type==="string")throw new Error("Invalid input type.")}},1163:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedConcatProgramInfoLoader=void 0;const i=n(5060),l=n(2039),f=n(9390),p=n(2827);e.createPackedConcatProgramInfoLoader=(w,v,g)=>{const u=(o=v.length,h=g.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:o},((_,S)=>`X${S}`)),inputTypes:Array(o).fill(l.TextureType.packed),cacheHint:h});var o,h;return Object.assign(Object.assign({},u),{get:()=>((_,S,T,O)=>{const j=T[0].dims.slice();if(O>=j.length||O<-1*j.length)throw new Error("axis specified for concat doesn't match input dimensionality");O<0&&(O=j.length+O);const C=j.slice(0);for(let ae=1;ae<T.length;ae++){const we=T[ae].dims.slice();for(let Z=0;Z<j.length;Z++)if(Z===O)C[O]+=we[Z];else if(j[Z]!==we[Z])throw new Error("non concat dimensions must match")}const D=C.length,R=(0,p.getChannels)("coords",D),I=(0,f.getCoordsDataType)(D),$=(0,p.unpackFromChannel)(),F=T.map((ae=>ae.dims)),L=(0,f.getGlChannels)(D),V=new Array(F.length-1);V[0]=F[0][O];for(let ae=1;ae<V.length;ae++)V[ae]=V[ae-1]+F[ae][O];const Y=L[O],Q=L.slice(-2),ee=L.join();let X=`if (${Y} < ${V[0]}) {
        return getChannel(
            getX0(${ee}), vec2(${Q.join()}));
        }`;for(let ae=1;ae<V.length;ae++){const we=V[ae-1];X+=`
            if (${Y} < ${V[ae]}  && ${Y} >= ${V[ae-1]}) {
              return getChannel(
                getX${ae}(${b(L,Y,we)}),
                vec2(${b(Q,Y,we)}));
            }`}const W=V.length,z=V[V.length-1];X+=`
            return getChannel(
              getX${W}(${b(L,Y,z)}),
              vec2(${b(Q,Y,z)}));`;const q=(0,i.getGlsl)(_.session.backend.glContext.version),ce=`
          ${$}
          float getValue(${L.map((ae=>"int "+ae))}) {
            ${X}
          }

          void main() {
            ${I} coords = getOutputCoords();
            int lastDim = coords.${L[D-1]};
            coords.${L[D-1]} = coords.${L[D-2]};
            coords.${L[D-2]} = lastDim;

            vec4 result = vec4(getValue(${R}), 0., 0., 0.);

            ${R[D-1]} = ${R[D-1]} + 1;
            if (${R[D-1]} < ${C[D-1]}) {
              result.g = getValue(${R});
            }

            ${R[D-2]} = ${R[D-2]} + 1;
            if (${R[D-2]} < ${C[D-2]}) {
              result.a = getValue(${R});
            }

            ${R[D-1]} = ${R[D-1]} - 1;
            if (${R[D-2]} < ${C[D-2]} &&
                ${R[D-1]} < ${C[D-1]}) {
              result.b = getValue(${R});
            }
            ${q.output} = result;
          }
        `;return Object.assign(Object.assign({},S),{output:{dims:C,type:T[0].type,textureType:l.TextureType.packed},shaderSource:ce,hasMain:!0})})(w,u,v,g.axis)})};const b=(w,v,g)=>{const u=w.indexOf(v);return w.map(((o,h)=>h===u?`${o} - ${g}`:o)).join()}},2069:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConcatAttributes=e.concat=void 0;const i=n(246),l=n(2039),f=n(1163);e.concat=(o,h,_)=>(u(h),o.session.pack&&h[0].dims.length>1?[o.run((0,f.createPackedConcatProgramInfoLoader)(o,h,_),h)]:[o.run(p(o,h,_),h)]);const p=(o,h,_)=>{const S=(T=h.length,O=_.cacheKey,{name:"Concat",inputNames:Array.from({length:T},((j,C)=>`X${C}`)),inputTypes:Array(T).fill(l.TextureType.unpacked),cacheHint:O});var T,O;return Object.assign(Object.assign({},S),{get:()=>((j,C,D,R)=>{const I=D[0].dims.slice();if(R>=I.length||R<-1*I.length)throw new Error("axis specified for concat doesn't match input dimensionality");R<0&&(R=I.length+R);const $=I.slice(0);for(let ee=1;ee<D.length;ee++){const X=D[ee].dims.slice();for(let W=0;W<I.length;W++)if(W===R)$[R]+=X[W];else if(I[W]!==X[W])throw new Error("non concat dimensions must match")}const F=$.length,L=new Array(D.length);let V=0;for(let ee=0;ee<L.length;++ee)V+=D[ee].dims[R],L[ee]=V;let Y="";Y=D.length<5?b(L):w(L);const Q=`
        ${v(D.length,F)}
        ${g(L)}
        ${Y}
        float process(int indices[${F}]) {
          int textureIndex = getTextureWhereDataResides (indices[${R}]);

          if(textureIndex != 0) {
            indices[${R}] = indices[${R}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},C),{output:{dims:$,type:D[0].type,textureType:l.TextureType.unpacked},shaderSource:Q})})(0,S,h,_.axis)})},b=o=>`int getTextureWhereDataResides(int index) {
      ${o.map(((h,_)=>`if(index<${h}) {return ${_};}
`)).join("")}
    }`,w=o=>b(o),v=(o,h)=>{const _=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${h}]) {`];for(let S=0;S<o;++S)S===0?_.push(`	if (textureIndex == ${S}) { return _X${S}(indices); }`):S===o-1?_.push(`	else { return _X${S}(indices); }`):_.push(`	else if (textureIndex == ${S}) { return _X${S}(indices); }`);return _.push("	}"),_.join(`
`)},g=o=>{const h=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let _=0;_<o.length;++_)_===0?h.push(`	if (index == ${_}) { return ${o[_]}; }`):_===o.length-1?h.push(`	else { return ${o[_]}; }`):h.push(`	else if (index == ${_}) { return ${o[_]}; }`);return h.push("	}"),h.join(`
`)};e.parseConcatAttributes=o=>(0,i.createAttributeWithCacheKey)({axis:o.attributes.getInt("axis")});const u=o=>{if(!o||o.length<1)throw new Error("too few inputs");const h=o[0].type,_=o[0].dims.length;if(h==="string")throw new Error("string tensor is not supported yet");for(const S of o){if(S.type!==h)throw new Error("input tensors should be one type");if(S.dims.length!==_)throw new Error("input tensors should have the same shape")}}},4770:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackedGroupedConvProgramInfoLoader=void 0;const i=n(6231),l=n(5060),f=n(2039),p=n(8138),b=n(2823);e.createUnpackedGroupedConvProgramInfoLoader=(w,v,g)=>{const u=(o=v.length>2,h=g.cacheKey,{name:"GroupedConv",inputNames:o?["X","W","Bias"]:["X","W"],inputTypes:o?[f.TextureType.unpacked,f.TextureType.unpacked,f.TextureType.unpacked]:[f.TextureType.unpacked,f.TextureType.unpacked],cacheHint:h});var o,h;return Object.assign(Object.assign({},u),{get:()=>((_,S,T,O)=>{const j=S.length>2?"value += getBias(output_channel);":"",C=S[0].dims.slice(),D=S[1].dims.slice(),R=D[0]/O.group;i.Logger.verbose("GroupedConv",`autpPad:${O.autoPad}, dilations:${O.dilations}, group:${O.group}, kernelShape:${O.kernelShape}, pads:${O.pads}, strides:${O.strides}`);const I=(0,p.calculateOutputShape)(C,D,O.dilations,O.pads,O.strides),$=(0,l.getGlsl)(_.session.backend.glContext.version),{activationFunction:F,applyActivation:L}=(0,b.getActivationSnippet)(O),V=`
  const ivec2 strides = ivec2(${O.strides[0]}, ${O.strides[1]});
  const ivec2 pads = ivec2(${O.pads[0]}, ${O.pads[1]});
  ${F}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${R};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${D[1]}; wInChannel++) {
      int input_channel = group_id * ${D[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${D[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${O.dilations[0]};

        if (xHeight < 0 || xHeight >= ${C[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${D[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${O.dilations[1]};
          if (xWidth < 0 || xWidth >= ${C[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${j}
    ${L}
    ${$.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},T),{output:{dims:I,type:S[0].type,textureType:f.TextureType.unpacked},shaderSource:V,hasMain:!0})})(w,v,u,g)})}},1386:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.conv2DPacked=e.conv2DPackedPointwise=void 0;const i=n(8138),l=n(8555),f=n(708);e.conv2DPackedPointwise=(p,b,w)=>{const v=b[0].dims,g=b[1].dims,u=(0,i.calculateOutputShape)(v,g,w.dilations,w.pads,w.strides),o=p.reshapePacked(b[0],[v[1],v[2]*v[3]]),h=p.reshapePacked(b[1],[g[0],g[1]]),_=b.length>2?[h,o,b[2]]:[h,o],S=p.run((0,f.createPackedMatmulProgramInfoLoader)(p,_,w),_);return p.reshapePacked(S,u)},e.conv2DPacked=(p,b,w)=>{const v=b[0].dims,g=b[1].dims,u=(0,i.calculateOutputShape)(v,g,w.dilations,w.pads,w.strides),o=p.run((0,l.createPackedIm2ColProgramInfoLoader)(p,b[0],b[1],u,w),[b[0]]),h=p.reshapePacked(b[1],[g[0],g[1]*g[2]*g[3]]),_=b.length===3?[h,o,b[2]]:[h,o],S=p.run((0,f.createPackedMatmulProgramInfoLoader)(p,_,w),_);return p.reshapePacked(S,u)}},9663:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvTransposeAttributes=e.convTranspose=void 0;const i=n(246),l=n(5060),f=n(2039),p=n(2823),b=(h,_,S,T,O,j)=>(h-1)*_+S+(T-1)*O+1-j,w=(h,_,S,T,O)=>{const j=Math.floor(h/2);_==="SAME_UPPER"?(S[T]=j,S[O]=h-j):_==="SAME_LOWER"&&(S[T]=h-j,S[O]=j)};e.convTranspose=(h,_,S)=>(o(_,S),v(h,_,S));const v=(h,_,S)=>{const T=u(S,_);return[g(h,_,T)]},g=(h,_,S)=>h.run(((T,O,j)=>{const C=(D=O.length>2,R=j.cacheKey,{name:"ConvTranspose",inputNames:D?["X","W","B"]:["X","W"],inputTypes:D?[f.TextureType.unpacked,f.TextureType.unpacked,f.TextureType.unpacked]:[f.TextureType.unpacked,f.TextureType.unpacked],cacheHint:R});var D,R;return Object.assign(Object.assign({},C),{get:()=>((I,$,F,L)=>{const V=$.length>2?"getB(output_channel)":"0.0",Y=$[0].dims,Q=$[1].dims,ee=Q[1],X=Q[0]/L.group,W=[$[0].dims[0],$[1].dims[1]*L.group,...L.outputShape],z=(0,l.getGlsl)(I.session.backend.glContext.version),{activationFunction:q,applyActivation:ce}=(0,p.getActivationSnippet)(L),ae=`
  const ivec2 strides = ivec2(${L.strides[0]}, ${L.strides[1]});
  const ivec2 pads = ivec2(${L.pads[0]}, ${L.pads[1]});
  ${q}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${ee};
    int wOutChannel = output_channel - group_id * ${ee};

    float value = ${V};
    for (int inChannelOffset = 0; inChannelOffset < ${X}; inChannelOffset++) {
      int input_channel = group_id * ${X} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${Q[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${Q[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${L.dilations[0]}, wHOff * ${L.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${Y[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${Y[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${ce}
    ${z.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},F),{output:{dims:W,type:$[0].type,textureType:f.TextureType.unpacked},shaderSource:ae,hasMain:!0})})(T,O,C,j)})})(h,_,S),_),u=(h,_)=>{const S=h.kernelShape.slice();if(h.kernelShape.length===0)for(let C=2;C<_[1].dims.length;++C)S.push(_[1].dims[C]);const T=h.pads.slice(),O=h.outputShape.slice();((C,D,R,I,$,F,L,V)=>{const Y=C.length-2,Q=V.length===0;for(let ee=0;ee<Y;++ee){const X=Q?C[ee+2]*F[ee]:V[ee],W=b(C[ee+2],F[ee],$[ee],D[ee],R[ee],X);w(W,I,$,ee,ee+Y),Q&&V.push(F[ee]*(C[ee+2]-1)+L[ee]+(D[ee]-1)*R[ee]+1-$[ee]-$[ee+Y])}})(_[0].dims,S,h.dilations,h.autoPad,T,h.strides,h.outputPadding,O);const j=Object.assign({},h);return Object.assign(j,{kernelShape:S,pads:T,outputShape:O,cacheKey:h.cacheKey}),j};e.parseConvTransposeAttributes=h=>{const _=h.attributes,S=(0,p.parseInternalActivationAttributes)(_),T=_.getString("auto_pad","NOTSET"),O=_.getInts("dilations",[1,1]),j=_.getInt("group",1),C=_.getInts("kernel_shape",[]),D=_.getInts("output_padding",[0,0]),R=_.getInts("output_shape",[]),I=_.getInts("pads",[0,0,0,0]),$=_.getInts("strides",[1,1]);return(0,i.createAttributeWithCacheKey)(Object.assign({autoPad:T,dilations:O,group:j,kernelShape:C,outputPadding:D,outputShape:R,pads:I,strides:$},S))};const o=(h,_)=>{if(!h||h.length!==2&&h.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(h[0].dims.length!==4||h[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(h[0].dims[1]!==h[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const S=h[1].dims[1]*_.group;if(h.length===3&&(h[2].dims.length!==1||h[2].dims[0]!==S))throw new Error("invalid bias");const T=h[0].dims.length-2;if(_.dilations.length!==T)throw new Error(`dilations should be ${T}D`);if(_.strides.length!==T)throw new Error(`strides should be ${T}D`);if(_.pads.length!==2*T)throw new Error(`pads should be ${2*T}D`);if(_.outputPadding.length!==T)throw new Error(`output_padding should be ${T}D`);if(_.kernelShape.length!==0&&_.kernelShape.length!==h[1].dims.length-2)throw new Error("invalid kernel shape");if(_.outputShape.length!==0&&_.outputShape.length!==h[0].dims.length-2)throw new Error("invalid output shape");if(h[0].type!=="float32"||h[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(h.length===3&&h[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvAttributes=e.conv=e.calculateOutputShape=void 0;const i=n(246),l=n(2517),f=n(4770),p=n(1386),b=n(9828),w=n(2823),v=n(3248),g=n(5623);e.calculateOutputShape=(T,O,j,C,D)=>{const R=T[0],I=T.slice(2),$=I.length,F=O[0],L=O.slice(2).map(((Y,Q)=>Y+(Y-1)*(j[Q]-1))),V=I.map(((Y,Q)=>Y+C[Q]+C[Q+$])).map(((Y,Q)=>Math.floor((Y-L[Q]+D[Q])/D[Q])));return[R,F].concat(...V)},e.conv=(T,O,j)=>(S(O,j),u(T,O,j));const u=(T,O,j)=>{const C=_(j,O),D=T.session.pack,R=C.kernelShape[0]===1&&C.kernelShape[1]===1;return C.group>1?[T.run((0,f.createUnpackedGroupedConvProgramInfoLoader)(T,O,C),O)]:R&&D?[o(T,O,C)]:D&&O[0].dims.length===4&&O[0].dims[0]===1&&!R?[(0,p.conv2DPacked)(T,O,C)]:[h(T,O,C)]},o=(T,O,j)=>{const C=O[0].dims,D=O[1].dims,R=(0,e.calculateOutputShape)(C,D,j.dilations,j.pads,j.strides),I=T.reshapeUnpacked(O[0],[C[1],C[2]*C[3]]),$=T.reshapeUnpacked(O[1],[D[0],D[1]]),F=O.length>2?[$,I,O[2]]:[$,I],L=T.run((0,g.createMatmulProgramInfoLoader)(F,j),F);return T.reshapeUnpacked(L,R)},h=(T,O,j)=>{const C=O[0].dims,D=O[1].dims,R=(0,e.calculateOutputShape)(C,D,j.dilations,j.pads,j.strides),I=T.run((0,v.createIm2ColProgramInfoLoader)(T,O[0],O[1],R,j),[O[0]]),$=O.length===3?[I,O[1],O[2]]:[I,O[1]];return T.run((0,b.createDotProductProgramInfoLoader)(T,O,R,j),$)},_=(T,O)=>{const j=T.kernelShape.slice();if(T.kernelShape.length===0)for(let R=2;R<O[1].dims.length;++R)j.push(O[1].dims[R]);const C=T.pads.slice();l.PoolConvUtil.adjustPadsBasedOnAutoPad(O[0].dims,T.strides,T.dilations,j,C,T.autoPad);const D=Object.assign({},T);return Object.assign(D,{kernelShape:j,pads:C,cacheKey:T.cacheKey}),D};e.parseConvAttributes=T=>{const O=T.attributes,j=(0,w.parseInternalActivationAttributes)(O),C=O.getString("auto_pad","NOTSET"),D=O.getInts("dilations",[1,1]),R=O.getInt("group",1),I=O.getInts("kernel_shape",[]),$=O.getInts("pads",[0,0,0,0]),F=O.getInts("strides",[1,1]);return(0,i.createAttributeWithCacheKey)(Object.assign({autoPad:C,dilations:D,group:R,kernelShape:I,pads:$,strides:F},j))};const S=(T,O)=>{if(!T||T.length!==2&&T.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(T[0].dims.length!==4||T[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(T[0].dims[1]!==T[1].dims[1]*O.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(T.length===3&&(T[2].dims.length!==1||T[1].dims[0]!==T[2].dims[0]))throw new Error("invalid bias");const j=T[0].dims.length-2;if(O.dilations.length!==j)throw new Error(`dilations should be ${j}D`);if(O.strides.length!==j)throw new Error(`strides should be ${j}D`);if(O.pads.length!==2*j)throw new Error(`pads should be ${2*j}D`);if(O.kernelShape.length!==0&&O.kernelShape.length!==T[1].dims.length-2)throw new Error("invalid kernel shape");if(T[0].type!=="float32"||T[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(T.length===3&&T[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},5193:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseDepthToSpaceAttributes=e.depthToSpace=void 0;const i=n(3738);e.depthToSpace=(f,p,b)=>{l(p);const w=b.blocksize,v=w*w,g=b.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],u=b.mode==="DCR"?[p[0].dims[0],w,w,p[0].dims[1]/v,p[0].dims[2],p[0].dims[3]]:[p[0].dims[0],p[0].dims[1]/v,w,w,p[0].dims[2],p[0].dims[3]],o=f.reshapeUnpacked(p[0],u),h={perm:g,cacheKey:`${g}`},[_]=(0,i.transpose)(f,[o],h),S=[p[0].dims[0],p[0].dims[1]/v,p[0].dims[2]*w,p[0].dims[3]*w];return[f.reshapeUnpacked(_,S)]},e.parseDepthToSpaceAttributes=f=>{const p=f.attributes.getInt("blocksize");if(p<1)throw new Error(`blocksize must be >= 1, but got : ${p} for DepthToSpace`);const b=f.attributes.getString("mode","DCR");if(b!=="DCR"&&b!=="CRD")throw new Error(`unrecognized mode: ${b} for DepthToSpace`);return{mode:b,blocksize:p}};const l=f=>{if(f.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${f.length}`);if(f[0].type==="string"||f[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDotProductProgramInfoLoader=void 0;const i=n(2517),l=n(5060),f=n(2039),p=n(2823),b=n(3248);e.createDotProductProgramInfoLoader=(w,v,g,u)=>{const o=((h,_)=>({name:"ConvDotProduct",inputNames:h?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:h?[f.TextureType.unpacked,f.TextureType.packedLastDimension,f.TextureType.unpacked]:[f.TextureType.unpacked,f.TextureType.packedLastDimension],cacheKey:_.activationCacheKey}))(v.length>2,u);return Object.assign(Object.assign({},o),{get:()=>((h,_,S,T,O)=>{const j=S[0].dims,C=S[1].dims,D=[C[0],Math.ceil(j[1]*C[2]*C[3]/4)],R=(0,b.calculateIm2ColDims)(j,C,T),[I,$]=h.calculateTextureWidthAndHeight(D,f.TextureType.packedLastDimension),F=i.ShapeUtil.computeStrides(R),[L,V]=h.calculateTextureWidthAndHeight(R,f.TextureType.packedLastDimension),Y=T.length,Q=S.length<3?"0.0":"_B(b)",ee=Math.ceil(j[1]*C[2]*C[3]/4),{activationFunction:X,applyActivation:W}=(0,p.getActivationSnippet)(O),z=(0,l.getGlsl)(h.session.backend.glContext.version),q=`
${X}
float process(int indices[${Y}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${F[0]} + im2col[1] * ${F[1]} + im2col[2] * ${F[2]};
  int kernelOffset = indices[1] * ${D[1]};
  float value = ${Q};
  for (int i = 0; i < ${ee}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${L}, ${V});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${I}, ${$});
    value += dot(${z.texture2D}(Im2Col, im2colCoords), ${z.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${W}
  return value;
}`;return Object.assign(Object.assign({},_),{output:{dims:T,type:S[0].type,textureType:f.TextureType.unpacked},shaderSource:q})})(w,o,v,g,u)})}},7992:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseFlattenAttributes=e.flatten=void 0;const i=n(2517);e.flatten=(f,p,b)=>{l(p,b);const w=i.ShapeUtil.flattenShape(p[0].dims,b);return[f.reshapeUnpacked(p[0],w)]},e.parseFlattenAttributes=f=>f.attributes.getInt("axis",1);const l=(f,p)=>{if(!f||f.length!==1)throw new Error("Flatten requires 1 input.");const b=f[0].dims.length;if(b===0)throw new Error("scalar tensor is not supported.");if(p<-b||p>b)throw new Error("Invalid axis");if(f[0].type==="string")throw new Error("string tensor is not supported.")}},2823:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActivationSnippet=void 0;const i=n(2517),l=n(4909);e.getActivationSnippet=function(f){let p;switch(f.activation){case"Relu":p=(0,l.glslRelu)();break;case"Sigmoid":p=(0,l.glslSigmoid)();break;case"Clip":p=(0,l.glslClip)(f.clipMin,f.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const b=p.name;return{activationFunction:p.body,applyActivation:`value = ${b}_(value);`}},e.parseInternalActivationAttributes=f=>{const p=f.getString("activation","");if(p==="Clip"){const[b,w]=f.getFloats("activation_params",[i.MIN_CLIP,i.MAX_CLIP]);return{activation:p,clipMax:w,clipMin:b,activationCacheKey:`${p}:${b},${w}`}}return{activation:p,activationCacheKey:p}}},1253:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGatherAttributes=e.gather=void 0;const i=n(246),l=n(782),f=n(2517),p=n(2039);e.gather=(g,u,o)=>(v(u,o.axis),[g.run(w(g,u,o),u)]),e.parseGatherAttributes=g=>(0,i.createAttributeWithCacheKey)({axis:g.attributes.getInt("axis",0)});const b={name:"Gather",inputNames:["A","B"],inputTypes:[p.TextureType.unpacked,p.TextureType.unpacked]},w=(g,u,o)=>{const h=Object.assign(Object.assign({},b),{cacheHint:o.cacheKey});return Object.assign(Object.assign({},h),{get:()=>((_,S,T,O)=>{const j=T[0].dims.slice(),C=T[1].dims.slice(),D=new Array(j.length+C.length-1);O=f.ShapeUtil.normalizeAxis(O,j.length);const R=[];for(let $=0;$<D.length;$++)$<O?(D[$]=j[$],R.push(`inputIdx[${$}] = outputIdx[${$}];`)):$<O+C.length?(D[$]=C[$-O],R.push(`indexDataIdx[${$-O}] = outputIdx[${$}];`)):(D[$]=j[$-C.length+1],R.push(`inputIdx[${$-C.length+1}] = outputIdx[${$}];`));const I=`
      float process(int outputIdx[${D.length||1}]) {
        int inputIdx[${j.length}];
        int indexDataIdx[${C.length||1}];
        indexDataIdx[0] = 0;
        ${R.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${O}] = idx < 0 ? idx + ${j[O]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},S),{output:{dims:D,type:T[0].type,textureType:p.TextureType.unpacked},shaderSource:I})})(0,h,u,o.axis)})},v=(g,u)=>{if(!g||g.length!==2)throw new Error("Gather requires 2 inputs.");const o=g[0].dims.length;if(o<1)throw new Error("Invalid input shape.");if(u<-o||u>o-1)throw new Error("Invalid axis.");if(l.NUMBER_TYPES.indexOf(g[0].type)===-1)throw new Error("Invaid input type.");if(g[1].type!=="int32"&&g[1].type!=="int16")throw new Error("Invaid input type.")}},4776:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributesV11=e.parseGemmAttributesV7=e.gemm=void 0;const i=n(246),l=n(2517),f=n(2039);e.gemm=(g,u,o)=>(v(u,o),[g.run(b(u,o),u)]);const p=(g,u)=>{const o=g.attributes.getInt("transA",0)!==0,h=g.attributes.getInt("transB",0)!==0,_=g.attributes.getFloat("alpha",1),S=g.attributes.getFloat("beta",1);return(0,i.createAttributeWithCacheKey)({transA:o,transB:h,alpha:_,beta:S,isOptionalC:u})};e.parseGemmAttributesV7=g=>p(g,!1),e.parseGemmAttributesV11=g=>p(g,!0);const b=(g,u)=>{const o={name:"Gemm",inputNames:g.length===3?["A","B","C"]:["A","B"],inputTypes:g.length===3?[f.TextureType.unpacked,f.TextureType.unpacked,f.TextureType.unpacked]:[f.TextureType.unpacked,f.TextureType.unpacked],key:u.cacheKey};return Object.assign(Object.assign({},o),{get:()=>w(o,g,u)})},w=(g,u,o)=>{const h=u[0].dims.slice(),_=u[1].dims.slice(),[S,T]=l.GemmUtil.getShapeOfGemmResult(h,o.transA,_,o.transB,u.length===3?u[2].dims:void 0),O=[S,T];if(!O)throw new Error("Can't use gemm on the given tensors");let j=h[h.length-1],C="";o.transA&&(j=h[0]),o.transA&&o.transB?C="value += _A_T(a) * _B_T(b);":o.transA&&!o.transB?C="value += _A_T(a) * _B(b);":!o.transA&&o.transB?C="value += _A(a) * _B_T(b);":o.transA||o.transB||(C="value += _A(a) * _B(b);");const D=O.length,R=`
      float process(int indices[${D}]) {
          int a[${D}];
          int b[${D}];
          ${u.length===3?`int c[${u[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${u.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${j}; ++k) {
              a[${D-1}] = k;
              b[${D-2}] = k;
              ${C}
          }

          value = value * alpha;
          ${u.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},g),{output:{dims:O,type:u[0].type,textureType:f.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:o.alpha},{name:"beta",type:"float",data:o.beta}],shaderSource:R})},v=(g,u)=>{if(!g)throw new Error("Input is missing");if(u.isOptionalC&&(g.length<2||g.length>3))throw new Error("Invaid input shape.");if(!u.isOptionalC&&g.length!==3)throw new Error("Gemm requires 3 inputs");if(g.length===3&&g[2].dims.length!==1&&g[2].dims.length!==2)throw new Error("Invalid input shape of C");if(g[0].type!=="float32"&&g[0].type!=="float64"||g[1].type!=="float32"&&g[1].type!=="float64"||g.length===3&&g[2].type!=="float32"&&g[2].type!=="float64")throw new Error("Invalid input type.");if(g[0].type!==g[1].type||g.length===3&&g[0].type!==g[2].type)throw new Error("Input types are mismatched")}},8555:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedIm2ColProgramInfoLoader=void 0;const i=n(5060),l=n(2039),f=n(2827);e.createPackedIm2ColProgramInfoLoader=(p,b,w,v,g)=>{const u=(o=g.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[l.TextureType.packed],cacheHint:o});var o;return Object.assign(Object.assign({},u),{get:()=>((h,_,S,T,O,j)=>{const C=S.dims,D=T.dims,R=O.length,I=[D[1]*D[2]*D[3],O[2]*O[3]],$=D[2]*D[3],F=(0,f.unpackFromChannel)(),L=(0,i.getGlsl)(h.session.backend.glContext.version);let V="";for(let Q=0;Q<=1;Q++)for(let ee=0;ee<=1;ee++)V+=`
            blockIndex = rc.x + ${ee};
            pos = rc.y + ${Q};

            if(blockIndex < ${I[1]} && pos < ${I[0]}) {
              offsetY = int(blockIndex / (${O[R-1]})) * ${j.strides[0]} -
                ${j.pads[0]};
              d0 = offsetY + ${j.dilations[0]} * (imod(pos, ${$}) / ${D[2]});

              if(d0 < ${C[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${O[R-1]}) * ${j.strides[1]} -
                  ${j.pads[1]};
                d1 = offsetX + ${j.dilations[1]} * imod(imod(pos, ${$}), ${D[2]});

                if(d1 < ${C[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${$}.);
                    innerDims = vec2(d0, d1);
                    result[${2*Q+ee}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const Y=`
      ${F}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${V}
          ${L.output} = result;
      }
            `;return Object.assign(Object.assign({},_),{output:{dims:I,type:S.type,textureType:l.TextureType.packed},shaderSource:Y,hasMain:!0})})(p,u,b,w,v,g)})}},3248:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.calculateIm2ColDims=e.createIm2ColProgramInfoLoader=void 0;const i=n(2039);e.createIm2ColProgramInfoLoader=(l,f,p,b,w)=>{const v=(g=w.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[i.TextureType.unpacked],cacheHint:g});var g;return Object.assign(Object.assign({},v),{get:()=>((u,o,h,_,S,T)=>{const O=h.dims,j=_.dims,C=S.length,D=(0,e.calculateIm2ColDims)(O,j,S,4),R=`
        const int XC = ${O[1]};
        const int XH = ${O[2]};
        const int XW = ${O[3]};
        const int KH = ${T.kernelShape[0]};
        const int KW = ${T.kernelShape[1]};
        const int dilationH = ${T.dilations[0]};
        const int dilationW = ${T.dilations[1]};
        const int strideH = ${T.strides[0]};
        const int strideW = ${T.strides[1]};
        const int padH = ${T.pads[0]};
        const int padW = ${T.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${C}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${O.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},o),{output:{dims:D,type:h.type,textureType:i.TextureType.packedLastDimension},shaderSource:R})})(0,v,f,p,b,w)})},e.calculateIm2ColDims=(l,f,p,b=4)=>[p[0],p[2],p[3],Math.ceil(l[1]*f[2]*f[3]/b)]},6572:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseImageScalerAttributes=e.imageScaler=void 0;const i=n(246),l=n(2039);e.imageScaler=(v,g,u)=>(w(g),[v.run(p(v,g,u),g)]),e.parseImageScalerAttributes=v=>{const g=v.attributes.getFloat("scale"),u=v.attributes.getFloats("bias");return(0,i.createAttributeWithCacheKey)({scale:g,bias:u})};const f={name:"ImageScaler",inputNames:["X"],inputTypes:[l.TextureType.unpacked]},p=(v,g,u)=>{const o=Object.assign(Object.assign({},f),{cacheHint:u.cacheKey});return Object.assign(Object.assign({},o),{get:()=>((h,_,S,T)=>{const O=S[0].dims.slice(),j=O.length,C=`
      ${b(T.bias.length)}
      float process(int indices[${j}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},_),{output:{dims:O,type:S[0].type,textureType:l.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:T.bias.length,data:T.bias},{name:"scale",type:"float",data:T.scale}],shaderSource:C})})(0,o,g,u)})},b=v=>{const g=[`float getBias(float bias[${v}], int channel) {`];for(let u=0;u<v;++u)u===0?g.push(`	if (channel == ${u}) { return bias[${u}]; }`):u===v-1?g.push(`	else { return bias[${u}]; }`):g.push(`	else if (channel == ${u}) { return bias[${u}]; }`);return g.push("	}"),g.join(`
`)},w=v=>{if(!v||v.length!==1)throw new Error("ImageScaler requires 1 input.");if(v[0].dims.length!==4)throw new Error("Invalid input shape.");if(v[0].type!=="float32"&&v[0].type!=="float64")throw new Error("Invalid input type.")}},3346:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInstanceNormalizationAttributes=e.instanceNormalization=void 0;const i=n(5060),l=n(2039);e.instanceNormalization=(g,u,o)=>{v(u);const h=g.run(p(u[0]),u);return[g.run(w(g,u[0],o,h.dims),[u[0],h,u[1],u[2]])]},e.parseInstanceNormalizationAttributes=g=>g.attributes.getFloat("epsilon",1e-5);const f={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[l.TextureType.unpacked]},p=g=>Object.assign(Object.assign({},f),{get:()=>((u,o)=>{const h=o.dims.slice(),_=h[1],S=h[2]*h[3],T=[h[0],_],O=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${h[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${h[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${S});
        temp = 0.0;
        for(int a2=0; a2<${h[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${h[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${S});

        return v;
      }`;return Object.assign(Object.assign({},u),{output:{dims:T,type:o.type,textureType:l.TextureType.packedLastDimension},shaderSource:O})})(f,g)}),b={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[l.TextureType.unpacked,l.TextureType.packedLastDimension,l.TextureType.unpacked,l.TextureType.unpacked]},w=(g,u,o,h)=>{const _=Object.assign(Object.assign({},b),{cacheHint:`${o}`});return Object.assign(Object.assign({},_),{get:()=>((S,T,O,j,C)=>{const D=(0,i.getGlsl)(S.session.backend.glContext.version),[R,I]=S.calculateTextureWidthAndHeight(C,l.TextureType.packedLastDimension),[$,F]=[R/4,I],L=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${$}, ${F});
        return ${D.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},T),{output:{dims:O.dims,type:O.type,textureType:l.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:j}],shaderSource:L})})(g,_,u,o,h)})},v=g=>{if(!g||g.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const u=g[0],o=g[1],h=g[2];if(u.dims.length<3||o.dims.length!==1||h.dims.length!==1)throw new Error("Invalid input shape.");if(o.dims[0]!==u.dims[1]||h.dims[0]!==u.dims[1])throw new Error("Input shapes are mismatched.");if(u.type!=="float32"&&u.type!=="float64"||o.type!=="float32"&&o.type!=="float64"||h.type!=="float32"&&h.type!=="float64")throw new Error("Invalid input type.");if(g[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},708:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedMatmulProgramInfoLoader=void 0;const i=n(2517),l=n(5060),f=n(2039),p=n(9390),b=n(2823),w=n(5623);e.createPackedMatmulProgramInfoLoader=(v,g,u)=>{const o=(h=g.length>2,_=u.activationCacheKey,{name:"MatMul (packed)",inputNames:h?["A","B","Bias"]:["A","B"],inputTypes:h?[f.TextureType.packed,f.TextureType.packed,f.TextureType.packed]:[f.TextureType.packed,f.TextureType.packed],cacheHint:_});var h,_;return Object.assign(Object.assign({},o),{get:()=>((S,T,O,j)=>{const C=O.length>2,D=C?"value += getBiasForMatmul();":"",R=O[0].dims,I=O[1].dims,$=i.BroadcastUtil.calcShape(R,I,!0),F=!i.ShapeUtil.areEqual(O[0].dims,O[1].dims);if(!$)throw new Error("Can't use matmul on the given tensors");const L=R[R.length-1],V=Math.ceil(L/2),Y=R.length,Q=I.length,ee=(0,l.getGlsl)(S.session.backend.glContext.version),X=(0,p.getCoordsDataType)($.length),W=$.length,z=(0,p.getGlChannels)(),{activationFunction:q,applyActivation:ce}=(0,b.getActivationSnippet)(j),ae=C?`${(0,w.getBiasForMatmul)(X,z,O[2].dims,$,!0)}`:"",we=F?`${(function(Re,pe,Ae,Ce){let $e=[],se=[];const ke=Ae[0].dims,Ie=Ae[1].dims,de=ke.length,qe=Ie.length,Fe=Ce.length,Ne=Fe-de,Ge=Fe-qe;$e=ke.map(((ht,Ct)=>`coords.${pe[Ct+Ne]}`)),$e[de-1]="i*2",$e.join(", "),se=Ie.map(((ht,Ct)=>`coords.${pe[Ct+Ge]}`)),se[qe-2]="i*2",se.join(", ");const Ue=i.BroadcastUtil.getBroadcastDims(ke,Ce),Ze=i.BroadcastUtil.getBroadcastDims(Ie,Ce),yt=Ue.map((ht=>`coords.${pe[ht+Ne]} = 0;`)).join(`
`),Nt=Ze.map((ht=>`coords.${pe[ht+Ge]} = 0;`)).join(`
`),Ut=`int lastDim = coords.${pe[Fe-1]};
  coords.${pe[Fe-1]} = coords.${pe[Fe-2]};
  coords.${pe[Fe-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${Re} coords = getOutputCoords();
  ${Ut}
  ${yt}
  vec4 outputValue = getA(${$e});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${Re} coords = getOutputCoords();
  ${Ut}
  ${Nt}
  vec4 outputValue = getB(${se});
  return outputValue;
}`})(X,z,O,$)}`:"",Z=F?"getAAtOutCoordsMatmul(i)":`getA(${(function(Re,pe){let Ae="";for(let Ce=0;Ce<pe-2;Ce++)Ae+=`rc.${Re[Ce]}, `;return Ae+=`rc.${Re[pe-2]}, i*2`,Ae})(z,Y)})`,ue=F?"getBAtOutCoordsMatmul(i)":`getB(${(function(Re,pe){let Ae="";for(let Ce=0;Ce<pe-2;Ce++)Ae+=`rc.${Re[Ce]}, `;return Ae+=`i*2, rc.${Re[pe-1]}`,Ae})(z,Q)})`,Pe=`
            ${we}
            ${ae}
            ${q}
            void main() {
              ${F?"":`${X} rc =
          getOutputCoords(); int lastDim = rc.${z[W-1]}; rc.${z[W-1]} =
          rc.${z[W-2]}; rc.${z[W-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${V}; i++) {
                vec4 a = ${Z};
                vec4 b = ${ue};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${D}
              ${ce}
              ${ee.output} = value;
            }`;return Object.assign(Object.assign({},T),{output:{dims:$,type:O[0].type,textureType:f.TextureType.packed},shaderSource:Pe,hasMain:!0})})(v,o,g,u)})}},5623:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBiasForMatmul=e.createMatmulProgramInfoLoader=e.parseMatMulAttributes=e.matMul=void 0;const i=n(2517),l=n(2039),f=n(9390),p=n(2823),b=n(708);function w(u,o){const h=(_=u.length>2,S=o.activationCacheKey,{name:"MatMul",inputNames:_?["A","B","Bias"]:["A","B"],inputTypes:_?[l.TextureType.unpacked,l.TextureType.unpacked,l.TextureType.unpacked]:[l.TextureType.unpacked,l.TextureType.unpacked],cacheHint:S});var _,S;return Object.assign(Object.assign({},h),{get:()=>(function(T,O,j){const C=O[0].dims,D=O[1].dims,R=i.BroadcastUtil.calcShape(C,D,!0);if(!R)throw new Error("Can't use matmul on the given tensors");const I=(0,f.getCoordsDataType)(R.length),$=(0,f.getGlChannels)(),{activationFunction:F,applyActivation:L}=(0,p.getActivationSnippet)(j),V=O.length>2,Y=V?"value += getBiasForMatmul();":"",Q=V?`${g(I,$,O[2].dims,R,!1)}`:"",ee=R.length,X=C.length,W=D.length,z=`
    ${F}
    ${Q}
    float process(int indices[${ee}]) {
        int a[${X}];
        int b[${W}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${C[C.length-1]}; ++k) {
            a[${X-1}] = k;
            b[${W-2}] = k;
            value += _A(a) * _B(b);
        }
        ${Y}
        ${L}
        return value;
    }`;return Object.assign(Object.assign({},T),{output:{dims:R,type:O[0].type,textureType:l.TextureType.unpacked},shaderSource:z})})(h,u,o)})}e.matMul=(u,o,h)=>(v(o),u.session.pack?[u.run((0,b.createPackedMatmulProgramInfoLoader)(u,o,h),o)]:[u.run(w(o,h),o)]),e.parseMatMulAttributes=u=>(0,p.parseInternalActivationAttributes)(u.attributes),e.createMatmulProgramInfoLoader=w;const v=u=>{if(!u||u.length!==2)throw new Error("MatMul requires 2 inputs.");if(u[0].dims[u[0].dims.length-1]!==u[1].dims[u[1].dims.length-2])throw new Error("shared dimension does not match.");if(u[0].type!=="float32"&&u[0].type!=="float64"||u[1].type!=="float32"&&u[1].type!=="float64")throw new Error("inputs should be float type");if(u[0].type!==u[1].type)throw new Error("inputs types should match")};function g(u,o,h,_,S){let T="";const O=h.length,j=_.length,C=j-O;T=j<2&&O>0?"coords":h.map(((I,$)=>`coords.${o[$+C]}`)).join(", ");const D=i.BroadcastUtil.getBroadcastDims(h,_).map((I=>`coords.${o[I+C]} = 0;`)).join(`
`);let R="vec4(outputValue.xx, outputValue.yy)";return i.ShapeUtil.size(h)===1&&(R="vec4(outputValue.x)"),S?`
vec4 getBiasForMatmul() {
  ${u} coords = getOutputCoords();
  ${D}
  vec4 outputValue = getBias(${T});
  return ${R};
}`:`
float getBiasForMatmul() {
  ${u} coords = getOutputCoords();
  ${D}
  return getBias(coords.x);
}`}e.getBiasForMatmul=g},2403:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackProgramInfoLoader=void 0;const i=n(5060),l=n(2039),f=n(9390),p=n(2827),b={name:"pack",inputNames:["A"],inputTypes:[l.TextureType.unpackedReversed]};e.createPackProgramInfoLoader=(w,v)=>Object.assign(Object.assign({},b),{get:()=>((g,u)=>{const o=(0,i.getGlsl)(g.session.backend.glContext.version),h=u.dims,_=h.length,S=u.dims.length,T=(0,f.getCoordsDataType)(S),O=(0,p.getChannels)("rc",S),j=(C=S,D=O,R=h[h.length-2],I=h[h.length-1],C===0||C===1?"":`
    int r = ${D[C-2]};
    int c = ${D[C-1]};
    int rp1 = ${D[C-2]} + 1;
    int cp1 = ${D[C-1]} + 1;
    bool rEdge = rp1 >= ${I};
    bool cEdge = cp1 >= ${R};
    `);var C,D,R,I;let $;$=_===0?[1,1]:_===1?[h[0],1]:[h[S-1],h[S-2]];const F=(function(Y,Q,ee){if(Y===0)return"false";if(Y===1)return`rc > ${Q[0]}`;let X="";for(let W=Y-2;W<Y;W++)X+=`${ee[W]} >= ${Q[W-Y+2]}`,W<Y-1&&(X+="||");return X})(S,$,O),L=(function(Y,Q){const ee=Y.length;if(ee===0)return"getA(), 0, 0, 0";if(ee===1)return`getA(rc),
            rc + 1 >= ${Y[0]} ? 0. : getA(rc + 1),
            0, 0`;let X="";if(ee>2)for(let W=0;W<ee-2;++W)X+=`${Q[W]},`;return`getA(${X}r, c),
          rEdge ? 0. : getA(${X}rp1, c),
          cEdge ? 0. : getA(${X}r, cp1),
          rEdge || cEdge ? 0. : getA(${X}rp1, cp1)`})(h,O),V=`
        void main() {
          ${T} rc = getOutputCoords();

          if(${F}) {
            ${o.output} = vec4(0);
          } else {
            ${j}

            ${o.output} = vec4(${L});
          }
        }
      `;return Object.assign(Object.assign({},b),{hasMain:!0,output:{dims:u.dims,type:u.type,textureType:l.TextureType.packed},shaderSource:V})})(w,v)})},2827:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.unpackFromChannel=e.getChannels=e.getVecChannels=void 0;const i=n(9390);function l(f,p){return(0,i.getGlChannels)(p).map((b=>`${f}.${b}`))}e.getVecChannels=l,e.getChannels=function(f,p){return p===1?[f]:l(f,p)},e.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},2870:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadAttributesV11=e.padV11=e.parsePadAttributesV2=e.padV2=void 0;const i=n(246),l=n(2517),f=n(5060),p=n(2039),b={name:"Pad",inputNames:["A"],inputTypes:[p.TextureType.unpacked]};e.padV2=(T,O,j)=>(g(O),[T.run(Object.assign(Object.assign({},b),{cacheHint:j.cacheKey,get:()=>v(T,O[0],j)}),O)]),e.parsePadAttributesV2=T=>{const O=T.attributes.getString("mode","constant"),j=T.attributes.getFloat("value",0),C=T.attributes.getInts("pads");return(0,i.createAttributeWithCacheKey)({mode:O,value:j,pads:C})},e.padV11=(T,O,j)=>{u(O);const C=w(T,O,j);return(0,e.padV2)(T,[O[0]],C)},e.parsePadAttributesV11=T=>T.attributes.getString("mode","constant");const w=(T,O,j)=>{if(!T.session.isInitializer(O[1].dataId)||O.length>=3&&!T.session.isInitializer(O[2].dataId))throw new Error("dynamic pad attributes are not allowed");const C=Array.from(O[1].integerData),D=O.length>=3?O[2].floatData[0]:0;return(0,i.createAttributeWithCacheKey)({mode:j,pads:C,value:D})},v=(T,O,j)=>{const C=l.ShapeUtil.padShape(O.dims.slice(),j.pads),D=C.length,R=`
      ${o(T,O,j)}
      float process(int[${D}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[p.TextureType.unpacked],output:{dims:C,type:O.type,textureType:p.TextureType.unpacked},shaderSource:R}},g=T=>{if(!T||T.length!==1)throw new Error("Pad requires 1 input");if(T[0].type!=="float32"&&T[0].type!=="float64")throw new Error("Invalid input type.")},u=T=>{if(!T||T.length!==2&&T.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(T[1].type!=="int32")throw new Error("Invalid input type.");if(T.length>=3&&T[2].type==="string")throw new Error("Invalid input type.")},o=(T,O,j)=>{const C=(0,f.getGlsl)(T.session.backend.glContext.version),[D,R]=T.calculateTextureWidthAndHeight(O.dims,p.TextureType.unpacked),I=l.ShapeUtil.computeStrides(O.dims);switch(j.mode){case"constant":return h(C,O.dims,I,D,R,j.pads,j.value);case"reflect":return _(C,O.dims,I,D,R,j.pads);case"edge":return S(C,O.dims,I,D,R,j.pads);default:throw new Error("Invalid mode")}},h=(T,O,j,C,D,R,I)=>{const $=O.length;let F="";for(let L=$-1;L>=0;--L)F+=`
        k = m[${L}] - ${R[L]};
        if (k < 0)  return constant;
        if (k >= ${O[L]}) return constant;
        offset += k * ${j[L]};
        `;return`
      float padA(int m[${$}]) {
        const float constant = float(${I});
        int offset = 0;
        int k = 0;
        ${F}
        vec2 coords = offsetToCoords(offset, ${C}, ${D});
        float value = getColorAsFloat(${T.texture2D}(A, coords));
        return value;
      }
      `},_=(T,O,j,C,D,R)=>{const I=O.length;let $="";for(let F=I-1;F>=0;--F)$+=`
        k = m[${F}] - ${R[F]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(O[F]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${O[F]}) { k = _2n_1 - k; }
        }
        offset += k * ${j[F]};
        `;return`
      float padA(int m[${I}]) {
        int offset = 0;
        int k = 0;
        ${$}
        vec2 coords = offsetToCoords(offset, ${C}, ${D});
        float value = getColorAsFloat(${T.texture2D}(A, coords));
        return value;
      }
      `},S=(T,O,j,C,D,R)=>{const I=O.length;let $="";for(let F=I-1;F>=0;--F)$+=`
        k = m[${F}] - ${R[F]};
        if (k < 0)  k = 0;
        if (k >= ${O[F]}) k = ${O[F]-1};
        offset += k * ${j[F]};
      `;return`
      float padA(int m[${I}]) {
        int offset = 0;
        int k = 0;
        ${$}
        vec2 coords = offsetToCoords(offset, ${C}, ${D});
        float value = getColorAsFloat(${T.texture2D}(A, coords));
        return value;
      }
      `}},2143:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseMaxPoolAttributes=e.maxPool=e.parseGlobalAveragePoolAttributes=e.globalAveragePool=e.parseAveragePoolAttributes=e.averagePool=void 0;const i=n(246),l=n(2517),f=n(2039);e.averagePool=(S,T,O)=>{u(T);const j={name:"AveragePool",inputNames:["X"],inputTypes:[f.TextureType.unpacked],cacheHint:O.cacheKey};return[S.run(Object.assign(Object.assign({},j),{get:()=>p(T,j,!1,O)}),T)]},e.parseAveragePoolAttributes=S=>{const T=S.attributes.getString("auto_pad","NOTSET"),O=S.attributes.getInt("ceil_mode",0),j=S.attributes.getInt("count_include_pad",0)!==0,C=S.attributes.getInts("kernel_shape"),D=S.attributes.getInts("strides",[]),R=S.attributes.getInts("pads",[]);if(O!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,i.createAttributeWithCacheKey)({autoPad:T,ceilMode:O,countIncludePad:j,kernelShape:C,strides:D,pads:R})};const p=(S,T,O,j)=>{const[C,D]=w(S,j,O),R=l.ShapeUtil.size(C.kernelShape);let I="";C.countIncludePad?I+=`value /= float(${R});`:I+=`value /= float(${R} - pad);`;const $=`
        ${o(S[0].dims,C,"value += _X(x);",I,"0.0")}
      `;return Object.assign(Object.assign({},T),{output:{dims:D,type:S[0].type,textureType:f.TextureType.unpacked},shaderSource:$})};e.globalAveragePool=(S,T,O)=>{u(T);const j={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[f.TextureType.unpacked],cacheHint:`${O.countIncludePad}`};return[S.run(Object.assign(Object.assign({},j),{get:()=>p(T,j,!0,O)}),T)]},e.parseGlobalAveragePoolAttributes=S=>{const T=S.attributes.getInt("count_include_pad",0)!==0;return(0,i.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:T,kernelShape:[],strides:[],pads:[]})},e.maxPool=(S,T,O)=>{u(T);const j={name:"MaxPool",inputNames:["X"],inputTypes:[f.TextureType.unpacked],cacheHint:O.cacheKey};return[S.run(Object.assign(Object.assign({},j),{get:()=>b(T,j,!1,O)}),T)]},e.parseMaxPoolAttributes=S=>{const T=S.attributes.getString("auto_pad","NOTSET"),O=S.attributes.getInt("ceil_mode",0),j=S.attributes.getInts("kernel_shape"),C=S.attributes.getInts("strides",[]),D=S.attributes.getInts("pads",[]),R=S.attributes.getInt("storage_order",0),I=S.attributes.getInts("dilations",[]);if(R!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(O!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,i.createAttributeWithCacheKey)({autoPad:T,ceilMode:O,countIncludePad:!1,kernelShape:j,strides:C,pads:D,storageOrder:R,dilations:I})};const b=(S,T,O,j)=>{const[C,D]=w(S,j,O),R=`
      ${o(S[0].dims,C,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},T),{output:{dims:D,type:S[0].type,textureType:f.TextureType.unpacked},shaderSource:R})},w=(S,T,O)=>{const j=S[0].dims.slice(),C=Object.hasOwnProperty.call(T,"dilations"),D=T.kernelShape.slice(),R=T.strides.slice(),I=C?T.dilations.slice():[],$=T.pads.slice();l.PoolConvUtil.adjustPoolAttributes(O,j,D,R,I,$);const F=l.PoolConvUtil.computePoolOutputShape(O,j,R,I,D,$,T.autoPad),L=Object.assign({},T);return C?Object.assign(L,{kernelShape:D,strides:R,pads:$,dilations:I,cacheKey:T.cacheKey}):Object.assign(L,{kernelShape:D,strides:R,pads:$,cacheKey:T.cacheKey}),[L,F]},v={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},g={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[f.TextureType.unpacked]};e.globalMaxPool=(S,T)=>(u(T),[S.run(Object.assign(Object.assign({},g),{get:()=>b(T,g,!0,v)}),T)]);const u=S=>{if(!S||S.length!==1)throw new Error("Pool ops requires 1 input.");if(S[0].type!=="float32"&&S[0].type!=="float64")throw new Error("Invalid input type.")},o=(S,T,O,j,C)=>{const D=S.length;if(T.kernelShape.length<=2){const R=T.kernelShape[T.kernelShape.length-1],I=T.strides[T.strides.length-1],$=T.pads[T.pads.length/2-1],F=T.pads[T.pads.length-1],L=S[D-1];let V="",Y="",Q="";if(V=$+F!==0?`
          for (int i = 0; i < ${R}; i++) {
            x[${D} - 1] = indices[${D} - 1] * ${I} - ${$} + i;
            if (x[${D} - 1] < 0 || x[${D} - 1] >= ${L}) {
              pad++;
              continue;
            }
            ${O}
          }`:`
          for (int i = 0; i < ${R}; i++) {
            x[${D} - 1] = indices[${D} - 1] * ${I} - ${$} + i;
            ${O}
          }`,T.kernelShape.length===2){const ee=T.kernelShape[T.kernelShape.length-2],X=T.strides[T.strides.length-2],W=T.pads[T.pads.length/2-2],z=T.pads[T.pads.length-2],q=S[D-2];Y=W+z!==0?`
            for (int j = 0; j < ${ee}; j++) {
              x[${D} - 2] = indices[${D} - 2] * ${X} - ${W} + j;
              if (x[${D} - 2] < 0 || x[${D} - 2] >= ${q}) {
                pad+= ${R};
                continue;
              }
          `:`
            for (int j = 0; j < ${ee}; j++) {
              x[${D} - 2] = indices[${D} - 2] * ${X} - ${W} + j;
            `,Q=`
          }
        `}return`
        float process(int indices[${D}]) {
          int x[${D}];
          copyVec(indices, x);

          float value = ${C};
          int pad = 0;
          ${Y}
          ${V}
          ${Q}
          ${j}
          return value;
        }
      `}{const R=l.ShapeUtil.size(T.kernelShape),I=l.ShapeUtil.computeStrides(T.kernelShape),$=I.length,F=T.pads.length,L=_($),V=h(S,"inputDims"),Y=h(T.pads,"pads"),Q=h(I,"kernelStrides"),ee=h(T.strides,"strides");let X="";return X=T.pads.reduce(((W,z)=>W+z))?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${O}
          }`:`
          }
          ${O}
        `,`
        ${L}
        float process(int indices[${D}]) {
          int x[${D}];
          copyVec(indices, x);
          int offset[${$}];
          int pads[${F}];
          int inputDims[${D}];
          int kernelStrides[${$}];
          int strides[${$}];
          ${Y}
          ${V}
          ${ee}
          ${Q}

          float value = ${C};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${R}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${D} - ${$}; j < ${D}; j++) {
              x[j] = indices[j] * strides[j - ${D} + ${$}]
                + offset[j - ${D} + ${$}] - pads[j - 2];
              ${X}
          }
          ${j}

          return value;
        }
      `}},h=(S,T)=>{let O="";for(let j=0;j<S.length;j++)O+=`
      ${T}[${j}] = ${S[j]};
    `;return O},_=S=>`
  void offsetToIndices(int offset, int[${S}] strides, out int[${S}] indices) {
    if (${S} == 0) {
      return;
    }
    for (int i = 0; i < ${S} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${S} - 1] = offset;
  }`},4939:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduceLogSumSquare=e.reduceLogSum=e.reduceProd=e.reduceMin=e.reduceMax=e.reduceMean=e.reduceSum=e.parseReduceAttributes=void 0;const i=n(246),l=n(782),f=n(2517),p=n(2039),b=(g,u,o,h,_)=>{v(u);const S={name:h,inputNames:["A"],inputTypes:[p.TextureType.unpacked]};return[g.run(Object.assign(Object.assign({},S),{cacheHint:o.cacheKey,get:()=>w(g,u,o,h,_,S)}),u)]};e.parseReduceAttributes=g=>{const u=g.attributes.getInts("axes",[]),o=g.attributes.getInt("keepdims",1)===1;return(0,i.createAttributeWithCacheKey)({axes:u,keepDims:o})};const w=(g,u,o,h,_,S)=>{const T=[],O=u[0].dims.length||1,j=[],C=f.ShapeUtil.normalizeAxes(o.axes,u[0].dims.length),D=_(u,C);let R=D[1];for(let $=0;$<u[0].dims.length;$++)C.indexOf($)>=0||C.length===0?(o.keepDims&&T.push(1),R=`
          for(int j${$} = 0; j${$} < ${u[0].dims[$]}; j${$}++) {
            inputIdx[${$}] = j${$};
            ${R}
          }`):(j.push(`inputIdx[${$}] = outputIdx[${T.length}];`),T.push(u[0].dims[$]));const I=`
      float process(int outputIdx[${T.length||1}]) {
        float value;                 // final result
        int inputIdx[${O}];      // addressing input data
        ${j.join(`
`)}
        ${D[0]}       // init ops for reduce max/min
        ${R}
        ${D[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},S),{output:{dims:T,type:u[0].type,textureType:p.TextureType.unpacked},shaderSource:I})},v=g=>{if(!g||g.length!==1)throw new Error("Reduce op requires 1 input.");if(l.NUMBER_TYPES.indexOf(g[0].type)===-1)throw new Error("Invalid input type.")};e.reduceSum=(g,u,o)=>b(g,u,o,"ReduceSum",(()=>["value = 0.0;","value += _A(inputIdx);",""])),e.reduceMean=(g,u,o)=>b(g,u,o,"ReduceMean",((h,_)=>{let S=1;for(let T=0;T<h[0].dims.length;T++)(_.indexOf(T)>=0||_.length===0)&&(S*=h[0].dims[T]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${S}.;`]})),e.reduceMax=(g,u,o)=>b(g,u,o,"ReduceMax",((h,_)=>{const S=[];for(let T=0;T<h[0].dims.length;T++)(_.indexOf(T)>=0||_.length===0)&&S.push(`inputIdx[${T}] = 0;`);return[`${S.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]})),e.reduceMin=(g,u,o)=>b(g,u,o,"ReduceMin",((h,_)=>{const S=[];for(let T=0;T<h[0].dims.length;T++)(_.indexOf(T)>=0||_.length===0)&&S.push(`inputIdx[${T}] = 0;`);return[`${S.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]})),e.reduceProd=(g,u,o)=>b(g,u,o,"ReduceProd",(()=>["value = 1.0;","value *= _A(inputIdx);",""])),e.reduceLogSum=(g,u,o)=>b(g,u,o,"ReduceLogSum",(()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"])),e.reduceLogSumSquare=(g,u,o)=>b(g,u,o,"ReduceLogSumSquare",(()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""]))},7019:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isReshapeCheap=e.processDims3D=e.createPackedReshape3DProgramInfoLoader=void 0;const i=n(2517),l=n(5060),f=n(2039),p=n(2827);e.createPackedReshape3DProgramInfoLoader=(b,w,v)=>{const g=(u=>({name:"Reshape (packed)",inputTypes:[f.TextureType.packed],inputNames:["A"],cacheHint:`${u}`}))(v);return Object.assign(Object.assign({},g),{get:()=>((u,o,h,_)=>{const S=o.dims,T=_;let O="";for(let D=0;D<4;D++){let R="";switch(D){case 0:R="outputCoords = rc;";break;case 1:R="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:R="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:R="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}O+=`
        ${R}
        ${D>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${D}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${D>0?"}":""}
      `}const j=(0,l.getGlsl)(u.session.backend.glContext.version),C=`
      ${(function(D){const R=i.ShapeUtil.computeStrides(D),I=["b","r","c"],$="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${R.map(((F,L)=>`int ${I[L]} = ${$} / ${F}; ${L===R.length-1?`int ${I[L+1]} = ${$} - ${I[L]} * ${F}`:`index -= ${I[L]} * ${F}`};`)).join("")}
      return ivec3(b, r, c);
    }
  `})(S)}
      ${(function(D){const R=i.ShapeUtil.computeStrides(D);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${R[0]} + coords.z * ${R[1]} + coords.y;
  }
`})(T)}
      ${(0,p.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${T[2]};
        int cols = ${T[1]};

        ${O}
        ${j.output} = result;
      }
    `;return Object.assign(Object.assign({},h),{output:{dims:T,type:o.type,textureType:f.TextureType.packed},shaderSource:C,hasMain:!0})})(b,w,g,v)})},e.processDims3D=function(b){if(b.length===0)return[1,1,1];let w=1;for(let v=0;v<b.length-2;++v)w*=b[v];return[w,b.length>1?b[b.length-2]:1,b[b.length-1]]},e.isReshapeCheap=function(b,w){let v=!1;return v=b.length===0||w.length===0||(b.length<2||w.length<2?b[b.length-1]===w[w.length-1]:b[b.length-1]===w[w.length-1]&&b[b.length-2]===w[w.length-2]),v}},718:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reshape=void 0;const i=n(2517);e.reshape=(l,f)=>{const p=i.ShapeUtil.calculateReshapedDims(f[0].dims,f[1].integerData);return l.session.pack?[l.reshapePacked(f[0],p)]:[l.reshapeUnpacked(f[0],p)]}},2268:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseResizeAttributesV11=e.parseResizeAttributesV10=e.resize=void 0;const i=n(5060),l=n(2039),f=n(9390),p=n(2827),b=n(9793),w={name:"Resize",inputNames:["A"],inputTypes:[l.TextureType.packed]};e.resize=(h,_,S)=>((0,b.validateInputs)(_,S),[h.run(Object.assign(Object.assign({},w),{cacheHint:S.cacheKey,get:()=>v(h,_,S)}),_)]),e.parseResizeAttributesV10=h=>(0,b.parseUpsampleAttributes)(h,10),e.parseResizeAttributesV11=h=>(0,b.parseUpsampleAttributes)(h,11);const v=(h,_,S)=>{const T=(0,i.getGlsl)(h.session.backend.glContext.version),[O,j]=g(_,S);if(O.every((X=>X===1))&&S.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},w),{output:{dims:j,type:_[0].type,textureType:l.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${T.texture2D}(X, TexCoords);
                    ${T.output} = v;
                }`});const C=j.length;if(C<2)throw new Error(`output dimension should be at least 2, but got ${C}`);const D=j[C-2],R=j[C-1],I=_[0].dims;if(C!==I.length)throw new Error(`output dimension should match input ${I.length}, but got ${C}`);const $=I[C-2],F=I[C-1],L=O[C-2],V=O[C-1];let Y="";if(S.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${S.mode}'`);switch(S.coordinateTransformMode){case"asymmetric":Y=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":Y=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":Y=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${R}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${D}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${R}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${D}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":Y=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${R}.0 - 1.0, ${D}.0 - 1.0, ${R}.0 - 1.0,
                            ${D}.0 - 1.0);
                        vec4 original = vec4(${F}.0 - 1.0, ${$}.0 - 1.0, ${F}.0 - 1.0,
                            ${$}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${S.coordinateTransformMode}'`)}const Q=(0,f.getCoordsDataType)(C),ee=`
            const vec2 inputWH = vec2(${$}.0, ${F}.0);
            const vec4 scaleWHWH = vec4(float(${L}), float(${V}), float(${L}), float(${V}));
            ${(0,p.unpackFromChannel)()}
            ${Y}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${Q} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${D-1};
                bool hasNextCol = rc.z < ${R-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${T.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},w),{output:{dims:j,type:_[0].type,textureType:l.TextureType.packed},hasMain:!0,shaderSource:ee})},g=(h,_)=>{const S=h[0].dims;let T,O=_.scales;if(O.length===0){const C=h[_.scalesInputIdx];if(C&&C.size!==0){if(h[_.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");O=u(C,_.mode,_.isResize)}else{const D=h[_.sizesInputIdx];if(!D||D.size===0)throw new Error("Either scales or sizes MUST be provided as input.");T=Array.from(D.integerData),O=o(T,S,_.mode,_.isResize)}}else if(h[_.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const j=T||S.map(((C,D)=>Math.floor(C*O[D])));return[O,j]},u=(h,_,S)=>{const T=Array.from(h.floatData);return(0,b.scalesValidation)(T,_,S),T},o=(h,_,S,T)=>{const O=_.length,j=new Array(O);for(let C=0,D=O;C<D;C++)if(_[C]===0){if(h[C]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");j[C]=1}else j[C]=h[C]/_[C];return(0,b.scalesValidation)(j,S,T),j}},8117:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.shape=void 0;const i=n(9162);e.shape=(f,p)=>(l(p),[new i.Tensor([p[0].dims.length],"int32",void 0,void 0,new Int32Array(p[0].dims))]);const l=f=>{if(!f||f.length!==1)throw new Error("Shape requires 1 input.")}},2278:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sliceV10=e.parseSliceAttributes=e.slice=void 0;const i=n(246),l=n(782),f=n(2517),p=n(2039),b={name:"Slice",inputNames:["A"],inputTypes:[p.TextureType.unpacked]};e.slice=(o,h,_)=>(v(h),[o.run(Object.assign(Object.assign({},b),{cacheHint:_.cacheKey,get:()=>w(o,h[0],_)}),h)]),e.parseSliceAttributes=o=>{const h=o.attributes.getInts("starts"),_=o.attributes.getInts("ends"),S=o.attributes.getInts("axes",[]);return(0,i.createAttributeWithCacheKey)({starts:h,ends:_,axes:S})};const w=(o,h,_)=>{const S=_.axes.length===0?h.dims.slice(0).map(((I,$)=>$)):_.axes,T=f.ShapeUtil.normalizeAxes(S,h.dims.length),O=_.starts.map(((I,$)=>I>h.dims[T[$]]-1?h.dims[T[$]]:f.ShapeUtil.normalizeAxis(I,h.dims[T[$]]))),j=_.ends.map(((I,$)=>I>h.dims[T[$]]-1?h.dims[T[$]]:f.ShapeUtil.normalizeAxis(I,h.dims[T[$]]))),C=h.dims.slice(),D=[];for(let I=0;I<T.length;I++)C[T[I]]=j[I]-O[I],O[I]>0&&D.push(`outputIdx[${T[I]}] += ${O[I]};`);const R=`
      float process(int outputIdx[${C.length}]) {
        ${D.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},b),{output:{dims:C,type:h.type,textureType:p.TextureType.unpacked},shaderSource:R})},v=o=>{if(!o||o.length!==1)throw new Error("Slice requires 1 input.");if(l.NUMBER_TYPES.indexOf(o[0].type)===-1)throw new Error("Invalid input type.")};e.sliceV10=(o,h)=>{u(h);const _=g(o,h);return[o.run(Object.assign(Object.assign({},b),{cacheHint:_.cacheKey,get:()=>w(o,h[0],_)}),[h[0]])]};const g=(o,h)=>{if(!o.session.isInitializer(h[1].dataId)||!o.session.isInitializer(h[2].dataId)||h.length>=4&&!o.session.isInitializer(h[3].dataId)||h.length>=5&&!o.session.isInitializer(h[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(h.length>=5&&h[4].integerData.some((O=>O!==1)))throw new Error("currently non-1 steps is not supported for Slice");const _=Array.from(h[1].integerData),S=Array.from(h[2].integerData),T=h.length>=4?Array.from(h[3].integerData):[];return{starts:_,ends:S,axes:T,cacheKey:`${T};${_};${S}`}},u=o=>{if(!o||o.length<3||o.length>5)throw new Error("Invalid input number.");if(o[1].type!=="int32"||o[1].dims.length!==1)throw new Error("Invalid input type.");if(o[2].type!=="int32"||o[2].dims.length!==1)throw new Error("Invalid input type.");if(o.length>=4&&(o[3].type!=="int32"||o[3].dims.length!==1))throw new Error("Invalid input type.");if(o.length>=5&&(o[4].type!=="int32"||o[4].dims.length!==1))throw new Error("Invalid input type.")}},5524:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.softmaxV13=e.parseSoftmaxAttributesV13=e.parseSoftmaxAttributes=e.softmax=void 0;const i=n(246),l=n(2517),f=n(5060),p=n(2039),b=n(3738),w={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[p.TextureType.unpacked]},v={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[p.TextureType.unpacked,p.TextureType.unpacked]},g={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[p.TextureType.unpacked,p.TextureType.unpacked,p.TextureType.unpacked]};e.softmax=(T,O,j)=>{S(O);const C=O[0].dims.slice(),D=l.ShapeUtil.normalizeAxis(j.axis,C.length),R=l.ShapeUtil.sizeToDimension(C,D),I=l.ShapeUtil.sizeFromDimension(C,D);return u(T,O,j,R,I)},e.parseSoftmaxAttributes=T=>(0,i.createAttributeWithCacheKey)({axis:T.attributes.getInt("axis",1)}),e.parseSoftmaxAttributesV13=T=>(0,i.createAttributeWithCacheKey)({axis:T.attributes.getInt("axis",-1)}),e.softmaxV13=(T,O,j)=>{S(O);const C=O[0].dims.slice(),D=l.ShapeUtil.normalizeAxis(j.axis,C.length),R=C.length,I=D!==R-1,$=[];let F,L=[],V=[];I&&(L=Array.from({length:R}).map(((X,W)=>W)),L[D]=R-1,L[R-1]=D,L.map((X=>$.push(C[X]))),F=(0,i.createAttributeWithCacheKey)({perm:L}),V=(0,b.transpose)(T,O,F));const Y=I?l.ShapeUtil.sizeToDimension($,R-1):l.ShapeUtil.sizeToDimension(C,R-1),Q=I?l.ShapeUtil.sizeFromDimension($,R-1):l.ShapeUtil.sizeFromDimension(C,R-1),ee=u(T,I?V:O,j,Y,Q);return I?(0,b.transpose)(T,ee,F):ee};const u=(T,O,j,C,D)=>{const R=o(T,O[0],C,D,[C]),I=T.run(Object.assign(Object.assign({},w),{cacheHint:j.cacheKey,get:()=>R}),O),$=h(T,O[0],C,D,R.output.dims,[C]),F=T.run(Object.assign(Object.assign({},v),{cacheHint:j.cacheKey,get:()=>$}),[O[0],I]),L=_(T,O[0],C,D,R.output.dims,$.output.dims);return[T.run(Object.assign(Object.assign({},g),{cacheHint:j.cacheKey,get:()=>L}),[O[0],I,F])]},o=(T,O,j,C,D)=>{const[R,I]=T.calculateTextureWidthAndHeight(O.dims,p.TextureType.unpacked),$=D.length;if(j<1||C<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(D.length!==1)throw new Error("Dimensionality of the output should be 1");if(D[0]!==j)throw new Error("Shape of the output should be equal to logical row count");const F=(0,f.getGlsl)(T.session.backend.glContext.version),L=`
      float process(int[${$}] indices) {
        int logical_row_start_offset = indices[0] * ${C};

        float max = getColorAsFloat(${F.texture2D}(A, offsetToCoords(logical_row_start_offset, ${R},
        ${I} )));
        for(int i=1; i<${C}; ++i)
        {
          float current = getColorAsFloat(${F.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${R}, ${I})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},w),{output:{dims:D,type:O.type,textureType:p.TextureType.unpacked},shaderSource:L})},h=(T,O,j,C,D,R)=>{const[I,$]=T.calculateTextureWidthAndHeight(O.dims,p.TextureType.unpacked),F=R.length;if(j<1||C<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(R.length!==1)throw new Error("Dimensionality of the output should be 1");if(R[0]!==j)throw new Error("Shape of the output should be equal to logical row count");if(D.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(D[0]!==j)throw new Error("Shape of the intermediate results should be equal to logical row count");const L=`
      float process(int[${F}] indices) {
        int logical_row_start_offset = indices[0] * ${C};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${C}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,f.getGlsl)(T.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${I}, ${$}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},v),{output:{dims:R,type:O.type,textureType:p.TextureType.unpacked},shaderSource:L})},_=(T,O,j,C,D,R)=>{const[I,$]=T.calculateTextureWidthAndHeight(O.dims,p.TextureType.unpacked),F=O.dims.length;if(j<1||C<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(D.length!==1||R.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(D[0]!==j||R[0]!==j)throw new Error("Shape of the intermediate results should be equal to logical row count");const L=`
      float process(int[${F}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${I}, ${$});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${C};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},g),{output:{dims:O.dims,type:O.type,textureType:p.TextureType.unpacked},shaderSource:L})},S=T=>{if(!T||T.length!==1)throw new Error("Softmax requires 1 input.");if(T[0].type!=="float32"&&T[0].type!=="float64")throw new Error("Invalid input type")}},5975:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSplitAttributes=e.split=void 0;const i=n(246),l=n(2517),f=n(2039),p={name:"Split",inputNames:["A"],inputTypes:[f.TextureType.unpacked]};e.split=(g,u,o)=>{v(u);const h=l.ShapeUtil.normalizeAxis(o.axis,u[0].dims.length),_=b(g,u,h,o),S=[];for(let T=0;T<_;++T)S.push(g.run(Object.assign(Object.assign({},p),{cacheHint:`${o.cacheKey};${T}`,get:()=>w(g,u[0],o,h,T)}),u));return S},e.parseSplitAttributes=g=>{const u=g.attributes.getInt("axis",0),o=g.attributes.getInts("split",[]),h=g.outputs.length;return(0,i.createAttributeWithCacheKey)({axis:u,split:o,numOutputs:h})};const b=(g,u,o,h)=>{const[,_]=l.SplitUtil.splitShape(u[0].dims,o,h.split,h.numOutputs);return _.length},w=(g,u,o,h,_)=>{const[S,T]=l.SplitUtil.splitShape(u.dims,h,o.split,o.numOutputs),O=T[_],j=S[_],C=`
      float process(int indices[${j.length}]) {
        indices[${h}] += ${O};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},p),{cacheHint:`${o.cacheKey}:${_}`,output:{dims:j,type:u.type,textureType:f.TextureType.unpacked},shaderSource:C})},v=g=>{if(!g||g.length!==1)throw new Error("Split requires one input.");if(g[0].type!=="int8"&&g[0].type!=="uint8"&&g[0].type!=="int16"&&g[0].type!=="uint16"&&g[0].type!=="int32"&&g[0].type!=="uint32"&&g[0].type!=="float32"&&g[0].type!=="float64"&&g[0].type!=="bool")throw new Error("Invalid input type.")}},3933:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSqueezeAttributes=e.squeezeV13=e.squeeze=void 0;const i=n(2517);e.squeeze=(p,b,w)=>{l(b);const v=i.ShapeUtil.squeezeShape(b[0].dims,w);return[p.reshapeUnpacked(b[0],v)]},e.squeezeV13=(p,b)=>(f(b),(0,e.squeeze)(p,[b[0]],Array.from(b[1].integerData))),e.parseSqueezeAttributes=p=>p.attributes.getInts("axes");const l=p=>{if(!p||p.length!==1)throw new Error("Squeeze requires 1 input.");if(p[0].type==="string")throw new Error("invalid input tensor types.")},f=p=>{if(!p||p.length!==2)throw new Error("Squeeze requires 2 inputs.");if(p[1].type!=="int32")throw new Error("Invalid input type.")}},6558:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sum=void 0;const i=n(5060),l=n(2039);e.sum=(b,w)=>{p(w);const v={name:"Sum",inputNames:w.map(((g,u)=>`X${u}`)),inputTypes:new Array(w.length).fill(l.TextureType.unpacked)};return[b.run(Object.assign(Object.assign({},v),{get:()=>f(b,w,v)}),w)]};const f=(b,w,v)=>{const g=(0,i.getGlsl)(b.session.backend.glContext.version),u=w[0].dims.slice(),o=`
      void main() {
        vec4 result = ${w.map(((h,_)=>`${g.texture2D}(X${_},TexCoords)`)).join(" + ")};
        ${g.output} = result;
      }
    `;return Object.assign(Object.assign({},v),{output:{dims:u,type:w[0].type,textureType:l.TextureType.unpacked},hasMain:!0,shaderSource:o})},p=b=>{if(!b||b.length===0)throw new Error("Sum requires inputs.");const w=b[0].dims.length;for(let v=1;v<b.length;v++){if(w!==b[v].dims.length)throw new Error("Input shapes are mismatched.");for(let g=0;g<w;g++)if(b[0].dims[g]!==b[v].dims[g])throw new Error("Input shapes are not matched.")}if(b[0].type!=="float32"&&b[0].type!=="float64")throw new Error("Invalid input type.");for(let v=1;v<b.length;v++)if(b[0].type!==b[v].type)throw new Error("Input types are not matched.")}},5723:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tile=void 0;const i=n(782),l=n(2039);e.tile=(b,w)=>{p(w);const v={name:"Tile",inputNames:["A"],inputTypes:[l.TextureType.unpacked]};return[b.run(Object.assign(Object.assign({},v),{get:()=>f(b,w,v)}),w)]};const f=(b,w,v)=>{const g=w[0].dims.slice(),u=new Array(g.length),o=[];for(let S=0;S<g.length;S++)u[S]=g[S]*w[1].numberData[S],o.push(`inputIdx[${S}] = int(mod(float(outputIdx[${S}]), ${g[S]}.));`);const h=u.length,_=`
      float process(int outputIdx[${h}]) {
        int inputIdx[${h}];
        ${o.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},v),{output:{dims:u,type:w[0].type,textureType:l.TextureType.unpacked},shaderSource:_})},p=b=>{if(!b||b.length!==2)throw new Error("Tile requires 2 input.");if(b[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(b[1].dims[0]!==b[0].dims.length)throw new Error("Invalid input shape.");if(i.NUMBER_TYPES.indexOf(b[0].type)===-1)throw new Error("Invalid input type.");if(b[1].type!=="int32"&&b[1].type!=="int16")throw new Error("Invalid repeat type.")}},3738:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=void 0;const i=n(246),l=n(2517),f=n(2039),p={name:"Transpose",inputNames:["A"],inputTypes:[f.TextureType.unpacked]};e.transpose=(o,h,_)=>(u(h),[o.run(Object.assign(Object.assign({},p),{cacheHint:_.cacheKey,get:()=>b(o,h[0],_.perm)}),h)]),e.parseTransposeAttributes=o=>(0,i.createAttributeWithCacheKey)({perm:o.attributes.getInts("perm",[])});const b=(o,h,_)=>{const S=h.dims;_=w(S,_);const T=v(S,_),O=S.length,j=`
      ${g("perm",_,O)}
      float process(int indices[${O}]) {
        int a[${O}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},p),{output:{dims:T,type:h.type,textureType:f.TextureType.unpacked},shaderSource:j})},w=(o,h)=>(h&&h.length!==o.length&&(h=[...o.keys()].reverse()),h),v=(o,h)=>(h=w(o,h),l.ShapeUtil.sortBasedOnPerm(o,h)),g=(o,h,_)=>{const S=[];S.push(`void ${o}(out int a[${_}], int src[${_}]) {`);for(let T=0;T<_;++T)S.push(`	a[${h[T]}]=src[${T}];`);return S.push("	}"),S.join(`
`)},u=o=>{if(!o||o.length!==1)throw new Error("Transpose requires 1 input.");if(o[0].type!=="float32"&&o[0].type!=="float64")throw new Error("input should be float tensor")}},8710:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.encodeAsUint8=void 0;const i=n(5060),l=n(2039);e.encodeAsUint8=(f,p)=>{const b=p.shape,w=(0,i.getGlsl)(f.session.backend.glContext.version),v=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${w.texture2D}(X,TexCoords).r;
      ${w.output} = encodeAsUint8(value);
    }`,g={name:"Uint8Encode",inputTypes:[l.TextureType.unpacked],inputNames:["X"],output:{dims:b,type:p.tensor.type,textureType:l.TextureType.downloadUint8AsFloat},shaderSource:v,hasMain:!0};return f.executeProgram(g,[p.tensor])}},4909:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tanh=e.tan=e.sqrt=e.sin=e.sigmoid=e.relu=e.not=e.neg=e.log=e.parseLeakyReluAttributes=e.leakyRelu=e.identity=e.floor=e.exp=e.parseEluAttributes=e.elu=e.cos=e.ceil=e.clipV11=e.parseClipAttributes=e.clip=e.atan=e.asin=e.acos=e.abs=e.glslTanh=e.glslTan=e.glslSqrt=e.glslSigmoid=e.glslRelu=e.glslSin=e.glslNot=e.glslNeg=e.glslLog=e.glslLeakyRelu=e.glslIdentity=e.glslClip=e.glslFloor=e.glslExp=e.glslElu=e.glslCos=e.glslCeil=e.glslAtan=e.glslAsin=e.glslAcos=e.glslAbs=void 0;const i=n(246),l=n(2517),f=n(8520),p=n(5060),b=n(2039);function w(){return ee("abs")}function v(){return ee("acos")}function g(){return ee("asin")}function u(){return ee("atan")}function o(){return ee("ceil")}function h(){return ee("cos")}function _(z){return{body:`
  const float alpha = float(${z});

  float elu_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 elu_(vec4 v) {
    return vec4(elu_(v.x), elu_(v.y), elu_(v.z), elu_(v.w));
  }
  `,name:"elu",type:f.FunctionType.ValueBased}}function S(){return ee("exp")}function T(){return ee("floor")}function O(z,q){const ce="clip";return{body:`
  const float min = float(${z});
  const float max = float(${q});

  float ${ce}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${ce}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:ce,type:f.FunctionType.ValueBased}}function j(){const z="indentity";return{body:`
  float ${z}_(float a) {
    return a;
  }
  vec4 ${z}_(vec4 v) {
    return v;
  }
  `,name:z,type:f.FunctionType.ValueBased}}function C(z){const q="leakyRelu";return{body:`
  const float alpha = float(${z});

  float ${q}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${q}_(vec4 v) {
    return vec4(${q}_(v.x), ${q}_(v.y), ${q}_(v.z), ${q}_(v.w));
  }
  `,name:q,type:f.FunctionType.ValueBased}}function D(){return ee("log")}function R(){return{body:`
  float neg_(float a) {
    return -a;
  }
  vec4 neg_(vec4 v) {
    return -v;
  }
  `,name:"neg",type:f.FunctionType.ValueBased}}function I(){return{body:`
  float not_(float a) {
    return float( ! bool(a) );
  }
  bool not_(bool a) {
    return !a;
  }
  vec4 not_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 not_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:"not",type:f.FunctionType.ValueBased}}function $(){return ee("sin")}function F(){const z="relu";return{body:`
  float ${z}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${z}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:z,type:f.FunctionType.ValueBased}}function L(){const z="sigmoid";return{body:`
  float ${z}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${z}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:z,type:f.FunctionType.ValueBased}}function V(){return ee("sqrt")}function Y(){return ee("tan")}function Q(){const z="tanh";return{body:`
  float ${z}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${z}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:z,type:f.FunctionType.ValueBased}}function ee(z){return{body:`
  float ${z}_(float a) {
    return ${z}(a);
  }
  vec4 ${z}_(vec4 v) {
    return ${z}(v);
  }
  `,name:z,type:f.FunctionType.ValueBased}}e.glslAbs=w,e.glslAcos=v,e.glslAsin=g,e.glslAtan=u,e.glslCeil=o,e.glslCos=h,e.glslElu=_,e.glslExp=S,e.glslFloor=T,e.glslClip=O,e.glslIdentity=j,e.glslLeakyRelu=C,e.glslLog=D,e.glslNeg=R,e.glslNot=I,e.glslSin=$,e.glslRelu=F,e.glslSigmoid=L,e.glslSqrt=V,e.glslTan=Y,e.glslTanh=Q;const X=(z,q,ce,ae)=>{const we=z.session.pack?b.TextureType.packed:b.TextureType.unpacked,Z={name:ce.name,inputTypes:[we],inputNames:["A"],cacheHint:ae};return Object.assign(Object.assign({},Z),{get:()=>((ue,Pe,Re,pe)=>{const Ae=ue.session.pack?b.TextureType.packed:b.TextureType.unpacked,Ce=(0,p.getGlsl)(ue.session.backend.glContext.version);return Object.assign(Object.assign({},Pe),{output:{dims:Re.dims,type:Re.type,textureType:Ae},shaderSource:`
     ${pe.body}
     void main() {
       vec4 v = ${Ce.texture2D}(A, TexCoords);
       v = ${pe.name}_(v);
       ${Ce.output} = v;
     }
     `,hasMain:!0})})(z,Z,q,ce)})};e.abs=(z,q)=>[z.run(X(z,q[0],w()),q)],e.acos=(z,q)=>[z.run(X(z,q[0],v()),q)],e.asin=(z,q)=>[z.run(X(z,q[0],g()),q)],e.atan=(z,q)=>[z.run(X(z,q[0],u()),q)],e.clip=(z,q,ce)=>[z.run(X(z,q[0],O(ce.min,ce.max),ce.cacheKey),q)],e.parseClipAttributes=z=>(0,i.createAttributeWithCacheKey)({min:z.attributes.getFloat("min",l.MIN_CLIP),max:z.attributes.getFloat("max",l.MAX_CLIP)}),e.clipV11=(z,q)=>{const ce=W(z,q);return(0,e.clip)(z,[q[0]],ce)};const W=(z,q)=>{if(q.length>=3&&(!z.session.isInitializer(q[1].dataId)||!z.session.isInitializer(q[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const ce=q.length>=3?q[1].numberData[0]:l.MIN_CLIP,ae=q.length>=3?q[2].numberData[0]:l.MAX_CLIP;return(0,i.createAttributeWithCacheKey)({min:ce,max:ae})};e.ceil=(z,q)=>[z.run(X(z,q[0],o()),q)],e.cos=(z,q)=>[z.run(X(z,q[0],h()),q)],e.elu=(z,q,ce)=>[z.run(X(z,q[0],_(ce.alpha),ce.cacheKey),q)],e.parseEluAttributes=z=>(0,i.createAttributeWithCacheKey)({alpha:z.attributes.getFloat("alpha",1)}),e.exp=(z,q)=>[z.run(X(z,q[0],S()),q)],e.floor=(z,q)=>[z.run(X(z,q[0],T()),q)],e.identity=(z,q)=>[z.run(X(z,q[0],j()),q)],e.leakyRelu=(z,q,ce)=>[z.run(X(z,q[0],C(ce.alpha),ce.cacheKey),q)],e.parseLeakyReluAttributes=z=>(0,i.createAttributeWithCacheKey)({alpha:z.attributes.getFloat("alpha",.01)}),e.log=(z,q)=>[z.run(X(z,q[0],D()),q)],e.neg=(z,q)=>[z.run(X(z,q[0],R()),q)],e.not=(z,q)=>[z.run(X(z,q[0],I()),q)],e.relu=(z,q)=>[z.run(X(z,q[0],F()),q)],e.sigmoid=(z,q)=>[z.run(X(z,q[0],L()),q)],e.sin=(z,q)=>[z.run(X(z,q[0],$()),q)],e.sqrt=(z,q)=>[z.run(X(z,q[0],V()),q)],e.tan=(z,q)=>[z.run(X(z,q[0],Y()),q)],e.tanh=(z,q)=>[z.run(X(z,q[0],Q()),q)]},5611:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackProgramInfoLoader=e.createUnpackProgramInfo=void 0;const i=n(5060),l=n(2039),f=n(9390),p=n(2827),b={name:"unpack",inputNames:["A"],inputTypes:[l.TextureType.packed]};e.createUnpackProgramInfo=(w,v)=>{const g=v.dims.length,u=(0,p.getChannels)("rc",g),o=u.slice(-2),h=(0,f.getCoordsDataType)(g),_=(0,p.unpackFromChannel)(),S=v.dims.length===0?"":(function(j,C){if(j===1)return"rc";let D="";for(let R=0;R<j;R++)D+=C[R],R<j-1&&(D+=",");return D})(g,u),T=g<=1?"rc":`vec2(${o.join(",")})`,O=`
    ${_}
    void main() {
      ${h} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${S});

       ${(0,i.getGlsl)(w.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${T}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},b),{hasMain:!0,output:{dims:v.dims,type:v.type,textureType:l.TextureType.unpacked},shaderSource:O})},e.createUnpackProgramInfoLoader=(w,v)=>Object.assign(Object.assign({},b),{get:()=>(0,e.createUnpackProgramInfo)(w,v)})},8428:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnsqueezeAttributes=e.unsqueezeV13=e.unsqueeze=void 0;const i=n(2517);e.unsqueeze=(p,b,w)=>{l(b);const v=i.ShapeUtil.unsqueezeShape(b[0].dims,w);return[p.reshapeUnpacked(b[0],v)]},e.unsqueezeV13=(p,b)=>(f(b),(0,e.unsqueeze)(p,[b[0]],Array.from(b[1].integerData))),e.parseUnsqueezeAttributes=p=>p.attributes.getInts("axes");const l=p=>{if(!p||p.length!==1)throw new Error("Unsqueeze requires 1 input.");if(p[0].type==="string")throw new Error("invalid input tensor types.")},f=p=>{if(!p||p.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(p[1].type!=="int32")throw new Error("Invalid input type.")}},9793:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scalesValidation=e.validateInputs=e.parseUpsampleAttributes=e.parseUpsampleAttributesV9=e.parseUpsampleAttributesV7=e.upsample=void 0;const i=n(246),l=n(5060),f=n(2039),p={name:"Upsample",inputNames:["X"],inputTypes:[f.TextureType.unpacked]};e.upsample=(w,v,g)=>((0,e.validateInputs)(v,g),[w.run(Object.assign(Object.assign({},p),{cacheHint:g.cacheKey,get:()=>b(w,v,g)}),v)]),e.parseUpsampleAttributesV7=w=>(0,e.parseUpsampleAttributes)(w,7),e.parseUpsampleAttributesV9=w=>(0,e.parseUpsampleAttributes)(w,9),e.parseUpsampleAttributes=(w,v)=>{const g=v>=10,u=w.attributes.getString("mode","nearest");if(u!=="nearest"&&u!=="linear"&&(v<11||u!=="cubic"))throw new Error(`unrecognized mode: ${u}`);let o=[];v<9&&(o=w.attributes.getFloats("scales"),(0,e.scalesValidation)(o,u,g));const h=w.attributes.getFloat("extrapolation_value",0),_=v>10?w.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(_)===-1)throw new Error(`coordinate_transform_mode '${_}' is not supported`);const S=_==="tf_crop_and_resize",T=S,O=u==="nearest"&&v>=11?w.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(O)===-1)throw new Error(`nearest_mode '${O}' is not supported`);const j=w.attributes.getFloat("cubic_coeff_a",-.75),C=w.attributes.getInt("exclude_outside",0)!==0;if(C&&u!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const D=v<11||u==="nearest"&&_==="asymmetric"&&O==="floor";let R=0,I=0,$=0;return v>10?w.inputs.length>2?(R=1,I=2,$=3):(I=1,$=2):v===9&&(I=1),(0,i.createAttributeWithCacheKey)({opset:v,isResize:g,mode:u,scales:o,extrapolationValue:h,coordinateTransformMode:_,useExtrapolation:T,needRoiInput:S,nearestMode:O,cubicCoefficientA:j,excludeOutside:C,useNearest2xOptimization:D,roiInputIdx:R,scalesInputIdx:I,sizesInputIdx:$})};const b=(w,v,g)=>{const u=(0,l.getGlsl)(w.session.backend.glContext.version),[o,h]=w.calculateTextureWidthAndHeight(v[0].dims,f.TextureType.unpacked),_=v[0].dims.map((($,F)=>Math.floor($*g.scales[F]))),[S,T]=w.calculateTextureWidthAndHeight(_,f.TextureType.unpacked),O=_.length,j=new Array(O),C=new Array(O);let D=`
      int output_pitches[${O}];
      int input_pitches[${O}];
      `;for(let $=O-1;$>=0;$--)j[$]=$===O-1?1:j[$+1]*_[$+1],C[$]=$===O-1?1:C[$+1]*v[0].dims[$+1],D+=`
        output_pitches[${$}] = ${j[$]};
        input_pitches[${$}] = ${C[$]};
        `;const R=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${o}, ${h});
        float value = getColorAsFloat(${u.texture2D}(X, coords));
        return value;
      }
      `,I=g.mode==="nearest"?`
    ${R}
    float process(int indices[${O}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${S}, ${T});

      ${D}

      int d, m;
      for (int dim = 0; dim < ${O}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:O===4?`
    ${R}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${S}, ${T});

      ${D}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${v[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${R}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${S}, ${T});

      ${D}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${v[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},p),{output:{dims:_,type:v[0].type,textureType:f.TextureType.unpacked},shaderSource:I,variables:[{name:"scales",type:"int",arrayLength:g.scales.length,data:g.scales.map(($=>Math.ceil($)))}]})};e.validateInputs=(w,v)=>{if(!w||v.opset<9&&w.length!==1||v.opset>=9&&v.opset<11&&w.length!==2||v.opset>=11&&w.length<2)throw new Error("invalid inputs.");if(v.scales.length>0&&w[0].dims.length!==v.scales.length)throw new Error("Invalid input shape.");if(w[0].type==="string")throw new Error("Invalid input tensor types.")},e.scalesValidation=(w,v,g)=>{if(g){for(const u of w)if(u<=0)throw new Error("Scale value should be greater than 0.")}else for(const u of w)if(u<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(v!=="linear"&&v!=="cubic"||w.length===2||w.length===4&&w[0]===1&&w[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${g?"Resize":"Upsample"} opeartor.`)}},1958:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;const i=n(1670),l=n(6231),f=n(8879),p=n(5060);e.ProgramManager=class{constructor(b,w,v){this.profiler=b,this.glContext=w,this.textureLayoutStrategy=v,this.repo=new Map,this.attributesBound=!1}getArtifact(b){return this.repo.get(b)}setArtifact(b,w){this.repo.set(b,w)}run(b,w,v){var g;this.profiler.event("op",`ProgramManager.run ${(g=b.programInfo.name)!==null&&g!==void 0?g:"unknown kernel"}`,(()=>{var u;const o=this.glContext.gl,h=b.program;o.useProgram(h);try{this.bindOutput(v),this.attributesBound||this.bindAttributes(b.attribLocations),this.bindUniforms(b.uniformLocations,(u=b.programInfo.variables)!==null&&u!==void 0?u:[],w)}catch(_){throw l.Logger.error("ProgramManager",b.programInfo.shaderSource),_}this.profiler.event("backend","GlContext.draw()",(()=>{this.glContext.draw()}))}),this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach((b=>this.glContext.deleteProgram(b.program)))}build(b,w,v){return this.profiler.event("backend","ProgramManager.build",(()=>{const g=new f.GlslPreprocessor(this.glContext,b,w,v),u=g.preprocess(),o=this.compile(u);return{programInfo:b,program:o,uniformLocations:this.getUniformLocations(o,g.context.programInfo.inputNames,g.context.programInfo.variables),attribLocations:this.getAttribLocations(o)}}))}compile(b){if(!this.vertexShader){l.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const g=(0,p.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(g,this.glContext.gl.VERTEX_SHADER)}i.env.debug&&l.Logger.verbose("ProrgramManager",`FragShader:
${b}
`);const w=this.glContext.compileShader(b,this.glContext.gl.FRAGMENT_SHADER),v=this.glContext.createProgram(this.vertexShader,w);return this.glContext.deleteShader(w),v}bindOutput(b){const w=b.width,v=b.height;l.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${w}/${v}, shape=${b.shape}, type=${b.tensor.type}`),this.glContext.attachFramebuffer(b.texture,w,v)}bindAttributes(b){const w=b.position,v=b.textureCoord;this.glContext.setVertexAttributes(w,v),this.attributesBound=!0}bindUniforms(b,w,v){var g;const u=this.glContext.gl;let o=0;for(const{name:h,type:_,location:S,arrayLength:T}of b){const O=(g=w.find((j=>j.name===h)))===null||g===void 0?void 0:g.data;if(_!=="sampler2D"&&!O)throw new Error(`variable '${h}' does not have data defined in program info`);switch(_){case"sampler2D":this.bindTexture(v[o],S,o),o++;break;case"float":T?u.uniform1fv(S,O):u.uniform1f(S,O);break;case"int":T?u.uniform1iv(S,O):u.uniform1i(S,O);break;default:throw new Error(`Uniform not implemented: ${_}`)}}}bindTexture(b,w,v){this.glContext.bindTextureToUniform(b.texture,v,w)}getAttribLocations(b){return{position:this.getAttribLocation(b,"position"),textureCoord:this.getAttribLocation(b,"textureCoord")}}getUniformLocations(b,w,v){const g=[];if(w)for(const u of w)g.push({name:u,type:"sampler2D",location:this.getUniformLocation(b,u)});if(v)for(const u of v)g.push(Object.assign(Object.assign({},u),{location:this.getUniformLocation(b,u.name)}));return g}getUniformLocation(b,w){const v=this.glContext.gl.getUniformLocation(b,w);if(v===null)throw new Error(`Uniform ${w} not found.`);return v}getAttribLocation(b,w){return this.glContext.gl.getAttribLocation(b,w)}}},6416:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSessionHandler=void 0;const i=n(6231),l=n(1047),f=n(8316),p=n(1640),b=n(1958),w=n(7859),v=n(5702);e.WebGLSessionHandler=class{constructor(g,u){this.backend=g,this.context=u,this.layoutStrategy=new w.PreferLogicalStrategy(g.glContext.maxTextureSize),this.programManager=new b.ProgramManager(this.context.profiler,g.glContext,this.layoutStrategy),this.textureManager=new v.TextureManager(g.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:g.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=g.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new f.WebGLInferenceHandler(this)}onGraphInitialized(g){const u=g.getValues().filter((o=>o.from===-1&&o.tensor)).map((o=>o.tensor.dataId));this.initializers=new Set(u)}isInitializer(g){return!!this.initializers&&this.initializers.has(g)}addInitializer(g){this.initializers.add(g)}getTextureData(g,u){return u?this.packedTextureDataCache.get(g):this.unpackedTextureDataCache.get(g)}setTextureData(g,u,o=!1){i.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),o?this.packedTextureDataCache.set(g,u):this.unpackedTextureDataCache.set(g,u)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach((g=>this.textureManager.releaseTexture(g,!0))),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach((g=>this.textureManager.releaseTexture(g,!0))),this.unpackedTextureDataCache=new Map}resolve(g,u,o){const h=(0,l.resolveOperator)(g,u,p.WEBGL_OP_RESOLVE_RULES);return{impl:h.opImpl,context:h.opInit?h.opInit(g,o):g}}}},7769:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Uint8DataEncoder=e.RGBAFloatDataEncoder=e.RedFloat32DataEncoder=void 0;const i=n(6231);e.RedFloat32DataEncoder=class{constructor(l,f=1){if(f===1)this.internalFormat=l.R32F,this.format=l.RED,this.textureType=l.FLOAT,this.channelSize=f;else{if(f!==4)throw new Error(`Invalid number of channels: ${f}`);this.internalFormat=l.RGBA32F,this.format=l.RGBA,this.textureType=l.FLOAT,this.channelSize=f}}encode(l,f){let p,b;return l.constructor!==Float32Array&&(i.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),b=new Float32Array(l)),f*this.channelSize>l.length?(i.Logger.warning("Encoder","Source data too small. Allocating larger array"),b=l,p=this.allocate(f*this.channelSize),b.forEach(((w,v)=>p[v]=w))):(b=l,p=b),p}allocate(l){return new Float32Array(4*l)}decode(l,f){return this.channelSize===1?l.filter(((p,b)=>b%4==0)).subarray(0,f):l.subarray(0,f)}},e.RGBAFloatDataEncoder=class{constructor(l,f=1,p){if(f!==1&&f!==4)throw new Error(`Invalid number of channels: ${f}`);this.internalFormat=l.RGBA,this.format=l.RGBA,this.channelSize=f,this.textureType=p||l.FLOAT}encode(l,f){let p=l;return this.channelSize===1&&(i.Logger.verbose("Encoder","Exploding into a larger array"),p=this.allocate(f),l.forEach(((b,w)=>p[4*w]=b))),p}allocate(l){return new Float32Array(4*l)}decode(l,f){return this.channelSize===1?l.filter(((p,b)=>b%4==0)).subarray(0,f):l.subarray(0,f)}},e.Uint8DataEncoder=class{constructor(l,f=1){if(this.channelSize=4,f===1)this.internalFormat=l.ALPHA,this.format=l.ALPHA,this.textureType=l.UNSIGNED_BYTE,this.channelSize=f;else{if(f!==4)throw new Error(`Invalid number of channels: ${f}`);this.internalFormat=l.RGBA,this.format=l.RGBA,this.textureType=l.UNSIGNED_BYTE,this.channelSize=f}}encode(l,f){return new Uint8Array(l.buffer,l.byteOffset,l.byteLength)}allocate(l){return new Uint8Array(l*this.channelSize)}decode(l,f){if(l instanceof Uint8Array)return l.subarray(0,f);throw new Error(`Invalid array type: ${l.constructor}`)}}},7859:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBatchDim=e.sizeToSquarishShape=e.getRowsCols=e.sizeFromShape=e.isInt=e.parseAxisParam=e.squeezeShape=e.PreferLogicalStrategy=e.AlwaysKeepOriginalSizeStrategy=void 0;const i=n(6231),l=n(2517);function f(g,u){const o=[],h=[],_=u!=null&&Array.isArray(u)&&u.length===0,S=u==null||_?null:p(u,g).sort();let T=0;for(let O=0;O<g.length;++O){if(S!=null){if(S[T]===O&&g[O]!==1)throw new Error(`Can't squeeze axis ${O} since its dim '${g[O]}' is not 1`);(S[T]==null||S[T]>O)&&g[O]===1&&(o.push(g[O]),h.push(O)),S[T]<=O&&T++}g[O]!==1&&(o.push(g[O]),h.push(O))}return{newShape:o,keptDims:h}}function p(g,u){const o=u.length;return g=g==null?u.map(((h,_)=>_)):[].concat(g),(0,l.assert)(g.every((h=>h>=-o&&h<o)),(()=>`All values in axis param must be in range [-${o}, ${o}) but got axis ${g}`)),(0,l.assert)(g.every(b),(()=>`All values in axis param must be integers but got axis ${g}`)),g.map((h=>h<0?o+h:h))}function b(g){return g%1==0}function w(g){if(g.length===0)return 1;let u=g[0];for(let o=1;o<g.length;o++)u*=g[o];return u}function v(g){const u=Math.ceil(Math.sqrt(g));return[u,Math.ceil(g/u)]}e.AlwaysKeepOriginalSizeStrategy=class{constructor(g){this.maxTextureSize=g}computeTextureWH(g,u){if(g.length===0)return[1,1];const o=this.maxTextureSize;if(u&&u.breakAxis!==void 0){const S=u.breakAxis>=g.length?1:g.slice(u.breakAxis).reduce(((O,j)=>O*j)),T=u.breakAxis<=0?1:g.slice(0,u.breakAxis).reduce(((O,j)=>O*j));if(!(S>o||T>o))return[S,T];i.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${g}, breakAxis:${u.breakAxis}`)}const h=g.reduce(((S,T)=>S*T));let _=Math.floor(Math.sqrt(h));for(;_<o&&_<h&&h%_!=0;_++);if(_>=o||h%_!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${g}`);return[_,h/_]}},e.PreferLogicalStrategy=class{constructor(g){this.maxTextureSize=g}computeTextureWH(g,u){const o=this.computeTexture(g,u);return u&&u.isPacked&&(o[0]/=2,o[1]/=2),u&&u.reverseWH?[o[1],o[0]]:o}computeTexture(g,u){const o=u&&u.isPacked;if(g.length===0)return o?[2,2]:[1,1];let h=this.maxTextureSize;if(u&&u.breakAxis!==void 0){const T=u.breakAxis>=g.length?1:g.slice(u.breakAxis).reduce(((j,C)=>j*C)),O=u.breakAxis<=0?1:g.slice(0,u.breakAxis).reduce(((j,C)=>j*C));if(!(T>h||O>h))return[T,O];i.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${g}, breakAxis:${u.breakAxis}`)}let _=g.slice(0);o&&(h*=2,_=_.map(((T,O)=>O>=_.length-2?_[O]%2==0?_[O]:_[O]+1:_[O])),_.length===1&&(_=[2,_[0]])),_.length!==2&&(_=f(_).newShape);const S=w(_);return _.length<=1&&S<=h?[1,S]:_.length===2&&_[0]<=h&&_[1]<=h?_:_.length===3&&_[0]*_[1]<=h&&_[2]<=h?[_[0]*_[1],_[2]]:_.length===3&&_[0]<=h&&_[1]*_[2]<=h?[_[0],_[1]*_[2]]:_.length===4&&_[0]*_[1]*_[2]<=h&&_[3]<=h?[_[0]*_[1]*_[2],_[3]]:_.length===4&&_[0]<=h&&_[1]*_[2]*_[3]<=h?[_[0],_[1]*_[2]*_[3]]:o?v(S/4).map((T=>2*T)):v(S)}},e.squeezeShape=f,e.parseAxisParam=p,e.isInt=b,e.sizeFromShape=w,e.getRowsCols=function(g){if(g.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[g.length>1?g[g.length-2]:1,g[g.length-1]]},e.sizeToSquarishShape=v,e.getBatchDim=function(g,u=2){return w(g.slice(0,g.length-u))}},4057:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createTextureLayoutFromShape=e.calculateTextureWidthAndHeight=e.createTextureLayoutFromTextureType=void 0;const i=n(2517),l=n(2039);e.createTextureLayoutFromTextureType=(f,p,b)=>{const w=b===l.TextureType.unpacked||b===l.TextureType.unpackedReversed?1:4,v=b===l.TextureType.packed,g=b===l.TextureType.unpackedReversed||b===l.TextureType.packed,u=b===l.TextureType.packedLastDimension?p.length-1:void 0,o=b===l.TextureType.packedLastDimension?p.map(((h,_)=>_===p.length-1?4*h:h)):void 0;return(0,e.createTextureLayoutFromShape)(f,p,w,o,{isPacked:v,reverseWH:g,breakAxis:u})},e.calculateTextureWidthAndHeight=(f,p,b)=>{const w=(0,e.createTextureLayoutFromTextureType)(f,p,b);return[w.width,w.height]},e.createTextureLayoutFromShape=(f,p,b=1,w,v)=>{const g=!(!v||!v.isPacked),[u,o]=f.computeTextureWH(g&&w||p,v),h=p.length;let _=p.slice(0);if(h===0&&(_=[1]),b===1)w=p;else if(g){if(b!==4)throw new Error("a packed texture must be 4-channel");w=p,h>0&&(_[h-1]=Math.ceil(_[h-1]/2)),h>1&&(_[h-2]=Math.ceil(_[h-2]/2))}else if(!w)throw new Error("Unpacked shape is needed when using channels > 1");return{width:u,height:o,channels:b,isPacked:g,shape:_,strides:i.ShapeUtil.computeStrides(_),unpackedShape:w,reversedWH:v&&v.reverseWH}}},5702:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;const i=n(6231);e.TextureManager=class{constructor(l,f,p,b){this.glContext=l,this.layoutStrategy=f,this.profiler=p,this.config=b,this.pendingRead=new Map,b.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(l,f,p,b){const w=this.toEncoderType(l),v=this.glContext.getEncoder(w,f.channels||1,b);if(f.isPacked&&b===1)throw new Error("not implemented");const g=f.width,u=f.height;let o,h;if(this.config.reuseTextures){o=`${g}x${u}_${v.format}_${v.internalFormat}_${v.textureType}`,h=this.inUseTextures.get(o),h||(h=[],this.inUseTextures.set(o,h));const S=this.idleTextures.get(o);if(S&&S.length>0){const T=S.pop();return h.push(T),b===1&&this.glContext.updateTexture(T,g,u,v,this.toTextureData(l,p)),T}}i.Logger.verbose("TextureManager",`Creating new texture of size ${f.width}x${f.height}`);const _=this.glContext.allocateTexture(g,u,v,this.toTextureData(l,p));return this.config.reuseTextures&&(h.push(_),this.textureLookup.set(_,o)),_}readTexture(l,f,p){return p||(p=1),this.profiler.event("backend","TextureManager.readTexture",(()=>{const b=l.shape.reduce(((v,g)=>v*g))*p,w=this.glContext.readTexture(l.texture,l.width,l.height,b,this.toEncoderType(f),p);return this.toTensorData(f,w)}))}async readTextureAsync(l,f,p){const b=l.tensor.dataId;if(p||(p=1),this.pendingRead.has(b)){const w=this.pendingRead.get(b);return new Promise((v=>w==null?void 0:w.push(v)))}return this.profiler.event("backend","TextureManager.readTextureAsync",(async()=>{this.pendingRead.set(b,[]);const w=l.shape.reduce(((o,h)=>o*h))*p;await this.glContext.createAndWaitForFence();const v=this.glContext.readTexture(l.texture,l.width,l.height,w,this.toEncoderType(f),p),g=this.toTensorData(f,v),u=this.pendingRead.get(b);return this.pendingRead.delete(b),u==null||u.forEach((o=>o(g))),g}))}readUint8TextureAsFloat(l){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",(()=>{const f=l.shape.reduce(((b,w)=>b*w)),p=this.glContext.readTexture(l.texture,l.width,l.height,4*f,"byte",4);return new Float32Array(p.buffer,p.byteOffset,f)}))}releaseTexture(l,f){let p;if(this.config.reuseTextures&&(p=this.textureLookup.get(l.texture),p)){f&&this.textureLookup.delete(p);const b=this.inUseTextures.get(p);if(b){const w=b.indexOf(l.texture);if(w!==-1){b.splice(w,1);let v=this.idleTextures.get(p);v||(v=[],this.idleTextures.set(p,v)),v.push(l.texture)}}}p&&!f||(i.Logger.verbose("TextureManager",`Deleting texture of size ${l.width}x${l.height}`),this.glContext.deleteTexture(l.texture))}toTensorData(l,f){switch(l){case"int16":return f instanceof Int16Array?f:Int16Array.from(f);case"int32":return f instanceof Int32Array?f:Int32Array.from(f);case"int8":return f instanceof Int8Array?f:Int8Array.from(f);case"uint16":return f instanceof Uint16Array?f:Uint16Array.from(f);case"uint32":return f instanceof Uint32Array?f:Uint32Array.from(f);case"uint8":case"bool":return f instanceof Uint8Array?f:Uint8Array.from(f);case"float32":return f instanceof Float32Array?f:Float32Array.from(f);case"float64":return f instanceof Float64Array?f:Float64Array.from(f);default:throw new Error(`TensorData type ${l} is not supported`)}}toTextureData(l,f){if(f)return f instanceof Float32Array?f:new Float32Array(f)}toEncoderType(l){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(t,e)=>{var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureType=void 0,(n=e.TextureType||(e.TextureType={}))[n.unpacked=0]="unpacked",n[n.unpackedReversed=1]="unpackedReversed",n[n.packed=2]="packed",n[n.downloadUint8AsFloat=3]="downloadUint8AsFloat",n[n.packedLastDimension=4]="packedLastDimension"},9390:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getGlChannels=e.getCoordsDataType=e.getSqueezedParams=e.squeezeInputShape=e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=e.generateShaderFuncNameFromInputSamplerName=e.repeatedTry=e.getPackedShape=void 0;const i=n(2517);e.getPackedShape=function(l){const f=l.length;return l.slice(0,f-1).concat(l[f-1]/4)},e.repeatedTry=async function(l,f=(b=>0),p){return new Promise(((b,w)=>{let v=0;const g=()=>{if(l())return void b();v++;const u=f(v);p!=null&&v>=p?w():setTimeout(g,u)};g()}))},e.generateShaderFuncNameFromInputSamplerName=function(l){return(0,i.assert)(l!==void 0&&l.length!==0,(()=>"empty string found for sampler name")),"get"+l.charAt(0).toUpperCase()+l.slice(1)},e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(l){return(0,i.assert)(l!==void 0&&l.length!==0,(()=>"empty string found for sampler name")),"get"+l.charAt(0).toUpperCase()+l.slice(1)+"AtOutCoords"},e.squeezeInputShape=function(l,f){let p=JSON.parse(JSON.stringify(l));return p=f,p},e.getSqueezedParams=function(l,f){return f.map((p=>l[p])).join(", ")},e.getCoordsDataType=function(l){if(l<=1)return"int";if(l===2)return"ivec2";if(l===3)return"ivec3";if(l===4)return"ivec4";if(l===5)return"ivec5";if(l===6)return"ivec6";throw Error(`GPU for rank ${l} is not yet supported`)},e.getGlChannels=function(l=6){return["x","y","z","w","u","v"].slice(0,l)}},7305:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createNewWebGLContext=e.createWebGLContext=void 0;const i=n(6231),l=n(1713),f={};function p(b){const w=(function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const u=document.createElement("canvas");return u.width=1,u.height=1,u})();let v;const g={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!b||b==="webgl2")&&(v=w.getContext("webgl2",g),v))try{return new l.WebGLContext(v,2)}catch(u){i.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${u}`)}if((!b||b==="webgl")&&(v=w.getContext("webgl",g)||w.getContext("experimental-webgl",g),v))try{return new l.WebGLContext(v,1)}catch(u){i.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${u}`)}throw new Error("WebGL is not supported")}e.createWebGLContext=function b(w){let v;w&&w!=="webgl2"||!("webgl2"in f)?w&&w!=="webgl"||!("webgl"in f)||(v=f.webgl):v=f.webgl2,v=v||p(w),w=w||v.version===1?"webgl":"webgl2";const g=v.gl;return f[w]=v,g.isContextLost()?(delete f[w],b(w)):(g.disable(g.DEPTH_TEST),g.disable(g.STENCIL_TEST),g.disable(g.BLEND),g.disable(g.DITHER),g.disable(g.POLYGON_OFFSET_FILL),g.disable(g.SAMPLE_COVERAGE),g.enable(g.SCISSOR_TEST),g.enable(g.CULL_FACE),g.cullFace(g.BACK),v)},e.createNewWebGLContext=p},1713:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(g,u,o,h){h===void 0&&(h=o);var _=Object.getOwnPropertyDescriptor(u,o);_&&!("get"in _?!u.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return u[o]}}),Object.defineProperty(g,h,_)}:function(g,u,o,h){h===void 0&&(h=o),g[h]=u[o]}),l=this&&this.__setModuleDefault||(Object.create?function(g,u){Object.defineProperty(g,"default",{enumerable:!0,value:u})}:function(g,u){g.default=u}),f=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var u={};if(g!=null)for(var o in g)o!=="default"&&Object.prototype.hasOwnProperty.call(g,o)&&i(u,g,o);return l(u,g),u};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=e.linearSearchLastTrue=void 0;const p=n(1670),b=f(n(7769)),w=n(9390);function v(g){let u=0;for(;u<g.length&&g[u]();++u);return u-1}e.linearSearchLastTrue=v,e.WebGLContext=class{constructor(g,u){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=g,this.version=u,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(g,u,o,h){const _=this.gl,S=_.createTexture();_.bindTexture(_.TEXTURE_2D,S),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE);const T=h?o.encode(h,g*u):null;return _.texImage2D(_.TEXTURE_2D,0,o.internalFormat,g,u,0,o.format,o.textureType,T),this.checkError(),S}updateTexture(g,u,o,h,_){const S=this.gl;S.bindTexture(S.TEXTURE_2D,g);const T=h.encode(_,u*o);S.texSubImage2D(S.TEXTURE_2D,0,0,0,u,o,h.format,h.textureType,T),this.checkError()}attachFramebuffer(g,u,o){const h=this.gl;h.bindTexture(h.TEXTURE_2D,g),h.bindFramebuffer(h.FRAMEBUFFER,this.framebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,g,0),this.checkError(),h.viewport(0,0,u,o),h.scissor(0,0,u,o)}readTexture(g,u,o,h,_,S){const T=this.gl;S||(S=1),this.frameBufferBound||this.attachFramebuffer(g,u,o);const O=this.getEncoder(_,S),j=O.allocate(u*o);return T.bindTexture(T.TEXTURE_2D,g),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,g,0),T.readPixels(0,0,u,o,T.RGBA,O.textureType,j),this.checkError(),O.decode(j,h)}isFramebufferReady(){return!0}getActiveTexture(){const g=this.gl;return"TEXTURE"+(g.getParameter(this.gl.ACTIVE_TEXTURE)-g.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(g,u){const o=this.gl;o.vertexAttribPointer(g,3,o.FLOAT,!1,20,0),o.enableVertexAttribArray(g),u!==-1&&(o.vertexAttribPointer(u,2,o.FLOAT,!1,20,12),o.enableVertexAttribArray(u)),this.checkError()}createProgram(g,u){const o=this.gl,h=o.createProgram();return o.attachShader(h,g),o.attachShader(h,u),o.linkProgram(h),h}compileShader(g,u){const o=this.gl,h=o.createShader(u);if(!h)throw new Error(`createShader() returned null with type ${u}`);if(o.shaderSource(h,g),o.compileShader(h),o.getShaderParameter(h,o.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${o.getShaderInfoLog(h)}
Shader source:
${g}`);return h}deleteShader(g){this.gl.deleteShader(g)}bindTextureToUniform(g,u,o){const h=this.gl;h.activeTexture(h.TEXTURE0+u),this.checkError(),h.bindTexture(h.TEXTURE_2D,g),this.checkError(),h.uniform1i(o,u),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(p.env.debug){const g=this.gl,u=g.getError();let o="";switch(u){case g.NO_ERROR:return;case g.INVALID_ENUM:o="INVALID_ENUM";break;case g.INVALID_VALUE:o="INVALID_VALUE";break;case g.INVALID_OPERATION:o="INVALID_OPERATION";break;case g.INVALID_FRAMEBUFFER_OPERATION:o="INVALID_FRAMEBUFFER_OPERATION";break;case g.OUT_OF_MEMORY:o="OUT_OF_MEMORY";break;case g.CONTEXT_LOST_WEBGL:o="CONTEXT_LOST_WEBGL";break;default:o=`Unknown WebGL Error: ${u.toString(16)}`}throw new Error(o)}}deleteTexture(g){this.gl.deleteTexture(g)}deleteProgram(g){this.gl.deleteProgram(g)}getEncoder(g,u,o=0){if(this.version===2)return new b.RedFloat32DataEncoder(this.gl,u);switch(g){case"float":return o===1||this.isRenderFloat32Supported?new b.RGBAFloatDataEncoder(this.gl,u):new b.RGBAFloatDataEncoder(this.gl,u,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new b.Uint8DataEncoder(this.gl,u);default:throw new Error(`Invalid dataType: ${g}`)}}clearActiveTextures(){const g=this.gl;for(let u=0;u<this.maxTextureImageUnits;++u)g.activeTexture(g.TEXTURE0+u),g.bindTexture(g.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const g=this.gl;g.bindFramebuffer(g.FRAMEBUFFER,null),g.deleteFramebuffer(this.framebuffer),g.bindBuffer(g.ARRAY_BUFFER,null),g.deleteBuffer(this.vertexbuffer),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,null),g.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const g=this.gl,u=g.createBuffer();if(!u)throw new Error("createBuffer() returned null");const o=this.createDefaultGeometry();return g.bindBuffer(g.ARRAY_BUFFER,u),g.bufferData(g.ARRAY_BUFFER,o,g.STATIC_DRAW),this.checkError(),u}createFramebuffer(){const g=this.gl.createFramebuffer();if(!g)throw new Error("createFramebuffer returned null");return g}queryVitalParameters(){const g=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=g.getParameter(g.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=g.getParameter(g.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const g=this.gl,u=g.createTexture();g.bindTexture(g.TEXTURE_2D,u);const o=this.version===2?g.RGBA32F:g.RGBA;g.texImage2D(g.TEXTURE_2D,0,o,1,1,0,g.RGBA,g.FLOAT,null);const h=g.createFramebuffer();g.bindFramebuffer(g.FRAMEBUFFER,h),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,u,0);const _=g.checkFramebufferStatus(g.FRAMEBUFFER)===g.FRAMEBUFFER_COMPLETE;return g.bindTexture(g.TEXTURE_2D,null),g.bindFramebuffer(g.FRAMEBUFFER,null),g.deleteTexture(u),g.deleteFramebuffer(h),_}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const g=this.gl;let u,o,h,_,S;try{u=g.createTexture(),o=g.createFramebuffer(),g.bindTexture(g.TEXTURE_2D,u);const T=this.version===2?g.RGBA32F:g.RGBA;return g.texImage2D(g.TEXTURE_2D,0,T,1,1,0,g.RGBA,g.FLOAT,null),g.bindFramebuffer(g.FRAMEBUFFER,o),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,u,0),g.enable(g.BLEND),h=g.createShader(g.VERTEX_SHADER),!!h&&(g.shaderSource(h,"void main(){}"),g.compileShader(h),_=g.createShader(g.FRAGMENT_SHADER),!!_&&(g.shaderSource(_,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),g.compileShader(_),S=g.createProgram(),!!S&&(g.attachShader(S,h),g.attachShader(S,_),g.linkProgram(S),g.useProgram(S),g.drawArrays(g.POINTS,0,1),g.getError()===g.NO_ERROR)))}finally{g.disable(g.BLEND),S&&g.deleteProgram(S),h&&g.deleteShader(h),_&&g.deleteShader(_),o&&(g.bindFramebuffer(g.FRAMEBUFFER,null),g.deleteFramebuffer(o)),u&&(g.bindTexture(g.TEXTURE_2D,null),g.deleteTexture(u))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const g=this.gl,u=this.disjointTimerQueryWebgl2Extension,o=g.createQuery();return g.beginQuery(u.TIME_ELAPSED_EXT,o),o}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const g=this.gl,u=this.disjointTimerQueryWebgl2Extension;g.endQuery(u.TIME_ELAPSED_EXT)}}isTimerResultAvailable(g){let u=!1,o=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const h=this.gl,_=this.disjointTimerQueryWebgl2Extension;u=h.getQueryParameter(g,h.QUERY_RESULT_AVAILABLE),o=h.getParameter(_.GPU_DISJOINT_EXT)}return u&&!o}getTimerResult(g){let u=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const o=this.gl;u=o.getQueryParameter(g,o.QUERY_RESULT),o.deleteQuery(g)}return u/1e6}async waitForQueryAndGetTime(g){return await(0,w.repeatedTry)((()=>this.isTimerResultAvailable(g))),this.getTimerResult(g)}async createAndWaitForFence(){const g=this.createFence(this.gl);return this.pollFence(g)}createFence(g){let u;const o=g,h=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);return g.flush(),u=h===null?()=>!0:()=>{const _=o.clientWaitSync(h,0,0);return _===o.ALREADY_SIGNALED||_===o.CONDITION_SATISFIED},{query:h,isFencePassed:u}}async pollFence(g){return new Promise((u=>{this.addItemToPoll((()=>g.isFencePassed()),(()=>u()))}))}pollItems(){const g=v(this.itemsToPoll.map((u=>u.isDoneFn)));for(let u=0;u<=g;++u){const{resolveFn:o}=this.itemsToPoll[u];o()}this.itemsToPoll=this.itemsToPoll.slice(g+1)}async addItemToPoll(g,u){this.itemsToPoll.push({isDoneFn:g,resolveFn:u}),this.itemsToPoll.length>1||await(0,w.repeatedTry)((()=>(this.pollItems(),this.itemsToPoll.length===0)))}}},1036:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExecutionPlan=void 0;const i=n(6231);class l{constructor(p,b){this.op=p,this.node=b}}e.ExecutionPlan=class{constructor(f,p,b){this.graph=f,this.profiler=b,this.initialize(p)}initialize(f){this.profiler.event("session","ExecutionPlan.initialize",(()=>{const p=this.graph.getNodes();if(p.length!==f.length)throw new Error("The size of nodes and OPs do not match.");this._ops=f.map(((b,w)=>new l(b,p[w]))),this.reset(),this._starter=[],this._ops.forEach(((b,w)=>{let v=!0;for(const g of b.node.inputs)if(!this._values[g]&&this.graph.getInputIndices().indexOf(g)===-1){v=!1;break}v&&this._starter.push(w)}))}))}reset(){this._values=this.graph.getValues().map((f=>f.tensor))}async execute(f,p){return this.profiler.event("session","ExecutionPlan.execute",(async()=>{this.reset();const b=f.createInferenceHandler(),w=this.graph.getInputIndices();if(p.length!==w.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${p.length} expected: ${w.length}`);p.forEach(((_,S)=>{const T=w[S];this._values[T]=_}));const v=this._starter.slice(0),g=this.graph.getValues(),u=this.graph.getNodes();let o=0;for(;o<v.length;){const _=v[o++],S=this._ops[_],T=S.node.inputs.map((D=>this._values[D]));if(T.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${S.node}`);const O=T;i.Logger.verbose("ExecPlan",`Runing op:${S.node.name} (${O.map(((D,R)=>`'${S.node.inputs[R]}': ${D.type}[${D.dims.join(",")}]`)).join(", ")})`);const j=await this.profiler.event("node",S.node.name,(async()=>S.op.impl(b,O,S.op.context)));if(j.length!==S.node.outputs.length)throw new Error("the size of output does not match model definition.");j.forEach(((D,R)=>{const I=S.node.outputs[R];if(this._values[I])throw new Error(`output [${I}] already has value: op:${S.node.name}`);this._values[I]=D}));const C=new Set;j.forEach(((D,R)=>{const I=S.node.outputs[R];for(const $ of g[I].to){const F=u[$];let L=!0;for(const V of F.inputs)if(!this._values[V]){L=!1;break}L&&C.add($)}})),v.push(...C)}const h=[];for(let _=0;_<this.graph.getOutputIndices().length;_++){const S=this.graph.getOutputIndices()[_],T=this._values[S];if(T===void 0)throw new Error(`required output [${S}] does not have value`);S===0?await T.getData():T.data,h.push(T)}return i.Logger.verbose("ExecPlan","disposing of inferenceHandler"),b.dispose(),h}))}}},7070:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;const i=n(1446),l=n(7778),f=n(9395),p=n(9162),b=n(2517);var w=f.onnxruntime.experimental.fbs;e.Graph={from:(o,h)=>new u(o,h)};class v{constructor(h){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,h&&(this.type=b.ProtoUtil.tensorValueTypeFromProto(h.type.tensorType))}get from(){return this._from}get to(){return this._to}}class g{constructor(h,_){h instanceof i.onnx.NodeProto?(this.name=h.name,this.opType=h.opType,this.attributes=new l.Attribute(h.attribute)):h instanceof w.Node&&(this.name=_??h.name(),this.opType=h.opType(),this.attributes=new l.Attribute(b.ProtoUtil.tensorAttributesFromORTFormat(h))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class u{constructor(h,_){if(!h)throw new TypeError("graph is empty");this.buildGraph(h),this.transformGraph(_),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(h){if(h instanceof i.onnx.GraphProto)this.buildGraphFromOnnxFormat(h);else{if(!(h instanceof w.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(h)}}buildGraphFromOnnxFormat(h){const _=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const S=new Map;if(!h.input)throw new Error("missing information in graph: input");const T=[];for(const O of h.input){if(_.has(O.name))throw new Error(`duplicated input name: ${O.name}`);const j=this._allData.push(new v(O))-1;_.set(O.name,j),T.push(O.name)}if(!h.initializer)throw new Error("missing information in graph: initializer");for(const O of h.initializer){let j=_.get(O.name);if(j===void 0){const C=new v;C.type={shape:{dims:b.ProtoUtil.tensorDimsFromProto(O.dims)},tensorType:b.ProtoUtil.tensorDataTypeFromProto(O.dataType)},j=this._allData.push(C)-1,_.set(O.name,j)}this._allData[j]._from=-1,this._allData[j].tensor=p.Tensor.fromProto(O)}for(let O=0;O<this._allData.length;O++)this._allData[O].tensor||(this._allInputIndices.push(O),this._allInputNames.push(T[O]));if(!h.output)throw new Error("missing information in graph: output");for(const O of h.output){if(_.has(O.name))throw new Error(`duplicated output name: ${O.name}`);const j=this._allData.push(new v(O))-1;_.set(O.name,j),this._allOutputIndices.push(j),this._allOutputNames.push(O.name)}if(!h.node)throw new Error("missing information in graph: node");for(const O of h.node){if(!O.name)for(let C=0;;C++){const D=`unnamed_${O.opType}_${C}`;if(!S.has(D)){O.name=D;break}}if(S.has(O.name))throw new Error(`duplicated node name: ${O.name}`);const j=this._nodes.push(new g(O))-1;S.set(O.name,j)}for(let O=0;O<this._nodes.length;O++){const j=this._nodes[O],C=h.node[O];if(!C.output)throw new Error(`missing output for node: ${C.name}`);for(const D of C.output){let R=_.get(D);if(R===void 0&&(R=this._allData.push(new v)-1,_.set(D,R)),j.outputs.push(R),this._allData[R]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${R}`);if(this._allData[R]._from=O,C.opType==="Constant"){if(!C.attribute||C.attribute.length!==1||!C.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!C.output||C.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");j.outputs.pop(),j.executeNode=!1,this._allData[R]._from=-1,this._allData[R].tensor=p.Tensor.fromProto(C.attribute[0].t)}}}for(let O=0;O<this._nodes.length;O++){const j=this._nodes[O],C=h.node[O];if(!C.input)throw new Error(`missing input for node: ${C.name}`);for(const D of C.input){const R=_.get(D);if(R===void 0){if(D===""&&C.input.length===3&&C.opType==="Resize")continue;throw new Error(`unrecognized input '${D}' for node: ${C.name}`)}j.inputs.push(R),this._allData[R]._to.push(O)}}return!0}buildGraphFromOrtFormat(h){var _,S,T;const O=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const j=new Map,C=[];for(let D=0;D<h.inputsLength();D++){const R=h.inputs(D);if(O.has(R))throw new Error(`duplicated input name: ${R}`);for(let I=0;I<h.nodeArgsLength();I++)if(((_=h.nodeArgs(I))===null||_===void 0?void 0:_.name())===R){const $=new v;if(((T=(S=h.nodeArgs(I))===null||S===void 0?void 0:S.type())===null||T===void 0?void 0:T.valueType())!==w.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const F=h.nodeArgs(I).type().value(new w.TensorTypeAndShape),L=b.ProtoUtil.tensorDataTypeFromProto(F.elemType()),V=F.shape(),Y=[];for(let ee=0;ee<V.dimLength();ee++)Y.push(b.LongUtil.longToNumber(V.dim(ee).value().dimValue()));$.type={shape:{dims:Y},tensorType:L};const Q=this._allData.push($)-1;O.set(R,Q),C.push(R)}}for(let D=0;D<h.initializersLength();D++){const R=h.initializers(D);let I=O.get(R.name());if(I===void 0){const $=new v,F=b.ProtoUtil.tensorDimsFromORTFormat(R),L=b.ProtoUtil.tensorDataTypeFromProto(R.dataType());$.type={shape:{dims:F},tensorType:L},I=this._allData.push($)-1,O.set(R.name(),I)}this._allData[I]._from=-1,this._allData[I].tensor=p.Tensor.fromOrtTensor(R)}for(let D=0;D<this._allData.length;D++)this._allData[D].tensor||(this._allInputIndices.push(D),this._allInputNames.push(C[D]));for(let D=0;D<h.outputsLength();D++){const R=h.outputs(D);if(O.has(R))throw new Error(`duplicated output name: ${R}`);const I=this._allData.push(new v)-1;O.set(R,I),this._allOutputIndices.push(I),this._allOutputNames.push(R)}if(!h.nodes)throw new Error("missing information in graph: node");for(let D=0;D<h.nodesLength();D++){const R=h.nodes(D);let I=R.name();if(!I)for(let F=0;I=`unnamed_${R.opType()}_${F}`,j.has(I);F++);if(j.has(I))throw new Error(`duplicated node name: ${I}`);const $=this._nodes.push(new g(R,I))-1;j.set(I,$)}for(let D=0;D<this._nodes.length;D++){const R=this._nodes[D],I=h.nodes(D);if(I==null)throw new Error(`No node exists at index ${D}`);if((I==null?void 0:I.outputsLength())===0)throw new Error(`missing output for node: ${I.name}`);for(let $=0;$<(I==null?void 0:I.outputsLength());$++){const F=I==null?void 0:I.outputs($);let L=O.get(F);if(L===void 0&&(L=this._allData.push(new v)-1,O.set(F,L)),R.outputs.push(L),this._allData[L]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${L}`);if(this._allData[L]._from=D,I.opType()==="Constant"){if(I.attributesLength()!==1||!I.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(I.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");R.outputs.pop(),R.executeNode=!1,this._allData[L]._from=-1,this._allData[L].tensor=p.Tensor.fromOrtTensor(I.attributes(0).t())}}}for(let D=0;D<this._nodes.length;D++){const R=this._nodes[D],I=h.nodes(D);if(I.inputsLength()===0)throw new Error(`missing input for node: ${I.name}`);for(let $=0;$<I.inputsLength();$++){const F=I.inputs($),L=O.get(F);if(L===void 0)throw new Error(`unrecognized input '${F}' for node: ${I.name()}`);R.inputs.push(L),this._allData[L]._to.push(D)}}}checkIsAcyclic(){const h=new Set;this._allInputIndices.forEach((T=>{this._allData[T]._to.forEach((O=>{h.add(O)}))}));const _=Array.from(h),S=new Array(this._nodes.length).fill("white");for(;_.length>0;){const T=_.pop();S[T]==="gray"?S[T]="black":(_.push(T),S[T]="gray",this._nodes[T].outputs.forEach((O=>{const j=this._allData[O];if(j.tensor!==void 0)throw new Error("node outputs should not be initialized");if(j._from!==T)throw new Error("from property of the Value object doesn't match index of Node being processed");j._to.forEach((C=>{if(S[C]==="gray")throw new Error("model graph is cyclic");S[C]==="white"&&_.push(C)}))})))}}transformGraph(h){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),h&&h.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let h=0;for(let _=0;_<this._nodes.length;_++)this._nodes[_].executeNode?h>0&&(this._nodes[_].inputs.forEach((S=>{const T=this._allData[S]._to.indexOf(_+h);T!==-1&&(this._allData[S]._to[T]=_)})),this._nodes[_].outputs.forEach((S=>{this._allData[S]._from&&this._allData[S]._from===_+h&&(this._allData[S]._from=_)}))):(h++,this._nodes[_].outputs.forEach((S=>{this._allData[S]._from=-2})),this._nodes.splice(_,1),_--);h=0;for(let _=0;_<this._allData.length;_++)if(this._allData[_].from!==-2||this._allOutputIndices.indexOf(_+h)!==-1){if(h>0){let S=-1;this._allData[_].from!==void 0&&this._allData[_].from!==-1?(S=this._nodes[this._allData[_].from].outputs.indexOf(_+h),S!==-1&&(this._nodes[this._allData[_].from].outputs[S]=_)):(S=this._allInputIndices.indexOf(_+h),S!==-1&&(this._allInputIndices[S]=_)),this._allData[_].to.forEach((T=>{S=this._nodes[T].inputs.indexOf(_+h),S!==-1&&(this._nodes[T].inputs[S]=_)})),this._allData[_].to.length===0&&(S=this._allOutputIndices.indexOf(_+h),S!==-1&&(this._allOutputIndices[S]=_))}}else h++,this._allData.splice(_,1),_--}deleteNode(h){const _=this._nodes[h];if(_.outputs.length>1){for(let D=1;D<_.outputs.length;D++)if(this._allData[_.outputs[D]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}_.executeNode=!1;const S=_.inputs[0],T=_.outputs[0],O=this._allData[T].to,j=this._allData[S].to.indexOf(h);if(j===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[S].to.splice(j,1),this._allData[T]._to=[];const C=this._allOutputIndices.indexOf(T);if(C!==-1&&(this._allOutputIndices[C]=S),O&&O.length>0)for(const D of O){const R=this._nodes[D].inputs.indexOf(T);if(R===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[D].inputs[R]=S,this._allData[S].to.push(D)}}removeAllDropoutNodes(){let h=0;for(const _ of this._nodes){if(_.opType==="Dropout"){if(_.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(_.outputs.length!==1&&_.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(_.outputs.length===2&&this._allData[_.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(h)}h++}}removeAllIdentityNodes(){let h=0;for(const _ of this._nodes)_.opType==="Identity"&&this.deleteNode(h),h++}isActivation(h){switch(h.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const h of this._nodes)if(h.opType==="Conv"){const _=this._allData[h.outputs[0]]._to;if(_.length===1&&this.isActivation(this._nodes[_[0]])){const S=this._nodes[_[0]];if(S.opType==="Clip")if(S.inputs.length===1)try{h.attributes.set("activation_params","floats",[S.attributes.getFloat("min"),S.attributes.getFloat("max")])}catch{h.attributes.set("activation_params","floats",[b.MIN_CLIP,b.MAX_CLIP])}else{if(!(S.inputs.length>=3&&this._allData[S.inputs[1]].tensor!==void 0&&this._allData[S.inputs[2]].tensor!==void 0))continue;h.attributes.set("activation_params","floats",[this._allData[S.inputs[1]].tensor.floatData[0],this._allData[S.inputs[2]].tensor.floatData[0]])}h.attributes.set("activation","string",S.opType),this.deleteNode(_[0])}}}}},6231:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.now=e.Profiler=e.Logger=void 0;const n={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},i={none:new class{log(g,u,o){}},console:new class{log(g,u,o){console.log(`${this.color(g)} ${o?"\x1B[35m"+o+"\x1B[0m ":""}${u}`)}color(g){switch(g){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${g}`)}}}},l={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let f={"":l};function p(g,u,o,h){if(u===void 0)return _=g,{verbose:p.verbose.bind(null,_),info:p.info.bind(null,_),warning:p.warning.bind(null,_),error:p.error.bind(null,_),fatal:p.fatal.bind(null,_)};if(o===void 0)b(g,u);else if(typeof o=="number"&&h===void 0)b(g,u);else if(typeof o=="string"&&h===void 0)b(g,o,0,u);else{if(typeof o!="string"||typeof h!="number")throw new TypeError("input is valid");b(g,o,0,u)}var _}function b(g,u,o,h){const _=f[h||""]||f[""];n[g]<n[_.minimalSeverity]||(_.logDateTime&&(u=`${new Date().toISOString()}|${u}`),_.logSourceLocation,i[_.provider].log(g,u,h))}(function(g){function u(h){f={},o("",h||{})}function o(h,_){if(h==="*")u(_);else{const S=f[h]||l;f[h]={provider:_.provider||S.provider,minimalSeverity:_.minimalSeverity||S.minimalSeverity,logDateTime:_.logDateTime===void 0?S.logDateTime:_.logDateTime,logSourceLocation:_.logSourceLocation===void 0?S.logSourceLocation:_.logSourceLocation}}}g.verbose=function(h,_){g("verbose",h,_)},g.info=function(h,_){g("info",h,_)},g.warning=function(h,_){g("warning",h,_)},g.error=function(h,_){g("error",h,_)},g.fatal=function(h,_){g("fatal",h,_)},g.reset=u,g.set=o,g.setWithEnv=function(h){const _={};h.logLevel&&(_.minimalSeverity=h.logLevel),o("",_)}})(p||(p={})),e.Logger=p;class w{constructor(u,o,h,_,S,T){this.category=u,this.name=o,this.startTime=h,this.endCallback=_,this.timer=S,this.ctx=T}end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class v{constructor(u,o,h,_){this.category=u,this.name=o,this.startTime=h,this.endTime=_}}e.Profiler=class{static create(g){return g===void 0?new this:new this(g.maxNumberEvents,g.flushBatchSize,g.flushIntervalInMilliseconds)}constructor(g,u,o){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=g===void 0?1e4:g,this._flushBatchSize=u===void 0?10:u,this._flushIntervalInMilliseconds=o===void 0?5e3:o}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,e.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(g,u,o,h){const _=this._started?this.begin(g,u,h):void 0;let S=!1;const T=o();if(T&&typeof T.then=="function")return S=!0,new Promise(((O,j)=>{T.then((async C=>{_&&await _.end(),O(C)}),(async C=>{_&&await _.end(),j(C)}))}));if(!S&&_){const O=_.end();if(O&&typeof O.then=="function")return new Promise(((j,C)=>{O.then((()=>{j(T)}),(D=>{C(D)}))}))}return T}begin(g,u,o){if(!this._started)throw new Error("profiler is not started yet");if(o===void 0){const h=(0,e.now)();return this.flush(h),new w(g,u,h,(_=>this.endSync(_)))}{const h=o.beginTimer();return new w(g,u,0,(async _=>this.end(_)),h,o)}}async end(g){const u=await g.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new v(g.category,g.name,g.startTime,u)),this.flush(u))}endSync(g){const u=(0,e.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new v(g.category,g.name,g.startTime,u)),this.flush(u))}logOneEvent(g){e.Logger.verbose(`Profiler.${g.category}`,`${(g.endTime-g.startTime).toFixed(2)}ms on event '${g.name}' at ${g.endTime.toFixed(2)}`)}flush(g){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||g-this._flushTime>=this._flushIntervalInMilliseconds){for(const u=this._flushPointer;this._flushPointer<u+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,e.now)()}}get started(){return this._started}},e.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},2644:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;const i=n(5686),l=n(1446),f=n(7070),p=n(9395),b=n(2517);var w=p.onnxruntime.experimental.fbs;e.Model=class{constructor(){}load(v,g,u){if(!u)try{return void this.loadFromOnnxFormat(v,g)}catch(o){if(u!==void 0)throw o}this.loadFromOrtFormat(v,g)}loadFromOnnxFormat(v,g){const u=l.onnx.ModelProto.decode(v);if(b.LongUtil.longToNumber(u.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=u.opsetImport.map((o=>({domain:o.domain,version:b.LongUtil.longToNumber(o.version)}))),this._graph=f.Graph.from(u.graph,g)}loadFromOrtFormat(v,g){const u=new i.flatbuffers.ByteBuffer(v),o=w.InferenceSession.getRootAsInferenceSession(u).model();if(b.LongUtil.longToNumber(o.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let h=0;h<o.opsetImportLength();h++){const _=o.opsetImport(h);this._opsets.push({domain:_==null?void 0:_.domain(),version:b.LongUtil.longToNumber(_.version())})}this._graph=f.Graph.from(o.graph(),g)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FLOAT_TYPES=e.INT_TYPES=e.NUMBER_TYPES=void 0,e.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],e.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],e.FLOAT_TYPES=["float32","float64"]},1047:(t,e)=>{function n(i,l){if(l.endsWith("+")){const f=Number.parseInt(l.substring(0,l.length-1),10);return!isNaN(f)&&f<=i}if(l.split("-").length===2){const f=l.split("-"),p=Number.parseInt(f[0],10),b=Number.parseInt(f[1],10);return!isNaN(p)&&!isNaN(b)&&p<=i&&i<=b}return Number.parseInt(l,10)===i}Object.defineProperty(e,"__esModule",{value:!0}),e.resolveOperator=void 0,e.resolveOperator=function(i,l,f){for(const p of f){const b=p[0],w=p[1],v=p[2],g=p[3],u=p[4];if(i.opType===b){for(const o of l)if((o.domain===w||o.domain==="ai.onnx"&&w==="")&&n(o.version,v))return{opImpl:g,opInit:u}}}throw new TypeError(`cannot resolve operator '${i.opType}' with opsets: ${l.map((p=>`${p.domain||"ai.onnx"} v${p.version}`)).join(", ")}`)}},9395:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.onnxruntime=void 0;const i=n(5686);var l,f;l=e.onnxruntime||(e.onnxruntime={}),(function(p){(function(b){b[b.UNDEFINED=0]="UNDEFINED",b[b.FLOAT=1]="FLOAT",b[b.INT=2]="INT",b[b.STRING=3]="STRING",b[b.TENSOR=4]="TENSOR",b[b.GRAPH=5]="GRAPH",b[b.FLOATS=6]="FLOATS",b[b.INTS=7]="INTS",b[b.STRINGS=8]="STRINGS",b[b.TENSORS=9]="TENSORS",b[b.GRAPHS=10]="GRAPHS",b[b.SPARSE_TENSOR=11]="SPARSE_TENSOR",b[b.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(p.AttributeType||(p.AttributeType={}))})((f=l.experimental||(l.experimental={})).fbs||(f.fbs={})),(function(p){(function(b){(function(w){(function(v){v[v.UNKNOWN=0]="UNKNOWN",v[v.VALUE=1]="VALUE",v[v.PARAM=2]="PARAM"})(w.DimensionValueType||(w.DimensionValueType={}))})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){(function(v){v[v.UNDEFINED=0]="UNDEFINED",v[v.FLOAT=1]="FLOAT",v[v.UINT8=2]="UINT8",v[v.INT8=3]="INT8",v[v.UINT16=4]="UINT16",v[v.INT16=5]="INT16",v[v.INT32=6]="INT32",v[v.INT64=7]="INT64",v[v.STRING=8]="STRING",v[v.BOOL=9]="BOOL",v[v.FLOAT16=10]="FLOAT16",v[v.DOUBLE=11]="DOUBLE",v[v.UINT32=12]="UINT32",v[v.UINT64=13]="UINT64",v[v.COMPLEX64=14]="COMPLEX64",v[v.COMPLEX128=15]="COMPLEX128",v[v.BFLOAT16=16]="BFLOAT16"})(w.TensorDataType||(w.TensorDataType={}))})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){(function(v){v[v.Primitive=0]="Primitive",v[v.Fused=1]="Fused"})(w.NodeType||(w.NodeType={}))})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){(function(v){v[v.NONE=0]="NONE",v[v.tensor_type=1]="tensor_type",v[v.sequence_type=2]="sequence_type",v[v.map_type=3]="map_type"})(w.TypeInfoValue||(w.TypeInfoValue={}))})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsShape(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsShape(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}dim(u,o){let h=this.bb.__offset(this.bb_pos,4);return h?(o||new p.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}dimLength(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__vector_len(this.bb_pos+u):0}static startShape(u){u.startObject(1)}static addDim(u,o){u.addFieldOffset(0,o,0)}static createDimVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addOffset(o[h]);return u.endVector()}static startDimVector(u,o){u.startVector(4,o,4)}static endShape(u){return u.endObject()}static createShape(u,o){return v.startShape(u),v.addDim(u,o),v.endShape(u)}}w.Shape=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsDimension(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsDimension(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}value(u){let o=this.bb.__offset(this.bb_pos,4);return o?(u||new p.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}denotation(u){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,u):null}static startDimension(u){u.startObject(2)}static addValue(u,o){u.addFieldOffset(0,o,0)}static addDenotation(u,o){u.addFieldOffset(1,o,0)}static endDimension(u){return u.endObject()}static createDimension(u,o,h){return v.startDimension(u),v.addValue(u,o),v.addDenotation(u,h),v.endDimension(u)}}w.Dimension=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsDimensionValue(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsDimensionValue(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}dimType(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.readInt8(this.bb_pos+u):p.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.readInt64(this.bb_pos+u):this.bb.createLong(0,0)}dimParam(u){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__string(this.bb_pos+o,u):null}static startDimensionValue(u){u.startObject(3)}static addDimType(u,o){u.addFieldInt8(0,o,p.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(u,o){u.addFieldInt64(1,o,u.createLong(0,0))}static addDimParam(u,o){u.addFieldOffset(2,o,0)}static endDimensionValue(u){return u.endObject()}static createDimensionValue(u,o,h,_){return v.startDimensionValue(u),v.addDimType(u,o),v.addDimValue(u,h),v.addDimParam(u,_),v.endDimensionValue(u)}}w.DimensionValue=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsTensorTypeAndShape(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsTensorTypeAndShape(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}elemType(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.readInt32(this.bb_pos+u):p.experimental.fbs.TensorDataType.UNDEFINED}shape(u){let o=this.bb.__offset(this.bb_pos,6);return o?(u||new p.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startTensorTypeAndShape(u){u.startObject(2)}static addElemType(u,o){u.addFieldInt32(0,o,p.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(u,o){u.addFieldOffset(1,o,0)}static endTensorTypeAndShape(u){return u.endObject()}static createTensorTypeAndShape(u,o,h){return v.startTensorTypeAndShape(u),v.addElemType(u,o),v.addShape(u,h),v.endTensorTypeAndShape(u)}}w.TensorTypeAndShape=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsMapType(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsMapType(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}keyType(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.readInt32(this.bb_pos+u):p.experimental.fbs.TensorDataType.UNDEFINED}valueType(u){let o=this.bb.__offset(this.bb_pos,6);return o?(u||new p.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startMapType(u){u.startObject(2)}static addKeyType(u,o){u.addFieldInt32(0,o,p.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(u,o){u.addFieldOffset(1,o,0)}static endMapType(u){return u.endObject()}static createMapType(u,o,h){return v.startMapType(u),v.addKeyType(u,o),v.addValueType(u,h),v.endMapType(u)}}w.MapType=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsSequenceType(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsSequenceType(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}elemType(u){let o=this.bb.__offset(this.bb_pos,4);return o?(u||new p.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startSequenceType(u){u.startObject(1)}static addElemType(u,o){u.addFieldOffset(0,o,0)}static endSequenceType(u){return u.endObject()}static createSequenceType(u,o){return v.startSequenceType(u),v.addElemType(u,o),v.endSequenceType(u)}}w.SequenceType=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(b.fbs||(b.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(w,v){return this.bb_pos=w,this.bb=v,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(w,v,g,u){return w.prep(4,12),w.writeInt32(u),w.writeInt32(g),w.writeInt32(v),w.offset()}}})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsNodeEdge(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsNodeEdge(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}nodeIndex(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.readUint32(this.bb_pos+u):0}inputEdges(u,o){let h=this.bb.__offset(this.bb_pos,6);return h?(o||new p.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+h)+12*u,this.bb):null}inputEdgesLength(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__vector_len(this.bb_pos+u):0}outputEdges(u,o){let h=this.bb.__offset(this.bb_pos,8);return h?(o||new p.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+h)+12*u,this.bb):null}outputEdgesLength(){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__vector_len(this.bb_pos+u):0}static startNodeEdge(u){u.startObject(3)}static addNodeIndex(u,o){u.addFieldInt32(0,o,0)}static addInputEdges(u,o){u.addFieldOffset(1,o,0)}static startInputEdgesVector(u,o){u.startVector(12,o,4)}static addOutputEdges(u,o){u.addFieldOffset(2,o,0)}static startOutputEdgesVector(u,o){u.startVector(12,o,4)}static endNodeEdge(u){return u.endObject()}static createNodeEdge(u,o,h,_){return v.startNodeEdge(u),v.addNodeIndex(u,o),v.addInputEdges(u,h),v.addOutputEdges(u,_),v.endNodeEdge(u)}}w.NodeEdge=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsNode(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsNode(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}name(u){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,u):null}docString(u){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,u):null}domain(u){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__string(this.bb_pos+o,u):null}sinceVersion(){let u=this.bb.__offset(this.bb_pos,10);return u?this.bb.readInt32(this.bb_pos+u):0}index(){let u=this.bb.__offset(this.bb_pos,12);return u?this.bb.readUint32(this.bb_pos+u):0}opType(u){let o=this.bb.__offset(this.bb_pos,14);return o?this.bb.__string(this.bb_pos+o,u):null}type(){let u=this.bb.__offset(this.bb_pos,16);return u?this.bb.readInt32(this.bb_pos+u):p.experimental.fbs.NodeType.Primitive}executionProviderType(u){let o=this.bb.__offset(this.bb_pos,18);return o?this.bb.__string(this.bb_pos+o,u):null}inputs(u,o){let h=this.bb.__offset(this.bb_pos,20);return h?this.bb.__string(this.bb.__vector(this.bb_pos+h)+4*u,o):null}inputsLength(){let u=this.bb.__offset(this.bb_pos,20);return u?this.bb.__vector_len(this.bb_pos+u):0}outputs(u,o){let h=this.bb.__offset(this.bb_pos,22);return h?this.bb.__string(this.bb.__vector(this.bb_pos+h)+4*u,o):null}outputsLength(){let u=this.bb.__offset(this.bb_pos,22);return u?this.bb.__vector_len(this.bb_pos+u):0}attributes(u,o){let h=this.bb.__offset(this.bb_pos,24);return h?(o||new p.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}attributesLength(){let u=this.bb.__offset(this.bb_pos,24);return u?this.bb.__vector_len(this.bb_pos+u):0}inputArgCounts(u){let o=this.bb.__offset(this.bb_pos,26);return o?this.bb.readInt32(this.bb.__vector(this.bb_pos+o)+4*u):0}inputArgCountsLength(){let u=this.bb.__offset(this.bb_pos,26);return u?this.bb.__vector_len(this.bb_pos+u):0}inputArgCountsArray(){let u=this.bb.__offset(this.bb_pos,26);return u?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+u),this.bb.__vector_len(this.bb_pos+u)):null}implicitInputs(u,o){let h=this.bb.__offset(this.bb_pos,28);return h?this.bb.__string(this.bb.__vector(this.bb_pos+h)+4*u,o):null}implicitInputsLength(){let u=this.bb.__offset(this.bb_pos,28);return u?this.bb.__vector_len(this.bb_pos+u):0}static startNode(u){u.startObject(13)}static addName(u,o){u.addFieldOffset(0,o,0)}static addDocString(u,o){u.addFieldOffset(1,o,0)}static addDomain(u,o){u.addFieldOffset(2,o,0)}static addSinceVersion(u,o){u.addFieldInt32(3,o,0)}static addIndex(u,o){u.addFieldInt32(4,o,0)}static addOpType(u,o){u.addFieldOffset(5,o,0)}static addType(u,o){u.addFieldInt32(6,o,p.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(u,o){u.addFieldOffset(7,o,0)}static addInputs(u,o){u.addFieldOffset(8,o,0)}static createInputsVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addOffset(o[h]);return u.endVector()}static startInputsVector(u,o){u.startVector(4,o,4)}static addOutputs(u,o){u.addFieldOffset(9,o,0)}static createOutputsVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addOffset(o[h]);return u.endVector()}static startOutputsVector(u,o){u.startVector(4,o,4)}static addAttributes(u,o){u.addFieldOffset(10,o,0)}static createAttributesVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addOffset(o[h]);return u.endVector()}static startAttributesVector(u,o){u.startVector(4,o,4)}static addInputArgCounts(u,o){u.addFieldOffset(11,o,0)}static createInputArgCountsVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addInt32(o[h]);return u.endVector()}static startInputArgCountsVector(u,o){u.startVector(4,o,4)}static addImplicitInputs(u,o){u.addFieldOffset(12,o,0)}static createImplicitInputsVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addOffset(o[h]);return u.endVector()}static startImplicitInputsVector(u,o){u.startVector(4,o,4)}static endNode(u){return u.endObject()}static createNode(u,o,h,_,S,T,O,j,C,D,R,I,$,F){return v.startNode(u),v.addName(u,o),v.addDocString(u,h),v.addDomain(u,_),v.addSinceVersion(u,S),v.addIndex(u,T),v.addOpType(u,O),v.addType(u,j),v.addExecutionProviderType(u,C),v.addInputs(u,D),v.addOutputs(u,R),v.addAttributes(u,I),v.addInputArgCounts(u,$),v.addImplicitInputs(u,F),v.endNode(u)}}w.Node=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsValueInfo(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsValueInfo(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}name(u){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,u):null}docString(u){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,u):null}type(u){let o=this.bb.__offset(this.bb_pos,8);return o?(u||new p.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startValueInfo(u){u.startObject(3)}static addName(u,o){u.addFieldOffset(0,o,0)}static addDocString(u,o){u.addFieldOffset(1,o,0)}static addType(u,o){u.addFieldOffset(2,o,0)}static endValueInfo(u){return u.endObject()}static createValueInfo(u,o,h,_){return v.startValueInfo(u),v.addName(u,o),v.addDocString(u,h),v.addType(u,_),v.endValueInfo(u)}}w.ValueInfo=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsTypeInfo(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsTypeInfo(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}denotation(u){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,u):null}valueType(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.readUint8(this.bb_pos+u):p.experimental.fbs.TypeInfoValue.NONE}value(u){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__union(u,this.bb_pos+o):null}static startTypeInfo(u){u.startObject(3)}static addDenotation(u,o){u.addFieldOffset(0,o,0)}static addValueType(u,o){u.addFieldInt8(1,o,p.experimental.fbs.TypeInfoValue.NONE)}static addValue(u,o){u.addFieldOffset(2,o,0)}static endTypeInfo(u){return u.endObject()}static createTypeInfo(u,o,h,_){return v.startTypeInfo(u),v.addDenotation(u,o),v.addValueType(u,h),v.addValue(u,_),v.endTypeInfo(u)}}w.TypeInfo=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsOperatorSetId(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsOperatorSetId(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}domain(u){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,u):null}version(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.readInt64(this.bb_pos+u):this.bb.createLong(0,0)}static startOperatorSetId(u){u.startObject(2)}static addDomain(u,o){u.addFieldOffset(0,o,0)}static addVersion(u,o){u.addFieldInt64(1,o,u.createLong(0,0))}static endOperatorSetId(u){return u.endObject()}static createOperatorSetId(u,o,h){return v.startOperatorSetId(u),v.addDomain(u,o),v.addVersion(u,h),v.endOperatorSetId(u)}}w.OperatorSetId=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsTensor(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsTensor(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}name(u){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,u):null}docString(u){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,u):null}dims(u){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.readInt64(this.bb.__vector(this.bb_pos+o)+8*u):this.bb.createLong(0,0)}dimsLength(){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__vector_len(this.bb_pos+u):0}dataType(){let u=this.bb.__offset(this.bb_pos,10);return u?this.bb.readInt32(this.bb_pos+u):p.experimental.fbs.TensorDataType.UNDEFINED}rawData(u){let o=this.bb.__offset(this.bb_pos,12);return o?this.bb.readUint8(this.bb.__vector(this.bb_pos+o)+u):0}rawDataLength(){let u=this.bb.__offset(this.bb_pos,12);return u?this.bb.__vector_len(this.bb_pos+u):0}rawDataArray(){let u=this.bb.__offset(this.bb_pos,12);return u?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+u),this.bb.__vector_len(this.bb_pos+u)):null}stringData(u,o){let h=this.bb.__offset(this.bb_pos,14);return h?this.bb.__string(this.bb.__vector(this.bb_pos+h)+4*u,o):null}stringDataLength(){let u=this.bb.__offset(this.bb_pos,14);return u?this.bb.__vector_len(this.bb_pos+u):0}static startTensor(u){u.startObject(6)}static addName(u,o){u.addFieldOffset(0,o,0)}static addDocString(u,o){u.addFieldOffset(1,o,0)}static addDims(u,o){u.addFieldOffset(2,o,0)}static createDimsVector(u,o){u.startVector(8,o.length,8);for(let h=o.length-1;h>=0;h--)u.addInt64(o[h]);return u.endVector()}static startDimsVector(u,o){u.startVector(8,o,8)}static addDataType(u,o){u.addFieldInt32(3,o,p.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(u,o){u.addFieldOffset(4,o,0)}static createRawDataVector(u,o){u.startVector(1,o.length,1);for(let h=o.length-1;h>=0;h--)u.addInt8(o[h]);return u.endVector()}static startRawDataVector(u,o){u.startVector(1,o,1)}static addStringData(u,o){u.addFieldOffset(5,o,0)}static createStringDataVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addOffset(o[h]);return u.endVector()}static startStringDataVector(u,o){u.startVector(4,o,4)}static endTensor(u){return u.endObject()}static createTensor(u,o,h,_,S,T,O){return v.startTensor(u),v.addName(u,o),v.addDocString(u,h),v.addDims(u,_),v.addDataType(u,S),v.addRawData(u,T),v.addStringData(u,O),v.endTensor(u)}}w.Tensor=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsSparseTensor(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsSparseTensor(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}values(u){let o=this.bb.__offset(this.bb_pos,4);return o?(u||new p.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}indices(u){let o=this.bb.__offset(this.bb_pos,6);return o?(u||new p.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}dims(u){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.readInt64(this.bb.__vector(this.bb_pos+o)+8*u):this.bb.createLong(0,0)}dimsLength(){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__vector_len(this.bb_pos+u):0}static startSparseTensor(u){u.startObject(3)}static addValues(u,o){u.addFieldOffset(0,o,0)}static addIndices(u,o){u.addFieldOffset(1,o,0)}static addDims(u,o){u.addFieldOffset(2,o,0)}static createDimsVector(u,o){u.startVector(8,o.length,8);for(let h=o.length-1;h>=0;h--)u.addInt64(o[h]);return u.endVector()}static startDimsVector(u,o){u.startVector(8,o,8)}static endSparseTensor(u){return u.endObject()}static createSparseTensor(u,o,h,_){return v.startSparseTensor(u),v.addValues(u,o),v.addIndices(u,h),v.addDims(u,_),v.endSparseTensor(u)}}w.SparseTensor=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsAttribute(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsAttribute(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}name(u){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,u):null}docString(u){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,u):null}type(){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.readInt32(this.bb_pos+u):p.experimental.fbs.AttributeType.UNDEFINED}f(){let u=this.bb.__offset(this.bb_pos,10);return u?this.bb.readFloat32(this.bb_pos+u):0}i(){let u=this.bb.__offset(this.bb_pos,12);return u?this.bb.readInt64(this.bb_pos+u):this.bb.createLong(0,0)}s(u){let o=this.bb.__offset(this.bb_pos,14);return o?this.bb.__string(this.bb_pos+o,u):null}t(u){let o=this.bb.__offset(this.bb_pos,16);return o?(u||new p.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}g(u){let o=this.bb.__offset(this.bb_pos,18);return o?(u||new p.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}floats(u){let o=this.bb.__offset(this.bb_pos,20);return o?this.bb.readFloat32(this.bb.__vector(this.bb_pos+o)+4*u):0}floatsLength(){let u=this.bb.__offset(this.bb_pos,20);return u?this.bb.__vector_len(this.bb_pos+u):0}floatsArray(){let u=this.bb.__offset(this.bb_pos,20);return u?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+u),this.bb.__vector_len(this.bb_pos+u)):null}ints(u){let o=this.bb.__offset(this.bb_pos,22);return o?this.bb.readInt64(this.bb.__vector(this.bb_pos+o)+8*u):this.bb.createLong(0,0)}intsLength(){let u=this.bb.__offset(this.bb_pos,22);return u?this.bb.__vector_len(this.bb_pos+u):0}strings(u,o){let h=this.bb.__offset(this.bb_pos,24);return h?this.bb.__string(this.bb.__vector(this.bb_pos+h)+4*u,o):null}stringsLength(){let u=this.bb.__offset(this.bb_pos,24);return u?this.bb.__vector_len(this.bb_pos+u):0}tensors(u,o){let h=this.bb.__offset(this.bb_pos,26);return h?(o||new p.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}tensorsLength(){let u=this.bb.__offset(this.bb_pos,26);return u?this.bb.__vector_len(this.bb_pos+u):0}graphs(u,o){let h=this.bb.__offset(this.bb_pos,28);return h?(o||new p.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}graphsLength(){let u=this.bb.__offset(this.bb_pos,28);return u?this.bb.__vector_len(this.bb_pos+u):0}static startAttribute(u){u.startObject(13)}static addName(u,o){u.addFieldOffset(0,o,0)}static addDocString(u,o){u.addFieldOffset(1,o,0)}static addType(u,o){u.addFieldInt32(2,o,p.experimental.fbs.AttributeType.UNDEFINED)}static addF(u,o){u.addFieldFloat32(3,o,0)}static addI(u,o){u.addFieldInt64(4,o,u.createLong(0,0))}static addS(u,o){u.addFieldOffset(5,o,0)}static addT(u,o){u.addFieldOffset(6,o,0)}static addG(u,o){u.addFieldOffset(7,o,0)}static addFloats(u,o){u.addFieldOffset(8,o,0)}static createFloatsVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addFloat32(o[h]);return u.endVector()}static startFloatsVector(u,o){u.startVector(4,o,4)}static addInts(u,o){u.addFieldOffset(9,o,0)}static createIntsVector(u,o){u.startVector(8,o.length,8);for(let h=o.length-1;h>=0;h--)u.addInt64(o[h]);return u.endVector()}static startIntsVector(u,o){u.startVector(8,o,8)}static addStrings(u,o){u.addFieldOffset(10,o,0)}static createStringsVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addOffset(o[h]);return u.endVector()}static startStringsVector(u,o){u.startVector(4,o,4)}static addTensors(u,o){u.addFieldOffset(11,o,0)}static createTensorsVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addOffset(o[h]);return u.endVector()}static startTensorsVector(u,o){u.startVector(4,o,4)}static addGraphs(u,o){u.addFieldOffset(12,o,0)}static createGraphsVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addOffset(o[h]);return u.endVector()}static startGraphsVector(u,o){u.startVector(4,o,4)}static endAttribute(u){return u.endObject()}static createAttribute(u,o,h,_,S,T,O,j,C,D,R,I,$,F){return v.startAttribute(u),v.addName(u,o),v.addDocString(u,h),v.addType(u,_),v.addF(u,S),v.addI(u,T),v.addS(u,O),v.addT(u,j),v.addG(u,C),v.addFloats(u,D),v.addInts(u,R),v.addStrings(u,I),v.addTensors(u,$),v.addGraphs(u,F),v.endAttribute(u)}}w.Attribute=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsGraph(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsGraph(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}initializers(u,o){let h=this.bb.__offset(this.bb_pos,4);return h?(o||new p.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}initializersLength(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__vector_len(this.bb_pos+u):0}nodeArgs(u,o){let h=this.bb.__offset(this.bb_pos,6);return h?(o||new p.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}nodeArgsLength(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__vector_len(this.bb_pos+u):0}nodes(u,o){let h=this.bb.__offset(this.bb_pos,8);return h?(o||new p.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}nodesLength(){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__vector_len(this.bb_pos+u):0}maxNodeIndex(){let u=this.bb.__offset(this.bb_pos,10);return u?this.bb.readUint32(this.bb_pos+u):0}nodeEdges(u,o){let h=this.bb.__offset(this.bb_pos,12);return h?(o||new p.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}nodeEdgesLength(){let u=this.bb.__offset(this.bb_pos,12);return u?this.bb.__vector_len(this.bb_pos+u):0}inputs(u,o){let h=this.bb.__offset(this.bb_pos,14);return h?this.bb.__string(this.bb.__vector(this.bb_pos+h)+4*u,o):null}inputsLength(){let u=this.bb.__offset(this.bb_pos,14);return u?this.bb.__vector_len(this.bb_pos+u):0}outputs(u,o){let h=this.bb.__offset(this.bb_pos,16);return h?this.bb.__string(this.bb.__vector(this.bb_pos+h)+4*u,o):null}outputsLength(){let u=this.bb.__offset(this.bb_pos,16);return u?this.bb.__vector_len(this.bb_pos+u):0}sparseInitializers(u,o){let h=this.bb.__offset(this.bb_pos,18);return h?(o||new p.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}sparseInitializersLength(){let u=this.bb.__offset(this.bb_pos,18);return u?this.bb.__vector_len(this.bb_pos+u):0}static startGraph(u){u.startObject(8)}static addInitializers(u,o){u.addFieldOffset(0,o,0)}static createInitializersVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addOffset(o[h]);return u.endVector()}static startInitializersVector(u,o){u.startVector(4,o,4)}static addNodeArgs(u,o){u.addFieldOffset(1,o,0)}static createNodeArgsVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addOffset(o[h]);return u.endVector()}static startNodeArgsVector(u,o){u.startVector(4,o,4)}static addNodes(u,o){u.addFieldOffset(2,o,0)}static createNodesVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addOffset(o[h]);return u.endVector()}static startNodesVector(u,o){u.startVector(4,o,4)}static addMaxNodeIndex(u,o){u.addFieldInt32(3,o,0)}static addNodeEdges(u,o){u.addFieldOffset(4,o,0)}static createNodeEdgesVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addOffset(o[h]);return u.endVector()}static startNodeEdgesVector(u,o){u.startVector(4,o,4)}static addInputs(u,o){u.addFieldOffset(5,o,0)}static createInputsVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addOffset(o[h]);return u.endVector()}static startInputsVector(u,o){u.startVector(4,o,4)}static addOutputs(u,o){u.addFieldOffset(6,o,0)}static createOutputsVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addOffset(o[h]);return u.endVector()}static startOutputsVector(u,o){u.startVector(4,o,4)}static addSparseInitializers(u,o){u.addFieldOffset(7,o,0)}static createSparseInitializersVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addOffset(o[h]);return u.endVector()}static startSparseInitializersVector(u,o){u.startVector(4,o,4)}static endGraph(u){return u.endObject()}static createGraph(u,o,h,_,S,T,O,j,C){return v.startGraph(u),v.addInitializers(u,o),v.addNodeArgs(u,h),v.addNodes(u,_),v.addMaxNodeIndex(u,S),v.addNodeEdges(u,T),v.addInputs(u,O),v.addOutputs(u,j),v.addSparseInitializers(u,C),v.endGraph(u)}}w.Graph=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsModel(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsModel(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}irVersion(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.readInt64(this.bb_pos+u):this.bb.createLong(0,0)}opsetImport(u,o){let h=this.bb.__offset(this.bb_pos,6);return h?(o||new p.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}opsetImportLength(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__vector_len(this.bb_pos+u):0}producerName(u){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__string(this.bb_pos+o,u):null}producerVersion(u){let o=this.bb.__offset(this.bb_pos,10);return o?this.bb.__string(this.bb_pos+o,u):null}domain(u){let o=this.bb.__offset(this.bb_pos,12);return o?this.bb.__string(this.bb_pos+o,u):null}modelVersion(){let u=this.bb.__offset(this.bb_pos,14);return u?this.bb.readInt64(this.bb_pos+u):this.bb.createLong(0,0)}docString(u){let o=this.bb.__offset(this.bb_pos,16);return o?this.bb.__string(this.bb_pos+o,u):null}graph(u){let o=this.bb.__offset(this.bb_pos,18);return o?(u||new p.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}graphDocString(u){let o=this.bb.__offset(this.bb_pos,20);return o?this.bb.__string(this.bb_pos+o,u):null}static startModel(u){u.startObject(9)}static addIrVersion(u,o){u.addFieldInt64(0,o,u.createLong(0,0))}static addOpsetImport(u,o){u.addFieldOffset(1,o,0)}static createOpsetImportVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addOffset(o[h]);return u.endVector()}static startOpsetImportVector(u,o){u.startVector(4,o,4)}static addProducerName(u,o){u.addFieldOffset(2,o,0)}static addProducerVersion(u,o){u.addFieldOffset(3,o,0)}static addDomain(u,o){u.addFieldOffset(4,o,0)}static addModelVersion(u,o){u.addFieldInt64(5,o,u.createLong(0,0))}static addDocString(u,o){u.addFieldOffset(6,o,0)}static addGraph(u,o){u.addFieldOffset(7,o,0)}static addGraphDocString(u,o){u.addFieldOffset(8,o,0)}static endModel(u){return u.endObject()}static createModel(u,o,h,_,S,T,O,j,C,D){return v.startModel(u),v.addIrVersion(u,o),v.addOpsetImport(u,h),v.addProducerName(u,_),v.addProducerVersion(u,S),v.addDomain(u,T),v.addModelVersion(u,O),v.addDocString(u,j),v.addGraph(u,C),v.addGraphDocString(u,D),v.endModel(u)}}w.Model=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsKernelCreateInfos(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsKernelCreateInfos(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}nodeIndices(u){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.readUint32(this.bb.__vector(this.bb_pos+o)+4*u):0}nodeIndicesLength(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__vector_len(this.bb_pos+u):0}nodeIndicesArray(){let u=this.bb.__offset(this.bb_pos,4);return u?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+u),this.bb.__vector_len(this.bb_pos+u)):null}kernelDefHashes(u){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.readUint64(this.bb.__vector(this.bb_pos+o)+8*u):this.bb.createLong(0,0)}kernelDefHashesLength(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__vector_len(this.bb_pos+u):0}static startKernelCreateInfos(u){u.startObject(2)}static addNodeIndices(u,o){u.addFieldOffset(0,o,0)}static createNodeIndicesVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addInt32(o[h]);return u.endVector()}static startNodeIndicesVector(u,o){u.startVector(4,o,4)}static addKernelDefHashes(u,o){u.addFieldOffset(1,o,0)}static createKernelDefHashesVector(u,o){u.startVector(8,o.length,8);for(let h=o.length-1;h>=0;h--)u.addInt64(o[h]);return u.endVector()}static startKernelDefHashesVector(u,o){u.startVector(8,o,8)}static endKernelCreateInfos(u){return u.endObject()}static createKernelCreateInfos(u,o,h){return v.startKernelCreateInfos(u),v.addNodeIndices(u,o),v.addKernelDefHashes(u,h),v.endKernelCreateInfos(u)}}w.KernelCreateInfos=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsSubGraphSessionState(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsSubGraphSessionState(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}graphId(u){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,u):null}sessionState(u){let o=this.bb.__offset(this.bb_pos,6);return o?(u||new p.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startSubGraphSessionState(u){u.startObject(2)}static addGraphId(u,o){u.addFieldOffset(0,o,0)}static addSessionState(u,o){u.addFieldOffset(1,o,0)}static endSubGraphSessionState(u){let o=u.endObject();return u.requiredField(o,4),o}static createSubGraphSessionState(u,o,h){return v.startSubGraphSessionState(u),v.addGraphId(u,o),v.addSessionState(u,h),v.endSubGraphSessionState(u)}}w.SubGraphSessionState=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsSessionState(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsSessionState(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}kernels(u){let o=this.bb.__offset(this.bb_pos,4);return o?(u||new p.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}subGraphSessionStates(u,o){let h=this.bb.__offset(this.bb_pos,6);return h?(o||new p.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}subGraphSessionStatesLength(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__vector_len(this.bb_pos+u):0}static startSessionState(u){u.startObject(2)}static addKernels(u,o){u.addFieldOffset(0,o,0)}static addSubGraphSessionStates(u,o){u.addFieldOffset(1,o,0)}static createSubGraphSessionStatesVector(u,o){u.startVector(4,o.length,4);for(let h=o.length-1;h>=0;h--)u.addOffset(o[h]);return u.endVector()}static startSubGraphSessionStatesVector(u,o){u.startVector(4,o,4)}static endSessionState(u){return u.endObject()}static createSessionState(u,o,h){return v.startSessionState(u),v.addKernels(u,o),v.addSubGraphSessionStates(u,h),v.endSessionState(u)}}w.SessionState=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(p){(function(b){(function(w){class v{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsInferenceSession(u,o){return(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsInferenceSession(u,o){return u.setPosition(u.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(o||new v).__init(u.readInt32(u.position())+u.position(),u)}static bufferHasIdentifier(u){return u.__has_identifier("ORTM")}ortVersion(u){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,u):null}model(u){let o=this.bb.__offset(this.bb_pos,6);return o?(u||new p.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}sessionState(u){let o=this.bb.__offset(this.bb_pos,8);return o?(u||new p.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startInferenceSession(u){u.startObject(3)}static addOrtVersion(u,o){u.addFieldOffset(0,o,0)}static addModel(u,o){u.addFieldOffset(1,o,0)}static addSessionState(u,o){u.addFieldOffset(2,o,0)}static endInferenceSession(u){return u.endObject()}static finishInferenceSessionBuffer(u,o){u.finish(o,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(u,o){u.finish(o,"ORTM",!0)}static createInferenceSession(u,o,h,_){return v.startInferenceSession(u),v.addOrtVersion(u,o),v.addModel(u,h),v.addSessionState(u,_),v.endInferenceSession(u)}}w.InferenceSession=v})(b.fbs||(b.fbs={}))})(p.experimental||(p.experimental={}))})(e.onnxruntime||(e.onnxruntime={}))},7448:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxjsSessionHandler=void 0;const i=n(1670),l=n(9162);e.OnnxjsSessionHandler=class{constructor(f){this.session=f,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(f,p,b){const w=new Map;for(const u in f)if(Object.hasOwnProperty.call(f,u)){const o=f[u];w.set(u,new l.Tensor(o.dims,o.type,void 0,void 0,o.data))}const v=await this.session.run(w),g={};return v.forEach(((u,o)=>{g[o]=new i.Tensor(u.type,u.data,u.dims)})),g}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;const i=n(7067),l=n(1296),f=n(7091),p=n(1036),b=n(6231),w=n(2644);e.Session=class{constructor(v={}){this._initialized=!1,this.backendHint=v.backendHint,this.profiler=b.Profiler.create(v.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(v,g,u){await this.profiler.event("session","Session.loadModel",(async()=>{const o=await(0,f.resolveBackend)(this.backendHint);if(this.sessionHandler=o.createSessionHandler(this.context),this._model=new w.Model,typeof v=="string"){const h=v.endsWith(".ort");if(typeof fetch>"u"){const _=await(0,l.promisify)(i.readFile)(v);this.initialize(_,h)}else{const _=await fetch(v),S=await _.arrayBuffer();this.initialize(new Uint8Array(S),h)}}else if(ArrayBuffer.isView(v))this.initialize(v);else{const h=new Uint8Array(v,g||0,u||v.byteLength);this.initialize(h)}}))}initialize(v,g){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",(()=>{const u=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(v,u,g),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new p.ExecutionPlan(this._model.graph,this._ops,this.profiler)})),this._initialized=!0}async run(v){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",(async()=>{const g=this.normalizeAndValidateInputs(v),u=await this._executionPlan.execute(this.sessionHandler,g);return this.createOutput(u)}))}normalizeAndValidateInputs(v){const g=this._model.graph.getInputNames();if(Array.isArray(v)){if(v.length!==g.length)throw new Error(`incorrect input array length: expected ${g.length} but got ${v.length}`)}else{if(v.size!==g.length)throw new Error(`incorrect input map size: expected ${g.length} but got ${v.size}`);const u=new Array(v.size);let o=0;for(let h=0;h<g.length;++h){const _=v.get(g[h]);if(!_)throw new Error(`missing input tensor for: '${name}'`);u[o++]=_}v=u}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,v,!1);else{const u=this._model.graph.getInputIndices(),o=this._model.graph.getValues(),h=new Array(u.length);for(let _=0;_<u.length;++_){const S=o[u[_]];h[_]=S.type.shape.dims,this.context.graphInputTypes.push(S.type.tensorType),this.context.graphInputDims.push(v[_].dims)}this.validateInputTensorDims(h,v,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,v),v}validateInputTensorTypes(v,g){for(let u=0;u<g.length;u++){const o=v[u],h=g[u].type;if(o!==h)throw new Error(`input tensor[${u}] check failed: expected type '${o}' but got ${h}`)}}validateInputTensorDims(v,g,u){for(let o=0;o<g.length;o++){const h=v[o],_=g[o].dims;if(!this.compareTensorDims(h,_,u))throw new Error(`input tensor[${o}] check failed: expected shape '[${h.join(",")}]' but got [${_.join(",")}]`)}}compareTensorDims(v,g,u){if(v.length!==g.length)return!1;for(let o=0;o<v.length;++o)if(v[o]!==g[o]&&(!u||v[o]!==0))return!1;return!0}createOutput(v){const g=this._model.graph.getOutputNames();if(v.length!==g.length)throw new Error("expected number of outputs do not match number of generated outputs");const u=new Map;for(let o=0;o<g.length;++o)u.set(g[o],v[o]);return u}initializeOps(v){const g=v.getNodes();this._ops=new Array(g.length);for(let u=0;u<g.length;u++)this._ops[u]=this.sessionHandler.resolve(g[u],this._model.opsets,v)}}},9162:function(t,e,n){var i=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const l=n(3442),f=i(n(3720)),p=n(1446),b=n(9395),w=n(2517);var v=b.onnxruntime.experimental.fbs;class g{get data(){if(this.cache===void 0){const T=this.dataProvider(this.dataId);if(T.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=T}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(T){return this.data[w.ShapeUtil.indicesToOffset(T,this.strides)]}set(T,O){this.data[w.ShapeUtil.indicesToOffset(T,this.strides)]=O}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=w.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(T,O,j,C,D,R=l.Guid.create()){this.dims=T,this.type=O,this.dataProvider=j,this.asyncDataProvider=C,this.cache=D,this.dataId=R,this.size=w.ShapeUtil.validateDimsAndCalcSize(T);const I=this.size,$=j===void 0&&C===void 0&&D===void 0;if(D!==void 0&&D.length!==I)throw new RangeError("Input dims doesn't match data length.");if(O==="string"){if(!(D===void 0||Array.isArray(D)&&D.every((F=>typeof F=="string"))))throw new TypeError("cache should be a string array");$&&(this.cache=new Array(I))}else{if(D!==void 0){const F=o(O);if(!(D instanceof F))throw new TypeError(`cache should be type ${F.name}`)}if($){const F=new ArrayBuffer(I*(function(L){switch(L){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${L}`)}})(O));this.cache=(function(L,V){return new(o(V))(L)})(F,O)}}}static fromProto(T){if(!T)throw new Error("cannot construct Value from an empty tensor");const O=w.ProtoUtil.tensorDataTypeFromProto(T.dataType),j=w.ProtoUtil.tensorDimsFromProto(T.dims),C=new g(j,O);if(O==="string")T.stringData.forEach(((D,R)=>{C.data[R]=(0,w.decodeUtf8String)(D)}));else if(T.rawData&&typeof T.rawData.byteLength=="number"&&T.rawData.byteLength>0){const D=C.data,R=new DataView(T.rawData.buffer,T.rawData.byteOffset,T.rawData.byteLength),I=u(T.dataType),$=T.rawData.byteLength/I;if(T.rawData.byteLength%I!=0)throw new Error("invalid buffer length");if(D.length!==$)throw new Error("buffer length mismatch");for(let F=0;F<$;F++){const L=_(R,T.dataType,F*I);D[F]=L}}else{let D;switch(T.dataType){case p.onnx.TensorProto.DataType.FLOAT:D=T.floatData;break;case p.onnx.TensorProto.DataType.INT32:case p.onnx.TensorProto.DataType.INT16:case p.onnx.TensorProto.DataType.UINT16:case p.onnx.TensorProto.DataType.INT8:case p.onnx.TensorProto.DataType.UINT8:case p.onnx.TensorProto.DataType.BOOL:D=T.int32Data;break;case p.onnx.TensorProto.DataType.INT64:D=T.int64Data;break;case p.onnx.TensorProto.DataType.DOUBLE:D=T.doubleData;break;case p.onnx.TensorProto.DataType.UINT32:case p.onnx.TensorProto.DataType.UINT64:D=T.uint64Data;break;default:throw new Error("unspecific error")}if(D==null)throw new Error("failed to populate data from a tensorproto value");const R=C.data;if(R.length!==D.length)throw new Error("array length mismatch");for(let I=0;I<D.length;I++){const $=D[I];f.default.isLong($)?R[I]=h($,T.dataType):R[I]=$}}return C}static fromData(T,O,j){return new g(O,j,void 0,void 0,T)}static fromOrtTensor(T){if(!T)throw new Error("cannot construct Value from an empty tensor");const O=w.ProtoUtil.tensorDimsFromORTFormat(T),j=w.ProtoUtil.tensorDataTypeFromProto(T.dataType()),C=new g(O,j);if(j==="string")for(let D=0;D<T.stringDataLength();D++)C.data[D]=T.stringData(D);else if(T.rawDataArray()&&typeof T.rawDataLength()=="number"&&T.rawDataLength()>0){const D=C.data,R=new DataView(T.rawDataArray().buffer,T.rawDataArray().byteOffset,T.rawDataLength()),I=u(T.dataType()),$=T.rawDataLength()/I;if(T.rawDataLength()%I!=0)throw new Error("invalid buffer length");if(D.length!==$)throw new Error("buffer length mismatch");for(let F=0;F<$;F++){const L=_(R,T.dataType(),F*I);D[F]=L}}return C}}function u(S){switch(S){case p.onnx.TensorProto.DataType.UINT8:case p.onnx.TensorProto.DataType.INT8:case p.onnx.TensorProto.DataType.BOOL:return 1;case p.onnx.TensorProto.DataType.UINT16:case p.onnx.TensorProto.DataType.INT16:return 2;case p.onnx.TensorProto.DataType.FLOAT:case p.onnx.TensorProto.DataType.INT32:case p.onnx.TensorProto.DataType.UINT32:return 4;case p.onnx.TensorProto.DataType.INT64:case p.onnx.TensorProto.DataType.DOUBLE:case p.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${p.onnx.TensorProto.DataType[S]}`)}}function o(S){switch(S){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function h(S,T){if(T===p.onnx.TensorProto.DataType.INT64||T===v.TensorDataType.INT64){if(S.greaterThanOrEqual(2147483648)||S.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(T!==p.onnx.TensorProto.DataType.UINT32&&T!==v.TensorDataType.UINT32&&T!==p.onnx.TensorProto.DataType.UINT64&&T!==v.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${p.onnx.TensorProto.DataType[T]}`);if(S.greaterThanOrEqual(4294967296)||S.lessThan(0))throw new TypeError("uint64 is not supported")}return S.toNumber()}function _(S,T,O){switch(T){case p.onnx.TensorProto.DataType.BOOL:case p.onnx.TensorProto.DataType.UINT8:return S.getUint8(O);case p.onnx.TensorProto.DataType.INT8:return S.getInt8(O);case p.onnx.TensorProto.DataType.UINT16:return S.getUint16(O,!0);case p.onnx.TensorProto.DataType.INT16:return S.getInt16(O,!0);case p.onnx.TensorProto.DataType.FLOAT:return S.getFloat32(O,!0);case p.onnx.TensorProto.DataType.INT32:return S.getInt32(O,!0);case p.onnx.TensorProto.DataType.UINT32:return S.getUint32(O,!0);case p.onnx.TensorProto.DataType.INT64:return h(f.default.fromBits(S.getUint32(O,!0),S.getUint32(O+4,!0),!1),T);case p.onnx.TensorProto.DataType.DOUBLE:return S.getFloat64(O,!0);case p.onnx.TensorProto.DataType.UINT64:return h(f.default.fromBits(S.getUint32(O,!0),S.getUint32(O+4,!0),!0),T);default:throw new Error(`cannot read from DataView for type ${p.onnx.TensorProto.DataType[T]}`)}}e.Tensor=g},2517:function(t,e,n){var i=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUtf8String=e.MAX_CLIP=e.MIN_CLIP=e.PoolConvUtil=e.ReduceUtil=e.SplitUtil=e.MathUtil=e.ShapeUtil=e.LongUtil=e.ProtoUtil=e.GemmUtil=e.arrayCopyHelper=e.BroadcastUtil=e.MatMulUtil=e.ArrayUtil=e.assert=e.checkInputsShape=void 0;const l=n(5686),f=i(n(3720)),p=n(1446),b=n(9162);e.checkInputsShape=function(T,...O){if(!T||T.length!==O.length)return!1;for(let j=0;j<T.length;j++)if(!T[j].dims||T[j].dims.length!==O[j])return!1;return!0},e.assert=function(T,O){if(!T)throw new Error(typeof O=="string"?O:O())},e.ArrayUtil=class{static arraysEqual(T,O){if(T.length!==O.length)return!1;for(let j=0;j<T.length;j++)if(T[j]!==O[j])return!1;return!0}};class w{static preprocessInputShapes(O,j){return[O.length===1?[1,O[0]]:O,j.length===1?[j[0],1]:j]}static postprocessOutputShape(O,j,C){j===1&&O.splice(O.length-2,1),C===1&&O.pop()}static calcMatMulShape(O,j){return O[1]!==j[0]?void 0:[O[0],j[1]]}}e.MatMulUtil=w;class v{static calcShape(O,j,C=!1){const D=O.length,R=j.length;if(D===0)return j;if(R===0)return O;const I=Math.max(O.length,j.length),$=new Array(I);if(C){if(D<2||R<2)return;const F=w.calcMatMulShape([O[D-2],O[D-1]],[j[R-2],j[R-1]]);if(F===void 0)return;[$[I-2],$[I-1]]=F}for(let F=C?3:1;F<=I;F++){const L=D-F<0?1:O[D-F],V=R-F<0?1:j[R-F];if(L!==V&&L>1&&V>1)return;$[I-F]=Math.max(L,V)}return $}static index(O,j){const C=new Array(j.length);return v.fillIndex(O,j,C),C}static fillIndex(O,j,C){const D=O.length-j.length;for(let R=0;R<j.length;R++)C[R]=O[D+R]%j[R]}static calc(O,j,C,D,R){const I=v.calcShape(O.dims,j.dims);if(I){if(D&&!o.areEqual(I,O.dims))return;const $=o.size(I),F=D?O:new b.Tensor(I,R||O.type);if(I.length===0)F.set([],C(O.get([]),j.get([])));else{const L=new Array(I.length),V=new Array(O.dims.length),Y=new Array(j.dims.length);let Q,ee=0,X=0,W=!1,z=!1;O.dims.length===0&&(ee=O.get([]),W=!0),j.dims.length===0&&(X=j.get([]),z=!0);for(let q=0;q<$;q++){Q=q;for(let ce=I.length-1;ce>=0;ce--)L[ce]=Q%I[ce],Q=Math.floor(Q/I[ce]);W||(v.fillIndex(L,O.dims,V),ee=O.get(V)),z||(v.fillIndex(L,j.dims,Y),X=j.get(Y)),F.set(L,C(ee,X))}}return F}}static isValidBroadcast(O,j){const C=O.length,D=j.length;if(C>D)return!1;for(let R=1;R<=C;R++)if(O[C-R]!==1&&O[C-R]!==j[D-R])return!1;return!0}static getBroadcastDims(O,j){const C=O.length,D=[];for(let R=0;R<C;R++){const I=C-1-R,$=O[I]||1;(j[j.length-1-R]||1)>1&&$===1&&D.unshift(I)}return D}}e.BroadcastUtil=v,e.arrayCopyHelper=function(T,O,j,C,D){if(C<0||C>=O.length)throw new Error("sourceIndex out of bounds");if(j<0||j>=T.length)throw new Error("targetIndex out of bounds");if(C+D>O.length)throw new Error("source indices to be copied are outside bounds");if(j+D>T.length)throw new Error("target array is too small to hold result");for(let R=0;R<D;R++)T[j+R]=O[C+R]},e.GemmUtil=class{static getShapeOfGemmResult(T,O,j,C,D){if(T.length!==2||j.length!==2)throw new Error("shape need to be of size 2");let R,I,$;O?(R=T[1],I=T[0]):(R=T[0],I=T[1]);let F=-1;if(C?($=j[0],F=1):($=j[1],F=0),j[F]!==I)throw new Error("dimension mismatch");if(R<=0||$<=0||I<=0)throw new Error("invalid shape specified");if(D&&!v.isValidBroadcast(D,[R,$]))throw new Error("gemm: invalid bias shape for broadcast");return[R,$,I]}};class g{static tensorDataTypeFromProto(O){switch(O){case p.onnx.TensorProto.DataType.INT8:return"int8";case p.onnx.TensorProto.DataType.UINT8:return"uint8";case p.onnx.TensorProto.DataType.BOOL:return"bool";case p.onnx.TensorProto.DataType.INT16:return"int16";case p.onnx.TensorProto.DataType.UINT16:return"uint16";case p.onnx.TensorProto.DataType.INT32:return"int32";case p.onnx.TensorProto.DataType.UINT32:return"uint32";case p.onnx.TensorProto.DataType.FLOAT:return"float32";case p.onnx.TensorProto.DataType.DOUBLE:return"float64";case p.onnx.TensorProto.DataType.STRING:return"string";case p.onnx.TensorProto.DataType.INT64:return"int32";case p.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${p.onnx.TensorProto.DataType[O]}`)}}static tensorDataTypeStringToEnum(O){switch(O){case"int8":return p.onnx.TensorProto.DataType.INT8;case"uint8":return p.onnx.TensorProto.DataType.UINT8;case"bool":return p.onnx.TensorProto.DataType.BOOL;case"int16":return p.onnx.TensorProto.DataType.INT16;case"uint16":return p.onnx.TensorProto.DataType.UINT16;case"int32":return p.onnx.TensorProto.DataType.INT32;case"uint32":return p.onnx.TensorProto.DataType.UINT32;case"float32":return p.onnx.TensorProto.DataType.FLOAT;case"float64":return p.onnx.TensorProto.DataType.DOUBLE;case"string":return p.onnx.TensorProto.DataType.STRING;case"int64":return p.onnx.TensorProto.DataType.INT64;case"uint64":return p.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${O}`)}}static tensorDimsFromProto(O){return O.map((j=>f.default.isLong(j)?j.toNumber():j))}static tensorValueTypeFromProto(O){return{tensorType:g.tensorDataTypeFromProto(O.elemType),shape:{dims:g.tensorDimsFromProto(O.shape.dim.map((j=>j.dimValue)))}}}static tensorDimsFromORTFormat(O){const j=[];for(let C=0;C<O.dimsLength();C++)j.push(u.longToNumber(O.dims(C)));return j}static tensorAttributesFromORTFormat(O){const j=[];for(let C=0;C<O.attributesLength();C++)j.push(O.attributes(C));return j}}e.ProtoUtil=g;class u{static longToNumber(O,j){return f.default.isLong(O)?O.toNumber():O instanceof l.flatbuffers.Long?f.default.fromValue({low:O.low,high:O.high,unsigned:j!=null&&j}).toNumber():O}static isLong(O){return f.default.isLong(O)||O instanceof l.flatbuffers.Long}}e.LongUtil=u;class o{static size(O){return o.getSizeFromDimensionRange(O,0,O.length)}static sizeFromDimension(O,j){if(j<0||j>O.length)throw new Error(`invalid dimension of ${j} for sizeFromDimension as Tensor has ${O.length} dimensions.`);return o.getSizeFromDimensionRange(O,j,O.length)}static sizeToDimension(O,j){if(j<0||j>O.length)throw new Error(`invalid dimension of ${j} for sizeToDimension as Tensor has ${O.length} dimensions.`);return o.getSizeFromDimensionRange(O,0,j)}static getSizeFromDimensionRange(O,j,C){let D=1;for(let R=j;R<C;R++){if(O[R]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");D*=O[R]}return D}static computeStrides(O){const j=O.length;if(j===0)return[];if(j===1)return[1];const C=new Array(j);C[j-1]=1,C[j-2]=O[j-1];for(let D=j-3;D>=0;--D)C[D]=C[D+1]*O[D+1];return C}static transpose(O){return O.slice().reverse()}static indicesToOffset(O,j,C){C===void 0&&(C=O.length);let D=0;for(let R=0;R<C;++R)D+=j[R]*O[R];return D}static offsetToIndices(O,j){const C=j.length;if(C===0)return[];if(C===1)return[O*j[0]];const D=new Array(j.length);for(let R=0;R<D.length-1;++R)D[R]=Math.floor(O/j[R]),O-=D[R]*j[R];return D[D.length-1]=O,D}static normalizeAxis(O,j){if(O<-j&&O>=j)throw new Error("unsupported axis for this operation.");return O<0?O+j:O}static normalizeAxes(O,j){return O.map((C=>this.normalizeAxis(C,j)))}static incrementIndex(O,j,C){if(j.length===0||O.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(C===void 0)C=j.length;else if(C<=0||C>j.length)throw new Error("Incorrect axis to increment on");for(let D=C-1;D>=0&&(O[D]++,!(O[D]<j[D]));--D)O[D]=0}static calculateReshapedDims(O,j){if(j.length===0){if(O.length===0||o.size(O)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const C=j.length,D=new Array(C);let R=-1,I=1;for(let F=0;F<C;F++){if(j[F]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(j[F]===-1){if(R!==-1)throw new Error("at most one dimension in shape hints can be -1");R=F}else{if(j[F]===0){if(F>=O.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");D[F]=O[F]}else D[F]=j[F];I*=D[F]}}const $=o.size(O);if(R!==-1){if($%I!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${O}] Output shape: [${j}]`);D[R]=$/I}else if(I!==$)throw new Error("reshapedDims and originalDims don't have matching sizes");return D}static sortBasedOnPerm(O,j){return j?j.map((C=>O[C])):O.slice().reverse()}static padShape(O,j){const C=O.length;return O.map(((D,R)=>D+j[R]+j[R+C]))}static areEqual(O,j){return O.length===j.length&&O.every(((C,D)=>C===j[D]))}static validateDimsAndCalcSize(O){if(O.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let j=1;for(const C of O){if(!Number.isInteger(C))throw new TypeError(`Invalid shape: ${C} is not an integer`);if(C<0||C>2147483647)throw new TypeError(`Invalid shape: length ${C} is not allowed`);j*=C}return j}static flattenShape(O,j){j<0&&(j+=O.length);const C=O.reduce(((R,I)=>R*I),1),D=O.slice(j).reduce(((R,I)=>R*I),1);return[C/D,D]}static squeezeShape(O,j){const C=new Array;j=o.normalizeAxes(j,O.length);for(let D=0;D<O.length;D++){const R=j.indexOf(D)>=0;if(R&&O[D]!==1)throw new Error("squeeze an axis of size different than 1");(j.length===0&&O[D]>1||j.length>0&&!R)&&C.push(O[D])}return C}static unsqueezeShape(O,j){const C=new Array(O.length+j.length);C.fill(0);for(let R=0;R<j.length;R++){const I=o.normalizeAxis(j[R],C.length);if(I>=C.length)throw new Error("'axes' has an out of range axis");if(C[I]!==0)throw new Error("'axes' has a duplicate axis");C[I]=1}let D=0;for(let R=0;R<C.length;R++)C[R]===0&&(C[R]=O[D++]);if(D!==O.length)throw new Error("the unsqueezed dimension could not be established");return C}}e.ShapeUtil=o,e.MathUtil=class{static sqr(T,O,j,C,D){if(C<0||C>=O.length)throw new Error("sourceIndex out of bounds");if(j<0||j>=T.length)throw new Error("targetIndex out of bounds");if(C+D>O.length)throw new Error("source indices to be copied are outside bounds");if(j+D>T.length)throw new Error("target array is too small to hold result");for(let R=0;R<D;R++)T[j+R]+=Math.pow(O[C+R],2)}static axpy(T,O,j,C,D,R){if(C<0||C>=O.length)throw new Error("sourceIndex out of bounds");if(j<0||j>=T.length)throw new Error("targetIndex out of bounds");if(C+D>O.length)throw new Error("source indices to be copied are outside bounds");if(j+D>T.length)throw new Error("target array is too small to hold result");for(let I=0;I<D;I++)T[j+I]+=R*O[C+I]}static powx(T,O,j,C,D,R){if(C<0||C>=O.length)throw new Error("sourceIndex out of bounds");if(j<0||j>=T.length)throw new Error("targetIndex out of bounds");if(C+D>O.length)throw new Error("source indices to be copied are outside bounds");if(j+D>T.length)throw new Error("target array is too small to hold result");for(let I=0;I<D;I++)T[j+I]=Math.pow(O[C+I],R)}static mul(T,O,j,C,D){if(C<0||C>=O.length)throw new Error("sourceIndex out of bounds");if(j<0||j>=T.length)throw new Error("targetIndex out of bounds");if(C+D>O.length)throw new Error("source indices to be copied are outside bounds");if(j+D>T.length)throw new Error("target array is too small to hold result");for(let R=0;R<D;R++)T[j+R]=O[C+R]*T[j+R]}};class h{static splitShape(O,j,C,D){if(C.length===0){if(!D)throw new Error("need to know number of outputs when the 'split' attribute is not specified");h.determineSplit(O[j],D,C)}const R=[],I=[0];for(let $=0;$<C.length;++$){$!==0&&I.push(I[$-1]+C[$-1]);const F=O.slice();F[j]=C[$],R.push(F)}return[R,I]}static determineSplit(O,j,C){if(O%j!=0)throw new Error("cannot split tensor to equal sized parts");for(let D=0;D<j;++D)C.push(O/j)}}e.SplitUtil=h;class _{static calcReduce(O,j,C,D,R){const I=O.dims.slice(0);j.length===0&&I.forEach(((ee,X)=>j.push(X)));const $=_.calcReduceShape(I,j,!0),F=o.size($),L=new b.Tensor($,O.type),V=o.computeStrides($),Y=o.computeStrides(I),Q=new Array(I.length);for(let ee=0;ee<F;ee++){const X=o.offsetToIndices(ee,V);v.fillIndex(X,I,Q),L.set(X,_.calcReduceByAxis(O.numberData,j,I,0,o.indicesToOffset(Q,Y),D,R))}return C?L:new b.Tensor(_.calcReduceShape(I,j,C),L.type,void 0,void 0,L.data,L.dataId)}static calcReduceByAxis(O,j,C,D,R,I,$){let F=0;if(D>=j.length)return I(O[R]);const L=j[D],V=L>=C.length?1:o.size(C.slice(L+1));for(let Y=0;Y<C[L];Y++)F=Y===0?_.calcReduceByAxis(O,j,C,D+1,R,I,$):$(F,_.calcReduceByAxis(O,j,C,D+1,R,I,$)),R+=V;return F}static calcReduceShape(O,j,C){const D=O.slice();for(let R=0;R<j.length;R++)D[j[R]]=C?1:0;return D.filter((R=>R!==0))}}e.ReduceUtil=_;class S{static adjustPoolAttributes(O,j,C,D,R,I){if(!O&&C.length!==j.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(O)for(let $=0;$<j.length-2;$++)$>=C.length?C.push(j[$+2]):C[$]=j[$+2];for(let $=0;$<C.length;$++)if($<D.length){if(D[$]<0)throw new Error("strides should be greater than or equal to 1")}else D.push(1);for(let $=0;$<C.length;$++)if($<R.length){if(R[$]<0)throw new Error("dilations should be greater than or equal to 1")}else R.push(1);for(let $=0;$<2*C.length;$++)if($<I.length){if(I[$]<0)throw new Error("pad should be greater than or equal to 1")}else I.push(0);for(let $=0;$<C.length;$++){if(C[$]<=0)throw new Error("kernel shapes need to be greater than 0");if(I[$]>=C[$]||I[$+C.length]>=C[$])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(O,j,C,D,R,I){if(I){if(R.length!==2*(O.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(j.length!==O.length-2)throw new Error("length of strides should be the length of data dimensions");if(D.length!==O.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let $=0;$<O.length-2;$++)S.adjustPadAndReturnShape(O[$+2],j[$],C[$],D[$],R,$,$+O.length-2,I)}}static computePoolOutputShape(O,j,C,D,R,I,$){if(j.length<=0)throw new Error("input shape must be of size greater than 0");const F=[j[0],j[1]];return S.computeShapeHelper(O,j,F,C,D,R,I,$),F}static computeConvOutputShape(O,j,C,D,R,I,$){if(O.length<=0||j.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const F=[O[0],j[0]];return S.computeShapeHelper(!1,O,F,C,D,R,I,$),F}static computeShapeHelper(O,j,C,D,R,I,$,F){if(O)for(let L=0;L<j.length-2;L++)C.push(1);else for(let L=0;L<j.length-2;L++)C.push(S.adjustPadAndReturnShape(j[L+2],D[L],R[L],I[L],$,L,L+j.length-2,F))}static adjustPadAndReturnShape(O,j,C,D,R,I,$,F){const L=C*(D-1)+1;if(!F||F==="NOTSET")return Math.floor((O+R[I]+R[$]-L)/j+1);switch(F){case"VALID":return R[I]=0,R[$]=0,Math.floor((O-L)/j+1);case"SAME_LOWER":case"SAME_UPPER":if(C!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const V=((O+j-1)/j-1)*j+D-O;return R[I]=Math.floor(F==="SAME_LOWER"?(V+1)/2:V/2),R[$]=V-R[I],Math.floor((O+V-D)/j+1)}default:throw new Error("Unsupported AutoPad type")}}}e.PoolConvUtil=S,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22,e.decodeUtf8String=function(T){return new TextDecoder().decode(T)}},7967:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(n,i,l,f)=>{if(typeof n=="object"&&n!==null){if(l.has(n))throw new Error("Circular reference in options");l.add(n)}Object.entries(n).forEach((([p,b])=>{const w=i?i+p:p;if(typeof b=="object")(0,e.iterateExtraOptions)(b,w+".",l,f);else if(typeof b=="string"||typeof b=="number")f(w,b.toString());else{if(typeof b!="boolean")throw new Error("Can't handle extra config type: "+typeof b);f(w,b?"1":"0")}}))}},2157:function(t,e,n){var i,l=this&&this.__createBinding||(Object.create?function(V,Y,Q,ee){ee===void 0&&(ee=Q);var X=Object.getOwnPropertyDescriptor(Y,Q);X&&!("get"in X?!Y.__esModule:X.writable||X.configurable)||(X={enumerable:!0,get:function(){return Y[Q]}}),Object.defineProperty(V,ee,X)}:function(V,Y,Q,ee){ee===void 0&&(ee=Q),V[ee]=Y[Q]}),f=this&&this.__setModuleDefault||(Object.create?function(V,Y){Object.defineProperty(V,"default",{enumerable:!0,value:Y})}:function(V,Y){V.default=Y}),p=this&&this.__importStar||function(V){if(V&&V.__esModule)return V;var Y={};if(V!=null)for(var Q in V)Q!=="default"&&Object.prototype.hasOwnProperty.call(V,Q)&&l(Y,V,Q);return f(Y,V),Y};Object.defineProperty(e,"__esModule",{value:!0}),e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=e.initWasm=void 0;const b=n(1670),w=p(n(349)),v=n(6361),g=()=>!!b.env.wasm.proxy&&typeof document<"u";let u,o,h,_=!1,S=!1,T=!1;const O=[],j=[],C=[],D=[],R=[],I=[],$=()=>{if(_||!S||T||!u)throw new Error("worker not ready")},F=V=>{switch(V.data.type){case"init-wasm":_=!1,V.data.err?(T=!0,o[1](V.data.err)):(S=!0,o[0]());break;case"init-ort":V.data.err?h[1](V.data.err):h[0]();break;case"create_allocate":V.data.err?O.shift()[1](V.data.err):O.shift()[0](V.data.out);break;case"create_finalize":V.data.err?j.shift()[1](V.data.err):j.shift()[0](V.data.out);break;case"create":V.data.err?C.shift()[1](V.data.err):C.shift()[0](V.data.out);break;case"release":V.data.err?D.shift()[1](V.data.err):D.shift()[0]();break;case"run":V.data.err?R.shift()[1](V.data.err):R.shift()[0](V.data.out);break;case"end-profiling":V.data.err?I.shift()[1](V.data.err):I.shift()[0]()}},L=typeof document<"u"?(i=document==null?void 0:document.currentScript)===null||i===void 0?void 0:i.src:void 0;e.initWasm=async()=>{if(g()){if(S)return;if(_)throw new Error("multiple calls to 'initWasm()' detected.");if(T)throw new Error("previous call to 'initWasm()' failed.");return _=!0,b.env.wasm.wasmPaths===void 0&&L&&L.indexOf("blob:")!==0&&(b.env.wasm.wasmPaths=L.substr(0,+L.lastIndexOf("/")+1)),new Promise(((V,Y)=>{u==null||u.terminate(),u=n(9710).Z(),u.onmessage=F,o=[V,Y];const Q={type:"init-wasm",in:b.env.wasm};u.postMessage(Q)}))}return(0,v.initializeWebAssembly)(b.env.wasm)},e.initOrt=async(V,Y)=>{if(g())return $(),new Promise(((Q,ee)=>{h=[Q,ee];const X={type:"init-ort",in:{numThreads:V,loggingLevel:Y}};u.postMessage(X)}));w.initOrt(V,Y)},e.createSessionAllocate=async V=>g()?($(),new Promise(((Y,Q)=>{O.push([Y,Q]);const ee={type:"create_allocate",in:{model:V}};u.postMessage(ee,[V.buffer])}))):w.createSessionAllocate(V),e.createSessionFinalize=async(V,Y)=>g()?($(),new Promise(((Q,ee)=>{j.push([Q,ee]);const X={type:"create_finalize",in:{modeldata:V,options:Y}};u.postMessage(X)}))):w.createSessionFinalize(V,Y),e.createSession=async(V,Y)=>g()?($(),new Promise(((Q,ee)=>{C.push([Q,ee]);const X={type:"create",in:{model:V,options:Y}};u.postMessage(X,[V.buffer])}))):w.createSession(V,Y),e.releaseSession=async V=>{if(g())return $(),new Promise(((Y,Q)=>{D.push([Y,Q]);const ee={type:"release",in:V};u.postMessage(ee)}));w.releaseSession(V)},e.run=async(V,Y,Q,ee,X)=>g()?($(),new Promise(((W,z)=>{R.push([W,z]);const q={type:"run",in:{sessionId:V,inputIndices:Y,inputs:Q,outputIndices:ee,options:X}};u.postMessage(q,w.extractTransferableBuffers(Q))}))):w.run(V,Y,Q,ee,X),e.endProfiling=async V=>{if(g())return $(),new Promise(((Y,Q)=>{I.push([Y,Q]);const ee={type:"end-profiling",in:V};u.postMessage(ee)}));w.endProfiling(V)}},586:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const i=n(7967),l=n(4983),f=n(6361);e.setRunOptions=p=>{const b=(0,f.getInstance)();let w=0;const v=[],g=p||{};try{if((p==null?void 0:p.logSeverityLevel)===void 0)g.logSeverityLevel=2;else if(typeof p.logSeverityLevel!="number"||!Number.isInteger(p.logSeverityLevel)||p.logSeverityLevel<0||p.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${p.logSeverityLevel}`);if((p==null?void 0:p.logVerbosityLevel)===void 0)g.logVerbosityLevel=0;else if(typeof p.logVerbosityLevel!="number"||!Number.isInteger(p.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${p.logVerbosityLevel}`);(p==null?void 0:p.terminate)===void 0&&(g.terminate=!1);let u=0;if((p==null?void 0:p.tag)!==void 0&&(u=(0,l.allocWasmString)(p.tag,v)),w=b._OrtCreateRunOptions(g.logSeverityLevel,g.logVerbosityLevel,!!g.terminate,u),w===0)throw new Error("Can't create run options");return(p==null?void 0:p.extra)!==void 0&&(0,i.iterateExtraOptions)(p.extra,"",new WeakSet,((o,h)=>{const _=(0,l.allocWasmString)(o,v),S=(0,l.allocWasmString)(h,v);if(b._OrtAddRunConfigEntry(w,_,S)!==0)throw new Error(`Can't set a run config entry: ${o} - ${h}`)})),[w,v]}catch(u){throw w!==0&&b._OrtReleaseRunOptions(w),v.forEach(b._free),u}}},2306:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxruntimeWebAssemblySessionHandler=void 0;const i=n(2806),l=n(1670),f=n(2850),p=n(2157);let b;e.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(w){const v=await fetch(w),g=await v.arrayBuffer();return(0,p.createSessionAllocate)(new Uint8Array(g))}async loadModel(w,v){if(b||(await(0,p.initOrt)(l.env.wasm.numThreads,(g=>{switch(g){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${g}`)}})(l.env.logLevel)),b=!0),typeof w=="string")if(typeof fetch>"u"){const g=await(0,f.promisify)(i.readFile)(w);[this.sessionId,this.inputNames,this.outputNames]=await(0,p.createSession)(g,v)}else{const g=await this.createSessionAllocate(w);[this.sessionId,this.inputNames,this.outputNames]=await(0,p.createSessionFinalize)(g,v)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,p.createSession)(w,v)}async dispose(){return(0,p.releaseSession)(this.sessionId)}async run(w,v,g){const u=[],o=[];Object.entries(w).forEach((T=>{const O=T[0],j=T[1],C=this.inputNames.indexOf(O);if(C===-1)throw new Error(`invalid input '${O}'`);u.push(j),o.push(C)}));const h=[];Object.entries(v).forEach((T=>{const O=T[0],j=this.outputNames.indexOf(O);if(j===-1)throw new Error(`invalid output '${O}'`);h.push(j)}));const _=await(0,p.run)(this.sessionId,o,u.map((T=>[T.type,T.dims,T.data])),h,g),S={};for(let T=0;T<_.length;T++)S[this.outputNames[h[T]]]=new l.Tensor(_[T][0],_[T][2],_[T][1]);return S}startProfiling(){}endProfiling(){(0,p.endProfiling)(this.sessionId)}}},4919:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const i=n(7967),l=n(4983),f=n(6361);e.setSessionOptions=p=>{const b=(0,f.getInstance)();let w=0;const v=[],g=p||{};(u=>{u.extra||(u.extra={}),u.extra.session||(u.extra.session={});const o=u.extra.session;o.use_ort_model_bytes_directly||(o.use_ort_model_bytes_directly="1")})(g);try{(p==null?void 0:p.graphOptimizationLevel)===void 0&&(g.graphOptimizationLevel="all");const u=(_=>{switch(_){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${_}`)}})(g.graphOptimizationLevel);(p==null?void 0:p.enableCpuMemArena)===void 0&&(g.enableCpuMemArena=!0),(p==null?void 0:p.enableMemPattern)===void 0&&(g.enableMemPattern=!0),(p==null?void 0:p.executionMode)===void 0&&(g.executionMode="sequential");const o=(_=>{switch(_){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${_}`)}})(g.executionMode);let h=0;if((p==null?void 0:p.logId)!==void 0&&(h=(0,l.allocWasmString)(p.logId,v)),(p==null?void 0:p.logSeverityLevel)===void 0)g.logSeverityLevel=2;else if(typeof p.logSeverityLevel!="number"||!Number.isInteger(p.logSeverityLevel)||p.logSeverityLevel<0||p.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${p.logSeverityLevel}`);if((p==null?void 0:p.logVerbosityLevel)===void 0)g.logVerbosityLevel=0;else if(typeof p.logVerbosityLevel!="number"||!Number.isInteger(p.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${p.logVerbosityLevel}`);if((p==null?void 0:p.enableProfiling)===void 0&&(g.enableProfiling=!1),w=b._OrtCreateSessionOptions(u,!!g.enableCpuMemArena,!!g.enableMemPattern,o,!!g.enableProfiling,0,h,g.logSeverityLevel,g.logVerbosityLevel),w===0)throw new Error("Can't create session options");return p!=null&&p.executionProviders&&((_,S,T)=>{for(const O of S){let j=typeof O=="string"?O:O.name;switch(j){case"xnnpack":j="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${j}`)}const C=(0,l.allocWasmString)(j,T);if((0,f.getInstance)()._OrtAppendExecutionProvider(_,C)!==0)throw new Error(`Can't append execution provider: ${j}`)}})(w,p.executionProviders,v),(p==null?void 0:p.extra)!==void 0&&(0,i.iterateExtraOptions)(p.extra,"",new WeakSet,((_,S)=>{const T=(0,l.allocWasmString)(_,v),O=(0,l.allocWasmString)(S,v);if(b._OrtAddSessionConfigEntry(w,T,O)!==0)throw new Error(`Can't set a session config entry: ${_} - ${S}`)})),[w,v]}catch(u){throw w!==0&&b._OrtReleaseSessionOptions(w),v.forEach(b._free),u}}},4983:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const i=n(6361);e.allocWasmString=(l,f)=>{const p=(0,i.getInstance)(),b=p.lengthBytesUTF8(l)+1,w=p._malloc(b);return p.stringToUTF8(l,w,b),f.push(w),w}},349:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const i=n(586),l=n(4919),f=n(4983),p=n(6361);e.initOrt=(u,o)=>{const h=(0,p.getInstance)()._OrtInit(u,o);if(h!==0)throw new Error(`Can't initialize onnxruntime. error code = ${h}`)};const b=new Map;e.createSessionAllocate=u=>{const o=(0,p.getInstance)(),h=o._malloc(u.byteLength);return o.HEAPU8.set(u,h),[h,u.byteLength]},e.createSessionFinalize=(u,o)=>{const h=(0,p.getInstance)();let _=0,S=0,T=[];try{if([S,T]=(0,l.setSessionOptions)(o),_=h._OrtCreateSession(u[0],u[1],S),_===0)throw new Error("Can't create a session")}finally{h._free(u[0]),h._OrtReleaseSessionOptions(S),T.forEach(h._free)}const O=h._OrtGetInputCount(_),j=h._OrtGetOutputCount(_),C=[],D=[],R=[],I=[];for(let $=0;$<O;$++){const F=h._OrtGetInputName(_,$);if(F===0)throw new Error("Can't get an input name");D.push(F),C.push(h.UTF8ToString(F))}for(let $=0;$<j;$++){const F=h._OrtGetOutputName(_,$);if(F===0)throw new Error("Can't get an output name");I.push(F),R.push(h.UTF8ToString(F))}return b.set(_,[_,D,I]),[_,C,R]},e.createSession=(u,o)=>{const h=(0,e.createSessionAllocate)(u);return(0,e.createSessionFinalize)(h,o)},e.releaseSession=u=>{const o=(0,p.getInstance)(),h=b.get(u);if(!h)throw new Error("invalid session id");const _=h[0],S=h[1],T=h[2];S.forEach(o._OrtFree),T.forEach(o._OrtFree),o._OrtReleaseSession(_),b.delete(u)};const w=u=>{switch(u){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${u}`)}},v=u=>{switch(u){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${u}`)}},g=u=>{switch(u){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${u}`)}};e.run=(u,o,h,_,S)=>{const T=(0,p.getInstance)(),O=b.get(u);if(!O)throw new Error("invalid session id");const j=O[0],C=O[1],D=O[2],R=o.length,I=_.length;let $=0,F=[];const L=[],V=[];try{[$,F]=(0,i.setRunOptions)(S);for(let z=0;z<R;z++){const q=h[z][0],ce=h[z][1],ae=h[z][2];let we,Z;if(Array.isArray(ae)){Z=4*ae.length,we=T._malloc(Z),V.push(we);let Re=we/4;for(let pe=0;pe<ae.length;pe++){if(typeof ae[pe]!="string")throw new TypeError(`tensor data at index ${pe} is not a string`);T.HEAPU32[Re++]=(0,f.allocWasmString)(ae[pe],V)}}else Z=ae.byteLength,we=T._malloc(Z),V.push(we),T.HEAPU8.set(new Uint8Array(ae.buffer,ae.byteOffset,Z),we);const ue=T.stackSave(),Pe=T.stackAlloc(4*ce.length);try{let Re=Pe/4;ce.forEach((Ae=>T.HEAP32[Re++]=Ae));const pe=T._OrtCreateTensor(w(q),we,Z,Pe,ce.length);if(pe===0)throw new Error("Can't create a tensor");L.push(pe)}finally{T.stackRestore(ue)}}const Y=T.stackSave(),Q=T.stackAlloc(4*R),ee=T.stackAlloc(4*R),X=T.stackAlloc(4*I),W=T.stackAlloc(4*I);try{let z=Q/4,q=ee/4,ce=X/4,ae=W/4;for(let ue=0;ue<R;ue++)T.HEAPU32[z++]=L[ue],T.HEAPU32[q++]=C[o[ue]];for(let ue=0;ue<I;ue++)T.HEAPU32[ce++]=0,T.HEAPU32[ae++]=D[_[ue]];let we=T._OrtRun(j,ee,Q,R,W,I,X,$);const Z=[];if(we===0)for(let ue=0;ue<I;ue++){const Pe=T.HEAPU32[X/4+ue],Re=T.stackSave(),pe=T.stackAlloc(16);let Ae,Ce=0;try{if(we=T._OrtGetTensorData(Pe,pe,pe+4,pe+8,pe+12),we!==0)throw new Error(`Can't access output tensor data. error code = ${we}`);let $e=pe/4;const se=T.HEAPU32[$e++];Ce=T.HEAPU32[$e++];const ke=T.HEAPU32[$e++],Ie=T.HEAPU32[$e++],de=[];for(let Fe=0;Fe<Ie;Fe++)de.push(T.HEAPU32[ke/4+Fe]);T._OrtFree(ke);const qe=de.length===0?1:de.reduce(((Fe,Ne)=>Fe*Ne));if(Ae=v(se),Ae==="string"){const Fe=[];let Ne=Ce/4;for(let Ge=0;Ge<qe;Ge++){const Ue=T.HEAPU32[Ne++],Ze=Ge===qe-1?void 0:T.HEAPU32[Ne]-Ue;Fe.push(T.UTF8ToString(Ue,Ze))}Z.push([Ae,de,Fe])}else{const Fe=new(g(Ae))(qe);new Uint8Array(Fe.buffer,Fe.byteOffset,Fe.byteLength).set(T.HEAPU8.subarray(Ce,Ce+Fe.byteLength)),Z.push([Ae,de,Fe])}}finally{T.stackRestore(Re),Ae==="string"&&Ce&&T._free(Ce),T._OrtReleaseTensor(Pe)}}if(we===0)return Z;throw new Error(`failed to call OrtRun(). error code = ${we}.`)}finally{T.stackRestore(Y)}}finally{L.forEach(T._OrtReleaseTensor),V.forEach(T._free),T._OrtReleaseRunOptions($),F.forEach(T._free)}},e.endProfiling=u=>{const o=(0,p.getInstance)(),h=b.get(u);if(!h)throw new Error("invalid session id");const _=h[0],S=o._OrtEndProfiling(_);if(S===0)throw new Error("Can't get an profile file name");o._OrtFree(S)},e.extractTransferableBuffers=u=>{const o=[];for(const h of u){const _=h[2];!Array.isArray(_)&&_.buffer&&o.push(_.buffer)}return o}},6361:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(S,T,O,j){j===void 0&&(j=O);var C=Object.getOwnPropertyDescriptor(T,O);C&&!("get"in C?!T.__esModule:C.writable||C.configurable)||(C={enumerable:!0,get:function(){return T[O]}}),Object.defineProperty(S,j,C)}:function(S,T,O,j){j===void 0&&(j=O),S[j]=T[O]}),l=this&&this.__setModuleDefault||(Object.create?function(S,T){Object.defineProperty(S,"default",{enumerable:!0,value:T})}:function(S,T){S.default=T}),f=this&&this.__importStar||function(S){if(S&&S.__esModule)return S;var T={};if(S!=null)for(var O in S)O!=="default"&&Object.prototype.hasOwnProperty.call(S,O)&&i(T,S,O);return l(T,S),T},p=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const b=f(n(6449)),w=p(n(932)),v=n(3474);let g,u=!1,o=!1,h=!1;const _=(S,T)=>T?S?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":S?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async S=>{if(u)return Promise.resolve();if(o)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(h)throw new Error("previous call to 'initializeWebAssembly()' failed.");o=!0;const T=S.initTimeout,O=S.numThreads,j=S.simd,C=O>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),D=j&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),R=typeof S.wasmPaths=="string"?S.wasmPaths:void 0,I=_(!1,C),$=_(D,C),F=typeof S.wasmPaths=="object"?S.wasmPaths[$]:void 0;let L=!1;const V=[];if(T>0&&V.push(new Promise((Y=>{setTimeout((()=>{L=!0,Y()}),T)}))),V.push(new Promise(((Y,Q)=>{const ee=C?v:w.default,X={locateFile:(W,z)=>C&&W.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([n(4154)],{type:"text/javascript"})):W===I?F??(R??z)+$:z+W};if(C)if(typeof Blob>"u")X.mainScriptUrlOrBlob=b.join("/","ort-wasm-threaded.js");else{const W=`var ortWasmThreaded=(function(){var _scriptDir;return ${ee.toString()}})();`;X.mainScriptUrlOrBlob=new Blob([W],{type:"text/javascript"})}ee(X).then((W=>{o=!1,u=!0,g=W,Y()}),(W=>{o=!1,h=!0,Q(W)}))}))),await Promise.race(V),L)throw new Error(`WebAssembly backend initializing failed due to timeout: ${T}ms`)},e.getInstance=()=>{if(u&&g)return g;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var S;!u||o||h||(o=!0,(S=g.PThread)===null||S===void 0||S.terminateAllThreads(),g=void 0,o=!1,u=!1,h=!0)}},9710:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(477),l=n.n(i);function f(){return l()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:t=>{t.exports=function(e,n,i,l){var f=self||window;try{try{var p;try{p=new f.Blob([e])}catch{(p=new(f.BlobBuilder||f.WebKitBlobBuilder||f.MozBlobBuilder||f.MSBlobBuilder)).append(e),p=p.getBlob()}var b=f.URL||f.webkitURL,w=b.createObjectURL(p),v=new f[n](w,i);return b.revokeObjectURL(w),v}catch{return new f[n]("data:application/javascript,".concat(encodeURIComponent(e)),i)}}catch{if(!l)throw Error("Inline worker is not supported");return new f[n](l,i)}}},4154:t=>{t.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},1670:t=>{t.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(t,e,n)=>{n.r(e),n.d(e,{flatbuffers:()=>i});var i={};i.Offset,i.Table,i.SIZEOF_SHORT=2,i.SIZEOF_INT=4,i.FILE_IDENTIFIER_LENGTH=4,i.SIZE_PREFIX_LENGTH=4,i.Encoding={UTF8_BYTES:1,UTF16_STRING:2},i.int32=new Int32Array(2),i.float32=new Float32Array(i.int32.buffer),i.float64=new Float64Array(i.int32.buffer),i.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,i.Long=function(l,f){this.low=0|l,this.high=0|f},i.Long.create=function(l,f){return l==0&&f==0?i.Long.ZERO:new i.Long(l,f)},i.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},i.Long.prototype.equals=function(l){return this.low==l.low&&this.high==l.high},i.Long.ZERO=new i.Long(0,0),i.Builder=function(l){if(l)f=l;else var f=1024;this.bb=i.ByteBuffer.allocate(f),this.space=f,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},i.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},i.Builder.prototype.forceDefaults=function(l){this.force_defaults=l},i.Builder.prototype.dataBuffer=function(){return this.bb},i.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},i.Builder.prototype.prep=function(l,f){l>this.minalign&&(this.minalign=l);for(var p=1+~(this.bb.capacity()-this.space+f)&l-1;this.space<p+l+f;){var b=this.bb.capacity();this.bb=i.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-b}this.pad(p)},i.Builder.prototype.pad=function(l){for(var f=0;f<l;f++)this.bb.writeInt8(--this.space,0)},i.Builder.prototype.writeInt8=function(l){this.bb.writeInt8(this.space-=1,l)},i.Builder.prototype.writeInt16=function(l){this.bb.writeInt16(this.space-=2,l)},i.Builder.prototype.writeInt32=function(l){this.bb.writeInt32(this.space-=4,l)},i.Builder.prototype.writeInt64=function(l){this.bb.writeInt64(this.space-=8,l)},i.Builder.prototype.writeFloat32=function(l){this.bb.writeFloat32(this.space-=4,l)},i.Builder.prototype.writeFloat64=function(l){this.bb.writeFloat64(this.space-=8,l)},i.Builder.prototype.addInt8=function(l){this.prep(1,0),this.writeInt8(l)},i.Builder.prototype.addInt16=function(l){this.prep(2,0),this.writeInt16(l)},i.Builder.prototype.addInt32=function(l){this.prep(4,0),this.writeInt32(l)},i.Builder.prototype.addInt64=function(l){this.prep(8,0),this.writeInt64(l)},i.Builder.prototype.addFloat32=function(l){this.prep(4,0),this.writeFloat32(l)},i.Builder.prototype.addFloat64=function(l){this.prep(8,0),this.writeFloat64(l)},i.Builder.prototype.addFieldInt8=function(l,f,p){(this.force_defaults||f!=p)&&(this.addInt8(f),this.slot(l))},i.Builder.prototype.addFieldInt16=function(l,f,p){(this.force_defaults||f!=p)&&(this.addInt16(f),this.slot(l))},i.Builder.prototype.addFieldInt32=function(l,f,p){(this.force_defaults||f!=p)&&(this.addInt32(f),this.slot(l))},i.Builder.prototype.addFieldInt64=function(l,f,p){!this.force_defaults&&f.equals(p)||(this.addInt64(f),this.slot(l))},i.Builder.prototype.addFieldFloat32=function(l,f,p){(this.force_defaults||f!=p)&&(this.addFloat32(f),this.slot(l))},i.Builder.prototype.addFieldFloat64=function(l,f,p){(this.force_defaults||f!=p)&&(this.addFloat64(f),this.slot(l))},i.Builder.prototype.addFieldOffset=function(l,f,p){(this.force_defaults||f!=p)&&(this.addOffset(f),this.slot(l))},i.Builder.prototype.addFieldStruct=function(l,f,p){f!=p&&(this.nested(f),this.slot(l))},i.Builder.prototype.nested=function(l){if(l!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},i.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},i.Builder.prototype.slot=function(l){this.vtable[l]=this.offset()},i.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},i.Builder.growByteBuffer=function(l){var f=l.capacity();if(3221225472&f)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var p=f<<1,b=i.ByteBuffer.allocate(p);return b.setPosition(p-f),b.bytes().set(l.bytes(),p-f),b},i.Builder.prototype.addOffset=function(l){this.prep(i.SIZEOF_INT,0),this.writeInt32(this.offset()-l+i.SIZEOF_INT)},i.Builder.prototype.startObject=function(l){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=l;for(var f=0;f<l;f++)this.vtable[f]=0;this.isNested=!0,this.object_start=this.offset()},i.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var l=this.offset(),f=this.vtable_in_use-1;f>=0&&this.vtable[f]==0;f--);for(var p=f+1;f>=0;f--)this.addInt16(this.vtable[f]!=0?l-this.vtable[f]:0);this.addInt16(l-this.object_start);var b=(p+2)*i.SIZEOF_SHORT;this.addInt16(b);var w=0,v=this.space;e:for(f=0;f<this.vtables.length;f++){var g=this.bb.capacity()-this.vtables[f];if(b==this.bb.readInt16(g)){for(var u=i.SIZEOF_SHORT;u<b;u+=i.SIZEOF_SHORT)if(this.bb.readInt16(v+u)!=this.bb.readInt16(g+u))continue e;w=this.vtables[f];break}}return w?(this.space=this.bb.capacity()-l,this.bb.writeInt32(this.space,w-l)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-l,this.offset()-l)),this.isNested=!1,l},i.Builder.prototype.finish=function(l,f,p){var b=p?i.SIZE_PREFIX_LENGTH:0;if(f){var w=f;if(this.prep(this.minalign,i.SIZEOF_INT+i.FILE_IDENTIFIER_LENGTH+b),w.length!=i.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+i.FILE_IDENTIFIER_LENGTH);for(var v=i.FILE_IDENTIFIER_LENGTH-1;v>=0;v--)this.writeInt8(w.charCodeAt(v))}this.prep(this.minalign,i.SIZEOF_INT+b),this.addOffset(l),b&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},i.Builder.prototype.finishSizePrefixed=function(l,f){this.finish(l,f,!0)},i.Builder.prototype.requiredField=function(l,f){var p=this.bb.capacity()-l,b=p-this.bb.readInt32(p);if(this.bb.readInt16(b+f)==0)throw new Error("FlatBuffers: field "+f+" must be set")},i.Builder.prototype.startVector=function(l,f,p){this.notNested(),this.vector_num_elems=f,this.prep(i.SIZEOF_INT,l*f),this.prep(p,l*f)},i.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},i.Builder.prototype.createString=function(l){if(l instanceof Uint8Array)var f=l;else{f=[];for(var p=0;p<l.length;){var b,w=l.charCodeAt(p++);(b=w<55296||w>=56320?w:(w<<10)+l.charCodeAt(p++)+-56613888)<128?f.push(b):(b<2048?f.push(b>>6&31|192):(b<65536?f.push(b>>12&15|224):f.push(b>>18&7|240,b>>12&63|128),f.push(b>>6&63|128)),f.push(63&b|128))}}this.addInt8(0),this.startVector(1,f.length,1),this.bb.setPosition(this.space-=f.length),p=0;for(var v=this.space,g=this.bb.bytes();p<f.length;p++)g[v++]=f[p];return this.endVector()},i.Builder.prototype.createLong=function(l,f){return i.Long.create(l,f)},i.ByteBuffer=function(l){this.bytes_=l,this.position_=0},i.ByteBuffer.allocate=function(l){return new i.ByteBuffer(new Uint8Array(l))},i.ByteBuffer.prototype.clear=function(){this.position_=0},i.ByteBuffer.prototype.bytes=function(){return this.bytes_},i.ByteBuffer.prototype.position=function(){return this.position_},i.ByteBuffer.prototype.setPosition=function(l){this.position_=l},i.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},i.ByteBuffer.prototype.readInt8=function(l){return this.readUint8(l)<<24>>24},i.ByteBuffer.prototype.readUint8=function(l){return this.bytes_[l]},i.ByteBuffer.prototype.readInt16=function(l){return this.readUint16(l)<<16>>16},i.ByteBuffer.prototype.readUint16=function(l){return this.bytes_[l]|this.bytes_[l+1]<<8},i.ByteBuffer.prototype.readInt32=function(l){return this.bytes_[l]|this.bytes_[l+1]<<8|this.bytes_[l+2]<<16|this.bytes_[l+3]<<24},i.ByteBuffer.prototype.readUint32=function(l){return this.readInt32(l)>>>0},i.ByteBuffer.prototype.readInt64=function(l){return new i.Long(this.readInt32(l),this.readInt32(l+4))},i.ByteBuffer.prototype.readUint64=function(l){return new i.Long(this.readUint32(l),this.readUint32(l+4))},i.ByteBuffer.prototype.readFloat32=function(l){return i.int32[0]=this.readInt32(l),i.float32[0]},i.ByteBuffer.prototype.readFloat64=function(l){return i.int32[i.isLittleEndian?0:1]=this.readInt32(l),i.int32[i.isLittleEndian?1:0]=this.readInt32(l+4),i.float64[0]},i.ByteBuffer.prototype.writeInt8=function(l,f){this.bytes_[l]=f},i.ByteBuffer.prototype.writeUint8=function(l,f){this.bytes_[l]=f},i.ByteBuffer.prototype.writeInt16=function(l,f){this.bytes_[l]=f,this.bytes_[l+1]=f>>8},i.ByteBuffer.prototype.writeUint16=function(l,f){this.bytes_[l]=f,this.bytes_[l+1]=f>>8},i.ByteBuffer.prototype.writeInt32=function(l,f){this.bytes_[l]=f,this.bytes_[l+1]=f>>8,this.bytes_[l+2]=f>>16,this.bytes_[l+3]=f>>24},i.ByteBuffer.prototype.writeUint32=function(l,f){this.bytes_[l]=f,this.bytes_[l+1]=f>>8,this.bytes_[l+2]=f>>16,this.bytes_[l+3]=f>>24},i.ByteBuffer.prototype.writeInt64=function(l,f){this.writeInt32(l,f.low),this.writeInt32(l+4,f.high)},i.ByteBuffer.prototype.writeUint64=function(l,f){this.writeUint32(l,f.low),this.writeUint32(l+4,f.high)},i.ByteBuffer.prototype.writeFloat32=function(l,f){i.float32[0]=f,this.writeInt32(l,i.int32[0])},i.ByteBuffer.prototype.writeFloat64=function(l,f){i.float64[0]=f,this.writeInt32(l,i.int32[i.isLittleEndian?0:1]),this.writeInt32(l+4,i.int32[i.isLittleEndian?1:0])},i.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+i.SIZEOF_INT+i.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var l="",f=0;f<i.FILE_IDENTIFIER_LENGTH;f++)l+=String.fromCharCode(this.readInt8(this.position_+i.SIZEOF_INT+f));return l},i.ByteBuffer.prototype.__offset=function(l,f){var p=l-this.readInt32(l);return f<this.readInt16(p)?this.readInt16(p+f):0},i.ByteBuffer.prototype.__union=function(l,f){return l.bb_pos=f+this.readInt32(f),l.bb=this,l},i.ByteBuffer.prototype.__string=function(l,f){l+=this.readInt32(l);var p=this.readInt32(l),b="",w=0;if(l+=i.SIZEOF_INT,f===i.Encoding.UTF8_BYTES)return this.bytes_.subarray(l,l+p);for(;w<p;){var v,g=this.readUint8(l+w++);if(g<192)v=g;else{var u=this.readUint8(l+w++);if(g<224)v=(31&g)<<6|63&u;else{var o=this.readUint8(l+w++);v=g<240?(15&g)<<12|(63&u)<<6|63&o:(7&g)<<18|(63&u)<<12|(63&o)<<6|63&this.readUint8(l+w++)}}v<65536?b+=String.fromCharCode(v):(v-=65536,b+=String.fromCharCode(55296+(v>>10),56320+(1023&v)))}return b},i.ByteBuffer.prototype.__indirect=function(l){return l+this.readInt32(l)},i.ByteBuffer.prototype.__vector=function(l){return l+this.readInt32(l)+i.SIZEOF_INT},i.ByteBuffer.prototype.__vector_len=function(l){return this.readInt32(l+this.readInt32(l))},i.ByteBuffer.prototype.__has_identifier=function(l){if(l.length!=i.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+i.FILE_IDENTIFIER_LENGTH);for(var f=0;f<i.FILE_IDENTIFIER_LENGTH;f++)if(l.charCodeAt(f)!=this.readInt8(this.position_+i.SIZEOF_INT+f))return!1;return!0},i.ByteBuffer.prototype.createLong=function(l,f){return i.Long.create(l,f)}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6018);return __webpack_exports__})()))})(ortWeb_min$1)),ortWeb_min$1.exports}var ortWeb_minExports=requireOrtWeb_min();const ortWeb_min=getDefaultExportFromCjs(ortWeb_minExports),ONNX_WEB=_mergeNamespaces({__proto__:null,default:ortWeb_min},[ortWeb_minExports]);let ONNX;const executionProviders=["wasm"];var Uf;typeof process<"u"&&((Uf=process==null?void 0:process.release)==null?void 0:Uf.name)==="node"?(ONNX=sharp??ONNX_NODE,executionProviders.unshift("cpu")):(ONNX=ortWeb_min??ONNX_WEB,typeof navigator<"u"&&/iP(hone|od|ad).+16_4.+AppleWebKit/.test(navigator.userAgent)&&(ONNX.env.wasm.simd=!1));const{env:onnx_env}=ONNX,VERSION="2.17.2",WEB_CACHE_AVAILABLE=typeof self<"u"&&"caches"in self,FS_AVAILABLE=!isEmpty(sharp),PATH_AVAILABLE=!isEmpty(sharp),RUNNING_LOCALLY=FS_AVAILABLE&&PATH_AVAILABLE,__dirname$1=RUNNING_LOCALLY?sharp.dirname(sharp.dirname(sharp.fileURLToPath(import.meta.url))):"./",DEFAULT_CACHE_DIR=RUNNING_LOCALLY?sharp.join(__dirname$1,"/.cache/"):null,DEFAULT_LOCAL_MODEL_PATH="/models/",localModelPath=RUNNING_LOCALLY?sharp.join(__dirname$1,DEFAULT_LOCAL_MODEL_PATH):DEFAULT_LOCAL_MODEL_PATH;onnx_env!=null&&onnx_env.wasm&&(onnx_env.wasm.wasmPaths=RUNNING_LOCALLY?sharp.join(__dirname$1,"/dist/"):`https://cdn.jsdelivr.net/npm/@xenova/transformers@${VERSION}/dist/`);const env$1={version:VERSION,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",localModelPath,useFS:FS_AVAILABLE,useBrowserCache:WEB_CACHE_AVAILABLE,useFSCache:FS_AVAILABLE,cacheDir:DEFAULT_CACHE_DIR};function isEmpty(t){return Object.keys(t).length===0}var define_process_env_default={};class FileResponse{constructor(e){De(this,"_CONTENT_TYPE_MAP",{txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"});if(this.filePath=e,this.headers=new Headers,this.exists=sharp.existsSync(e),this.exists){this.status=200,this.statusText="OK";let n=sharp.statSync(e);this.headers.set("content-length",n.size.toString()),this.updateContentType();let i=this;this.body=new ReadableStream({start(l){i.arrayBuffer().then(f=>{l.enqueue(new Uint8Array(f)),l.close()})}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const e=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",this._CONTENT_TYPE_MAP[e]??"application/octet-stream")}clone(){let e=new FileResponse(this.filePath);return e.exists=this.exists,e.status=this.status,e.statusText=this.statusText,e.headers=new Headers(this.headers),e}async arrayBuffer(){return(await sharp.promises.readFile(this.filePath)).buffer}async blob(){const e=await sharp.promises.readFile(this.filePath);return new Blob([e],{type:this.headers.get("content-type")})}async text(){return await sharp.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function isValidUrl(t,e=null,n=null){let i;try{i=new URL(t)}catch{return!1}return!(e&&!e.includes(i.protocol)||n&&!n.includes(i.hostname))}async function getFile(t){var e;if(env$1.useFS&&!isValidUrl(t,["http:","https:","blob:"]))return new FileResponse(t);if(typeof process<"u"&&((e=process==null?void 0:process.release)==null?void 0:e.name)==="node"){const n=!!(define_process_env_default!=null&&define_process_env_default.TESTING_REMOTELY),i=env$1.version,l=new Headers;if(l.set("User-Agent",`transformers.js/${i}; is_ci/${n};`),isValidUrl(t,["http:","https:"],["huggingface.co","hf.co"])){const p=(define_process_env_default==null?void 0:define_process_env_default.HF_TOKEN)??(define_process_env_default==null?void 0:define_process_env_default.HF_ACCESS_TOKEN);p&&l.set("Authorization",`Bearer ${p}`)}return fetch(t,{headers:l})}else return fetch(t)}const ERROR_MAPPING={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function handleError(t,e,n){if(!n)return null;const i=ERROR_MAPPING[t]??`Error (${t}) occurred while trying to load file`;throw Error(`${i}: "${e}".`)}class FileCache{constructor(e){this.path=e}async match(e){let n=sharp.join(this.path,e),i=new FileResponse(n);if(i.exists)return i}async put(e,n){const i=Buffer.from(await n.arrayBuffer());let l=sharp.join(this.path,e);try{await sharp.promises.mkdir(sharp.dirname(l),{recursive:!0}),await sharp.promises.writeFile(l,i)}catch(f){console.warn("An error occurred while writing the file to cache:",f)}}}async function tryCache(t,...e){for(let n of e)try{let i=await t.match(n);if(i)return i}catch{continue}}async function getModelFile(t,e,n=!0,i={}){dispatchCallback(i.progress_callback,{status:"initiate",name:t,file:e});let l;if(!l&&env$1.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{l=await caches.open("transformers-cache")}catch(O){console.warn("An error occurred while opening the browser cache:",O)}}!l&&env$1.useFSCache&&(l=new FileCache(i.cache_dir??env$1.cacheDir));const f=i.revision??"main";let p=pathJoin(t,e),b=pathJoin(env$1.localModelPath,p),w=pathJoin(env$1.remoteHost,env$1.remotePathTemplate.replaceAll("{model}",t).replaceAll("{revision}",encodeURIComponent(f)),e),v=f==="main"?p:pathJoin(t,f,e),g,u=l instanceof FileCache?v:w,o=!1,h;l&&(h=await tryCache(l,b,u));const _=h!==void 0;if(h===void 0){if(isValidUrl(p,["http:","https:"])){if(i.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${p}.`)}else try{h=await getFile(b),g=b}catch(j){console.warn(`Unable to load from local path "${b}": "${j}"`)}if(h===void 0||h.status===404){if(i.local_files_only){if(n)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${b}".`);return null}if(h=await getFile(w),h.status!==200)return handleError(h.status,w,n);g=u}o=l&&typeof Response<"u"&&h instanceof Response&&h.status===200}dispatchCallback(i.progress_callback,{status:"download",name:t,file:e});const S={status:"progress",name:t,file:e};let T;return i.progress_callback?_&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(T=new Uint8Array(await h.arrayBuffer()),dispatchCallback(i.progress_callback,{...S,progress:100,loaded:T.length,total:T.length})):T=await readResponse(h,O=>{dispatchCallback(i.progress_callback,{...S,...O})}):T=new Uint8Array(await h.arrayBuffer()),o&&g&&await l.match(g)===void 0&&await l.put(g,new Response(T,{headers:h.headers})).catch(O=>{console.warn(`Unable to add response to browser cache: ${O}.`)}),dispatchCallback(i.progress_callback,{status:"done",name:t,file:e}),T}async function getModelJSON(t,e,n=!0,i={}){let l=await getModelFile(t,e,n,i);if(l===null)return{};let p=new TextDecoder("utf-8").decode(l);return JSON.parse(p)}async function readResponse(t,e){const n=t.headers.get("Content-Length");n===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let i=parseInt(n??"0"),l=new Uint8Array(i),f=0;const p=t.body.getReader();async function b(){const{done:w,value:v}=await p.read();if(w)return;let g=f+v.length;if(g>i){i=g;let o=new Uint8Array(i);o.set(l),l=o}l.set(v,f),f=g;const u=f/i*100;return e({progress:u,loaded:f,total:i}),b()}return await b(),l}function pathJoin(...t){return t=t.map((e,n)=>(n&&(e=e.replace(new RegExp("^/"),"")),n!==t.length-1&&(e=e.replace(new RegExp("/$"),"")),e)),t.join("/")}function interpolate_data(t,[e,n,i],[l,f],p="bilinear",b=!1){const w=f/i,v=l/n,g=new t.constructor(l*f*e),u=n*i,o=l*f;for(let h=0;h<l;++h)for(let _=0;_<f;++_){const S=h*f+_,T=(_+.5)/w-.5,O=(h+.5)/v-.5;let j=Math.floor(T),C=Math.floor(O);const D=Math.min(j+1,i-1),R=Math.min(C+1,n-1);j=Math.max(j,0),C=Math.max(C,0);const I=T-j,$=O-C,F=(1-I)*(1-$),L=I*(1-$),V=(1-I)*$,Y=I*$,Q=C*i,ee=R*i,X=Q+j,W=Q+D,z=ee+j,q=ee+D;for(let ce=0;ce<e;++ce){const ae=ce*u;g[ce*o+S]=F*t[ae+X]+L*t[ae+W]+V*t[ae+z]+Y*t[ae+q]}}return g}function permute_data(t,e,n){const i=new Array(n.length),l=new Array(n.length);for(let b=n.length-1,w=1;b>=0;--b)l[b]=w,i[b]=e[n[b]],w*=i[b];const f=n.map((b,w)=>l[n.indexOf(w)]),p=new t.constructor(t.length);for(let b=0;b<t.length;++b){let w=0;for(let v=e.length-1,g=b;v>=0;--v)w+=g%e[v]*f[v],g=Math.floor(g/e[v]);p[w]=t[b]}return[p,i]}function softmax(t){const e=max$1(t)[0],n=t.map(f=>Math.exp(f-e)),i=n.reduce((f,p)=>f+p,0);return n.map(f=>f/i)}function log_softmax(t){return softmax(t).map(i=>Math.log(i))}function getTopItems(t,e=0){return t=Array.from(t).map((n,i)=>[i,n]).sort((n,i)=>i[1]-n[1]),e!==null&&e>0&&(t=t.slice(0,e)),t}function min$1(t){if(t.length===0)throw Error("Array must not be empty");let e=t[0],n=0;for(let i=1;i<t.length;++i)t[i]<e&&(e=t[i],n=i);return[e,n]}function max$1(t){if(t.length===0)throw Error("Array must not be empty");let e=t[0],n=0;for(let i=1;i<t.length;++i)t[i]>e&&(e=t[i],n=i);return[Number(e),n]}function isPowerOfTwo(t){return t>0&&(t&t-1)===0}class P2FFT{constructor(e){if(this.size=e|0,this.size<=1||!isPowerOfTwo(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=e<<1,this.table=new Float64Array(this.size*2);for(let i=0;i<this.table.length;i+=2){const l=Math.PI*i/this.size;this.table[i]=Math.cos(l),this.table[i+1]=-Math.sin(l)}let n=0;for(let i=1;this.size>i;i<<=1)++n;this._width=n%2===0?n-1:n,this._bitrev=new Int32Array(1<<this._width);for(let i=0;i<this._bitrev.length;++i){this._bitrev[i]=0;for(let l=0;l<this._width;l+=2){const f=this._width-l-2;this._bitrev[i]|=(i>>>l&3)<<f}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(e,n){const i=n||new Array(e.length>>>1);for(let l=0;l<e.length;l+=2)i[l>>>1]=e[l];return i}toComplexArray(e,n){const i=n||this.createComplexArray();for(let l=0;l<i.length;l+=2)i[l]=e[l>>>1],i[l+1]=0;return i}transform(e,n){if(e===n)throw new Error("Input and output buffers must be different");this._transform4(e,n,1)}realTransform(e,n){if(e===n)throw new Error("Input and output buffers must be different");this._realTransform4(e,n,1)}inverseTransform(e,n){if(e===n)throw new Error("Input and output buffers must be different");this._transform4(e,n,-1);for(let i=0;i<e.length;++i)e[i]/=this.size}_transform4(e,n,i){const l=this._csize;let p=1<<this._width,b=l/p<<1,w,v;const g=this._bitrev;if(b===4)for(w=0,v=0;w<l;w+=b,++v){const o=g[v];this._singleTransform2(n,e,w,o,p)}else for(w=0,v=0;w<l;w+=b,++v){const o=g[v];this._singleTransform4(n,e,w,o,p,i)}const u=this.table;for(p>>=2;p>=2;p>>=2){b=l/p<<1;const o=b>>>2;for(w=0;w<l;w+=b){const h=w+o-1;for(let _=w,S=0;_<h;_+=2,S+=p){const T=_,O=T+o,j=O+o,C=j+o,D=e[T],R=e[T+1],I=e[O],$=e[O+1],F=e[j],L=e[j+1],V=e[C],Y=e[C+1],Q=u[S],ee=i*u[S+1],X=I*Q-$*ee,W=I*ee+$*Q,z=u[2*S],q=i*u[2*S+1],ce=F*z-L*q,ae=F*q+L*z,we=u[3*S],Z=i*u[3*S+1],ue=V*we-Y*Z,Pe=V*Z+Y*we,Re=D+ce,pe=R+ae,Ae=D-ce,Ce=R-ae,$e=X+ue,se=W+Pe,ke=i*(X-ue),Ie=i*(W-Pe);e[T]=Re+$e,e[T+1]=pe+se,e[O]=Ae+Ie,e[O+1]=Ce-ke,e[j]=Re-$e,e[j+1]=pe-se,e[C]=Ae-Ie,e[C+1]=Ce+ke}}}}_singleTransform2(e,n,i,l,f){const p=e[l],b=e[l+1],w=e[l+f],v=e[l+f+1];n[i]=p+w,n[i+1]=b+v,n[i+2]=p-w,n[i+3]=b-v}_singleTransform4(e,n,i,l,f,p){const b=f*2,w=f*3,v=e[l],g=e[l+1],u=e[l+f],o=e[l+f+1],h=e[l+b],_=e[l+b+1],S=e[l+w],T=e[l+w+1],O=v+h,j=g+_,C=v-h,D=g-_,R=u+S,I=o+T,$=p*(u-S),F=p*(o-T);n[i]=O+R,n[i+1]=j+I,n[i+2]=C+F,n[i+3]=D-$,n[i+4]=O-R,n[i+5]=j-I,n[i+6]=C-F,n[i+7]=D+$}_realTransform4(e,n,i){const l=this._csize;let p=1<<this._width,b=l/p<<1,w,v;const g=this._bitrev;if(b===4)for(w=0,v=0;w<l;w+=b,++v){const h=g[v];this._singleRealTransform2(n,e,w,h>>>1,p>>>1)}else for(w=0,v=0;w<l;w+=b,++v){const h=g[v];this._singleRealTransform4(n,e,w,h>>>1,p>>>1,i)}const u=this.table;for(p>>=2;p>=2;p>>=2){b=l/p<<1;const h=b>>>1,_=h>>>1,S=_>>>1;for(w=0;w<l;w+=b)for(let T=0,O=0;T<=S;T+=2,O+=p){const j=w+T,C=j+_,D=C+_,R=D+_,I=e[j],$=e[j+1],F=e[C],L=e[C+1],V=e[D],Y=e[D+1],Q=e[R],ee=e[R+1],X=I,W=$,z=u[O],q=i*u[O+1],ce=F*z-L*q,ae=F*q+L*z,we=u[2*O],Z=i*u[2*O+1],ue=V*we-Y*Z,Pe=V*Z+Y*we,Re=u[3*O],pe=i*u[3*O+1],Ae=Q*Re-ee*pe,Ce=Q*pe+ee*Re,$e=X+ue,se=W+Pe,ke=X-ue,Ie=W-Pe,de=ce+Ae,qe=ae+Ce,Fe=i*(ce-Ae),Ne=i*(ae-Ce);if(e[j]=$e+de,e[j+1]=se+qe,e[C]=ke+Ne,e[C+1]=Ie-Fe,T===0){e[D]=$e-de,e[D+1]=se-qe;continue}if(T===S)continue;const Ge=w+_-T,Ue=w+h-T;e[Ge]=ke-i*Ne,e[Ge+1]=-Ie-i*Fe,e[Ue]=$e-i*de,e[Ue+1]=-se+i*qe}}const o=l>>>1;for(let h=2;h<o;h+=2)e[l-h]=e[h],e[l-h+1]=-e[h+1]}_singleRealTransform2(e,n,i,l,f){const p=e[l],b=e[l+f];n[i]=p+b,n[i+1]=0,n[i+2]=p-b,n[i+3]=0}_singleRealTransform4(e,n,i,l,f,p){const b=f*2,w=f*3,v=e[l],g=e[l+f],u=e[l+b],o=e[l+w],h=v+u,_=v-u,S=g+o,T=p*(g-o);n[i]=h+S,n[i+1]=0,n[i+2]=_,n[i+3]=-T,n[i+4]=h-S,n[i+5]=0,n[i+6]=_,n[i+7]=T}}class NP2FFT{constructor(e){const n=2*(e-1),i=2*(2*e-1),l=2**Math.ceil(Math.log2(i));this.bufferSize=l,this._a=n;const f=new Float64Array(i),p=new Float64Array(l);this._chirpBuffer=new Float64Array(l),this._buffer1=new Float64Array(l),this._buffer2=new Float64Array(l),this._outBuffer1=new Float64Array(l),this._outBuffer2=new Float64Array(l);const b=-2*Math.PI/e,w=Math.cos(b),v=Math.sin(b);for(let g=0;g<i>>1;++g){const u=(g+1-e)**2/2,o=Math.sqrt(w**2+v**2)**u,h=u*Math.atan2(v,w),_=2*g;f[_]=o*Math.cos(h),f[_+1]=o*Math.sin(h),p[_]=f[_],p[_+1]=-f[_+1]}this._slicedChirpBuffer=f.subarray(n,i),this._f=new P2FFT(l>>1),this._f.transform(this._chirpBuffer,p)}_transform(e,n,i){const l=this._buffer1,f=this._buffer2,p=this._outBuffer1,b=this._outBuffer2,w=this._chirpBuffer,v=this._slicedChirpBuffer,g=this._a;if(i)for(let u=0;u<v.length;u+=2){const o=u+1,h=u>>1,_=n[h];l[u]=_*v[u],l[o]=_*v[o]}else for(let u=0;u<v.length;u+=2){const o=u+1;l[u]=n[u]*v[u]-n[o]*v[o],l[o]=n[u]*v[o]+n[o]*v[u]}this._f.transform(p,l);for(let u=0;u<w.length;u+=2){const o=u+1;f[u]=p[u]*w[u]-p[o]*w[o],f[o]=p[u]*w[o]+p[o]*w[u]}this._f.inverseTransform(b,f);for(let u=0;u<b.length;u+=2){const o=b[u+g],h=b[u+g+1],_=v[u],S=v[u+1];e[u]=o*_-h*S,e[u+1]=o*S+h*_}}transform(e,n){this._transform(e,n,!1)}realTransform(e,n){this._transform(e,n,!0)}}class FFT{constructor(e){this.fft_length=e,this.isPowerOfTwo=isPowerOfTwo(e),this.isPowerOfTwo?(this.fft=new P2FFT(e),this.outputBufferSize=2*e):(this.fft=new NP2FFT(e),this.outputBufferSize=this.fft.bufferSize)}realTransform(e,n){this.fft.realTransform(e,n)}transform(e,n){this.fft.transform(e,n)}}function medianFilter(t,e){if(e%2===0||e<=0)throw new Error("Window size must be a positive odd number");const n=new t.constructor(t.length),i=new t.constructor(e),l=Math.floor(e/2);for(let f=0;f<t.length;++f){let p=0;for(let b=-l;b<=l;++b){let w=f+b;w<0?w=Math.abs(w):w>=t.length&&(w=2*(t.length-1)-w),i[p++]=t[w]}i.sort(),n[f]=i[l]}return n}function round$1(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function bankers_round(t){const e=Math.round(t);return Math.abs(t)%1===.5?e%2===0?e:e-1:e}const DataTypeMap=Object.freeze({float32:Float32Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array}),ONNXTensor$1=ONNX.Tensor;class Tensor{constructor(...e){De(this,"dims");De(this,"type");De(this,"data");De(this,"size");return e[0]instanceof ONNXTensor$1?Object.assign(this,e[0]):Object.assign(this,new ONNXTensor$1(e[0],e[1],e[2])),new Proxy(this,{get:(n,i)=>{if(typeof i=="string"){let l=Number(i);if(Number.isInteger(l))return n._getitem(l)}return n[i]},set:(n,i,l)=>n[i]=l})}*[Symbol.iterator](){const[e,...n]=this.dims;if(n.length>0){const i=n.reduce((l,f)=>l*f);for(let l=0;l<e;++l)yield this._subarray(l,i,n)}else yield*this.data}_getitem(e){const[n,...i]=this.dims;if(e=safeIndex(e,n),i.length>0){const l=i.reduce((f,p)=>f*p);return this._subarray(e,l,i)}else return new Tensor(this.type,[this.data[e]],i)}indexOf(e){for(let n=0;n<this.data.length;++n)if(this.data[n]==e)return n;return-1}_subarray(e,n,i){const l=e*n,f=(e+1)*n,p="subarray"in this.data?this.data.subarray(l,f):this.data.slice(l,f);return new Tensor(this.type,p,i)}item(){if(this.data.length!==1)throw new Error(`a Tensor with ${this.data.length} elements cannot be converted to Scalar`);return this.data[0]}tolist(){return reshape(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){for(let e=0;e<this.data.length;++e)this.data[e]=1/(1+Math.exp(-this.data[e]));return this}mul(e){return this.clone().mul_(e)}mul_(e){for(let n=0;n<this.data.length;++n)this.data[n]*=e;return this}add(e){return this.clone().add_(e)}add_(e){for(let n=0;n<this.data.length;++n)this.data[n]+=e;return this}clone(){return new Tensor(this.type,this.data.slice(),this.dims.slice())}slice(...e){let n=[],i=[];for(let w=0;w<this.dims.length;++w){let v=e[w];if(v==null)i.push([0,this.dims[w]]),n.push(this.dims[w]);else if(typeof v=="number")v=safeIndex(v,this.dims[w],w),i.push([v,v+1]);else if(Array.isArray(v)&&v.length===2){if(v[0]>v[1])throw new Error(`Invalid slice: ${v}`);let g=[Math.max(v[0],0),Math.min(v[1],this.dims[w])];i.push(g),n.push(g[1]-g[0])}else throw new Error(`Invalid slice: ${v}`)}let l=i.map(([w,v])=>v-w),f=l.reduce((w,v)=>w*v),p=new this.data.constructor(f);const b=this.stride();for(let w=0;w<f;++w){let v=0;for(let g=l.length-1,u=w;g>=0;--g){const o=l[g];v+=(u%o+i[g][0])*b[g],u=Math.floor(u/o)}p[w]=this.data[v]}return new Tensor(this.type,p,n)}permute(...e){return permute(this,e)}transpose(...e){return this.permute(...e)}sum(e=null,n=!1){return this.norm(1,e,n)}norm(e="fro",n=null,i=!1){if(e==="fro")e=2;else if(typeof e=="string")throw Error(`Unsupported norm: ${e}`);if(n===null){let p=this.data.reduce((b,w)=>b+w**e,0)**(1/e);return new Tensor(this.type,[p],[])}n=safeIndex(n,this.dims.length);const l=this.dims.slice();l[n]=1;const f=new this.data.constructor(this.data.length/this.dims[n]);for(let p=0;p<this.data.length;++p){let b=0;for(let w=this.dims.length-1,v=p,g=1;w>=0;--w){const u=this.dims[w];if(w!==n){const o=v%u;b+=o*g,g*=l[w]}v=Math.floor(v/u)}f[b]+=this.data[p]**e}if(e!==1)for(let p=0;p<f.length;++p)f[p]=f[p]**(1/e);return i||l.splice(n,1),new Tensor(this.type,f,l)}normalize_(e=2,n=1){n=safeIndex(n,this.dims.length);const i=this.norm(e,n,!0);for(let l=0;l<this.data.length;++l){let f=0;for(let p=this.dims.length-1,b=l,w=1;p>=0;--p){const v=this.dims[p];if(p!==n){const g=b%v;f+=g*w,w*=this.dims[p]}b=Math.floor(b/v)}this.data[l]/=i.data[f]}return this}normalize(e=2,n=1){return this.clone().normalize_(e,n)}stride(){return dimsToStride(this.dims)}squeeze(e=null){return new Tensor(this.type,this.data,calc_squeeze_dims(this.dims,e))}squeeze_(e=null){return this.dims=calc_squeeze_dims(this.dims,e),this}unsqueeze(e=null){return new Tensor(this.type,this.data,calc_unsqueeze_dims(this.dims,e))}unsqueeze_(e=null){return this.dims=calc_unsqueeze_dims(this.dims,e),this}flatten_(e=0,n=-1){n=(n+this.dims.length)%this.dims.length;let i=this.dims.slice(0,e),l=this.dims.slice(e,n+1),f=this.dims.slice(n+1);return this.dims=[...i,l.reduce((p,b)=>p*b,1),...f],this}flatten(e=0,n=-1){return this.clone().flatten_(e,n)}view(...e){let n=-1;for(let i=0;i<e.length;++i)if(e[i]===-1){if(n!==-1)throw new Error("Only one dimension can be inferred");n=i}if(n!==-1){const i=e.reduce((l,f,p)=>p!==n?l*f:l,1);e[n]=this.data.length/i}return new Tensor(this.type,this.data,e)}neg_(){for(let e=0;e<this.data.length;++e)this.data[e]=-this.data[e];return this}neg(){return this.clone().neg_()}clamp_(e,n){for(let i=0;i<this.data.length;++i)this.data[i]=Math.min(Math.max(this.data[i],e),n);return this}clamp(e,n){return this.clone().clamp_(e,n)}round_(){for(let e=0;e<this.data.length;++e)this.data[e]=Math.round(this.data[e]);return this}round(){return this.clone().round_()}to(e){if(this.type===e)return this;if(!DataTypeMap.hasOwnProperty(e))throw new Error(`Unsupported type: ${e}`);return new Tensor(e,DataTypeMap[e].from(this.data),this.dims)}}function reshape(t,e){const n=t.length,i=e.reduce((f,p)=>f*p);if(n!==i)throw Error(`cannot reshape array of size ${n} into shape (${e})`);let l=t;for(let f=e.length-1;f>=0;f--)l=l.reduce((p,b)=>{let w=p[p.length-1];return w.length<e[f]?w.push(b):p.push([b]),p},[[]]);return l[0]}function permute(t,e){const[n,i]=permute_data(t.data,t.dims,e);return new Tensor(t.type,n,i)}function interpolate$2(t,[e,n],i="bilinear",l=!1){const f=t.dims.at(-3)??1,p=t.dims.at(-2),b=t.dims.at(-1);let w=interpolate_data(t.data,[f,p,b],[e,n],i,l);return new Tensor(t.type,w,[f,e,n])}function mean_pooling(t,e){let n=[t.dims[0],t.dims[2]],i=new t.data.constructor(n[0]*n[1]),[l,f,p]=t.dims,b=0;for(let w=0;w<l;++w){let v=w*p*f;for(let g=0;g<p;++g){let u=0,o=0,h=w*f,_=v+g;for(let T=0;T<f;++T){let O=Number(e.data[h+T]);o+=O,u+=t.data[_+T*p]*O}let S=u/o;i[b++]=S}}return new Tensor(t.type,i,n)}function calc_squeeze_dims(t,e){return t=t.slice(),e===null?t=t.filter(n=>n!==1):typeof e=="number"?t[e]===1&&t.splice(e,1):Array.isArray(e)&&(t=t.filter((n,i)=>n!==1||!e.includes(i))),t}function calc_unsqueeze_dims(t,e){return e=safeIndex(e,t.length+1),t=t.slice(),t.splice(e,0,1),t}function safeIndex(t,e,n=null){if(t<-e||t>=e)throw new Error(`IndexError: index ${t} is out of bounds for dimension${n===null?"":" "+n} with size ${e}`);return t<0&&(t=(t%e+e)%e),t}function cat(t,e=0){e=safeIndex(e,t[0].dims.length);const n=t[0].dims.slice();n[e]=t.reduce((p,b)=>p+b.dims[e],0);const i=n.reduce((p,b)=>p*b,1),l=new t[0].data.constructor(i),f=t[0].type;if(e===0){let p=0;for(let b of t)l.set(b.data,p),p+=b.data.length}else{let p=0;for(let b=0;b<t.length;++b){let w=t[b];for(let v=0;v<w.data.length;++v){let g=0;for(let u=w.dims.length-1,o=v,h=1;u>=0;--u){const _=w.dims[u];let S=o%_;u===e&&(S+=p),g+=S*h,h*=n[u],o=Math.floor(o/_)}l[g]=w.data[v]}p+=w.dims[e]}}return new Tensor(f,l,n)}function stack(t,e=0){return cat(t.map(n=>n.unsqueeze(e)),e)}function std_mean(t,e=null,n=1,i=!1){if(e===null){const v=t.data.reduce((h,_)=>h+_,0)/t.data.length,g=Math.sqrt(t.data.reduce((h,_)=>h+(_-v)**2,0)/(t.data.length-n)),u=new Tensor(t.type,[v],[]);return[new Tensor(t.type,[g],[]),u]}e=safeIndex(e,t.dims.length);const l=mean(t,e,i),f=t.dims.slice();f[e]=1;const p=new t.data.constructor(t.data.length/t.dims[e]);for(let w=0;w<t.data.length;++w){let v=0;for(let g=t.dims.length-1,u=w,o=1;g>=0;--g){const h=t.dims[g];if(g!==e){const _=u%h;v+=_*o,o*=f[g]}u=Math.floor(u/h)}p[v]+=(t.data[w]-l.data[v])**2}for(let w=0;w<p.length;++w)p[w]=Math.sqrt(p[w]/(t.dims[e]-n));return i||f.splice(e,1),[new Tensor(t.type,p,f),l]}function mean(t,e=null,n=!1){if(e===null){let f=t.data.reduce((p,b)=>p+b,0);return new Tensor(t.type,[f/t.data.length],[])}e=safeIndex(e,t.dims.length);const i=t.dims.slice();i[e]=1;const l=new t.data.constructor(t.data.length/t.dims[e]);for(let f=0;f<t.data.length;++f){let p=0;for(let b=t.dims.length-1,w=f,v=1;b>=0;--b){const g=t.dims[b];if(b!==e){const u=w%g;p+=u*v,v*=i[b]}w=Math.floor(w/g)}l[p]+=t.data[f]}if(t.dims[e]!==1)for(let f=0;f<l.length;++f)l[f]=l[f]/t.dims[e];return n||i.splice(e,1),new Tensor(t.type,l,i)}function dynamicTimeWarping(t){const[e,n]=t.dims,i=[e+1,n+1],l=new Tensor("float32",new Float32Array(i[0]*i[1]).fill(1/0),i),f=new Tensor("float32",new Float32Array(i[0]*i[1]).fill(-1),i);l[0].data[0]=0;for(let g=1;g<n+1;++g)for(let u=1;u<e+1;++u){const o=l[u-1][g-1].item(),h=l[u-1][g].item(),_=l[u][g-1].item();let S,T;o<h&&o<_?(S=o,T=0):h<o&&h<_?(S=h,T=1):(S=_,T=2),l[u].data[g]=t[u-1][g-1].item()+S,f[u].data[g]=T}let p=e,b=n;f.data.fill(2,0,i[1]);for(let g=0;g<i[0];++g)f[g].data[0]=1;let w=[],v=[];for(;p>0||b>0;)switch(w.push(p-1),v.push(b-1),f[p][b].item()){case 0:--p,--b;break;case 1:--p;break;case 2:--b;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${p}, ${b}]. Please file a bug report.`)}return w.reverse(),v.reverse(),[w,v]}function dimsToStride(t){const e=new Array(t.length);for(let n=t.length-1,i=1;n>=0;--n)e[n]=i,i*=t[n];return e}function ones(t){const e=t.reduce((n,i)=>n*i,1);return new Tensor("int64",new BigInt64Array(e).fill(1n),t)}function ones_like(t){return ones(t.dims)}function quantize_embeddings(t,e){if(t.dims.length!==2)throw new Error("The tensor must have 2 dimensions");if(t.dims.at(-1)%8!==0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(e))throw new Error("The precision must be either 'binary' or 'ubinary'");const n=e==="binary",i=n?"int8":"uint8",l=n?Int8Array:Uint8Array,f=t.data,p=new l(f.length/8);for(let b=0;b<f.length;++b){const w=f[b]>0?1:0,v=Math.floor(b/8),g=b%8;p[v]|=w<<7-g,n&&g===0&&(p[v]-=128)}return new Tensor(i,p,[t.dims[0],t.dims[1]/8])}class PriorityQueue{constructor(e=(n,i)=>n>i){this._heap=[],this._comparator=e}get size(){return this._heap.length}isEmpty(){return this.size===0}peek(){return this._heap[0]}push(...e){return this.extend(e)}extend(e){for(const n of e)this._heap.push(n),this._siftUp();return this.size}pop(){const e=this.peek(),n=this.size-1;return n>0&&this._swap(0,n),this._heap.pop(),this._siftDown(),e}replace(e){const n=this.peek();return this._heap[0]=e,this._siftDown(),n}_parent(e){return(e+1>>>1)-1}_left(e){return(e<<1)+1}_right(e){return e+1<<1}_greater(e,n){return this._comparator(this._heap[e],this._heap[n])}_swap(e,n){const i=this._heap[e];this._heap[e]=this._heap[n],this._heap[n]=i}_siftUp(){let e=this.size-1;for(;e>0&&this._greater(e,this._parent(e));)this._swap(e,this._parent(e)),e=this._parent(e)}_siftDown(){let e=0;for(;this._left(e)<this.size&&this._greater(this._left(e),e)||this._right(e)<this.size&&this._greater(this._right(e),e);){const n=this._right(e)<this.size&&this._greater(this._right(e),this._left(e))?this._right(e):this._left(e);this._swap(e,n),e=n}}}class CharTrie{constructor(){this.root=CharTrieNode.default()}extend(e){for(let n of e)this.push(n)}push(e){let n=this.root;for(let i of e){let l=n.children.get(i);l===void 0&&(l=CharTrieNode.default(),n.children.set(i,l)),n=l}n.isLeaf=!0}*commonPrefixSearch(e){let n=this.root,i="";for(let l=0;l<e.length&&n!==void 0;++l){const f=e[l];i+=f,n=n.children.get(f),n!==void 0&&n.isLeaf&&(yield i)}}}class CharTrieNode{constructor(e,n){this.isLeaf=e,this.children=n}static default(){return new CharTrieNode(!1,new Map)}}class TokenLattice{constructor(e,n,i){this.sentence=e,this.len=e.length,this.bosTokenId=n,this.eosTokenId=i,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const l=new TokenLatticeNode(this.bosTokenId,0,0,0,0),f=new TokenLatticeNode(this.eosTokenId,1,this.len,0,0);this.nodes.push(l.clone()),this.nodes.push(f.clone()),this.beginNodes[this.len].push(f),this.endNodes[0].push(l)}insert(e,n,i,l){const f=this.nodes.length,p=new TokenLatticeNode(l,f,e,n,i);this.beginNodes[e].push(p),this.endNodes[e+n].push(p),this.nodes.push(p)}viterbi(){const e=this.len;let n=0;for(;n<=e;){if(this.beginNodes[n].length==0)return[];for(let b of this.beginNodes[n]){b.prev=null;let w=0,v=null;for(let g of this.endNodes[n]){const u=g.backtraceScore+b.score;(v===null||u>w)&&(v=g.clone(),w=u)}if(v!==null)b.prev=v,b.backtraceScore=w;else return[]}++n}const i=[],f=this.beginNodes[e][0].prev;if(f===null)return[];let p=f.clone();for(;p.prev!==null;)i.push(p.clone()),p=p.clone().prev.clone();return i.reverse(),i}piece(e){return this.sentence.slice(e.pos,e.pos+e.length)}tokens(){return this.viterbi().map(n=>this.piece(n))}tokenIds(){return this.viterbi().map(n=>n.tokenId)}}class TokenLatticeNode{constructor(e,n,i,l,f){this.tokenId=e,this.nodeId=n,this.pos=i,this.length=l,this.score=f,this.prev=null,this.backtraceScore=0}clone(){const e=new TokenLatticeNode(this.tokenId,this.nodeId,this.pos,this.length,this.score);return e.prev=this.prev,e.backtraceScore=this.backtraceScore,e}}var TOKEN_TYPES=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",BooleanLiteral:"BooleanLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Set:"Set",If:"If",For:"For",In:"In",Is:"Is",NotIn:"NotIn",Else:"Else",EndIf:"EndIf",ElseIf:"ElseIf",EndFor:"EndFor",And:"And",Or:"Or",Not:"UnaryOperator"}),KEYWORDS=Object.freeze({set:TOKEN_TYPES.Set,for:TOKEN_TYPES.For,in:TOKEN_TYPES.In,is:TOKEN_TYPES.Is,if:TOKEN_TYPES.If,else:TOKEN_TYPES.Else,endif:TOKEN_TYPES.EndIf,elif:TOKEN_TYPES.ElseIf,endfor:TOKEN_TYPES.EndFor,and:TOKEN_TYPES.And,or:TOKEN_TYPES.Or,not:TOKEN_TYPES.Not,"not in":TOKEN_TYPES.NotIn,true:TOKEN_TYPES.BooleanLiteral,false:TOKEN_TYPES.BooleanLiteral}),Token=class{constructor(t,e){this.value=t,this.type=e}};function isWord(t){return/\w/.test(t)}function isInteger(t){return/[0-9]/.test(t)}var ORDERED_MAPPING_TABLE=[["{%",TOKEN_TYPES.OpenStatement],["%}",TOKEN_TYPES.CloseStatement],["{{",TOKEN_TYPES.OpenExpression],["}}",TOKEN_TYPES.CloseExpression],["(",TOKEN_TYPES.OpenParen],[")",TOKEN_TYPES.CloseParen],["{",TOKEN_TYPES.OpenCurlyBracket],["}",TOKEN_TYPES.CloseCurlyBracket],["[",TOKEN_TYPES.OpenSquareBracket],["]",TOKEN_TYPES.CloseSquareBracket],[",",TOKEN_TYPES.Comma],[".",TOKEN_TYPES.Dot],[":",TOKEN_TYPES.Colon],["|",TOKEN_TYPES.Pipe],["<=",TOKEN_TYPES.ComparisonBinaryOperator],[">=",TOKEN_TYPES.ComparisonBinaryOperator],["==",TOKEN_TYPES.ComparisonBinaryOperator],["!=",TOKEN_TYPES.ComparisonBinaryOperator],["<",TOKEN_TYPES.ComparisonBinaryOperator],[">",TOKEN_TYPES.ComparisonBinaryOperator],["+",TOKEN_TYPES.AdditiveBinaryOperator],["-",TOKEN_TYPES.AdditiveBinaryOperator],["*",TOKEN_TYPES.MultiplicativeBinaryOperator],["/",TOKEN_TYPES.MultiplicativeBinaryOperator],["%",TOKEN_TYPES.MultiplicativeBinaryOperator],["=",TOKEN_TYPES.Equals]],ESCAPE_CHARACTERS=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function preprocess(t,e={}){return t.endsWith(`
`)&&(t=t.slice(0,-1)),t=t.replace(/{#.*?#}/gs,"{##}"),e.lstrip_blocks&&(t=t.replace(/^[ \t]*({[#%])/gm,"$1")),e.trim_blocks&&(t=t.replace(/([#%]})\n/g,"$1")),t.replace(/{##}/g,"").replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{")}function tokenize(t,e={}){var p,b,w;const n=[],i=preprocess(t,e);let l=0;const f=v=>{let g="";for(;v(i[l]);){if(i[l]==="\\"){if(++l,l>=i.length)throw new SyntaxError("Unexpected end of input");const u=i[l++],o=ESCAPE_CHARACTERS.get(u);if(o===void 0)throw new SyntaxError(`Unexpected escaped character: ${u}`);g+=o;continue}if(g+=i[l++],l>=i.length)throw new SyntaxError("Unexpected end of input")}return g};e:for(;l<i.length;){const v=(p=n.at(-1))==null?void 0:p.type;if(v===void 0||v===TOKEN_TYPES.CloseStatement||v===TOKEN_TYPES.CloseExpression){let u="";for(;l<i.length&&!(i[l]==="{"&&(i[l+1]==="%"||i[l+1]==="{"));)u+=i[l++];if(u.length>0){n.push(new Token(u,TOKEN_TYPES.Text));continue}}f(u=>/\s/.test(u));const g=i[l];if(g==="-"||g==="+"){const u=(b=n.at(-1))==null?void 0:b.type;if(u===TOKEN_TYPES.Text||u===void 0)throw new SyntaxError(`Unexpected character: ${g}`);switch(u){case TOKEN_TYPES.Identifier:case TOKEN_TYPES.NumericLiteral:case TOKEN_TYPES.BooleanLiteral:case TOKEN_TYPES.StringLiteral:case TOKEN_TYPES.CloseParen:case TOKEN_TYPES.CloseSquareBracket:break;default:{++l;const o=f(isInteger);n.push(new Token(`${g}${o}`,o.length>0?TOKEN_TYPES.NumericLiteral:TOKEN_TYPES.UnaryOperator));continue}}}for(const[u,o]of ORDERED_MAPPING_TABLE)if(i.slice(l,l+u.length)===u){n.push(new Token(u,o)),l+=u.length;continue e}if(g==="'"||g==='"'){++l;const u=f(o=>o!==g);n.push(new Token(u,TOKEN_TYPES.StringLiteral)),++l;continue}if(isInteger(g)){const u=f(isInteger);n.push(new Token(u,TOKEN_TYPES.NumericLiteral));continue}if(isWord(g)){const u=f(isWord),o=Object.hasOwn(KEYWORDS,u)?KEYWORDS[u]:TOKEN_TYPES.Identifier;o===TOKEN_TYPES.In&&((w=n.at(-1))==null?void 0:w.type)===TOKEN_TYPES.Not?(n.pop(),n.push(new Token("not in",TOKEN_TYPES.NotIn))):n.push(new Token(u,o));continue}throw new SyntaxError(`Unexpected character: ${g}`)}return n}var Statement=class{constructor(){De(this,"type","Statement")}},Program=class extends Statement{constructor(e){super();De(this,"type","Program");this.body=e}},If=class extends Statement{constructor(e,n,i){super();De(this,"type","If");this.test=e,this.body=n,this.alternate=i}},For=class extends Statement{constructor(e,n,i){super();De(this,"type","For");this.loopvar=e,this.iterable=n,this.body=i}},SetStatement=class extends Statement{constructor(e,n){super();De(this,"type","Set");this.assignee=e,this.value=n}},Expression=class extends Statement{constructor(){super(...arguments);De(this,"type","Expression")}},MemberExpression=class extends Expression{constructor(e,n,i){super();De(this,"type","MemberExpression");this.object=e,this.property=n,this.computed=i}},CallExpression=class extends Expression{constructor(e,n){super();De(this,"type","CallExpression");this.callee=e,this.args=n}},Identifier=class extends Expression{constructor(e){super();De(this,"type","Identifier");this.value=e}},Literal=class extends Expression{constructor(e){super();De(this,"type","Literal");this.value=e}},NumericLiteral=class extends Literal{constructor(){super(...arguments);De(this,"type","NumericLiteral")}},StringLiteral=class extends Literal{constructor(){super(...arguments);De(this,"type","StringLiteral")}},BooleanLiteral=class extends Literal{constructor(){super(...arguments);De(this,"type","BooleanLiteral")}},ArrayLiteral=class extends Literal{constructor(){super(...arguments);De(this,"type","ArrayLiteral")}},TupleLiteral=class extends Literal{constructor(){super(...arguments);De(this,"type","TupleLiteral")}},ObjectLiteral=class extends Literal{constructor(){super(...arguments);De(this,"type","ObjectLiteral")}},BinaryExpression=class extends Expression{constructor(e,n,i){super();De(this,"type","BinaryExpression");this.operator=e,this.left=n,this.right=i}},FilterExpression=class extends Expression{constructor(e,n){super();De(this,"type","FilterExpression");this.operand=e,this.filter=n}},TestExpression=class extends Expression{constructor(e,n,i){super();De(this,"type","TestExpression");this.operand=e,this.negate=n,this.test=i}},UnaryExpression=class extends Expression{constructor(e,n){super();De(this,"type","UnaryExpression");this.operator=e,this.argument=n}},SliceExpression=class extends Expression{constructor(e=void 0,n=void 0,i=void 0){super();De(this,"type","SliceExpression");this.start=e,this.stop=n,this.step=i}},KeywordArgumentExpression=class extends Expression{constructor(e,n){super();De(this,"type","KeywordArgumentExpression");this.key=e,this.value=n}};function parse(t){const e=new Program([]);let n=0;function i(W,z){const q=t[n++];if(!q||q.type!==W)throw new Error(`Parser Error: ${z}. ${q.type} !== ${W}.`);return q}function l(){switch(t[n].type){case TOKEN_TYPES.Text:return b();case TOKEN_TYPES.OpenStatement:return w();case TOKEN_TYPES.OpenExpression:return v();default:throw new SyntaxError(`Unexpected token type: ${t[n].type}`)}}function f(...W){return n+W.length<=t.length&&W.some((z,q)=>z!==t[n+q].type)}function p(...W){return n+W.length<=t.length&&W.every((z,q)=>z===t[n+q].type)}function b(){return new StringLiteral(i(TOKEN_TYPES.Text,"Expected text token").value)}function w(){i(TOKEN_TYPES.OpenStatement,"Expected opening statement token");let W;switch(t[n].type){case TOKEN_TYPES.Set:++n,W=g(),i(TOKEN_TYPES.CloseStatement,"Expected closing statement token");break;case TOKEN_TYPES.If:++n,W=u(),i(TOKEN_TYPES.OpenStatement,"Expected {% token"),i(TOKEN_TYPES.EndIf,"Expected endif token"),i(TOKEN_TYPES.CloseStatement,"Expected %} token");break;case TOKEN_TYPES.For:++n,W=h(),i(TOKEN_TYPES.OpenStatement,"Expected {% token"),i(TOKEN_TYPES.EndFor,"Expected endfor token"),i(TOKEN_TYPES.CloseStatement,"Expected %} token");break;default:throw new SyntaxError(`Unknown statement type: ${t[n].type}`)}return W}function v(){i(TOKEN_TYPES.OpenExpression,"Expected opening expression token");const W=_();return i(TOKEN_TYPES.CloseExpression,"Expected closing expression token"),W}function g(){const W=_();if(p(TOKEN_TYPES.Equals)){++n;const z=g();return new SetStatement(W,z)}return W}function u(){var ce,ae,we,Z,ue,Pe,Re,pe;const W=_();i(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const z=[],q=[];for(;!(((ce=t[n])==null?void 0:ce.type)===TOKEN_TYPES.OpenStatement&&(((ae=t[n+1])==null?void 0:ae.type)===TOKEN_TYPES.ElseIf||((we=t[n+1])==null?void 0:we.type)===TOKEN_TYPES.Else||((Z=t[n+1])==null?void 0:Z.type)===TOKEN_TYPES.EndIf));)z.push(l());if(((ue=t[n])==null?void 0:ue.type)===TOKEN_TYPES.OpenStatement&&((Pe=t[n+1])==null?void 0:Pe.type)!==TOKEN_TYPES.EndIf)if(++n,p(TOKEN_TYPES.ElseIf))i(TOKEN_TYPES.ElseIf,"Expected elseif token"),q.push(u());else for(i(TOKEN_TYPES.Else,"Expected else token"),i(TOKEN_TYPES.CloseStatement,"Expected closing statement token");!(((Re=t[n])==null?void 0:Re.type)===TOKEN_TYPES.OpenStatement&&((pe=t[n+1])==null?void 0:pe.type)===TOKEN_TYPES.EndIf);)q.push(l());return new If(W,z,q)}function o(W=!1){const z=W?X:_,q=[z()],ce=p(TOKEN_TYPES.Comma);for(;ce&&(++n,q.push(z()),!!p(TOKEN_TYPES.Comma)););return ce?new TupleLiteral(q):q[0]}function h(){const W=o(!0);if(!(W instanceof Identifier||W instanceof TupleLiteral))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${W.type} instead`);i(TOKEN_TYPES.In,"Expected `in` keyword following loop variable");const z=_();i(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const q=[];for(;f(TOKEN_TYPES.OpenStatement,TOKEN_TYPES.EndFor);)q.push(l());return new For(W,z,q)}function _(){return S()}function S(){const W=T();if(p(TOKEN_TYPES.If)){++n;const z=T();i(TOKEN_TYPES.Else,"Expected else token");const q=T();return new If(z,[W],[q])}return W}function T(){let W=O();for(;p(TOKEN_TYPES.Or);){const z=t[n];++n;const q=O();W=new BinaryExpression(z,W,q)}return W}function O(){let W=j();for(;p(TOKEN_TYPES.And);){const z=t[n];++n;const q=j();W=new BinaryExpression(z,W,q)}return W}function j(){let W;for(;p(TOKEN_TYPES.Not);){const z=t[n];++n;const q=j();W=new UnaryExpression(z,q)}return W??C()}function C(){let W=D();for(;p(TOKEN_TYPES.ComparisonBinaryOperator)||p(TOKEN_TYPES.In)||p(TOKEN_TYPES.NotIn);){const z=t[n];++n;const q=D();W=new BinaryExpression(z,W,q)}return W}function D(){let W=Y();for(;p(TOKEN_TYPES.AdditiveBinaryOperator);){const z=t[n];++n;const q=Y();W=new BinaryExpression(z,W,q)}return W}function R(){const W=V();return p(TOKEN_TYPES.OpenParen)?I(W):W}function I(W){let z=new CallExpression(W,$());return p(TOKEN_TYPES.OpenParen)&&(z=I(z)),z}function $(){i(TOKEN_TYPES.OpenParen,"Expected opening parenthesis for arguments list");const W=F();return i(TOKEN_TYPES.CloseParen,"Expected closing parenthesis for arguments list"),W}function F(){const W=[];for(;!p(TOKEN_TYPES.CloseParen);){let z=_();if(p(TOKEN_TYPES.Equals)){if(++n,!(z instanceof Identifier))throw new SyntaxError("Expected identifier for keyword argument");const q=_();z=new KeywordArgumentExpression(z,q)}W.push(z),p(TOKEN_TYPES.Comma)&&++n}return W}function L(){const W=[];let z=!1;for(;!p(TOKEN_TYPES.CloseSquareBracket);)p(TOKEN_TYPES.Colon)?(W.push(void 0),++n,z=!0):(W.push(_()),p(TOKEN_TYPES.Colon)&&(++n,z=!0));if(W.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(z){if(W.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new SliceExpression(...W)}return W[0]}function V(){let W=X();for(;p(TOKEN_TYPES.Dot)||p(TOKEN_TYPES.OpenSquareBracket);){const z=t[n];++n;let q;const ce=z.type!==TOKEN_TYPES.Dot;if(ce)q=L(),i(TOKEN_TYPES.CloseSquareBracket,"Expected closing square bracket");else if(q=X(),q.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");W=new MemberExpression(W,q,ce)}return W}function Y(){let W=Q();for(;p(TOKEN_TYPES.MultiplicativeBinaryOperator);){const z=t[n];++n;const q=Q();W=new BinaryExpression(z,W,q)}return W}function Q(){let W=ee();for(;p(TOKEN_TYPES.Is);){++n;const z=p(TOKEN_TYPES.Not);z&&++n;let q=X();if(q instanceof BooleanLiteral&&(q=new Identifier(q.value.toString())),!(q instanceof Identifier))throw new SyntaxError("Expected identifier for the test");W=new TestExpression(W,z,q)}return W}function ee(){let W=R();for(;p(TOKEN_TYPES.Pipe);){++n;let z=X();if(!(z instanceof Identifier))throw new SyntaxError("Expected identifier for the filter");p(TOKEN_TYPES.OpenParen)&&(z=I(z)),W=new FilterExpression(W,z)}return W}function X(){const W=t[n];switch(W.type){case TOKEN_TYPES.NumericLiteral:return++n,new NumericLiteral(Number(W.value));case TOKEN_TYPES.StringLiteral:return++n,new StringLiteral(W.value);case TOKEN_TYPES.BooleanLiteral:return++n,new BooleanLiteral(W.value==="true");case TOKEN_TYPES.Identifier:return++n,new Identifier(W.value);case TOKEN_TYPES.OpenParen:{++n;const z=o();if(t[n].type!==TOKEN_TYPES.CloseParen)throw new SyntaxError(`Expected closing parenthesis, got ${t[n].type} instead`);return++n,z}case TOKEN_TYPES.OpenSquareBracket:{++n;const z=[];for(;!p(TOKEN_TYPES.CloseSquareBracket);)z.push(_()),p(TOKEN_TYPES.Comma)&&++n;return++n,new ArrayLiteral(z)}case TOKEN_TYPES.OpenCurlyBracket:{++n;const z=new Map;for(;!p(TOKEN_TYPES.CloseCurlyBracket);){const q=_();i(TOKEN_TYPES.Colon,"Expected colon between key and value in object literal");const ce=_();z.set(q,ce),p(TOKEN_TYPES.Comma)&&++n}return++n,new ObjectLiteral(z)}default:throw new SyntaxError(`Unexpected token: ${W.type}`)}}for(;n<t.length;)e.body.push(l());return e}function range$5(t,e,n=1){e===void 0&&(e=t,t=0);const i=[];for(let l=t;l<e;l+=n)i.push(l);return i}function slice(t,e,n,i=1){const l=Math.sign(i);l>=0?(e=(e??(e=0))<0?Math.max(t.length+e,0):Math.min(e,t.length),n=(n??(n=t.length))<0?Math.max(t.length+n,0):Math.min(n,t.length)):(e=(e??(e=t.length-1))<0?Math.max(t.length+e,-1):Math.min(e,t.length-1),n=(n??(n=-1))<-1?Math.max(t.length+n,-1):Math.min(n,t.length-1));const f=[];for(let p=e;l*p<l*n;p+=i)f.push(t[p]);return f}function titleCase(t){return t.replace(/\b\w/g,e=>e.toUpperCase())}var RuntimeValue=class{constructor(t=void 0){De(this,"type","RuntimeValue");De(this,"value");De(this,"builtins",new Map);this.value=t}__bool__(){return new BooleanValue(!!this.value)}},NumericValue=class extends RuntimeValue{constructor(){super(...arguments);De(this,"type","NumericValue")}},StringValue=class extends RuntimeValue{constructor(){super(...arguments);De(this,"type","StringValue");De(this,"builtins",new Map([["upper",new FunctionValue(()=>new StringValue(this.value.toUpperCase()))],["lower",new FunctionValue(()=>new StringValue(this.value.toLowerCase()))],["strip",new FunctionValue(()=>new StringValue(this.value.trim()))],["title",new FunctionValue(()=>new StringValue(titleCase(this.value)))],["length",new NumericValue(this.value.length)]]))}},BooleanValue=class extends RuntimeValue{constructor(){super(...arguments);De(this,"type","BooleanValue")}},ObjectValue=class extends RuntimeValue{constructor(){super(...arguments);De(this,"type","ObjectValue");De(this,"builtins",new Map([["get",new FunctionValue(([e,n])=>{if(!(e instanceof StringValue))throw new Error(`Object key must be a string: got ${e.type}`);return this.value.get(e.value)??n??new NullValue})],["items",new FunctionValue(()=>new ArrayValue(Array.from(this.value.entries()).map(([e,n])=>new ArrayValue([new StringValue(e),n]))))]]))}__bool__(){return new BooleanValue(this.value.size>0)}},ArrayValue=class extends RuntimeValue{constructor(){super(...arguments);De(this,"type","ArrayValue");De(this,"builtins",new Map([["length",new NumericValue(this.value.length)]]))}__bool__(){return new BooleanValue(this.value.length>0)}},TupleValue=class extends ArrayValue{constructor(){super(...arguments);De(this,"type","TupleValue")}},FunctionValue=class extends RuntimeValue{constructor(){super(...arguments);De(this,"type","FunctionValue")}},NullValue=class extends RuntimeValue{constructor(){super(...arguments);De(this,"type","NullValue")}},UndefinedValue=class extends RuntimeValue{constructor(){super(...arguments);De(this,"type","UndefinedValue")}},Environment=class{constructor(t){De(this,"variables",new Map([["namespace",new FunctionValue(t=>{if(t.length===0)return new ObjectValue(new Map);if(t.length!==1||!(t[0]instanceof ObjectValue))throw new Error("`namespace` expects either zero arguments or a single object argument");return t[0]})]]));De(this,"tests",new Map([["boolean",t=>t.type==="BooleanValue"],["callable",t=>t instanceof FunctionValue],["odd",t=>{if(t.type!=="NumericValue")throw new Error(`Cannot apply test "odd" to type: ${t.type}`);return t.value%2!==0}],["even",t=>{if(t.type!=="NumericValue")throw new Error(`Cannot apply test "even" to type: ${t.type}`);return t.value%2===0}],["false",t=>t.type==="BooleanValue"&&!t.value],["true",t=>t.type==="BooleanValue"&&t.value],["number",t=>t.type==="NumericValue"],["integer",t=>t.type==="NumericValue"&&Number.isInteger(t.value)],["iterable",t=>t instanceof ArrayValue||t instanceof StringValue],["lower",t=>{const e=t.value;return t.type==="StringValue"&&e===e.toLowerCase()}],["upper",t=>{const e=t.value;return t.type==="StringValue"&&e===e.toUpperCase()}],["none",t=>t.type==="NullValue"],["defined",t=>t.type!=="UndefinedValue"],["undefined",t=>t.type==="UndefinedValue"],["equalto",(t,e)=>t.value===e.value]]));this.parent=t}set(t,e){return this.declareVariable(t,convertToRuntimeValues(e))}declareVariable(t,e){if(this.variables.has(t))throw new SyntaxError(`Variable already declared: ${t}`);return this.variables.set(t,e),e}setVariable(t,e){return this.variables.set(t,e),e}resolve(t){if(this.variables.has(t))return this;if(this.parent)return this.parent.resolve(t);throw new Error(`Unknown variable: ${t}`)}lookupVariable(t){try{return this.resolve(t).variables.get(t)??new UndefinedValue}catch{return new UndefinedValue}}},Interpreter=class{constructor(t){De(this,"global");this.global=t??new Environment}run(t){return this.evaluate(t,this.global)}evaluateBinaryExpression(t,e){const n=this.evaluate(t.left,e);switch(t.operator.value){case"and":return n.__bool__().value?this.evaluate(t.right,e):n;case"or":return n.__bool__().value?n:this.evaluate(t.right,e)}const i=this.evaluate(t.right,e);switch(t.operator.value){case"==":return new BooleanValue(n.value==i.value);case"!=":return new BooleanValue(n.value!=i.value)}if(n instanceof UndefinedValue||i instanceof UndefinedValue)throw new Error("Cannot perform operation on undefined values");if(n instanceof NullValue||i instanceof NullValue)throw new Error("Cannot perform operation on null values");if(n instanceof NumericValue&&i instanceof NumericValue)switch(t.operator.value){case"+":return new NumericValue(n.value+i.value);case"-":return new NumericValue(n.value-i.value);case"*":return new NumericValue(n.value*i.value);case"/":return new NumericValue(n.value/i.value);case"%":return new NumericValue(n.value%i.value);case"<":return new BooleanValue(n.value<i.value);case">":return new BooleanValue(n.value>i.value);case">=":return new BooleanValue(n.value>=i.value);case"<=":return new BooleanValue(n.value<=i.value)}else if(n instanceof ArrayValue&&i instanceof ArrayValue)switch(t.operator.value){case"+":return new ArrayValue(n.value.concat(i.value))}else if(i instanceof ArrayValue){const l=i.value.find(f=>f.value===n.value)!==void 0;switch(t.operator.value){case"in":return new BooleanValue(l);case"not in":return new BooleanValue(!l)}}if(n instanceof StringValue||i instanceof StringValue)switch(t.operator.value){case"+":return new StringValue(n.value.toString()+i.value.toString())}if(n instanceof StringValue&&i instanceof StringValue)switch(t.operator.value){case"in":return new BooleanValue(i.value.includes(n.value));case"not in":return new BooleanValue(!i.value.includes(n.value))}if(n instanceof StringValue&&i instanceof ObjectValue)switch(t.operator.value){case"in":return new BooleanValue(i.value.has(n.value));case"not in":return new BooleanValue(!i.value.has(n.value))}throw new SyntaxError(`Unknown operator "${t.operator.value}" between ${n.type} and ${i.type}`)}evaluateFilterExpression(t,e){const n=this.evaluate(t.operand,e);if(t.filter.type==="Identifier"){const i=t.filter;if(n instanceof ArrayValue)switch(i.value){case"list":return n;case"first":return n.value[0];case"last":return n.value[n.value.length-1];case"length":return new NumericValue(n.value.length);case"reverse":return new ArrayValue(n.value.reverse());case"sort":return new ArrayValue(n.value.sort((l,f)=>{if(l.type!==f.type)throw new Error(`Cannot compare different types: ${l.type} and ${f.type}`);switch(l.type){case"NumericValue":return l.value-f.value;case"StringValue":return l.value.localeCompare(f.value);default:throw new Error(`Cannot compare type: ${l.type}`)}}));default:throw new Error(`Unknown ArrayValue filter: ${i.value}`)}else if(n instanceof StringValue)switch(i.value){case"length":return new NumericValue(n.value.length);case"upper":return new StringValue(n.value.toUpperCase());case"lower":return new StringValue(n.value.toLowerCase());case"title":return new StringValue(titleCase(n.value));case"capitalize":return new StringValue(n.value.charAt(0).toUpperCase()+n.value.slice(1));case"trim":return new StringValue(n.value.trim());default:throw new Error(`Unknown StringValue filter: ${i.value}`)}else if(n instanceof NumericValue)switch(i.value){case"abs":return new NumericValue(Math.abs(n.value));default:throw new Error(`Unknown NumericValue filter: ${i.value}`)}else if(n instanceof ObjectValue)switch(i.value){case"items":return new ArrayValue(Array.from(n.value.entries()).map(([l,f])=>new ArrayValue([new StringValue(l),f])));case"length":return new NumericValue(n.value.size);default:throw new Error(`Unknown ObjectValue filter: ${i.value}`)}throw new Error(`Cannot apply filter "${i.value}" to type: ${n.type}`)}else if(t.filter.type==="CallExpression"){const i=t.filter;if(i.callee.type!=="Identifier")throw new Error(`Unknown filter: ${i.callee.type}`);const l=i.callee.value;if(n instanceof ArrayValue){switch(l){case"selectattr":{if(n.value.some(g=>!(g instanceof ObjectValue)))throw new Error("`selectattr` can only be applied to array of objects");if(i.args.some(g=>g.type!=="StringLiteral"))throw new Error("arguments of `selectattr` must be strings");const[f,p,b]=i.args.map(g=>this.evaluate(g,e));let w;if(p){const g=e.tests.get(p.value);if(!g)throw new Error(`Unknown test: ${p.value}`);w=g}else w=(...g)=>g[0].__bool__().value;const v=n.value.filter(g=>{const u=g.value.get(f.value);return u?w(u,b):!1});return new ArrayValue(v)}}throw new Error(`Unknown ArrayValue filter: ${l}`)}else throw new Error(`Cannot apply filter "${l}" to type: ${n.type}`)}throw new Error(`Unknown filter: ${t.filter.type}`)}evaluateTestExpression(t,e){const n=this.evaluate(t.operand,e),i=e.tests.get(t.test.value);if(!i)throw new Error(`Unknown test: ${t.test.value}`);const l=i(n);return new BooleanValue(t.negate?!l:l)}evaluateUnaryExpression(t,e){const n=this.evaluate(t.argument,e);switch(t.operator.value){case"not":return new BooleanValue(!n.value);default:throw new SyntaxError(`Unknown operator: ${t.operator.value}`)}}evalProgram(t,e){return this.evaluateBlock(t.body,e)}evaluateBlock(t,e){let n="";for(const i of t){const l=this.evaluate(i,e);l.type!=="NullValue"&&l.type!=="UndefinedValue"&&(n+=l.value)}return new StringValue(n)}evaluateIdentifier(t,e){return e.lookupVariable(t.value)}evaluateCallExpression(t,e){const n=[],i=new Map;for(const f of t.args)if(f.type==="KeywordArgumentExpression"){const p=f;i.set(p.key.value,this.evaluate(p.value,e))}else n.push(this.evaluate(f,e));i.size>0&&n.push(new ObjectValue(i));const l=this.evaluate(t.callee,e);if(l.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${l.type}`);return l.value(n,e)}evaluateSliceExpression(t,e,n){if(!(t instanceof ArrayValue||t instanceof StringValue))throw new Error("Slice object must be an array or string");const i=this.evaluate(e.start,n),l=this.evaluate(e.stop,n),f=this.evaluate(e.step,n);if(!(i instanceof NumericValue||i instanceof UndefinedValue))throw new Error("Slice start must be numeric or undefined");if(!(l instanceof NumericValue||l instanceof UndefinedValue))throw new Error("Slice stop must be numeric or undefined");if(!(f instanceof NumericValue||f instanceof UndefinedValue))throw new Error("Slice step must be numeric or undefined");return t instanceof ArrayValue?new ArrayValue(slice(t.value,i.value,l.value,f.value)):new StringValue(slice(Array.from(t.value),i.value,l.value,f.value).join(""))}evaluateMemberExpression(t,e){const n=this.evaluate(t.object,e);let i;if(t.computed){if(t.property.type==="SliceExpression")return this.evaluateSliceExpression(n,t.property,e);i=this.evaluate(t.property,e)}else i=new StringValue(t.property.value);let l;if(n instanceof ObjectValue){if(!(i instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${i.type}`);l=n.value.get(i.value)??n.builtins.get(i.value)}else if(n instanceof ArrayValue||n instanceof StringValue)if(i instanceof NumericValue)l=n.value.at(i.value),n instanceof StringValue&&(l=new StringValue(n.value.at(i.value)));else if(i instanceof StringValue)l=n.builtins.get(i.value);else throw new Error(`Cannot access property with non-string/non-number: got ${i.type}`);else{if(!(i instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${i.type}`);l=n.builtins.get(i.value)}return l instanceof RuntimeValue?l:new UndefinedValue}evaluateSet(t,e){const n=this.evaluate(t.value,e);if(t.assignee.type==="Identifier"){const i=t.assignee.value;e.setVariable(i,n)}else if(t.assignee.type==="MemberExpression"){const i=t.assignee,l=this.evaluate(i.object,e);if(!(l instanceof ObjectValue))throw new Error("Cannot assign to member of non-object");if(i.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");l.value.set(i.property.value,n)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(t.assignee)}`);return new NullValue}evaluateIf(t,e){const n=this.evaluate(t.test,e);return this.evaluateBlock(n.__bool__().value?t.body:t.alternate,e)}evaluateFor(t,e){const n=new Environment(e),i=this.evaluate(t.iterable,n);if(!(i instanceof ArrayValue))throw new Error(`Expected iterable type in for loop: got ${i.type}`);let l="";for(let f=0;f<i.value.length;++f){const p=new Map([["index",new NumericValue(f+1)],["index0",new NumericValue(f)],["revindex",new NumericValue(i.value.length-f)],["revindex0",new NumericValue(i.value.length-f-1)],["first",new BooleanValue(f===0)],["last",new BooleanValue(f===i.value.length-1)],["length",new NumericValue(i.value.length)],["previtem",f>0?i.value[f-1]:new UndefinedValue],["nextitem",f<i.value.length-1?i.value[f+1]:new UndefinedValue]]);n.setVariable("loop",new ObjectValue(p));const b=i.value[f];if(t.loopvar.type==="Identifier")n.setVariable(t.loopvar.value,b);else if(t.loopvar.type==="TupleLiteral"){const v=t.loopvar;if(b.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${b.type}`);const g=b;if(v.value.length!==g.value.length)throw new Error(`Too ${v.value.length>g.value.length?"few":"many"} items to unpack`);for(let u=0;u<v.value.length;++u){if(v.value[u].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${v.value[u].type}`);n.setVariable(v.value[u].value,g.value[u])}}const w=this.evaluateBlock(t.body,n);l+=w.value}return new StringValue(l)}evaluate(t,e){if(t===void 0)return new UndefinedValue;switch(t.type){case"Program":return this.evalProgram(t,e);case"Set":return this.evaluateSet(t,e);case"If":return this.evaluateIf(t,e);case"For":return this.evaluateFor(t,e);case"NumericLiteral":return new NumericValue(Number(t.value));case"StringLiteral":return new StringValue(t.value);case"BooleanLiteral":return new BooleanValue(t.value);case"ArrayLiteral":return new ArrayValue(t.value.map(n=>this.evaluate(n,e)));case"TupleLiteral":return new TupleValue(t.value.map(n=>this.evaluate(n,e)));case"ObjectLiteral":{const n=new Map;for(const[i,l]of t.value){const f=this.evaluate(i,e);if(!(f instanceof StringValue))throw new Error(`Object keys must be strings: got ${f.type}`);n.set(f.value,this.evaluate(l,e))}return new ObjectValue(n)}case"Identifier":return this.evaluateIdentifier(t,e);case"CallExpression":return this.evaluateCallExpression(t,e);case"MemberExpression":return this.evaluateMemberExpression(t,e);case"UnaryExpression":return this.evaluateUnaryExpression(t,e);case"BinaryExpression":return this.evaluateBinaryExpression(t,e);case"FilterExpression":return this.evaluateFilterExpression(t,e);case"TestExpression":return this.evaluateTestExpression(t,e);default:throw new SyntaxError(`Unknown node type: ${t.type}`)}}};function convertToRuntimeValues(t){switch(typeof t){case"number":return new NumericValue(t);case"string":return new StringValue(t);case"boolean":return new BooleanValue(t);case"object":return t===null?new NullValue:Array.isArray(t)?new ArrayValue(t.map(convertToRuntimeValues)):new ObjectValue(new Map(Object.entries(t).map(([e,n])=>[e,convertToRuntimeValues(n)])));case"function":return new FunctionValue((e,n)=>{const i=t(...e.map(l=>l.value))??null;return convertToRuntimeValues(i)});default:throw new Error(`Cannot convert to runtime value: ${t}`)}}var Template=class{constructor(t){De(this,"parsed");const e=tokenize(t,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=parse(e)}render(t){const e=new Environment;e.set("false",!1),e.set("true",!0),e.set("raise_exception",l=>{throw new Error(l)}),e.set("range",range$5);for(const[l,f]of Object.entries(t))e.set(l,f);return new Interpreter(e).run(this.parsed).value}};async function loadTokenizer(t,e){const n=await Promise.all([getModelJSON(t,"tokenizer.json",!0,e),getModelJSON(t,"tokenizer_config.json",!0,e)]);return e.legacy!==null&&(n[1].legacy=e.legacy),n}function regexSplit(t,e){const n=[];let i=0;for(const l of t.matchAll(e)){const f=l[0];i<l.index&&n.push(t.slice(i,l.index)),f.length>0&&n.push(f),i=l.index+f.length}return i<t.length&&n.push(t.slice(i)),n}function createPattern(t,e=!0){if(t.Regex!==void 0){let n=t.Regex.replace(/\\([#&~])/g,"$1");for(const[i,l]of PROBLEMATIC_REGEX_MAP)n=n.replaceAll(i,l);return new RegExp(n,"gu")}else if(t.String!==void 0){const n=escapeRegExp(t.String);return new RegExp(e?n:`(${n})`,"gu")}else return console.warn("Unknown pattern type:",t),null}function objectToMap(t){return new Map(Object.entries(t))}function prepareTensorForDecode(t){const e=t.dims;switch(e.length){case 1:return t.tolist();case 2:if(e[0]!==1)throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return t.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${e.length}.`)}}function clean_up_tokenization(t){return t.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function remove_accents(t){return t.replace(/[\u0300-\u036f]/g,"")}function lowercase_and_remove_accent(t){return remove_accents(t.toLowerCase())}function fuse(t,e,n){const i=[];let l=0;for(;l<t.length;){if(i.push(t[l]),(n.get(t[l])??e)!==e){++l;continue}for(;l<t.length&&(n.get(t[l])??e)===e;)++l}return i}function whitespace_split(t){return t.match(/\S+/g)||[]}const PUNCTUATION_REGEX="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",PROBLEMATIC_REGEX_MAP=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"]]);class AddedToken{constructor(e){this.content=e.content,this.id=e.id,this.single_word=e.single_word??!1,this.lstrip=e.lstrip??!1,this.rstrip=e.rstrip??!1,this.special=e.special??!1,this.normalized=e.normalized??null}}class TokenizerModel extends Callable{constructor(e){super(),this.config=e,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(e,...n){switch(e.type){case"WordPiece":return new WordPieceTokenizer(e);case"Unigram":return new Unigram(e,...n);case"BPE":return new BPE(e);default:if(e.vocab)return new LegacyTokenizerModel(e,...n);throw new Error(`Unknown TokenizerModel type: ${e.type}`)}}_call(e){let n=this.encode(e);return this.fuse_unk&&(n=fuse(n,this.unk_token_id,this.tokens_to_ids)),n}encode(e){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(e){return e.map(n=>this.tokens_to_ids.get(n)??this.unk_token_id)}convert_ids_to_tokens(e){return e.map(n=>this.vocab[n]??this.unk_token)}}class WordPieceTokenizer extends TokenizerModel{constructor(e){super(e),this.tokens_to_ids=objectToMap(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.max_input_chars_per_word=e.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[n,i]of this.tokens_to_ids)this.vocab[i]=n}encode(e){const n=[];for(const i of e){const l=[...i];if(l.length>this.max_input_chars_per_word){n.push(this.unk_token);continue}let f=!1,p=0;const b=[];for(;p<l.length;){let w=l.length,v=null;for(;p<w;){let g=l.slice(p,w).join("");if(p>0&&(g=this.config.continuing_subword_prefix+g),this.tokens_to_ids.has(g)){v=g;break}--w}if(v===null){f=!0;break}b.push(v),p=w}f?n.push(this.unk_token):n.push(...b)}return n}}class Unigram extends TokenizerModel{constructor(e,n){super(e);const i=e.vocab.length;this.vocab=new Array(i),this.scores=new Array(i);for(let l=0;l<i;++l){const f=e.vocab[l];this.vocab[l]=f[0],this.scores[l]=f[1]}this.unk_token_id=e.unk_id,this.unk_token=this.vocab[e.unk_id],this.tokens_to_ids=new Map(this.vocab.map((l,f)=>[l,f])),this.bosToken=" ",this.bosTokenId=this.tokens_to_ids.get(this.bosToken),this.eosToken=n.eos_token,this.eosTokenId=this.tokens_to_ids.get(this.eosToken),this.unkToken=this.vocab[this.unk_token_id],this.minScore=min$1(this.scores)[0],this.unkScore=this.minScore-10,this.scores[this.unk_token_id]=this.unkScore,this.trie=new CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(e){const n=e.sentence,i=n.length;let l=0;for(;l<i;){let p=!1;for(let b of this.trie.commonPrefixSearch(n.slice(l))){const w=this.tokens_to_ids.get(b),v=this.scores[w],g=b.length;e.insert(l,g,v,w),!p&&g===1&&(p=!0)}p||e.insert(l,1,this.unkScore,this.unk_token_id),l+=1}}tokenize(e){const n=new TokenLattice(e,this.bosTokenId,this.eosTokenId);return this.populateNodes(n),n.tokens()}encode(e){const n=[];for(const i of e){const l=this.tokenize(i);n.push(...l)}return n}}const BYTES_TO_UNICODE=(()=>{const t=[...Array.from({length:94},(l,f)=>f+33),...Array.from({length:12},(l,f)=>f+161),...Array.from({length:82},(l,f)=>f+174)],e=t.slice();let n=0;for(let l=0;l<256;++l)t.includes(l)||(t.push(l),e.push(256+n),n+=1);const i=e.map(l=>String.fromCharCode(l));return Object.fromEntries(t.map((l,f)=>[l,i[f]]))})(),UNICODE_TO_BYTES=reverseDictionary(BYTES_TO_UNICODE);class BPE extends TokenizerModel{constructor(e){super(e),this.BPE_SPLIT_TOKEN=" ",this.tokens_to_ids=objectToMap(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[n,i]of this.tokens_to_ids)this.vocab[i]=n;this.bpe_ranks=new Map(e.merges.map((n,i)=>[n,i])),this.merges=e.merges.map(n=>n.split(this.BPE_SPLIT_TOKEN)),this.end_of_word_suffix=e.end_of_word_suffix,this.continuing_subword_suffix=e.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.cache=new Map}bpe(e){if(e.length===0)return[];const n=this.cache.get(e);if(n!==void 0)return n;const i=Array.from(e);this.end_of_word_suffix&&(i[i.length-1]+=this.end_of_word_suffix);let l=[];if(i.length>1){const f=new PriorityQueue((w,v)=>w.score<v.score);let p={token:i[0],bias:0,prev:null,next:null},b=p;for(let w=1;w<i.length;++w){const v={bias:w/i.length,token:i[w],prev:b,next:null};b.next=v,this._add_node(f,b),b=v}for(;!f.isEmpty();){const w=f.pop();if(w.deleted||!w.next||w.next.deleted)continue;if(w.deleted=!0,w.next.deleted=!0,w.prev){const g={...w.prev};w.prev.deleted=!0,w.prev=g,g.prev?g.prev.next=g:p=g}const v={token:w.token+w.next.token,bias:w.bias,prev:w.prev,next:w.next.next};v.prev?(v.prev.next=v,this._add_node(f,v.prev)):p=v,v.next&&(v.next.prev=v,this._add_node(f,v))}for(let w=p;w!==null;w=w.next)l.push(w.token)}else l=i;if(this.continuing_subword_suffix)for(let f=0;f<l.length-1;++f)l[f]+=this.continuing_subword_suffix;return this.cache.set(e,l),l}_add_node(e,n){const i=this.bpe_ranks.get(n.token+this.BPE_SPLIT_TOKEN+n.next.token);i!==void 0&&(n.score=i+n.bias,e.push(n))}encode(e){const n=[];for(const i of e){if(this.ignore_merges&&this.tokens_to_ids.has(i)){n.push(i);continue}const l=this.bpe(i);for(const f of l)this.tokens_to_ids.has(f)?n.push(f):this.byte_fallback?n.push(...Array.from(this.text_encoder.encode(f)).map(p=>`<0x${p.toString(16).toUpperCase().padStart(2,"0")}>`)):n.push(this.unk_token)}return n}}class LegacyTokenizerModel extends TokenizerModel{constructor(e,n){super(e),this.tokens_to_ids=objectToMap(n.target_lang?e.vocab[n.target_lang]:e.vocab),this.bos_token=n.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=n.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=n.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=n.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[i,l]of this.tokens_to_ids)this.vocab[l]=i}encode(e){return e}}class Normalizer extends Callable{constructor(e){super(),this.config=e}static fromConfig(e){if(e===null)return null;switch(e.type){case"BertNormalizer":return new BertNormalizer(e);case"Precompiled":return new Precompiled(e);case"Sequence":return new NormalizerSequence(e);case"Replace":return new Replace(e);case"NFC":return new NFC(e);case"NFKC":return new NFKC(e);case"NFKD":return new NFKD(e);case"Strip":return new StripNormalizer(e);case"StripAccents":return new StripAccents(e);case"Lowercase":return new Lowercase(e);case"Prepend":return new Prepend(e);default:throw new Error(`Unknown Normalizer type: ${e.type}`)}}normalize(e){throw Error("normalize should be implemented in subclass.")}_call(e){return this.normalize(e)}}class Replace extends Normalizer{normalize(e){const n=createPattern(this.config.pattern);return n===null?e:e.replaceAll(n,this.config.content)}}class NFC extends Normalizer{normalize(e){return e=e.normalize("NFC"),e}}class NFKC extends Normalizer{normalize(e){return e=e.normalize("NFKC"),e}}class NFKD extends Normalizer{normalize(e){return e=e.normalize("NFKD"),e}}class StripNormalizer extends Normalizer{normalize(e){return this.config.strip_left&&this.config.strip_right?e=e.trim():(this.config.strip_left&&(e=e.trimStart()),this.config.strip_right&&(e=e.trimEnd())),e}}class StripAccents extends Normalizer{normalize(e){return e=remove_accents(e),e}}class Lowercase extends Normalizer{normalize(e){return e=e.toLowerCase(),e}}class Prepend extends Normalizer{normalize(e){return e=this.config.prepend+e,e}}class NormalizerSequence extends Normalizer{constructor(e){super(e),this.normalizers=e.normalizers.map(n=>Normalizer.fromConfig(n))}normalize(e){return this.normalizers.reduce((n,i)=>i.normalize(n),e)}}class BertNormalizer extends Normalizer{_tokenize_chinese_chars(e){const n=[];for(let i=0;i<e.length;++i){const l=e[i],f=l.charCodeAt(0);this._is_chinese_char(f)?(n.push(" "),n.push(l),n.push(" ")):n.push(l)}return n.join("")}_is_chinese_char(e){return e>=19968&&e<=40959||e>=13312&&e<=19903||e>=131072&&e<=173791||e>=173824&&e<=177983||e>=177984&&e<=178207||e>=178208&&e<=183983||e>=63744&&e<=64255||e>=194560&&e<=195103}stripAccents(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}_is_control(e){switch(e){case"	":case`
`:case"\r":return!1;default:return new RegExp("^\\p{Cc}|\\p{Cf}|\\p{Co}|\\p{Cs}$","u").test(e)}}_clean_text(e){const n=[];for(const i of e){const l=i.charCodeAt(0);l===0||l===65533||this._is_control(i)||(/^\s$/.test(i)?n.push(" "):n.push(i))}return n.join("")}normalize(e){return this.config.clean_text&&(e=this._clean_text(e)),this.config.handle_chinese_chars&&(e=this._tokenize_chinese_chars(e)),this.config.lowercase?(e=e.toLowerCase(),this.config.strip_accents!==!1&&(e=this.stripAccents(e))):this.config.strip_accents&&(e=this.stripAccents(e)),e}}class PreTokenizer extends Callable{static fromConfig(e){if(e===null)return null;switch(e.type){case"BertPreTokenizer":return new BertPreTokenizer(e);case"Sequence":return new PreTokenizerSequence(e);case"Whitespace":return new WhitespacePreTokenizer(e);case"WhitespaceSplit":return new WhitespaceSplit(e);case"Metaspace":return new MetaspacePreTokenizer(e);case"ByteLevel":return new ByteLevelPreTokenizer(e);case"Split":return new SplitPreTokenizer(e);case"Punctuation":return new PunctuationPreTokenizer(e);case"Digits":return new DigitsPreTokenizer(e);case"Replace":return new ReplacePreTokenizer(e);default:throw new Error(`Unknown PreTokenizer type: ${e.type}`)}}pre_tokenize_text(e,n){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(e,n){return(Array.isArray(e)?e.map(i=>this.pre_tokenize_text(i,n)):this.pre_tokenize_text(e,n)).flat()}_call(e,n){return this.pre_tokenize(e,n)}}class BertPreTokenizer extends PreTokenizer{constructor(e){super(),this.pattern=new RegExp(`[^\\s${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]`,"gu")}pre_tokenize_text(e,n){return e.trim().match(this.pattern)||[]}}class ByteLevelPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=new RegExp("'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+","gu"),this.byte_encoder=BYTES_TO_UNICODE,this.text_encoder=new TextEncoder}pre_tokenize_text(e,n){return this.add_prefix_space&&!e.startsWith(" ")&&(e=" "+e),(this.use_regex?e.match(this.pattern)||[]:[e]).map(l=>Array.from(this.text_encoder.encode(l),f=>this.byte_encoder[f]).join(""))}}class SplitPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=createPattern(this.config.pattern,this.config.invert)}pre_tokenize_text(e,n){return this.pattern===null?[]:this.config.invert?e.match(this.pattern)||[]:regexSplit(e,this.pattern)}}class PunctuationPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=new RegExp(`[^${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]+`,"gu")}pre_tokenize_text(e,n){return e.match(this.pattern)||[]}}class DigitsPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e;const n=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=new RegExp(n,"gu")}pre_tokenize_text(e,n){return e.match(this.pattern)||[]}}class PostProcessor extends Callable{constructor(e){super(),this.config=e}static fromConfig(e){if(e===null)return null;switch(e.type){case"TemplateProcessing":return new TemplateProcessing(e);case"ByteLevel":return new ByteLevelPostProcessor(e);case"RobertaProcessing":return new RobertaProcessing(e);case"BertProcessing":return new BertProcessing(e);case"Sequence":return new PostProcessorSequence(e);default:throw new Error(`Unknown PostProcessor type: ${e.type}`)}}post_process(e,...n){throw Error("post_process should be implemented in subclass.")}_call(e,...n){return this.post_process(e,...n)}}class BertProcessing extends PostProcessor{constructor(e){super(e),this.cls=e.cls[0],this.sep=e.sep[0]}post_process(e,n=null,{add_special_tokens:i=!0}={}){i&&(e=mergeArrays([this.cls],e,[this.sep]));let l=new Array(e.length).fill(0);if(n!==null){const f=i&&this instanceof RobertaProcessing?[this.sep]:[],p=i?[this.sep]:[];e=mergeArrays(e,f,n,p),l=mergeArrays(l,new Array(n.length+f.length+p.length).fill(1))}return{tokens:e,token_type_ids:l}}}class RobertaProcessing extends BertProcessing{}class TemplateProcessing extends PostProcessor{constructor(e){super(e),this.single=e.single,this.pair=e.pair}post_process(e,n=null,{add_special_tokens:i=!0}={}){const l=n===null?this.single:this.pair;let f=[],p=[];for(const b of l)"SpecialToken"in b?i&&(f.push(b.SpecialToken.id),p.push(b.SpecialToken.type_id)):"Sequence"in b&&(b.Sequence.id==="A"?(f=mergeArrays(f,e),p=mergeArrays(p,new Array(e.length).fill(b.Sequence.type_id))):b.Sequence.id==="B"&&(f=mergeArrays(f,n),p=mergeArrays(p,new Array(n.length).fill(b.Sequence.type_id))));return{tokens:f,token_type_ids:p}}}class ByteLevelPostProcessor extends PostProcessor{post_process(e,n=null){return n&&(e=mergeArrays(e,n)),{tokens:e}}}class PostProcessorSequence extends PostProcessor{constructor(e){super(e),this.processors=e.processors.map(n=>PostProcessor.fromConfig(n))}post_process(e,n=null,i={}){let l;for(const f of this.processors)if(f instanceof ByteLevelPostProcessor)e=f.post_process(e).tokens,n&&(n=f.post_process(n).tokens);else{const p=f.post_process(e,n,i);e=p.tokens,l=p.token_type_ids}return{tokens:e,token_type_ids:l}}}class Decoder extends Callable{constructor(e){super(),this.config=e,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=e.trim_offsets}static fromConfig(e){if(e===null)return null;switch(e.type){case"WordPiece":return new WordPieceDecoder(e);case"Metaspace":return new MetaspaceDecoder(e);case"ByteLevel":return new ByteLevelDecoder(e);case"Replace":return new ReplaceDecoder(e);case"ByteFallback":return new ByteFallback(e);case"Fuse":return new FuseDecoder(e);case"Strip":return new StripDecoder(e);case"Sequence":return new DecoderSequence(e);case"CTC":return new CTCDecoder(e);case"BPEDecoder":return new BPEDecoder(e);default:throw new Error(`Unknown Decoder type: ${e.type}`)}}_call(e){return this.decode(e)}decode(e){return this.decode_chain(e).join("")}decode_chain(e){throw Error("`decode_chain` should be implemented in subclass.")}}class ReplaceDecoder extends Decoder{decode_chain(e){const n=createPattern(this.config.pattern);return n===null?e:e.map(i=>i.replaceAll(n,this.config.content))}}class ByteFallback extends Decoder{constructor(e){super(e),this.text_decoder=new TextDecoder}decode_chain(e){const n=[];let i=[];for(const l of e){let f=null;if(l.length===6&&l.startsWith("<0x")&&l.endsWith(">")){const p=parseInt(l.slice(3,5),16);isNaN(p)||(f=p)}if(f!==null)i.push(f);else{if(i.length>0){const p=this.text_decoder.decode(Uint8Array.from(i));n.push(p),i=[]}n.push(l)}}if(i.length>0){const l=this.text_decoder.decode(Uint8Array.from(i));n.push(l),i=[]}return n}}class FuseDecoder extends Decoder{decode_chain(e){return[e.join("")]}}class StripDecoder extends Decoder{constructor(e){super(e),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(e){return e.map(n=>{let i=0;for(let f=0;f<this.start&&n[f]===this.content;++f){i=f+1;continue}let l=n.length;for(let f=0;f<this.stop;++f){const p=n.length-f-1;if(n[p]===this.content){l=p;continue}else break}return n.slice(i,l)})}}class WordPieceDecoder extends Decoder{constructor(e){super(e),this.cleanup=e.cleanup}decode_chain(e){return e.map((n,i)=>(i!==0&&(n.startsWith(this.config.prefix)?n=n.replace(this.config.prefix,""):n=" "+n),this.cleanup&&(n=clean_up_tokenization(n)),n))}}class ByteLevelDecoder extends Decoder{constructor(e){super(e),this.byte_decoder=UNICODE_TO_BYTES,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(e){const n=e.join(""),i=new Uint8Array([...n].map(f=>this.byte_decoder[f]));return this.text_decoder.decode(i)}decode_chain(e){const n=[];let i=[];for(const l of e)this.added_tokens.find(f=>f.content===l)!==void 0?(i.length>0&&(n.push(this.convert_tokens_to_string(i)),i=[]),n.push(l)):i.push(l);return i.length>0&&n.push(this.convert_tokens_to_string(i)),n}}class CTCDecoder extends Decoder{constructor(e){super(e),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(e){if(e.length===0)return"";const n=[e[0]];for(let f=1;f<e.length;++f)e[f]!==n.at(-1)&&n.push(e[f]);let l=n.filter(f=>f!==this.pad_token).join("");return this.cleanup&&(l=clean_up_tokenization(l).replaceAll(this.word_delimiter_token," ").trim()),l}decode_chain(e){return[this.convert_tokens_to_string(e)]}}class DecoderSequence extends Decoder{constructor(e){super(e),this.decoders=e.decoders.map(n=>Decoder.fromConfig(n))}decode_chain(e){return this.decoders.reduce((n,i)=>i.decode_chain(n),e)}}class BPEDecoder extends Decoder{constructor(e){super(e),this.suffix=this.config.suffix}decode_chain(e){return e.map((n,i)=>n.replaceAll(this.suffix,i===e.length-1?"":" "))}}class VitsDecoder extends Decoder{decode_chain(e){let n="";for(let i=1;i<e.length;i+=2)n+=e[i];return[n]}}class MetaspacePreTokenizer extends PreTokenizer{constructor(e){super(),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement,this.strRep=e.str_rep||this.replacement,this.prepend_scheme=e.prepend_scheme??"always"}pre_tokenize_text(e,{section_index:n=void 0}={}){let i=e.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!i.startsWith(this.replacement)&&(this.prepend_scheme==="always"||this.prepend_scheme==="first"&&n===0)&&(i=this.strRep+i),[i]}}class MetaspaceDecoder extends Decoder{constructor(e){super(e),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement}decode_chain(e){const n=[];for(let i=0;i<e.length;++i){let l=e[i].replaceAll(this.replacement," ");this.addPrefixSpace&&i==0&&l.startsWith(" ")&&(l=l.substring(1)),n.push(l)}return n}}class Precompiled extends Normalizer{constructor(e){super(e),this.charsmap=e.precompiled_charsmap}normalize(e){return e=e.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,""),e=e.replace(/[\u0009\u000A\u000C\u000D\u1680\u200B\u200C\u200E\u200F\u2028\u2029\u2581\uFEFF\uFFFD]/gm," "),e.includes("")?e=e.split("").map(i=>i.normalize("NFKC")).join(""):e=e.normalize("NFKC"),e}}class PreTokenizerSequence extends PreTokenizer{constructor(e){super(),this.tokenizers=e.pretokenizers.map(n=>PreTokenizer.fromConfig(n))}pre_tokenize_text(e,n){return this.tokenizers.reduce((i,l)=>l.pre_tokenize(i,n),[e])}}class WhitespacePreTokenizer extends PreTokenizer{constructor(e){super()}pre_tokenize_text(e,n){return e.match(/\w+|[^\w\s]+/g)||[]}}class WhitespaceSplit extends PreTokenizer{constructor(e){super()}pre_tokenize_text(e,n){return whitespace_split(e)}}class ReplacePreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=createPattern(this.config.pattern),this.content=this.config.content}pre_tokenize_text(e,n){return this.pattern===null?[e]:[e.replaceAll(this.pattern,this.config.content)]}}const SPECIAL_TOKEN_ATTRIBUTES=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function padHelper(t,e,n,i){for(const l of Object.keys(t)){const f=e-t[l].length,p=n(l),b=new Array(f).fill(p);t[l]=i==="right"?mergeArrays(t[l],b):mergeArrays(b,t[l])}}function truncateHelper(t,e){for(const n of Object.keys(t))t[n].length=e}class PreTrainedTokenizer extends Callable{constructor(n,i){super();De(this,"return_token_type_ids",!1);De(this,"_default_chat_template",`{% for message in messages %}{{'<|im_start|>' + message['role'] + '
' + message['content'] + '<|im_end|>' + '
'}}{% endfor %}{% if add_generation_prompt %}{{ '<|im_start|>assistant
' }}{% endif %}`);this._tokenizer_config=i,this.normalizer=Normalizer.fromConfig(n.normalizer),this.pre_tokenizer=PreTokenizer.fromConfig(n.pre_tokenizer),this.model=TokenizerModel.fromConfig(n.model,i),this.post_processor=PostProcessor.fromConfig(n.post_processor),this.decoder=Decoder.fromConfig(n.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const l of n.added_tokens){const f=new AddedToken(l);this.added_tokens.push(f),this.model.tokens_to_ids.set(f.content,f.id),this.model.vocab[f.id]=f.content,f.special&&(this.special_tokens.push(f.content),this.all_special_ids.push(f.id))}if(this.additional_special_tokens=i.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_regex=this.added_tokens.length>0?new RegExp(this.added_tokens.map(l=>`${l.lstrip?"\\s*":""}(${escapeRegExp(l.content)})${l.rstrip?"\\s*":""}`).join("|")):null,this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.model_max_length=i.model_max_length,this.remove_space=i.remove_space,this.clean_up_tokenization_spaces=i.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=i.do_lowercase_and_remove_accent??!1,this.padding_side="right",this.legacy=!1,this.chat_template=i.chat_template??null,Array.isArray(this.chat_template)){const l=Object.create(null);for(const{name:f,template:p}of this.chat_template){if(typeof f!="string"||typeof p!="string")throw new Error('Chat template must be a list of objects with "name" and "template" properties');l[f]=p}this.chat_template=l}this._compiled_template_cache=new Map}getToken(...n){for(const i of n){const l=this._tokenizer_config[i];if(l)if(typeof l=="object"){if(l.__type==="AddedToken")return l.content;throw Error(`Unknown token: ${l}`)}else return l}return null}static async from_pretrained(n,{progress_callback:i=null,config:l=null,cache_dir:f=null,local_files_only:p=!1,revision:b="main",legacy:w=null}={}){const v=await loadTokenizer(n,{progress_callback:i,cache_dir:f,local_files_only:p,revision:b,legacy:w});return new this(...v)}_call(n,{text_pair:i=null,add_special_tokens:l=!0,padding:f=!1,truncation:p=null,max_length:b=null,return_tensor:w=!0,return_token_type_ids:v=null}={}){const g=Array.isArray(n);let u;if(g){if(n.length===0)throw Error("text array must be non-empty");if(i!==null){if(Array.isArray(i)){if(n.length!==i.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");u=n.map((h,_)=>this._encode_plus(h,i[_],{add_special_tokens:l,return_token_type_ids:v}))}else u=n.map(h=>this._encode_plus(h,null,{add_special_tokens:l,return_token_type_ids:v}))}else{if(n==null)throw Error("text may not be null or undefined");if(Array.isArray(i))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");u=[this._encode_plus(n,i,{add_special_tokens:l,return_token_type_ids:v})]}if(b===null?f==="max_length"?b=this.model_max_length:b=max$1(u.map(h=>h.input_ids.length))[0]:p||console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation=true` to explicitly truncate examples to max length."),b=Math.min(b,this.model_max_length),f||p)for(let h=0;h<u.length;++h)u[h].input_ids.length!==b&&(u[h].input_ids.length>b?p&&truncateHelper(u[h],b):f&&padHelper(u[h],b,_=>_==="input_ids"?this.pad_token_id:0,this.padding_side));const o={};if(w){if(!(f&&p)&&u.some(_=>{var S;for(const T of Object.keys(_))if(_[T].length!==((S=u[0][T])==null?void 0:S.length))return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const h=[u.length,u[0].input_ids.length];for(const _ of Object.keys(u[0]))o[_]=new Tensor("int64",BigInt64Array.from(u.flatMap(S=>S[_]).map(BigInt)),h)}else{for(const h of Object.keys(u[0]))o[h]=u.map(_=>_[h]);if(!g)for(const h of Object.keys(o))o[h]=o[h][0]}return o}_encode_text(n){return n===null?null:(this.added_tokens_regex?n.split(this.added_tokens_regex).filter(f=>f):[n]).map((f,p)=>{if(this.added_tokens.find(w=>w.content===f)!==void 0)return f;{if(this.remove_space===!0&&(f=f.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(f=lowercase_and_remove_accent(f)),this.normalizer!==null&&(f=this.normalizer(f)),f.length===0)return[];const w=this.pre_tokenizer!==null?this.pre_tokenizer(f,{section_index:p}):[f];return this.model(w)}}).flat()}_encode_plus(n,i=null,{add_special_tokens:l=!0,return_token_type_ids:f=null}={}){const p=this._encode_text(n),b=this._encode_text(i),w=this.post_processor?this.post_processor(p,b,{add_special_tokens:l}):{tokens:mergeArrays(p??[],b??[])},v=this.model.convert_tokens_to_ids(w.tokens),g={input_ids:v,attention_mask:new Array(v.length).fill(1)};return(f??this.return_token_type_ids)&&w.token_type_ids&&(g.token_type_ids=w.token_type_ids),g}encode(n,i=null,{add_special_tokens:l=!0,return_token_type_ids:f=null}={}){const{input_ids:p}=this._encode_plus(n,i,{add_special_tokens:l,return_token_type_ids:f});return p}batch_decode(n,i={}){return n instanceof Tensor&&(n=n.tolist()),n.map(l=>this.decode(l,i))}decode(n,i={}){if(n instanceof Tensor&&(n=prepareTensorForDecode(n)),!Array.isArray(n)||n.length===0||!isIntegralNumber(n[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(n,i)}decode_single(n,{skip_special_tokens:i=!1,clean_up_tokenization_spaces:l=null}){let f=this.model.convert_ids_to_tokens(n);i&&(f=f.filter(b=>!this.special_tokens.includes(b)));let p=this.decoder?this.decoder(f):f.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(p=p.replaceAll(this.decoder.end_of_word_suffix," "),i&&(p=p.trim())),(l??this.clean_up_tokenization_spaces)&&(p=clean_up_tokenization(p)),p}get default_chat_template(){return this._warned_about_chat_template||(console.warn("No chat template is defined for this tokenizer - using a default chat template that implements the ChatML format. If the default is not appropriate for your model, please set `tokenizer.chat_template` to an appropriate template. See https://huggingface.co/docs/transformers/main/chat_templating for more information."),this._warned_about_chat_template=!0),this._default_chat_template}apply_chat_template(n,{chat_template:i=null,add_generation_prompt:l=!1,tokenize:f=!0,padding:p=!1,truncation:b=!1,max_length:w=null,return_tensor:v=!0,tokenizer_kwargs:g={},...u}={}){if(this.chat_template&&typeof this.chat_template=="object"||this.chat_template===null&&this.default_chat_template&&typeof this.default_chat_template=="object"){const S=this.chat_template??this.default_chat_template;if(i!==null&&Object.hasOwn(S,i))i=S[i];else if(i===null&&"default"in S)i=S.default;else if(i===null)throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(S).sort()}.`)}else i??(i=this.chat_template??this.default_chat_template);if(typeof i!="string")throw Error(`chat_template must be a string, but got ${typeof i}`);let o=this._compiled_template_cache.get(i);o===void 0&&(o=new Template(i),this._compiled_template_cache.set(i,o));const h=Object.create(null);for(const S of SPECIAL_TOKEN_ATTRIBUTES){const T=this.getToken(S);T&&(h[S]=T)}const _=o.render({messages:n,add_generation_prompt:l,...h,...u});return f?this._call(_,{add_special_tokens:!1,padding:p,truncation:b,max_length:w,return_tensor:v,...g}).input_ids:_}}class BertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);De(this,"return_token_type_ids",!0)}}class AlbertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);De(this,"return_token_type_ids",!0)}}class MobileBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);De(this,"return_token_type_ids",!0)}}class SqueezeBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);De(this,"return_token_type_ids",!0)}}class DebertaTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);De(this,"return_token_type_ids",!0)}}class DebertaV2Tokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);De(this,"return_token_type_ids",!0)}}class HerbertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);De(this,"return_token_type_ids",!0)}}class ConvBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);De(this,"return_token_type_ids",!0)}}class RoFormerTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);De(this,"return_token_type_ids",!0)}}class DistilBertTokenizer extends PreTrainedTokenizer{}class CamembertTokenizer extends PreTrainedTokenizer{}class XLMTokenizer extends PreTrainedTokenizer{constructor(n,i){super(n,i);De(this,"return_token_type_ids",!0);console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class ElectraTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);De(this,"return_token_type_ids",!0)}}class T5Tokenizer extends PreTrainedTokenizer{}class GPT2Tokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);De(this,"_default_chat_template",'{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}')}}class BartTokenizer extends PreTrainedTokenizer{}class MBartTokenizer extends PreTrainedTokenizer{constructor(e,n){super(e,n),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(i=>this.languageRegex.test(i)),this.lang_to_token=i=>i}_build_translation_inputs(e,n,i){return _build_translation_inputs(this,e,n,i)}}class MBart50Tokenizer extends MBartTokenizer{}class RobertaTokenizer extends PreTrainedTokenizer{}class BloomTokenizer extends GPT2Tokenizer{constructor(e,n){var f,p;const i=".,!?",l=(p=(f=e.pre_tokenizer)==null?void 0:f.pretokenizers[0])==null?void 0:p.pattern;l&&l.Regex===` ?[^(\\s|[${i}])]+`&&(l.Regex=` ?[^\\s${i}]+`),super(e,n)}}const SPIECE_UNDERLINE="";class LlamaTokenizer extends PreTrainedTokenizer{constructor(n,i){super(n,i);De(this,"_default_chat_template",`{% if messages[0]['role'] == 'system' %}{% set loop_messages = messages[1:] %}{% set system_message = messages[0]['content'] %}{% elif USE_DEFAULT_PROMPT == true and not '<<SYS>>' in messages[0]['content'] %}{% set loop_messages = messages %}{% set system_message = 'DEFAULT_SYSTEM_MESSAGE' %}{% else %}{% set loop_messages = messages %}{% set system_message = false %}{% endif %}{% for message in loop_messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if loop.index0 == 0 and system_message != false %}{% set content = '<<SYS>>
' + system_message + '
<</SYS>>

' + message['content'] %}{% else %}{% set content = message['content'] %}{% endif %}{% if message['role'] == 'user' %}{{ bos_token + '[INST] ' + content.strip() + ' [/INST]' }}{% elif message['role'] == 'system' %}{{ '<<SYS>>
' + content.strip() + '
<</SYS>>

' }}{% elif message['role'] == 'assistant' %}{{ ' '  + content.strip() + ' ' + eos_token }}{% endif %}{% endfor %}`);De(this,"DEFAULT_SYSTEM_PROMPT",`You are a helpful, respectful and honest assistant. Always answer as helpfully as possible, while being safe. Your answers should not include any harmful, unethical, racist, sexist, toxic, dangerous, or illegal content. Please ensure that your responses are socially unbiased and positive in nature.

If a question does not make any sense, or is not factually coherent, explain why instead of answering something not correct. If you don't know the answer to a question, please don't share false information.`);this.use_default_system_prompt=i.use_default_system_prompt??!1,this.legacy=i.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new MetaspacePreTokenizer({replacement:SPIECE_UNDERLINE,add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(n){if(n===null)return null;if(this.legacy||n.length===0)return super._encode_text(n);let i=super._encode_text(SPIECE_UNDERLINE+n.replaceAll(SPIECE_UNDERLINE," "));return i.length>1&&i[0]===SPIECE_UNDERLINE&&this.special_tokens.includes(i[1])&&(i=i.slice(1)),i}get default_chat_template(){return super.default_chat_template.replaceAll("USE_DEFAULT_PROMPT",this.use_default_system_prompt?"true":"false").replaceAll("DEFAULT_SYSTEM_MESSAGE",this.DEFAULT_SYSTEM_PROMPT.replaceAll(`
`,"\\n").replaceAll("'","\\'"))}}class CodeLlamaTokenizer extends LlamaTokenizer{}class XLMRobertaTokenizer extends PreTrainedTokenizer{}class MPNetTokenizer extends PreTrainedTokenizer{}class FalconTokenizer extends PreTrainedTokenizer{}class GPTNeoXTokenizer extends PreTrainedTokenizer{}class EsmTokenizer extends PreTrainedTokenizer{}class Qwen2Tokenizer extends PreTrainedTokenizer{}class GemmaTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);De(this,"_default_chat_template",`{% if messages[0]['role'] == 'system' %}{{ raise_exception('System role not supported') }}{% endif %}{% for message in messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if (message['role'] == 'assistant') %}{% set role = 'model' %}{% else %}{% set role = message['role'] %}{% endif %}{{ '<start_of_turn>' + role + '
' + message['content'] | trim + '<end_of_turn>
' }}{% endfor %}{% if add_generation_prompt %}{{'<start_of_turn>model
'}}{% endif %}`)}}class Grok1Tokenizer extends PreTrainedTokenizer{}function _build_translation_inputs(t,e,n,i){if(!("language_codes"in t)||!Array.isArray(t.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in t)||!(t.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in t)||typeof t.lang_to_token!="function")throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const l=i.src_lang,f=i.tgt_lang;if(!t.language_codes.includes(f))throw new Error(`Target language code "${f}" is not valid. Must be one of: {${t.language_codes.join(", ")}}`);if(l!==void 0){if(!t.language_codes.includes(l))throw new Error(`Source language code "${l}" is not valid. Must be one of: {${t.language_codes.join(", ")}}`);for(const p of t.post_processor.config.single)if("SpecialToken"in p&&t.languageRegex.test(p.SpecialToken.id)){p.SpecialToken.id=t.lang_to_token(l);break}}return i.forced_bos_token_id=t.model.convert_tokens_to_ids([t.lang_to_token(f)])[0],t._call(e,n)}class NllbTokenizer extends PreTrainedTokenizer{constructor(e,n){super(e,n),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(i=>this.languageRegex.test(i)),this.lang_to_token=i=>i}_build_translation_inputs(e,n,i){return _build_translation_inputs(this,e,n,i)}}class M2M100Tokenizer extends PreTrainedTokenizer{constructor(e,n){super(e,n),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(i=>this.languageRegex.test(i)).map(i=>i.slice(2,-2)),this.lang_to_token=i=>`__${i}__`}_build_translation_inputs(e,n,i){return _build_translation_inputs(this,e,n,i)}}const WHISPER_LANGUAGES=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],WHISPER_LANGUAGE_MAPPING=new Map(WHISPER_LANGUAGES),WHISPER_TO_LANGUAGE_CODE_MAPPING=new Map([...WHISPER_LANGUAGES.map(([t,e])=>[e,t]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);class WhisperTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);De(this,"_default_chat_template",'{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}')}_decode_asr(n,{return_timestamps:i=!1,return_language:l=!1,time_precision:f=null,force_full_sequences:p=!0}={}){if(f===null)throw Error("Must specify time_precision");let b=null;const w=i==="word";function v(){return{language:b,timestamp:[null,null],text:""}}const g=[];let u=v(),o=0;const h=this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1;let _=[],S=[],T=!1,O=null;const j=new Set(this.all_special_ids);for(const R of n){const I=R.tokens,$=w?R.token_timestamps:null;let F=null,L=h;if("stride"in R){const[Q,ee,X]=R.stride;if(o-=ee,O=Q-X,ee&&(L=ee/f+h),X)for(let W=I.length-1;W>=0;--W){const z=I[W];if(z>=h){if(F!==null&&(z-h)*f<O)break;F=z}}}let V=[],Y=[];for(let Q=0;Q<I.length;++Q){const ee=I[Q];if(j.has(ee)){const X=this.decode([ee]),W=WHISPER_LANGUAGE_MAPPING.get(X.slice(2,-2));if(W!==void 0){if(b!==null&&W!==b&&!i){_.push(V);const z=this.findLongestCommonSequence(_)[0],q=this.decode(z);u.text=q,g.push(u),_=[],V=[],u=v()}b=u.language=W}}else if(ee>=h){const X=(ee-h)*f+o,W=round$1(X,2);if(F!==null&&ee>=F)T=!0;else if(T||_.length>0&&ee<L)T=!1;else if(u.timestamp[0]===null)u.timestamp[0]=W;else if(W!==u.timestamp[0]){u.timestamp[1]=W,_.push(V),w&&S.push(Y);const[z,q]=this.findLongestCommonSequence(_,S),ce=this.decode(z);u.text=ce,w&&(u.words=this.collateWordTimestamps(z,q,b)),g.push(u),_=[],V=[],S=[],Y=[],u=v()}}else if(V.push(ee),w){let X=round$1($[Q]+o,2),W;Q+1<$.length?W=round$1($[Q+1]+o,2):W=null,Y.push([X,W])}}if("stride"in R){const[Q,ee,X]=R.stride;o+=Q-X}V.length>0?(_.push(V),w&&S.push(Y)):_.every(Q=>Q.length===0)&&(u=v(),_=[],V=[],S=[],Y=[])}if(_.length>0){if(p&&i)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[R,I]=this.findLongestCommonSequence(_,S),$=this.decode(R);u.text=$,w&&(u.words=this.collateWordTimestamps(R,I,b)),g.push(u)}let C=Object.create(null);const D=g.map(R=>R.text).join("");if(i||l){for(let R=0;R<g.length;++R){const I=g[R];i||delete I.timestamp,l||delete I.language}if(w){const R=[];for(const I of g)for(const $ of I.words)R.push($);C={chunks:R}}else C={chunks:g}}return[D,C]}findLongestCommonSequence(n,i=null){let l=n[0],f=l.length,p=[];const b=Array.isArray(i)&&i.length>0;let w=b?[]:null,v=b?i[0]:null;for(let g=1;g<n.length;++g){const u=n[g];let o=0,h=[f,f,0,0];const _=u.length;for(let R=1;R<f+_;++R){const I=R/1e4,$=Math.max(0,f-R),F=Math.min(f,f+_-R),L=l.slice($,F),V=Math.max(0,R-f),Y=Math.min(_,R),Q=u.slice(V,Y);if(L.length!==Q.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");const ee=L.filter((W,z)=>W===Q[z]).length,X=ee/R+I;ee>1&&X>o&&(o=X,h=[$,F,V,Y])}const[S,T,O,j]=h,C=Math.floor((T+S)/2),D=Math.floor((j+O)/2);p.push(...l.slice(0,C)),l=u.slice(D),f=l.length,b&&(w.push(...v.slice(0,C)),v=i[g].slice(D))}return p.push(...l),b?(w.push(...v),[p,w]):[p,[]]}collateWordTimestamps(n,i,l){const[f,p,b]=this.combineTokensIntoWords(n,l),w=[];for(let v=0;v<f.length;++v){const g=b[v];w.push({text:f[v],timestamp:[i[g.at(0)][0],i[g.at(-1)][1]]})}return w}combineTokensIntoWords(n,i,l=`"'([{-`,f=`"'.,!?:)]}`){i=i??"english";let p,b,w;return["chinese","japanese","thai","lao","myanmar"].includes(i)?[p,b,w]=this.splitTokensOnUnicode(n):[p,b,w]=this.splitTokensOnSpaces(n),this.mergePunctuations(p,b,w,l,f)}decode(n,i){let l;return i&&i.decode_with_timestamps?(n instanceof Tensor&&(n=prepareTensorForDecode(n)),l=this.decodeWithTimestamps(n,i)):l=super.decode(n,i),l}decodeWithTimestamps(n,i){const l=(i==null?void 0:i.time_precision)??.02,f=Array.from(this.all_special_ids).at(-1)+1;let p=[[]];for(const b of n)if(b>=f){const w=round$1((b-f)*l,2);p.push(`<|${w}|>`),p.push([])}else p[p.length-1].push(b);return p=p.map(b=>typeof b=="string"?b:super.decode(b,i)),p.join("")}splitTokensOnUnicode(n){const i=this.decode(n,{decode_with_timestamps:!0}),l="",f=[],p=[],b=[];let w=[],v=[],g=0;for(let u=0;u<n.length;++u){const o=n[u];w.push(o),v.push(u);const h=this.decode(w,{decode_with_timestamps:!0});(!h.includes(l)||i[g+h.indexOf(l)]===l)&&(f.push(h),p.push(w),b.push(v),w=[],v=[],g+=h.length)}return[f,p,b]}splitTokensOnSpaces(n){const[i,l,f]=this.splitTokensOnUnicode(n),p=[],b=[],w=[],v=new RegExp(`^[${PUNCTUATION_REGEX}]$`,"gu");for(let g=0;g<i.length;++g){const u=i[g],o=l[g],h=f[g],_=o[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),S=u.startsWith(" "),T=u.trim(),O=v.test(T);if(_||S||O||p.length===0)p.push(u),b.push(o),w.push(h);else{const j=p.length-1;p[j]+=u,b[j].push(...o),w[j].push(...h)}}return[p,b,w]}mergePunctuations(n,i,l,f,p){const b=structuredClone(n),w=structuredClone(i),v=structuredClone(l);let g=b.length-2,u=b.length-1;for(;g>=0;)b[g].startsWith(" ")&&f.includes(b[g].trim())?(b[u]=b[g]+b[u],w[u]=mergeArrays(w[g],w[u]),v[u]=mergeArrays(v[g],v[u]),b[g]="",w[g]=[],v[g]=[]):u=g,--g;for(g=0,u=1;u<b.length;)!b[g].endsWith(" ")&&p.includes(b[u])?(b[g]+=b[u],w[g]=mergeArrays(w[g],w[u]),v[g]=mergeArrays(v[g],v[u]),b[u]="",w[u]=[],v[u]=[]):g=u,++u;return[b.filter(o=>o),w.filter(o=>o.length>0),v.filter(o=>o.length>0)]}get_decoder_prompt_ids({language:n=null,task:i=null,no_timestamps:l=!0}={}){const f=[];if(n){n=n.toLowerCase();let p=WHISPER_TO_LANGUAGE_CODE_MAPPING.get(n);if(p===void 0)if(WHISPER_LANGUAGE_MAPPING.has(n))p=n;else{const v=n.length===2?WHISPER_LANGUAGE_MAPPING.keys():WHISPER_LANGUAGE_MAPPING.values();throw new Error(`Language "${n}" is not supported. Must be one of: ${JSON.stringify(v)}`)}const b=this.model.tokens_to_ids.get(`<|${p}|>`);if(b===void 0)throw new Error(`Unable to find language "${p}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);f.push(b)}else f.push(null);if(i){if(i=i.toLowerCase(),i!=="transcribe"&&i!=="translate")throw new Error(`Task "${i}" is not supported. Must be one of: ["transcribe", "translate"]`);const p=this.model.tokens_to_ids.get(`<|${i}|>`);if(p===void 0)throw new Error(`Unable to find task "${i}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);f.push(p)}else f.push(null);if(l){const p=this.model.tokens_to_ids.get("<|notimestamps|>");if(p===void 0)throw new Error('Unable to find "<|notimestamps|>" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.');f.push(p)}return f.map((p,b)=>[b+1,p]).filter(p=>p[1]!==null)}}class CodeGenTokenizer extends PreTrainedTokenizer{}class CLIPTokenizer extends PreTrainedTokenizer{}class SiglipTokenizer extends PreTrainedTokenizer{}class MarianTokenizer extends PreTrainedTokenizer{constructor(e,n){super(e,n),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(i=>this.languageRegex.test(i)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(e){if(e===null)return null;const[n,...i]=e.trim().split(this.languageRegex);if(i.length===0)return super._encode_text(n);if(i.length===2){const[l,f]=i;return this.supported_language_codes.includes(l)||console.warn(`Unsupported language code "${l}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),mergeArrays([l],super._encode_text(f))}}}class Wav2Vec2CTCTokenizer extends PreTrainedTokenizer{}class BlenderbotTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);De(this,"_default_chat_template","{% for message in messages %}{% if message['role'] == 'user' %}{{ ' ' }}{% endif %}{{ message['content'] }}{% if not loop.last %}{{ '  ' }}{% endif %}{% endfor %}{{ eos_token }}")}}class BlenderbotSmallTokenizer extends BlenderbotTokenizer{}class SpeechT5Tokenizer extends PreTrainedTokenizer{}class NougatTokenizer extends PreTrainedTokenizer{}class VitsTokenizer extends PreTrainedTokenizer{constructor(e,n){super(e,n),this.decoder=new VitsDecoder({})}}class CohereTokenizer extends PreTrainedTokenizer{}class AutoTokenizer{static async from_pretrained(e,{quantized:n=!0,progress_callback:i=null,config:l=null,cache_dir:f=null,local_files_only:p=!1,revision:b="main",legacy:w=null}={}){var h;const[v,g]=await loadTokenizer(e,{progress_callback:i,cache_dir:f,local_files_only:p,revision:b,legacy:w}),u=((h=g.tokenizer_class)==null?void 0:h.replace(/Fast$/,""))??"PreTrainedTokenizer";let o=this.TOKENIZER_CLASS_MAPPING[u];return o||(console.warn(`Unknown tokenizer class "${u}", attempting to construct from base class.`),o=PreTrainedTokenizer),new o(v,g)}}De(AutoTokenizer,"TOKENIZER_CLASS_MAPPING",{T5Tokenizer,DistilBertTokenizer,CamembertTokenizer,DebertaTokenizer,DebertaV2Tokenizer,BertTokenizer,HerbertTokenizer,ConvBertTokenizer,RoFormerTokenizer,XLMTokenizer,ElectraTokenizer,MobileBertTokenizer,SqueezeBertTokenizer,AlbertTokenizer,GPT2Tokenizer,BartTokenizer,MBartTokenizer,MBart50Tokenizer,RobertaTokenizer,WhisperTokenizer,CodeGenTokenizer,CLIPTokenizer,SiglipTokenizer,MarianTokenizer,BloomTokenizer,NllbTokenizer,M2M100Tokenizer,LlamaTokenizer,CodeLlamaTokenizer,XLMRobertaTokenizer,MPNetTokenizer,FalconTokenizer,GPTNeoXTokenizer,EsmTokenizer,Wav2Vec2CTCTokenizer,BlenderbotTokenizer,BlenderbotSmallTokenizer,SpeechT5Tokenizer,NougatTokenizer,VitsTokenizer,Qwen2Tokenizer,GemmaTokenizer,Grok1Tokenizer,CohereTokenizer,PreTrainedTokenizer});async function loadConfig(t,e){return await getModelJSON(t,"config.json",!0,e)}class PretrainedConfig{constructor(e){this.model_type=null,this.is_encoder_decoder=!1,Object.assign(this,e)}static async from_pretrained(e,{progress_callback:n=null,config:i=null,cache_dir:l=null,local_files_only:f=!1,revision:p="main"}={}){let b=i??await loadConfig(e,{progress_callback:n,cache_dir:l,local_files_only:f,revision:p});return new this(b)}}class AutoConfig{static async from_pretrained(...e){return PretrainedConfig.from_pretrained(...e)}}class LogitsProcessorList extends Callable{constructor(){super(),this.processors=[]}push(e){this.processors.push(e)}extend(e){this.processors.push(...e)}_call(e,n){for(let i of n)this.processors.forEach(l=>l(e,i))}[Symbol.iterator](){return this.processors.values()}}class LogitsProcessor extends Callable{_call(e,n){throw Error("`_call` should be implemented in a subclass")}}class ForceTokensLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.force_token_map=Object.fromEntries(e??[])}_call(e,n){let i=this.force_token_map[e.length];return exists(i)&&(n.data.fill(-1/0),n.data[i]=0),n}}class ForcedBOSTokenLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.bos_token_id=e}_call(e,n){return e.length===1&&(n.data.fill(-1/0),n.data[this.bos_token_id]=0),n}}class ForcedEOSTokenLogitsProcessor extends LogitsProcessor{constructor(e,n){super(),this.max_length=e,this.forced_eos_token_id=n}_call(e,n){}}class SuppressTokensAtBeginLogitsProcessor extends LogitsProcessor{constructor(e,n){super(),this.begin_suppress_tokens=e,this.begin_index=n}_call(e,n){if(e.length===this.begin_index)for(let i of this.begin_suppress_tokens)n.data[i]=-1/0;return n}}class WhisperTimeStampLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.eos_token_id=e.eos_token_id,this.no_timestamps_token_id=e.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=(e.forced_decoder_ids||[]).length+2,e.forced_decoder_ids.slice(-1)[0][1]===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=e.max_initial_timestamp_index}_call(e,n){const i=n.data;if(i[this.no_timestamps_token_id]=-1/0,e.length===this.begin_index-1)return i.fill(-1/0),i[this.timestamp_begin]=0,n;const l=e.slice(this.begin_index),f=l.length>=1&&l[l.length-1]>=this.timestamp_begin,p=l.length<2||l[l.length-2]>=this.timestamp_begin;if(f&&(p?i.subarray(this.timestamp_begin).fill(-1/0):i.subarray(0,this.eos_token_id).fill(-1/0)),e.length===this.begin_index&&this.max_initial_timestamp_index!==null){const g=this.timestamp_begin+this.max_initial_timestamp_index;i.subarray(g+1).fill(-1/0)}const b=log_softmax(i),w=Math.log(b.subarray(this.timestamp_begin).map(Math.exp).reduce((g,u)=>g+u)),v=max$1(b.subarray(0,this.timestamp_begin))[0];return w>v&&i.subarray(0,this.timestamp_begin).fill(-1/0),n}}class NoRepeatNGramLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.no_repeat_ngram_size=e}getNgrams(e){const n=e.length,i=[];for(let f=0;f<n+1-this.no_repeat_ngram_size;++f){const p=[];for(let b=0;b<this.no_repeat_ngram_size;++b)p.push(e[f+b]);i.push(p)}const l=new Map;for(const f of i){const p=f.slice(0,f.length-1),b=JSON.stringify(p),w=l.get(b)??[];w.push(f[f.length-1]),l.set(b,w)}return l}getGeneratedNgrams(e,n){const i=n.slice(n.length+1-this.no_repeat_ngram_size,n.length);return e.get(JSON.stringify(i))??[]}calcBannedNgramTokens(e){const n=[];if(e.length+1<this.no_repeat_ngram_size)return n;{const i=this.getNgrams(e);return this.getGeneratedNgrams(i,e)}}_call(e,n){const i=this.calcBannedNgramTokens(e);for(const l of i)n.data[l]=-1/0;return n}}class RepetitionPenaltyLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.penalty=e}_call(e,n){for(const i of e)n.data[i]<0?n.data[i]*=this.penalty:n.data[i]/=this.penalty;return n}}class MinLengthLogitsProcessor extends LogitsProcessor{constructor(e,n){super(),this.min_length=e,this.eos_token_id=Array.isArray(n)?n:[n]}_call(e,n){if(e.length<this.min_length)for(const i of this.eos_token_id)n.data[i]=-1/0;return n}}class MinNewTokensLengthLogitsProcessor extends LogitsProcessor{constructor(e,n,i){super(),this.prompt_length_to_skip=e,this.min_new_tokens=n,this.eos_token_id=Array.isArray(i)?i:[i]}_call(e,n){if(e.length-this.prompt_length_to_skip<this.min_new_tokens)for(const l of this.eos_token_id)n.data[l]=-1/0;return n}}class NoBadWordsLogitsProcessor extends LogitsProcessor{constructor(e,n){super(),this.bad_words_ids=e,this.eos_token_id=Array.isArray(n)?n:[n]}_call(e,n){for(const i of this.bad_words_ids){let l=!0;for(let f=1;f<=i.length-1&&i.length<e.length;++f)if(i.at(-f-1)!==e.at(-f)){l=!1;break}l&&(n.data[i.at(-1)]=-1/0)}return n}}const GenerationConfig=class{constructor(t={}){this.max_length=t.max_length??20,this.max_new_tokens=t.max_new_tokens??null,this.min_length=t.min_length??0,this.min_new_tokens=t.min_new_tokens??null,this.early_stopping=t.early_stopping??!1,this.max_time=t.max_time??null,this.do_sample=t.do_sample??!1,this.num_beams=t.num_beams??1,this.num_beam_groups=t.num_beam_groups??1,this.penalty_alpha=t.penalty_alpha??null,this.use_cache=t.use_cache??!0,this.temperature=t.temperature??1,this.top_k=t.top_k??50,this.top_p=t.top_p??1,this.typical_p=t.typical_p??1,this.epsilon_cutoff=t.epsilon_cutoff??0,this.eta_cutoff=t.eta_cutoff??0,this.diversity_penalty=t.diversity_penalty??0,this.repetition_penalty=t.repetition_penalty??1,this.encoder_repetition_penalty=t.encoder_repetition_penalty??1,this.length_penalty=t.length_penalty??1,this.no_repeat_ngram_size=t.no_repeat_ngram_size??0,this.bad_words_ids=t.bad_words_ids??null,this.force_words_ids=t.force_words_ids??null,this.renormalize_logits=t.renormalize_logits??!1,this.constraints=t.constraints??null,this.forced_bos_token_id=t.forced_bos_token_id??null,this.forced_eos_token_id=t.forced_eos_token_id??null,this.remove_invalid_values=t.remove_invalid_values??!1,this.exponential_decay_length_penalty=t.exponential_decay_length_penalty??null,this.suppress_tokens=t.suppress_tokens??null,this.begin_suppress_tokens=t.begin_suppress_tokens??null,this.forced_decoder_ids=t.forced_decoder_ids??null,this.num_return_sequences=t.num_return_sequences??1,this.output_attentions=t.output_attentions??!1,this.output_hidden_states=t.output_hidden_states??!1,this.output_scores=t.output_scores??!1,this.return_dict_in_generate=t.return_dict_in_generate??!1,this.pad_token_id=t.pad_token_id??null,this.bos_token_id=t.bos_token_id??null,this.eos_token_id=t.eos_token_id??null,this.encoder_no_repeat_ngram_size=t.encoder_no_repeat_ngram_size??0,this.decoder_start_token_id=t.decoder_start_token_id??null,this.generation_kwargs=t.generation_kwargs??{}}};class Sampler extends Callable{constructor(e){super(),this.generation_config=e}_call(e,n=-1){return this.sample(e,n)}sample(e,n){throw Error("sample should be implemented in subclasses.")}getLogits(e,n){let i=e.dims.at(-1),l=e.data;if(n===-1)l=l.slice(-i);else{let f=n*i;l=l.slice(f,f+i)}return this.generation_config.temperature>0&&(l=l.map(f=>f/this.generation_config.temperature)),l}randomSelect(e){let n=e.reduce((l,f)=>l+f,0),i=Math.random()*n;for(let l=0;l<e.length;++l)if(i-=e[l],i<=0)return l;return 0}static getSampler(e){if(e.do_sample)return new MultinomialSampler(e);if(e.num_beams>1)return new BeamSearchSampler(e);if(e.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${e.num_return_sequences}.`);return new GreedySampler(e)}}class GreedySampler extends Sampler{sample(e,n=-1){let i=this.getLogits(e,n);return[[max$1(i)[1],0]]}}class MultinomialSampler extends Sampler{sample(e,n=-1){let i=e.dims.at(-1);this.generation_config.top_k>0&&(i=Math.min(this.generation_config.top_k,i));const l=this.getLogits(e,n),f=getTopItems(l,i),p=softmax(f.map(b=>b[1]));return Array.from({length:this.generation_config.num_beams},()=>{const b=this.randomSelect(p);return[f[b][0],Math.log(p[b])]})}}class BeamSearchSampler extends Sampler{sample(e,n=-1){let i=e.dims.at(-1);this.generation_config.top_k>0&&(i=Math.min(this.generation_config.top_k,i));const l=this.getLogits(e,n),f=getTopItems(l,i),p=softmax(f.map(b=>b[1]));return Array.from({length:this.generation_config.num_beams},(b,w)=>[f[w][0],Math.log(p[w])])}}const{InferenceSession,Tensor:ONNXTensor,env}=ONNX,MODEL_TYPES={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5},MODEL_TYPE_MAPPING=new Map,MODEL_NAME_TO_CLASS_MAPPING=new Map,MODEL_CLASS_TO_NAME_MAPPING=new Map;async function constructSession(t,e,n){let i=`onnx/${e}${n.quantized?"_quantized":""}.onnx`,l=await getModelFile(t,i,!0,n);try{return await InferenceSession.create(l,{executionProviders})}catch(f){if(executionProviders.length===1&&executionProviders[0]==="wasm")throw f;return console.warn(f),console.warn("Something went wrong during model construction (most likely a missing operation). Using `wasm` as a fallback. "),await InferenceSession.create(l,{executionProviders:["wasm"]})}}function validateInputs(t,e){const n=Object.create(null),i=[];for(const p of t.inputNames){const b=e[p];if(!(b instanceof Tensor)){i.push(p);continue}n[p]=env.wasm.proxy?b.clone():b}if(i.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${i.join(", ")}.`);const l=Object.keys(e).length,f=t.inputNames.length;if(l>f){let p=Object.keys(e).filter(b=>!t.inputNames.includes(b));console.warn(`WARNING: Too many inputs were provided (${l} > ${f}). The following inputs will be ignored: "${p.join(", ")}".`)}return n}async function sessionRun(t,e){const n=validateInputs(t,e);try{let i=await t.run(n);return i=replaceTensors(i),i}catch(i){throw console.error(`An error occurred during model execution: "${i}".`),console.error("Inputs given to model:",n),i}}function replaceTensors(t){for(let e in t)t[e]instanceof ONNXTensor?t[e]=new Tensor(t[e]):typeof t[e]=="object"&&replaceTensors(t[e]);return t}function toI64Tensor(t){if(t instanceof Tensor)return t;if(t.length===0)throw Error("items must be non-empty");if(Array.isArray(t[0])){if(t.some(e=>e.length!==t[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new Tensor("int64",BigInt64Array.from(t.flat().map(e=>BigInt(e))),[t.length,t[0].length])}else return new Tensor("int64",BigInt64Array.from(t.map(e=>BigInt(e))),[1,t.length])}function prepareAttentionMask(t,e){let n=t.config.pad_token_id??null,i=t.config.eos_token_id??null;isIntegralNumber(i)&&(i=[i]);let l=e.indexOf(n)!==-1,f=i===null||!i.includes(n);if(l&&f){let p=BigInt64Array.from(e.data.map(b=>b!=n));return new Tensor("int64",p,e.dims)}else return ones_like(e)}function preparePositionIds(t,e,n){if(!t.inputNames.includes("position_ids"))return;const i=new BigInt64Array(e.attention_mask.data.length);for(let l=0;l<e.attention_mask.dims[0];++l){let f=l*e.attention_mask.dims[1],p=BigInt(0);for(let b=0;b<e.attention_mask.dims[1];++b){const w=f+b;e.attention_mask.data[w]===0n?i[w]=BigInt(1):(i[w]=p,p+=e.attention_mask.data[w])}}e.position_ids=new Tensor("int64",i,e.attention_mask.dims),n&&(e.position_ids=e.position_ids.slice(null,-1).unsqueeze_(-1))}function boolTensor(t){return new Tensor("bool",[t],[1])}async function seq2seqForward(t,e){let{encoder_outputs:n,past_key_values:i}=e;n||(n=(await encoderForward(t,e)).last_hidden_state);let l={input_ids:e.decoder_input_ids,encoder_hidden_states:n};const f=!!i;t.decoder_merged_session.inputNames.includes("use_cache_branch")&&(l.use_cache_branch=boolTensor(f)),t.decoder_merged_session.inputNames.includes("encoder_attention_mask")&&(l.encoder_attention_mask=e.attention_mask),preparePositionIds(t.decoder_merged_session,l,f),t.addPastKeyValues(l,i);const p=await sessionRun(t.decoder_merged_session,l);let b=p.logits;i=t.getPastKeyValues(p,i);const w=t.getAttentions(p);return new Seq2SeqLMOutput({logits:b,past_key_values:i,encoder_outputs:n,...w})}function seq2seqStartBeams(t,e,n,i){let l=[],f=0;const p=t.requires_attention_mask??!0;let b=n.decoder_input_ids??n.decoder_start_token_id??n.bos_token_id??n.eos_token_id;b instanceof Tensor?b=b.tolist().flat():Array.isArray(b)||(b=[b]);for(let w of e){w.dims=[1,...w.dims];let v={inputs:w,encoder_outputs:null,prev_model_outputs:null,output_token_ids:b,done:!1,score:0,id:f++};p&&(v.attention_mask=prepareAttentionMask(t,w)),l.push(v)}return l}async function seq2seqRunBeam(t,e){var p;const n=t.main_input_name;let i=e.output_token_ids;e.prev_model_outputs&&(i=i.slice(-1));let l={[n]:e.inputs,decoder_input_ids:toI64Tensor(i),encoder_outputs:e.encoder_outputs,past_key_values:(p=e.prev_model_outputs)==null?void 0:p.past_key_values};e.attention_mask&&(l.attention_mask=e.attention_mask);let f=await t.forward(l);return e.prev_model_outputs=f,e.encoder_outputs=f.encoder_outputs,f}function seq2seqUpdatebeam(t,e){t.output_token_ids=[...t.output_token_ids,e]}async function encoderForward(t,e){const n=Object.create(null);for(const i of t.session.inputNames)n[i]=e[i];return t.session.inputNames.includes("token_type_ids")&&!n.token_type_ids&&(n.token_type_ids=new Tensor("int64",new BigInt64Array(n.input_ids.data.length),n.input_ids.dims)),await sessionRun(t.session,n)}async function decoderForward(t,e){let{input_ids:n,past_key_values:i,attention_mask:l}=e,f={input_ids:n,attention_mask:l??prepareAttentionMask(t,n)};const p=!!i;t.session.inputNames.includes("use_cache_branch")&&(f.use_cache_branch=boolTensor(p)),preparePositionIds(t.session,f,p),t.addPastKeyValues(f,i);let b=await sessionRun(t.session,f),w=b.logits;return i=t.getPastKeyValues(b,i),{logits:w,past_key_values:i}}function decoderStartBeams(t,e,n,i,l){let f=[],p=0;for(let b of e){let w=b.tolist().map(Number);b.dims=[1,...b.dims];let v;l?(v=l[p],v.dims=[1,...v.dims]):v=prepareAttentionMask(t,b);let g={input:b,model_input_ids:b,attention_mask:v,prev_model_outputs:null,output_token_ids:w,num_output_tokens:i,done:!1,score:0,id:p++};f.push(g)}return f}async function decoderRunBeam(t,e){var f;let n=new BigInt64Array(e.output_token_ids.length).fill(1n),i={input_ids:e.model_input_ids,attention_mask:new Tensor("int64",n,[1,n.length]),past_key_values:(f=e.prev_model_outputs)==null?void 0:f.past_key_values},l=await t.forward(i);return e.prev_model_outputs=l,l}function decoderUpdatebeam(t,e){t.output_token_ids=[...t.output_token_ids,e],t.model_input_ids=new Tensor("int64",[BigInt(e)],[1,1])}class PreTrainedModel extends Callable{constructor(n,i){super();De(this,"main_input_name","input_ids");this.config=n,this.session=i;const l=MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor),f=MODEL_TYPE_MAPPING.get(l);this.can_generate=!1,this._runBeam=null,this._getStartBeams=null,this._updateBeam=null,this._forward=null,f===MODEL_TYPES.DecoderOnly?(this.can_generate=!0,this._runBeam=decoderRunBeam,this._getStartBeams=decoderStartBeams,this._updateBeam=decoderUpdatebeam,this._forward=decoderForward):f===MODEL_TYPES.Seq2Seq||f===MODEL_TYPES.Vision2Seq?(this.can_generate=!0,this._runBeam=seq2seqRunBeam,this._getStartBeams=seq2seqStartBeams,this._updateBeam=seq2seqUpdatebeam,this._forward=seq2seqForward):f===MODEL_TYPES.EncoderDecoder?this._forward=encoderForward:this._forward=encoderForward}async dispose(){const n=[];for(let i of Object.keys(this)){const l=this[i];l instanceof InferenceSession&&n.push(l.handler.dispose())}return await Promise.all(n)}static async from_pretrained(n,{quantized:i=!0,progress_callback:l=null,config:f=null,cache_dir:p=null,local_files_only:b=!1,revision:w="main",model_file_name:v=null}={}){let g={quantized:i,progress_callback:l,config:f,cache_dir:p,local_files_only:b,revision:w,model_file_name:v};const u=MODEL_CLASS_TO_NAME_MAPPING.get(this),o=MODEL_TYPE_MAPPING.get(u);let h;return o===MODEL_TYPES.DecoderOnly?h=await Promise.all([AutoConfig.from_pretrained(n,g),constructSession(n,g.model_file_name??"decoder_model_merged",g),getModelJSON(n,"generation_config.json",!1,g)]):o===MODEL_TYPES.Seq2Seq||o===MODEL_TYPES.Vision2Seq?h=await Promise.all([AutoConfig.from_pretrained(n,g),constructSession(n,"encoder_model",g),constructSession(n,"decoder_model_merged",g),getModelJSON(n,"generation_config.json",!1,g)]):o===MODEL_TYPES.MaskGeneration?h=await Promise.all([AutoConfig.from_pretrained(n,g),constructSession(n,"vision_encoder",g),constructSession(n,"prompt_encoder_mask_decoder",g)]):o===MODEL_TYPES.EncoderDecoder?h=await Promise.all([AutoConfig.from_pretrained(n,g),constructSession(n,"encoder_model",g),constructSession(n,"decoder_model_merged",g)]):(o!==MODEL_TYPES.EncoderOnly&&console.warn(`Model type for '${u??(f==null?void 0:f.model_type)}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`),h=await Promise.all([AutoConfig.from_pretrained(n,g),constructSession(n,g.model_file_name??"model",g)])),new this(...h)}async _call(n){return await this.forward(n)}async forward(n){return await this._forward(this,n)}_get_logits_processor(n,i,l=null){const f=new LogitsProcessorList;if(n.repetition_penalty!==null&&n.repetition_penalty!==1&&f.push(new RepetitionPenaltyLogitsProcessor(n.repetition_penalty)),n.no_repeat_ngram_size!==null&&n.no_repeat_ngram_size>0&&f.push(new NoRepeatNGramLogitsProcessor(n.no_repeat_ngram_size)),n.bad_words_ids!==null&&f.push(new NoBadWordsLogitsProcessor(n.bad_words_ids,n.eos_token_id)),n.min_length!==null&&n.eos_token_id!==null&&n.min_length>0&&f.push(new MinLengthLogitsProcessor(n.min_length,n.eos_token_id)),n.min_new_tokens!==null&&n.eos_token_id!==null&&n.min_new_tokens>0&&f.push(new MinNewTokensLengthLogitsProcessor(i,n.min_new_tokens,n.eos_token_id)),n.forced_bos_token_id!==null&&f.push(new ForcedBOSTokenLogitsProcessor(n.forced_bos_token_id)),n.forced_eos_token_id!==null&&f.push(new ForcedEOSTokenLogitsProcessor(n.max_length,n.forced_eos_token_id)),n.begin_suppress_tokens!==null){let p=i>1||n.forced_bos_token_id===null?i:i+1;n.forced_decoder_ids!==null&&(p+=n.forced_decoder_ids[n.forced_decoder_ids.length-1][0]),f.push(new SuppressTokensAtBeginLogitsProcessor(n.begin_suppress_tokens,p))}return n.forced_decoder_ids!==null&&f.push(new ForceTokensLogitsProcessor(n.forced_decoder_ids)),l!==null&&f.extend(l),f}_get_generation_config(n){let i=new GenerationConfig(this.config);return"generation_config"in this&&Object.assign(i,this.generation_config),n!==null&&Object.assign(i,n),i}async generate(n,i=null,l=null,{inputs_attention_mask:f=null}={}){if(!this.can_generate){let O=`The current model class (${MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor)}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;const j=this.config.model_type,C=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(j)??MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES.get(j)??MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES.get(j)??MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES.get(j);throw C&&(O+=` Please use the following class instead: '${C[0]}'`),Error(O)}if(!(n instanceof Tensor)&&!isTypedArray$1(n)&&!Array.isArray(n))throw Error(`\`inputs\` must be a Tensor, TypedArray, or Array, but is "${n.constructor.name}".`);let p;if(this.config.is_encoder_decoder)p=0;else if(p=n instanceof Tensor?n.dims.at(-1):n.length,p===0)throw Error("Must supply a non-empty array of input token ids.");i=this._get_generation_config(i),l=l??new LogitsProcessorList,l=this._get_logits_processor(i,p,l);let b=i.eos_token_id;b!==null&&!Array.isArray(b)&&(b=[b]);let w=1;const v=w+(i.max_new_tokens??1/0),g=Number.isInteger(i.max_length)&&(i.max_new_tokens??null)===null;let u=Sampler.getSampler(i),o=this.getStartBeams(n,i,w,f);for(;o.some(T=>!T.done)&&w<v;){let T=[];for(let O of o){if(O.done){T.push(O);continue}if(g&&O.output_token_ids.length>=i.max_length){O.done=!0,T.push(O);continue}let j=await this.runBeam(O);i.output_attentions&&this.addAttentionsToBeam(O,j),i.output_scores;let C=j.logits.slice(null,-1,null);l(O.output_token_ids,C);let D=u(C);for(let[R,I]of D){let $={...O};this.updateBeam($,R),$.score+=I,b&&b.includes(R)&&($.done=!0),T.push($)}}++w,T=this.groupBeams(T).map(O=>O.sort((j,C)=>C.score-j.score).slice(0,i.num_beams)),o=T.flat(),i.callback_function&&i.callback_function(o)}const h=this.groupBeams(o),_=T=>h.map(O=>i.num_return_sequences>1?O.slice(0,i.num_return_sequences).map(j=>j[T]):[O[0][T]]).flat(),S=_("output_token_ids");if(i.return_dict_in_generate){const T=_("decoder_attentions"),O=_("cross_attentions");return{sequences:S,decoder_attentions:T,cross_attentions:O}}else return S}addAttentionsToBeam(n,i){if(this.config.is_encoder_decoder){if(!i.cross_attentions||i.cross_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce cross-attentions. This is most likely because the model was not exported with `output_attentions=True`.");n.cross_attentions||(n.cross_attentions=[]),n.cross_attentions.push(i.cross_attentions)}if(!i.decoder_attentions||i.decoder_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce decoder-attentions. This is most likely because the model was not exported with `output_attentions=True`.");n.decoder_attentions||(n.decoder_attentions=[]),n.decoder_attentions.push(i.decoder_attentions)}groupBeams(n){const i=Object.create(null);for(const l of n)i[l.id]===void 0?i[l.id]=[l]:i[l.id].push(l);return Object.values(i)}getPastKeyValues(n,i){const l=Object.create(null);for(const f in n)if(f.startsWith("present")){let p=f.replace("present","past_key_values");i&&f.includes("encoder")?l[p]=i[p]:l[p]=n[f]}return l}getAttentions(n){const i=Object.create(null);for(const l of["cross_attentions","decoder_attentions"]){const f=[];for(const p in n)if(p.startsWith(l)){const b=p.split(".").pop();f[b]=n[p]}i[l]=f}return i}addPastKeyValues(n,i){if(i)Object.assign(n,i);else if(this.config.is_encoder_decoder&&(this.add_encoder_pkv??!0)){let f=[1,this.num_encoder_heads,0,this.encoder_dim_kv],p=[1,this.num_decoder_heads,0,this.decoder_dim_kv];for(let b=0;b<this.num_decoder_layers;++b)n[`past_key_values.${b}.encoder.key`]=new Tensor("float32",[],f),n[`past_key_values.${b}.encoder.value`]=new Tensor("float32",[],f),n[`past_key_values.${b}.decoder.key`]=new Tensor("float32",[],p),n[`past_key_values.${b}.decoder.value`]=new Tensor("float32",[],p)}else if(this.config.model_type==="falcon"){let f=[1*this.num_heads,0,this.dim_kv];for(let p=0;p<this.num_layers;++p)n[`past_key_values.${p}.key`]=new Tensor("float32",[],f),n[`past_key_values.${p}.value`]=new Tensor("float32",[],f)}else if(this.config.multi_query){let f=[1*this.num_heads,0,2*this.dim_kv];for(let p=0;p<this.num_layers;++p)n[`past_key_values.${p}.key_value`]=new Tensor("float32",[],f)}else if(this.config.model_type==="bloom"){let f=[1*this.num_heads,this.dim_kv,0],p=[1*this.num_heads,0,this.dim_kv];for(let b=0;b<this.num_layers;++b)n[`past_key_values.${b}.key`]=new Tensor("float32",[],f),n[`past_key_values.${b}.value`]=new Tensor("float32",[],p)}else{let f=[1,this.num_heads,0,this.dim_kv];for(let p=0;p<this.num_layers;++p)n[`past_key_values.${p}.key`]=new Tensor("float32",[],f),n[`past_key_values.${p}.value`]=new Tensor("float32",[],f)}}getStartBeams(n,i,l,f){return this._getStartBeams(this,n,i,l,f)}async runBeam(n){return await this._runBeam(this,n)}updateBeam(n,i){return this._updateBeam(n,i)}}class ModelOutput{}class BertPreTrainedModel extends PreTrainedModel{}class BertModel extends BertPreTrainedModel{}class BertForMaskedLM extends BertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class BertForSequenceClassification extends BertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class BertForTokenClassification extends BertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class BertForQuestionAnswering extends BertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class NomicBertPreTrainedModel extends PreTrainedModel{}class NomicBertModel extends NomicBertPreTrainedModel{}class RoFormerPreTrainedModel extends PreTrainedModel{}class RoFormerModel extends RoFormerPreTrainedModel{}class RoFormerForMaskedLM extends RoFormerPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class RoFormerForSequenceClassification extends RoFormerPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class RoFormerForTokenClassification extends RoFormerPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class RoFormerForQuestionAnswering extends RoFormerPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ConvBertPreTrainedModel extends PreTrainedModel{}class ConvBertModel extends ConvBertPreTrainedModel{}class ConvBertForMaskedLM extends ConvBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class ConvBertForSequenceClassification extends ConvBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ConvBertForTokenClassification extends ConvBertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class ConvBertForQuestionAnswering extends ConvBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ElectraPreTrainedModel extends PreTrainedModel{}class ElectraModel extends ElectraPreTrainedModel{}class ElectraForMaskedLM extends ElectraPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class ElectraForSequenceClassification extends ElectraPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ElectraForTokenClassification extends ElectraPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class ElectraForQuestionAnswering extends ElectraPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class CamembertPreTrainedModel extends PreTrainedModel{}class CamembertModel extends CamembertPreTrainedModel{}class CamembertForMaskedLM extends CamembertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class CamembertForSequenceClassification extends CamembertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class CamembertForTokenClassification extends CamembertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class CamembertForQuestionAnswering extends CamembertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DebertaPreTrainedModel extends PreTrainedModel{}class DebertaModel extends DebertaPreTrainedModel{}class DebertaForMaskedLM extends DebertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class DebertaForSequenceClassification extends DebertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DebertaForTokenClassification extends DebertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DebertaForQuestionAnswering extends DebertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DebertaV2PreTrainedModel extends PreTrainedModel{}class DebertaV2Model extends DebertaV2PreTrainedModel{}class DebertaV2ForMaskedLM extends DebertaV2PreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class DebertaV2ForSequenceClassification extends DebertaV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DebertaV2ForTokenClassification extends DebertaV2PreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DebertaV2ForQuestionAnswering extends DebertaV2PreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DistilBertPreTrainedModel extends PreTrainedModel{}class DistilBertModel extends DistilBertPreTrainedModel{}class DistilBertForSequenceClassification extends DistilBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DistilBertForTokenClassification extends DistilBertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DistilBertForQuestionAnswering extends DistilBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DistilBertForMaskedLM extends DistilBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class EsmPreTrainedModel extends PreTrainedModel{}class EsmModel extends EsmPreTrainedModel{}class EsmForMaskedLM extends EsmPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class EsmForSequenceClassification extends EsmPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class EsmForTokenClassification extends EsmPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class MobileBertPreTrainedModel extends PreTrainedModel{}class MobileBertModel extends MobileBertPreTrainedModel{}class MobileBertForMaskedLM extends MobileBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class MobileBertForSequenceClassification extends MobileBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MobileBertForQuestionAnswering extends MobileBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class MPNetPreTrainedModel extends PreTrainedModel{}class MPNetModel extends MPNetPreTrainedModel{}class MPNetForMaskedLM extends MPNetPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class MPNetForSequenceClassification extends MPNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MPNetForTokenClassification extends MPNetPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class MPNetForQuestionAnswering extends MPNetPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class SqueezeBertPreTrainedModel extends PreTrainedModel{}class SqueezeBertModel extends SqueezeBertPreTrainedModel{}class SqueezeBertForMaskedLM extends SqueezeBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class SqueezeBertForSequenceClassification extends SqueezeBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class SqueezeBertForQuestionAnswering extends SqueezeBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class AlbertPreTrainedModel extends PreTrainedModel{}class AlbertModel extends AlbertPreTrainedModel{}class AlbertForSequenceClassification extends AlbertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class AlbertForQuestionAnswering extends AlbertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class AlbertForMaskedLM extends AlbertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class T5PreTrainedModel extends PreTrainedModel{}class T5Model extends T5PreTrainedModel{}class T5ForConditionalGeneration extends T5PreTrainedModel{constructor(e,n,i,l){super(e,n),this.decoder_merged_session=i,this.generation_config=l,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class LongT5PreTrainedModel extends PreTrainedModel{}class LongT5Model extends LongT5PreTrainedModel{}class LongT5ForConditionalGeneration extends LongT5PreTrainedModel{constructor(e,n,i,l){super(e,n),this.decoder_merged_session=i,this.generation_config=l,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class MT5PreTrainedModel extends PreTrainedModel{}class MT5Model extends MT5PreTrainedModel{}class MT5ForConditionalGeneration extends MT5PreTrainedModel{constructor(e,n,i,l){super(e,n),this.decoder_merged_session=i,this.generation_config=l,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class BartPretrainedModel extends PreTrainedModel{}class BartModel extends BartPretrainedModel{}class BartForConditionalGeneration extends BartPretrainedModel{constructor(e,n,i,l){super(e,n),this.decoder_merged_session=i,this.generation_config=l,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BartForSequenceClassification extends BartPretrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MBartPreTrainedModel extends PreTrainedModel{}class MBartModel extends MBartPreTrainedModel{}class MBartForConditionalGeneration extends MBartPreTrainedModel{constructor(e,n,i,l){super(e,n),this.decoder_merged_session=i,this.generation_config=l,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class MBartForSequenceClassification extends MBartPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MBartForCausalLM extends MBartPreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotPreTrainedModel extends PreTrainedModel{}class BlenderbotModel extends BlenderbotPreTrainedModel{}class BlenderbotForConditionalGeneration extends BlenderbotPreTrainedModel{constructor(e,n,i,l){super(e,n),this.decoder_merged_session=i,this.generation_config=l,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotSmallPreTrainedModel extends PreTrainedModel{}class BlenderbotSmallModel extends BlenderbotSmallPreTrainedModel{}class BlenderbotSmallForConditionalGeneration extends BlenderbotSmallPreTrainedModel{constructor(e,n,i,l){super(e,n),this.decoder_merged_session=i,this.generation_config=l,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class RobertaPreTrainedModel extends PreTrainedModel{}class RobertaModel extends RobertaPreTrainedModel{}class RobertaForMaskedLM extends RobertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class RobertaForSequenceClassification extends RobertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class RobertaForTokenClassification extends RobertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class RobertaForQuestionAnswering extends RobertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class XLMPreTrainedModel extends PreTrainedModel{}class XLMModel extends XLMPreTrainedModel{}class XLMWithLMHeadModel extends XLMPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class XLMForSequenceClassification extends XLMPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class XLMForTokenClassification extends XLMPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class XLMForQuestionAnswering extends XLMPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class XLMRobertaPreTrainedModel extends PreTrainedModel{}class XLMRobertaModel extends XLMRobertaPreTrainedModel{}class XLMRobertaForMaskedLM extends XLMRobertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class XLMRobertaForSequenceClassification extends XLMRobertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class XLMRobertaForTokenClassification extends XLMRobertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class XLMRobertaForQuestionAnswering extends XLMRobertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ASTPreTrainedModel extends PreTrainedModel{}class ASTModel extends ASTPreTrainedModel{}class ASTForAudioClassification extends ASTPreTrainedModel{}class WhisperPreTrainedModel extends PreTrainedModel{}class WhisperModel extends WhisperPreTrainedModel{}class WhisperForConditionalGeneration extends WhisperPreTrainedModel{constructor(n,i,l,f){super(n,i);De(this,"requires_attention_mask",!1);De(this,"main_input_name","input_features");this.decoder_merged_session=l,this.generation_config=f,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}async generate(n,i=null,l=null){if(i=this._get_generation_config(i),i.return_timestamps??(i.return_timestamps=!1),i.return_timestamps&&(l=[new WhisperTimeStampLogitsProcessor(i)]),i.return_token_timestamps&&(i.output_attentions=!0,i.return_dict_in_generate=!0,i.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),!i.alignment_heads))throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");const f=await super.generate(n,i,l);return i.return_token_timestamps&&i.alignment_heads&&(f.token_timestamps=this._extract_token_timestamps(f,i.alignment_heads,i.num_frames)),f}_extract_token_timestamps(n,i,l=null,f=.02){if(!n.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");let p=this.config.median_filter_width;p===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),p=7);const b=n.cross_attentions.map(g=>{let u=Array.from({length:this.config.decoder_layers},(O,j)=>cat(g.map(C=>C[j]),2)),o=stack(i.map(([O,j])=>l?u[O].slice(null,j,null,[0,l]):u[O].slice(null,j)));o=o.transpose(1,0,2,3);let[h,_]=std_mean(o,-2,0,!0),S=o.clone();for(let O=0;O<S.dims[0];++O){let j=S[O];for(let C=0;C<j.dims[0];++C){let D=j[C];const R=h[O][C][0],I=_[O][C][0];for(let $=0;$<D.dims[0];++$){let F=D[$];for(let L=0;L<F.data.length;++L)F.data[L]=(F.data[L]-I.data[L])/R.data[L];F.data.set(medianFilter(F.data,p))}}}return mean(S,1)}),w=[n.sequences.length,n.sequences[0].length],v=new Tensor("float32",new Float32Array(w[0]*w[1]),w);for(let g=0;g<w[0];++g){const u=b[g].neg().squeeze_(0);let[o,h]=dynamicTimeWarping(u),_=Array.from({length:o.length-1},(O,j)=>o[j+1]-o[j]),S=mergeArrays([1],_).map(O=>!!O),T=[];for(let O=0;O<S.length;++O)S[O]&&T.push(h[O]*f);v[g].data.set(T,1)}return v}}class VisionEncoderDecoderModel extends PreTrainedModel{constructor(n,i,l,f){super(n,i);De(this,"main_input_name","pixel_values");this.decoder_merged_session=l,this.generation_config=f;const p=this.config.encoder,b=this.config.decoder,w=p.model_type;(MODEL_MAPPING_NAMES_ENCODER_ONLY.get(w)??MODEL_MAPPING_NAMES_ENCODER_DECODER.get(w))||console.warn(`Model type for encoder '${w}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`);const g=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(b.model_type);if(!g)throw new Error(`Unable to construct \`VisionEncoderDecoder\` due to unsupported decoder: "${this.config.decoder.model_type}"`);const u=g[1],o=new u(b,l,f);this.add_encoder_pkv="num_decoder_layers"in o,this.add_encoder_pkv?(this.num_decoder_layers=o.num_decoder_layers,this.num_decoder_heads=o.num_decoder_heads,this.decoder_dim_kv=o.decoder_dim_kv,this.num_encoder_layers=o.num_encoder_layers,this.num_encoder_heads=o.num_encoder_heads,this.encoder_dim_kv=o.encoder_dim_kv):(this.num_layers=o.num_layers,this.num_heads=o.num_heads,this.dim_kv=o.dim_kv)}}class CLIPPreTrainedModel extends PreTrainedModel{}class CLIPModel extends CLIPPreTrainedModel{}class CLIPTextModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(e,n={}){return n.model_file_name??(n.model_file_name="text_model"),super.from_pretrained(e,n)}}class CLIPVisionModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(e,n={}){return n.model_file_name??(n.model_file_name="vision_model"),super.from_pretrained(e,n)}}class SiglipPreTrainedModel extends PreTrainedModel{}class SiglipModel extends SiglipPreTrainedModel{}class SiglipTextModel extends SiglipPreTrainedModel{static async from_pretrained(e,n={}){return n.model_file_name??(n.model_file_name="text_model"),super.from_pretrained(e,n)}}class SiglipVisionModel extends CLIPPreTrainedModel{static async from_pretrained(e,n={}){return n.model_file_name??(n.model_file_name="vision_model"),super.from_pretrained(e,n)}}class ChineseCLIPPreTrainedModel extends PreTrainedModel{}class ChineseCLIPModel extends ChineseCLIPPreTrainedModel{}class CLIPSegPreTrainedModel extends PreTrainedModel{}class CLIPSegModel extends CLIPSegPreTrainedModel{}class CLIPSegForImageSegmentation extends CLIPSegPreTrainedModel{}class GPT2PreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPT2Model extends GPT2PreTrainedModel{}class GPT2LMHeadModel extends GPT2PreTrainedModel{}class GPTNeoPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_heads,this.num_layers=this.config.num_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoModel extends GPTNeoPreTrainedModel{}class GPTNeoForCausalLM extends GPTNeoPreTrainedModel{}class GPTNeoXPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoXModel extends GPTNeoXPreTrainedModel{}class GPTNeoXForCausalLM extends GPTNeoXPreTrainedModel{}class GPTJPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTJModel extends GPTJPreTrainedModel{}class GPTJForCausalLM extends GPTJPreTrainedModel{}class GPTBigCodePreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTBigCodeModel extends GPTBigCodePreTrainedModel{}class GPTBigCodeForCausalLM extends GPTBigCodePreTrainedModel{}class CodeGenPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class CodeGenModel extends CodeGenPreTrainedModel{}class CodeGenForCausalLM extends CodeGenPreTrainedModel{}class LlamaPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class LlamaModel extends LlamaPreTrainedModel{}class LlamaForCausalLM extends LlamaPreTrainedModel{}class Qwen2PreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Qwen2Model extends Qwen2PreTrainedModel{}class Qwen2ForCausalLM extends Qwen2PreTrainedModel{}class PhiPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class PhiModel extends PhiPreTrainedModel{}class PhiForCausalLM extends PhiPreTrainedModel{}class BloomPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.hidden_size/this.num_heads}}class BloomModel extends BloomPreTrainedModel{}class BloomForCausalLM extends BloomPreTrainedModel{}class MptPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_heads,this.num_layers=this.config.n_layers,this.dim_kv=this.config.d_model/this.num_heads}}class MptModel extends MptPreTrainedModel{}class MptForCausalLM extends MptPreTrainedModel{}class OPTPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class OPTModel extends OPTPreTrainedModel{}class OPTForCausalLM extends OPTPreTrainedModel{}class ViTPreTrainedModel extends PreTrainedModel{}class ViTModel extends ViTPreTrainedModel{}class ViTForImageClassification extends ViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class FastViTPreTrainedModel extends PreTrainedModel{}class FastViTModel extends FastViTPreTrainedModel{}class FastViTForImageClassification extends FastViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class VitMattePreTrainedModel extends PreTrainedModel{}class VitMatteForImageMatting extends VitMattePreTrainedModel{async _call(e){return new ImageMattingOutput(await super._call(e))}}class MobileViTPreTrainedModel extends PreTrainedModel{}class MobileViTModel extends MobileViTPreTrainedModel{}class MobileViTForImageClassification extends MobileViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MobileViTV2PreTrainedModel extends PreTrainedModel{}class MobileViTV2Model extends MobileViTV2PreTrainedModel{}class MobileViTV2ForImageClassification extends MobileViTV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class OwlViTPreTrainedModel extends PreTrainedModel{}class OwlViTModel extends OwlViTPreTrainedModel{}class OwlViTForObjectDetection extends OwlViTPreTrainedModel{}class Owlv2PreTrainedModel extends PreTrainedModel{}class Owlv2Model extends Owlv2PreTrainedModel{}class Owlv2ForObjectDetection extends Owlv2PreTrainedModel{}class BeitPreTrainedModel extends PreTrainedModel{}class BeitModel extends BeitPreTrainedModel{}class BeitForImageClassification extends BeitPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DetrPreTrainedModel extends PreTrainedModel{}class DetrModel extends DetrPreTrainedModel{}class DetrForObjectDetection extends DetrPreTrainedModel{async _call(e){return new DetrObjectDetectionOutput(await super._call(e))}}class DetrForSegmentation extends DetrPreTrainedModel{async _call(e){return new DetrSegmentationOutput(await super._call(e))}}class DetrObjectDetectionOutput extends ModelOutput{constructor({logits:e,pred_boxes:n}){super(),this.logits=e,this.pred_boxes=n}}class DetrSegmentationOutput extends ModelOutput{constructor({logits:e,pred_boxes:n,pred_masks:i}){super(),this.logits=e,this.pred_boxes=n,this.pred_masks=i}}class TableTransformerPreTrainedModel extends PreTrainedModel{}class TableTransformerModel extends TableTransformerPreTrainedModel{}class TableTransformerForObjectDetection extends TableTransformerPreTrainedModel{async _call(e){return new TableTransformerObjectDetectionOutput(await super._call(e))}}class TableTransformerObjectDetectionOutput extends DetrObjectDetectionOutput{}class DeiTPreTrainedModel extends PreTrainedModel{}class DeiTModel extends DeiTPreTrainedModel{}class DeiTForImageClassification extends DeiTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ResNetPreTrainedModel extends PreTrainedModel{}class ResNetModel extends ResNetPreTrainedModel{}class ResNetForImageClassification extends ResNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class SwinPreTrainedModel extends PreTrainedModel{}class SwinModel extends SwinPreTrainedModel{}class SwinForImageClassification extends SwinPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Swin2SRPreTrainedModel extends PreTrainedModel{}class Swin2SRModel extends Swin2SRPreTrainedModel{}class Swin2SRForImageSuperResolution extends Swin2SRPreTrainedModel{}class DPTPreTrainedModel extends PreTrainedModel{}class DPTModel extends DPTPreTrainedModel{}class DPTForDepthEstimation extends DPTPreTrainedModel{}class DepthAnythingPreTrainedModel extends PreTrainedModel{}class DepthAnythingForDepthEstimation extends DepthAnythingPreTrainedModel{}class GLPNPreTrainedModel extends PreTrainedModel{}class GLPNModel extends GLPNPreTrainedModel{}class GLPNForDepthEstimation extends GLPNPreTrainedModel{}class DonutSwinPreTrainedModel extends PreTrainedModel{}class DonutSwinModel extends DonutSwinPreTrainedModel{}class ConvNextPreTrainedModel extends PreTrainedModel{}class ConvNextModel extends ConvNextPreTrainedModel{}class ConvNextForImageClassification extends ConvNextPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ConvNextV2PreTrainedModel extends PreTrainedModel{}class ConvNextV2Model extends ConvNextV2PreTrainedModel{}class ConvNextV2ForImageClassification extends ConvNextV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Dinov2PreTrainedModel extends PreTrainedModel{}class Dinov2Model extends Dinov2PreTrainedModel{}class Dinov2ForImageClassification extends Dinov2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class YolosPreTrainedModel extends PreTrainedModel{}class YolosModel extends YolosPreTrainedModel{}class YolosForObjectDetection extends YolosPreTrainedModel{async _call(e){return new YolosObjectDetectionOutput(await super._call(e))}}class YolosObjectDetectionOutput extends ModelOutput{constructor({logits:e,pred_boxes:n}){super(),this.logits=e,this.pred_boxes=n}}class SamPreTrainedModel extends PreTrainedModel{}class SamModel extends SamPreTrainedModel{constructor(e,n,i){super(e,n),this.prompt_encoder_mask_decoder=i}async get_image_embeddings({pixel_values:e}){return await encoderForward(this,{pixel_values:e})}async forward(e){if((!e.image_embeddings||!e.image_positional_embeddings)&&(e={...e,...await this.get_image_embeddings(e)}),!e.input_labels){const n=e.input_points.dims.slice(0,-1),i=n.reduce((l,f)=>l*f,1);e.input_labels=new Tensor("int64",new BigInt64Array(i).fill(1n),n)}return await sessionRun(this.prompt_encoder_mask_decoder,{input_points:e.input_points,input_labels:e.input_labels,image_embeddings:e.image_embeddings,image_positional_embeddings:e.image_positional_embeddings})}async _call(e){return new SamImageSegmentationOutput(await super._call(e))}}class SamImageSegmentationOutput extends ModelOutput{constructor({iou_scores:e,pred_masks:n}){super(),this.iou_scores=e,this.pred_masks=n}}class MarianPreTrainedModel extends PreTrainedModel{}class MarianModel extends MarianPreTrainedModel{}class MarianMTModel extends MarianPreTrainedModel{constructor(e,n,i,l){super(e,n),this.decoder_merged_session=i,this.generation_config=l,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class M2M100PreTrainedModel extends PreTrainedModel{}class M2M100Model extends M2M100PreTrainedModel{}class M2M100ForConditionalGeneration extends M2M100PreTrainedModel{constructor(e,n,i,l){super(e,n),this.decoder_merged_session=i,this.generation_config=l,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class Wav2Vec2PreTrainedModel extends PreTrainedModel{}class Wav2Vec2Model extends Wav2Vec2PreTrainedModel{}class Wav2Vec2ForCTC extends Wav2Vec2PreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class Wav2Vec2ForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Wav2Vec2ForAudioFrameClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class UniSpeechPreTrainedModel extends PreTrainedModel{}class UniSpeechModel extends UniSpeechPreTrainedModel{}class UniSpeechForCTC extends UniSpeechPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class UniSpeechForSequenceClassification extends UniSpeechPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class UniSpeechSatPreTrainedModel extends PreTrainedModel{}class UniSpeechSatModel extends UniSpeechSatPreTrainedModel{}class UniSpeechSatForCTC extends UniSpeechSatPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class UniSpeechSatForSequenceClassification extends UniSpeechSatPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class UniSpeechSatForAudioFrameClassification extends UniSpeechSatPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class Wav2Vec2BertPreTrainedModel extends PreTrainedModel{}class Wav2Vec2BertModel extends Wav2Vec2BertPreTrainedModel{}class Wav2Vec2BertForCTC extends Wav2Vec2BertPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class Wav2Vec2BertForSequenceClassification extends Wav2Vec2BertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class HubertModel extends Wav2Vec2PreTrainedModel{}class HubertForCTC extends Wav2Vec2PreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class HubertForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class WavLMPreTrainedModel extends PreTrainedModel{}class WavLMModel extends WavLMPreTrainedModel{}class WavLMForCTC extends WavLMPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class WavLMForSequenceClassification extends WavLMPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class WavLMForXVector extends WavLMPreTrainedModel{async _call(e){return new XVectorOutput(await super._call(e))}}class WavLMForAudioFrameClassification extends WavLMPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class SpeechT5PreTrainedModel extends PreTrainedModel{}class SpeechT5ForSpeechToText extends SpeechT5PreTrainedModel{}class SpeechT5ForTextToSpeech extends SpeechT5PreTrainedModel{constructor(e,n,i,l){super(e,n),this.decoder_merged_session=i,this.generation_config=l,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.hidden_size/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.hidden_size/this.num_encoder_heads}async generate_speech(e,n,{threshold:i=.5,minlenratio:l=0,maxlenratio:f=20,vocoder:p=null}={}){const b={input_ids:e},{encoder_outputs:w,encoder_attention_mask:v}=await encoderForward(this,b),g=w.dims[1]/this.config.reduction_factor,u=Math.floor(g*f),o=Math.floor(g*l),h=this.config.num_mel_bins;let _=[],S=null,T=null,O=0;for(;;){++O;const D=boolTensor(!!T);let R;T?R=T.output_sequence_out:R=new Tensor("float32",new Float32Array(h),[1,1,h]);let I={use_cache_branch:D,output_sequence:R,encoder_attention_mask:v,speaker_embeddings:n,encoder_hidden_states:w};this.addPastKeyValues(I,S),T=await sessionRun(this.decoder_merged_session,I),S=this.getPastKeyValues(T,S);const{prob:$,spectrum:F}=T;if(_.push(F),O>=o&&(Array.from($.data).filter(L=>L>=i).length>0||O>=u))break}const j=cat(_),{waveform:C}=await sessionRun(p.session,{spectrogram:j});return{spectrogram:j,waveform:C}}}class SpeechT5HifiGan extends PreTrainedModel{constructor(){super(...arguments);De(this,"main_input_name","spectrogram")}}class TrOCRPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_encoder_layers=this.num_decoder_layers=this.config.decoder_layers,this.num_encoder_heads=this.num_decoder_heads=this.config.decoder_attention_heads,this.encoder_dim_kv=this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads}}class TrOCRForCausalLM extends TrOCRPreTrainedModel{}class MistralPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class MistralModel extends MistralPreTrainedModel{}class MistralForCausalLM extends MistralPreTrainedModel{}class Starcoder2PreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Starcoder2Model extends Starcoder2PreTrainedModel{}class Starcoder2ForCausalLM extends Starcoder2PreTrainedModel{}class FalconPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class FalconModel extends FalconPreTrainedModel{}class FalconForCausalLM extends FalconPreTrainedModel{}class ClapPreTrainedModel extends PreTrainedModel{}class ClapModel extends ClapPreTrainedModel{}class ClapTextModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(e,n={}){return n.model_file_name??(n.model_file_name="text_model"),super.from_pretrained(e,n)}}class ClapAudioModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(e,n={}){return n.model_file_name??(n.model_file_name="audio_model"),super.from_pretrained(e,n)}}class VitsPreTrainedModel extends PreTrainedModel{}class VitsModel extends VitsPreTrainedModel{async _call(e){return new VitsModelOutput(await super._call(e))}}class SegformerPreTrainedModel extends PreTrainedModel{}class SegformerForImageClassification extends SegformerPreTrainedModel{}class SegformerForSemanticSegmentation extends SegformerPreTrainedModel{}class StableLmPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class StableLmForCausalLM extends StableLmPreTrainedModel{}class EfficientNetPreTrainedModel extends PreTrainedModel{}class EfficientNetModel extends EfficientNetPreTrainedModel{}class EfficientNetForImageClassification extends EfficientNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class PretrainedMixin{static async from_pretrained(e,{quantized:n=!0,progress_callback:i=null,config:l=null,cache_dir:f=null,local_files_only:p=!1,revision:b="main",model_file_name:w=null}={}){let v={quantized:n,progress_callback:i,config:l,cache_dir:f,local_files_only:p,revision:b,model_file_name:w};if(l=await AutoConfig.from_pretrained(e,v),v.config||(v.config=l),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);for(let g of this.MODEL_CLASS_MAPPINGS){const u=g.get(l.model_type);if(u)return await u[1].from_pretrained(e,v)}if(this.BASE_IF_FAIL)return console.warn(`Unknown model class "${l.model_type}", attempting to construct from base class.`),await PreTrainedModel.from_pretrained(e,v);throw Error(`Unsupported model type: ${l.model_type}`)}}De(PretrainedMixin,"MODEL_CLASS_MAPPINGS",null),De(PretrainedMixin,"BASE_IF_FAIL",!1);const MODEL_MAPPING_NAMES_ENCODER_ONLY=new Map([["bert",["BertModel",BertModel]],["nomic_bert",["NomicBertModel",NomicBertModel]],["roformer",["RoFormerModel",RoFormerModel]],["electra",["ElectraModel",ElectraModel]],["esm",["EsmModel",EsmModel]],["convbert",["ConvBertModel",ConvBertModel]],["camembert",["CamembertModel",CamembertModel]],["deberta",["DebertaModel",DebertaModel]],["deberta-v2",["DebertaV2Model",DebertaV2Model]],["mpnet",["MPNetModel",MPNetModel]],["albert",["AlbertModel",AlbertModel]],["distilbert",["DistilBertModel",DistilBertModel]],["roberta",["RobertaModel",RobertaModel]],["xlm",["XLMModel",XLMModel]],["xlm-roberta",["XLMRobertaModel",XLMRobertaModel]],["clap",["ClapModel",ClapModel]],["clip",["CLIPModel",CLIPModel]],["clipseg",["CLIPSegModel",CLIPSegModel]],["chinese_clip",["ChineseCLIPModel",ChineseCLIPModel]],["siglip",["SiglipModel",SiglipModel]],["mobilebert",["MobileBertModel",MobileBertModel]],["squeezebert",["SqueezeBertModel",SqueezeBertModel]],["wav2vec2",["Wav2Vec2Model",Wav2Vec2Model]],["wav2vec2-bert",["Wav2Vec2BertModel",Wav2Vec2BertModel]],["unispeech",["UniSpeechModel",UniSpeechModel]],["unispeech-sat",["UniSpeechSatModel",UniSpeechSatModel]],["hubert",["HubertModel",HubertModel]],["wavlm",["WavLMModel",WavLMModel]],["audio-spectrogram-transformer",["ASTModel",ASTModel]],["vits",["VitsModel",VitsModel]],["detr",["DetrModel",DetrModel]],["table-transformer",["TableTransformerModel",TableTransformerModel]],["vit",["ViTModel",ViTModel]],["fastvit",["FastViTModel",FastViTModel]],["mobilevit",["MobileViTModel",MobileViTModel]],["mobilevitv2",["MobileViTV2Model",MobileViTV2Model]],["owlvit",["OwlViTModel",OwlViTModel]],["owlv2",["Owlv2Model",Owlv2Model]],["beit",["BeitModel",BeitModel]],["deit",["DeiTModel",DeiTModel]],["convnext",["ConvNextModel",ConvNextModel]],["convnextv2",["ConvNextV2Model",ConvNextV2Model]],["dinov2",["Dinov2Model",Dinov2Model]],["resnet",["ResNetModel",ResNetModel]],["swin",["SwinModel",SwinModel]],["swin2sr",["Swin2SRModel",Swin2SRModel]],["donut-swin",["DonutSwinModel",DonutSwinModel]],["yolos",["YolosModel",YolosModel]],["dpt",["DPTModel",DPTModel]],["glpn",["GLPNModel",GLPNModel]],["hifigan",["SpeechT5HifiGan",SpeechT5HifiGan]],["efficientnet",["EfficientNetModel",EfficientNetModel]]]),MODEL_MAPPING_NAMES_ENCODER_DECODER=new Map([["t5",["T5Model",T5Model]],["longt5",["LongT5Model",LongT5Model]],["mt5",["MT5Model",MT5Model]],["bart",["BartModel",BartModel]],["mbart",["MBartModel",MBartModel]],["marian",["MarianModel",MarianModel]],["whisper",["WhisperModel",WhisperModel]],["m2m_100",["M2M100Model",M2M100Model]],["blenderbot",["BlenderbotModel",BlenderbotModel]],["blenderbot-small",["BlenderbotSmallModel",BlenderbotSmallModel]]]),MODEL_MAPPING_NAMES_DECODER_ONLY=new Map([["bloom",["BloomModel",BloomModel]],["gpt2",["GPT2Model",GPT2Model]],["gptj",["GPTJModel",GPTJModel]],["gpt_bigcode",["GPTBigCodeModel",GPTBigCodeModel]],["gpt_neo",["GPTNeoModel",GPTNeoModel]],["gpt_neox",["GPTNeoXModel",GPTNeoXModel]],["codegen",["CodeGenModel",CodeGenModel]],["llama",["LlamaModel",LlamaModel]],["qwen2",["Qwen2Model",Qwen2Model]],["phi",["PhiModel",PhiModel]],["mpt",["MptModel",MptModel]],["opt",["OPTModel",OPTModel]],["mistral",["MistralModel",MistralModel]],["starcoder2",["Starcoder2Model",Starcoder2Model]],["falcon",["FalconModel",FalconModel]]]),MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForSpeechToText",SpeechT5ForSpeechToText]],["whisper",["WhisperForConditionalGeneration",WhisperForConditionalGeneration]]]),MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForTextToSpeech",SpeechT5ForTextToSpeech]]]),MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES=new Map([["vits",["VitsModel",VitsModel]]]),MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForSequenceClassification",BertForSequenceClassification]],["roformer",["RoFormerForSequenceClassification",RoFormerForSequenceClassification]],["electra",["ElectraForSequenceClassification",ElectraForSequenceClassification]],["esm",["EsmForSequenceClassification",EsmForSequenceClassification]],["convbert",["ConvBertForSequenceClassification",ConvBertForSequenceClassification]],["camembert",["CamembertForSequenceClassification",CamembertForSequenceClassification]],["deberta",["DebertaForSequenceClassification",DebertaForSequenceClassification]],["deberta-v2",["DebertaV2ForSequenceClassification",DebertaV2ForSequenceClassification]],["mpnet",["MPNetForSequenceClassification",MPNetForSequenceClassification]],["albert",["AlbertForSequenceClassification",AlbertForSequenceClassification]],["distilbert",["DistilBertForSequenceClassification",DistilBertForSequenceClassification]],["roberta",["RobertaForSequenceClassification",RobertaForSequenceClassification]],["xlm",["XLMForSequenceClassification",XLMForSequenceClassification]],["xlm-roberta",["XLMRobertaForSequenceClassification",XLMRobertaForSequenceClassification]],["bart",["BartForSequenceClassification",BartForSequenceClassification]],["mbart",["MBartForSequenceClassification",MBartForSequenceClassification]],["mobilebert",["MobileBertForSequenceClassification",MobileBertForSequenceClassification]],["squeezebert",["SqueezeBertForSequenceClassification",SqueezeBertForSequenceClassification]]]),MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForTokenClassification",BertForTokenClassification]],["roformer",["RoFormerForTokenClassification",RoFormerForTokenClassification]],["electra",["ElectraForTokenClassification",ElectraForTokenClassification]],["esm",["EsmForTokenClassification",EsmForTokenClassification]],["convbert",["ConvBertForTokenClassification",ConvBertForTokenClassification]],["camembert",["CamembertForTokenClassification",CamembertForTokenClassification]],["deberta",["DebertaForTokenClassification",DebertaForTokenClassification]],["deberta-v2",["DebertaV2ForTokenClassification",DebertaV2ForTokenClassification]],["mpnet",["MPNetForTokenClassification",MPNetForTokenClassification]],["distilbert",["DistilBertForTokenClassification",DistilBertForTokenClassification]],["roberta",["RobertaForTokenClassification",RobertaForTokenClassification]],["xlm",["XLMForTokenClassification",XLMForTokenClassification]],["xlm-roberta",["XLMRobertaForTokenClassification",XLMRobertaForTokenClassification]]]),MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES=new Map([["t5",["T5ForConditionalGeneration",T5ForConditionalGeneration]],["longt5",["LongT5ForConditionalGeneration",LongT5ForConditionalGeneration]],["mt5",["MT5ForConditionalGeneration",MT5ForConditionalGeneration]],["bart",["BartForConditionalGeneration",BartForConditionalGeneration]],["mbart",["MBartForConditionalGeneration",MBartForConditionalGeneration]],["marian",["MarianMTModel",MarianMTModel]],["m2m_100",["M2M100ForConditionalGeneration",M2M100ForConditionalGeneration]],["blenderbot",["BlenderbotForConditionalGeneration",BlenderbotForConditionalGeneration]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",BlenderbotSmallForConditionalGeneration]]]),MODEL_WITH_LM_HEAD_MAPPING_NAMES=new Map([["bloom",["BloomForCausalLM",BloomForCausalLM]],["gpt2",["GPT2LMHeadModel",GPT2LMHeadModel]],["gptj",["GPTJForCausalLM",GPTJForCausalLM]],["gpt_bigcode",["GPTBigCodeForCausalLM",GPTBigCodeForCausalLM]],["gpt_neo",["GPTNeoForCausalLM",GPTNeoForCausalLM]],["gpt_neox",["GPTNeoXForCausalLM",GPTNeoXForCausalLM]],["codegen",["CodeGenForCausalLM",CodeGenForCausalLM]],["llama",["LlamaForCausalLM",LlamaForCausalLM]],["qwen2",["Qwen2ForCausalLM",Qwen2ForCausalLM]],["phi",["PhiForCausalLM",PhiForCausalLM]],["mpt",["MptForCausalLM",MptForCausalLM]],["opt",["OPTForCausalLM",OPTForCausalLM]],["mbart",["MBartForCausalLM",MBartForCausalLM]],["mistral",["MistralForCausalLM",MistralForCausalLM]],["starcoder2",["Starcoder2ForCausalLM",Starcoder2ForCausalLM]],["falcon",["FalconForCausalLM",FalconForCausalLM]],["trocr",["TrOCRForCausalLM",TrOCRForCausalLM]],["stablelm",["StableLmForCausalLM",StableLmForCausalLM]]]),MODEL_FOR_MASKED_LM_MAPPING_NAMES=new Map([["bert",["BertForMaskedLM",BertForMaskedLM]],["roformer",["RoFormerForMaskedLM",RoFormerForMaskedLM]],["electra",["ElectraForMaskedLM",ElectraForMaskedLM]],["esm",["EsmForMaskedLM",EsmForMaskedLM]],["convbert",["ConvBertForMaskedLM",ConvBertForMaskedLM]],["camembert",["CamembertForMaskedLM",CamembertForMaskedLM]],["deberta",["DebertaForMaskedLM",DebertaForMaskedLM]],["deberta-v2",["DebertaV2ForMaskedLM",DebertaV2ForMaskedLM]],["mpnet",["MPNetForMaskedLM",MPNetForMaskedLM]],["albert",["AlbertForMaskedLM",AlbertForMaskedLM]],["distilbert",["DistilBertForMaskedLM",DistilBertForMaskedLM]],["roberta",["RobertaForMaskedLM",RobertaForMaskedLM]],["xlm",["XLMWithLMHeadModel",XLMWithLMHeadModel]],["xlm-roberta",["XLMRobertaForMaskedLM",XLMRobertaForMaskedLM]],["mobilebert",["MobileBertForMaskedLM",MobileBertForMaskedLM]],["squeezebert",["SqueezeBertForMaskedLM",SqueezeBertForMaskedLM]]]),MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["bert",["BertForQuestionAnswering",BertForQuestionAnswering]],["roformer",["RoFormerForQuestionAnswering",RoFormerForQuestionAnswering]],["electra",["ElectraForQuestionAnswering",ElectraForQuestionAnswering]],["convbert",["ConvBertForQuestionAnswering",ConvBertForQuestionAnswering]],["camembert",["CamembertForQuestionAnswering",CamembertForQuestionAnswering]],["deberta",["DebertaForQuestionAnswering",DebertaForQuestionAnswering]],["deberta-v2",["DebertaV2ForQuestionAnswering",DebertaV2ForQuestionAnswering]],["mpnet",["MPNetForQuestionAnswering",MPNetForQuestionAnswering]],["albert",["AlbertForQuestionAnswering",AlbertForQuestionAnswering]],["distilbert",["DistilBertForQuestionAnswering",DistilBertForQuestionAnswering]],["roberta",["RobertaForQuestionAnswering",RobertaForQuestionAnswering]],["xlm",["XLMForQuestionAnswering",XLMForQuestionAnswering]],["xlm-roberta",["XLMRobertaForQuestionAnswering",XLMRobertaForQuestionAnswering]],["mobilebert",["MobileBertForQuestionAnswering",MobileBertForQuestionAnswering]],["squeezebert",["SqueezeBertForQuestionAnswering",SqueezeBertForQuestionAnswering]]]),MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES=new Map([["vit",["ViTForImageClassification",ViTForImageClassification]],["fastvit",["FastViTForImageClassification",FastViTForImageClassification]],["mobilevit",["MobileViTForImageClassification",MobileViTForImageClassification]],["mobilevitv2",["MobileViTV2ForImageClassification",MobileViTV2ForImageClassification]],["beit",["BeitForImageClassification",BeitForImageClassification]],["deit",["DeiTForImageClassification",DeiTForImageClassification]],["convnext",["ConvNextForImageClassification",ConvNextForImageClassification]],["convnextv2",["ConvNextV2ForImageClassification",ConvNextV2ForImageClassification]],["dinov2",["Dinov2ForImageClassification",Dinov2ForImageClassification]],["resnet",["ResNetForImageClassification",ResNetForImageClassification]],["swin",["SwinForImageClassification",SwinForImageClassification]],["segformer",["SegformerForImageClassification",SegformerForImageClassification]],["efficientnet",["EfficientNetForImageClassification",EfficientNetForImageClassification]]]),MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES=new Map([["detr",["DetrForObjectDetection",DetrForObjectDetection]],["table-transformer",["TableTransformerForObjectDetection",TableTransformerForObjectDetection]],["yolos",["YolosForObjectDetection",YolosForObjectDetection]]]),MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES=new Map([["owlvit",["OwlViTForObjectDetection",OwlViTForObjectDetection]],["owlv2",["Owlv2ForObjectDetection",Owlv2ForObjectDetection]]]),MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES=new Map([["detr",["DetrForSegmentation",DetrForSegmentation]],["clipseg",["CLIPSegForImageSegmentation",CLIPSegForImageSegmentation]]]),MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES=new Map([["segformer",["SegformerForSemanticSegmentation",SegformerForSemanticSegmentation]]]),MODEL_FOR_MASK_GENERATION_MAPPING_NAMES=new Map([["sam",["SamModel",SamModel]]]),MODEL_FOR_CTC_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForCTC",Wav2Vec2ForCTC]],["wav2vec2-bert",["Wav2Vec2BertForCTC",Wav2Vec2BertForCTC]],["unispeech",["UniSpeechForCTC",UniSpeechForCTC]],["unispeech-sat",["UniSpeechSatForCTC",UniSpeechSatForCTC]],["wavlm",["WavLMForCTC",WavLMForCTC]],["hubert",["HubertForCTC",HubertForCTC]]]),MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",Wav2Vec2ForSequenceClassification]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",Wav2Vec2BertForSequenceClassification]],["unispeech",["UniSpeechForSequenceClassification",UniSpeechForSequenceClassification]],["unispeech-sat",["UniSpeechSatForSequenceClassification",UniSpeechSatForSequenceClassification]],["wavlm",["WavLMForSequenceClassification",WavLMForSequenceClassification]],["hubert",["HubertForSequenceClassification",HubertForSequenceClassification]],["audio-spectrogram-transformer",["ASTForAudioClassification",ASTForAudioClassification]]]),MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES=new Map([["wavlm",["WavLMForXVector",WavLMForXVector]]]),MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",UniSpeechSatForAudioFrameClassification]],["wavlm",["WavLMForAudioFrameClassification",WavLMForAudioFrameClassification]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",Wav2Vec2ForAudioFrameClassification]]]),MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES=new Map([["vitmatte",["VitMatteForImageMatting",VitMatteForImageMatting]]]),MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES=new Map([["swin2sr",["Swin2SRForImageSuperResolution",Swin2SRForImageSuperResolution]]]),MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES=new Map([["dpt",["DPTForDepthEstimation",DPTForDepthEstimation]],["depth_anything",["DepthAnythingForDepthEstimation",DepthAnythingForDepthEstimation]],["glpn",["GLPNForDepthEstimation",GLPNForDepthEstimation]]]),MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES=new Map([["clip",["CLIPVisionModelWithProjection",CLIPVisionModelWithProjection]],["siglip",["SiglipVisionModel",SiglipVisionModel]]]),MODEL_CLASS_TYPE_MAPPING=[[MODEL_MAPPING_NAMES_ENCODER_ONLY,MODEL_TYPES.EncoderOnly],[MODEL_MAPPING_NAMES_ENCODER_DECODER,MODEL_TYPES.EncoderDecoder],[MODEL_MAPPING_NAMES_DECODER_ONLY,MODEL_TYPES.DecoderOnly],[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_WITH_LM_HEAD_MAPPING_NAMES,MODEL_TYPES.DecoderOnly],[MODEL_FOR_MASKED_LM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Vision2Seq],[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_MASK_GENERATION_MAPPING_NAMES,MODEL_TYPES.MaskGeneration],[MODEL_FOR_CTC_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly]];for(const[t,e]of MODEL_CLASS_TYPE_MAPPING)for(const[n,i]of t.values())MODEL_TYPE_MAPPING.set(n,e),MODEL_CLASS_TO_NAME_MAPPING.set(i,n),MODEL_NAME_TO_CLASS_MAPPING.set(n,i);const CUSTOM_MAPPING=[["CLIPTextModelWithProjection",CLIPTextModelWithProjection,MODEL_TYPES.EncoderOnly],["SiglipTextModel",SiglipTextModel,MODEL_TYPES.EncoderOnly],["ClapTextModelWithProjection",ClapTextModelWithProjection,MODEL_TYPES.EncoderOnly],["ClapAudioModelWithProjection",ClapAudioModelWithProjection,MODEL_TYPES.EncoderOnly]];for(const[t,e,n]of CUSTOM_MAPPING)MODEL_TYPE_MAPPING.set(t,n),MODEL_CLASS_TO_NAME_MAPPING.set(e,t),MODEL_NAME_TO_CLASS_MAPPING.set(t,e);class AutoModel extends PretrainedMixin{}De(AutoModel,"MODEL_CLASS_MAPPINGS",MODEL_CLASS_TYPE_MAPPING.map(e=>e[0])),De(AutoModel,"BASE_IF_FAIL",!0);class AutoModelForSequenceClassification extends PretrainedMixin{}De(AutoModelForSequenceClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForTokenClassification extends PretrainedMixin{}De(AutoModelForTokenClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForSeq2SeqLM extends PretrainedMixin{}De(AutoModelForSeq2SeqLM,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES]);class AutoModelForSpeechSeq2Seq extends PretrainedMixin{}De(AutoModelForSpeechSeq2Seq,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES]);class AutoModelForTextToSpectrogram extends PretrainedMixin{}De(AutoModelForTextToSpectrogram,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES]);class AutoModelForTextToWaveform extends PretrainedMixin{}De(AutoModelForTextToWaveform,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES]);class AutoModelForCausalLM extends PretrainedMixin{}De(AutoModelForCausalLM,"MODEL_CLASS_MAPPINGS",[MODEL_WITH_LM_HEAD_MAPPING_NAMES]);class AutoModelForMaskedLM extends PretrainedMixin{}De(AutoModelForMaskedLM,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_MASKED_LM_MAPPING_NAMES]);class AutoModelForQuestionAnswering extends PretrainedMixin{}De(AutoModelForQuestionAnswering,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES]);class AutoModelForVision2Seq extends PretrainedMixin{}De(AutoModelForVision2Seq,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES]);class AutoModelForImageClassification extends PretrainedMixin{}De(AutoModelForImageClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForImageSegmentation extends PretrainedMixin{}De(AutoModelForImageSegmentation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES]);class AutoModelForSemanticSegmentation extends PretrainedMixin{}De(AutoModelForSemanticSegmentation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES]);class AutoModelForObjectDetection extends PretrainedMixin{}De(AutoModelForObjectDetection,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES]);class AutoModelForZeroShotObjectDetection extends PretrainedMixin{}De(AutoModelForZeroShotObjectDetection,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES]);class AutoModelForCTC extends PretrainedMixin{}De(AutoModelForCTC,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_CTC_MAPPING_NAMES]);class AutoModelForAudioClassification extends PretrainedMixin{}De(AutoModelForAudioClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForDocumentQuestionAnswering extends PretrainedMixin{}De(AutoModelForDocumentQuestionAnswering,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES]);class AutoModelForImageToImage extends PretrainedMixin{}De(AutoModelForImageToImage,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES]);class AutoModelForDepthEstimation extends PretrainedMixin{}De(AutoModelForDepthEstimation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES]);class AutoModelForImageFeatureExtraction extends PretrainedMixin{}De(AutoModelForImageFeatureExtraction,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES]);class Seq2SeqLMOutput extends ModelOutput{constructor({logits:e,past_key_values:n,encoder_outputs:i,decoder_attentions:l=null,cross_attentions:f=null}){super(),this.logits=e,this.past_key_values=n,this.encoder_outputs=i,this.decoder_attentions=l,this.cross_attentions=f}}class SequenceClassifierOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class XVectorOutput extends ModelOutput{constructor({logits:e,embeddings:n}){super(),this.logits=e,this.embeddings=n}}class TokenClassifierOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class MaskedLMOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class QuestionAnsweringModelOutput extends ModelOutput{constructor({start_logits:e,end_logits:n}){super(),this.start_logits=e,this.end_logits=n}}class CausalLMOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class ImageMattingOutput extends ModelOutput{constructor({alphas:e}){super(),this.alphas=e}}class VitsModelOutput extends ModelOutput{constructor({waveform:e,spectrogram:n}){super(),this.waveform=e,this.spectrogram=n}}const BROWSER_ENV=typeof self<"u",WEBWORKER_ENV=BROWSER_ENV&&self.constructor.name==="DedicatedWorkerGlobalScope";let createCanvasFunction,ImageDataClass,loadImageFunction;if(BROWSER_ENV)createCanvasFunction=(t,e)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(t,e)},loadImageFunction=self.createImageBitmap,ImageDataClass=self.ImageData;else if(sharp)loadImageFunction=async t=>{const n=(await t.metadata()).channels;let{data:i,info:l}=await t.rotate().raw().toBuffer({resolveWithObject:!0});const f=new RawImage(new Uint8ClampedArray(i),l.width,l.height,l.channels);return n!==void 0&&n!==l.channels&&f.convert(n),f};else throw new Error("Unable to load image processing library.");const RESAMPLING_MAPPING={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},CONTENT_TYPE_MAP=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class RawImage{constructor(e,n,i,l){this.data=e,this.width=n,this.height=i,this.channels=l}get size(){return[this.width,this.height]}static async read(e){if(e instanceof RawImage)return e;if(typeof e=="string"||e instanceof URL)return await this.fromURL(e);throw new Error(`Unsupported input type: ${typeof e}`)}static async fromURL(e){let n=await getFile(e);if(n.status!==200)throw new Error(`Unable to read image from "${e}" (${n.status} ${n.statusText})`);let i=await n.blob();return this.fromBlob(i)}static async fromBlob(e){if(BROWSER_ENV){let n=await loadImageFunction(e);const i=createCanvasFunction(n.width,n.height).getContext("2d");return i.drawImage(n,0,0),new this(i.getImageData(0,0,n.width,n.height).data,n.width,n.height,4)}else{let n=sharp(await e.arrayBuffer());return await loadImageFunction(n)}}static fromTensor(e,n="CHW"){if(e.dims.length!==3)throw new Error(`Tensor should have 3 dimensions, but has ${e.dims.length} dimensions.`);if(n==="CHW")e=e.transpose(1,2,0);else if(n!=="HWC")throw new Error(`Unsupported channel format: ${n}`);if(!(e.data instanceof Uint8ClampedArray||e.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${e.type}`);switch(e.dims[2]){case 1:case 2:case 3:case 4:return new RawImage(e.data,e.dims[1],e.dims[0],e.dims[2]);default:throw new Error(`Unsupported number of channels: ${e.dims[2]}`)}}grayscale(){if(this.channels===1)return this;let e=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let n=0,i=0;n<this.data.length;n+=this.channels){const l=this.data[n],f=this.data[n+1],p=this.data[n+2];e[i++]=Math.round(.2989*l+.587*f+.114*p)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,1)}rgb(){if(this.channels===3)return this;let e=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let n=0,i=0;n<this.data.length;++n)e[i++]=this.data[n],e[i++]=this.data[n],e[i++]=this.data[n];break;case 4:for(let n=0,i=0;n<this.data.length;n+=4)e[i++]=this.data[n],e[i++]=this.data[n+1],e[i++]=this.data[n+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,3)}rgba(){if(this.channels===4)return this;let e=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let n=0,i=0;n<this.data.length;++n)e[i++]=this.data[n],e[i++]=this.data[n],e[i++]=this.data[n],e[i++]=255;break;case 3:for(let n=0,i=0;n<this.data.length;n+=3)e[i++]=this.data[n],e[i++]=this.data[n+1],e[i++]=this.data[n+2],e[i++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,4)}async resize(e,n,{resample:i=2}={}){let l=RESAMPLING_MAPPING[i]??i;if(BROWSER_ENV){let f=this.channels,p=this.toCanvas();const b=createCanvasFunction(e,n).getContext("2d");return b.drawImage(p,0,0,e,n),new RawImage(b.getImageData(0,0,e,n).data,e,n,4).convert(f)}else{let f=this.toSharp();switch(l){case"box":case"hamming":(l==="box"||l==="hamming")&&(console.warn(`Resampling method ${l} is not yet supported. Using bilinear instead.`),l="bilinear");case"nearest":case"bilinear":case"bicubic":f=f.affine([e/this.width,0,0,n/this.height],{interpolator:l});break;case"lanczos":f=f.resize({width:e,height:n,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${l} is not supported.`)}return await loadImageFunction(f)}}async pad([e,n,i,l]){if(e=Math.max(e,0),n=Math.max(n,0),i=Math.max(i,0),l=Math.max(l,0),e===0&&n===0&&i===0&&l===0)return this;if(BROWSER_ENV){let f=this.channels,p=this.toCanvas(),b=this.width+e+n,w=this.height+i+l;const v=createCanvasFunction(b,w).getContext("2d");return v.drawImage(p,0,0,this.width,this.height,e,i,b,w),new RawImage(v.getImageData(0,0,b,w).data,b,w,4).convert(f)}else{let f=this.toSharp().extend({left:e,right:n,top:i,bottom:l});return await loadImageFunction(f)}}async crop([e,n,i,l]){if(e=Math.max(e,0),n=Math.max(n,0),i=Math.min(i,this.width-1),l=Math.min(l,this.height-1),e===0&&n===0&&i===this.width-1&&l===this.height-1)return this;const f=i-e+1,p=l-n+1;if(BROWSER_ENV){const b=this.channels,w=this.toCanvas(),v=createCanvasFunction(f,p).getContext("2d");return v.drawImage(w,e,n,f,p,0,0,f,p),new RawImage(v.getImageData(0,0,f,p).data,f,p,4).convert(b)}else{const b=this.toSharp().extract({left:e,top:n,width:f,height:p});return await loadImageFunction(b)}}async center_crop(e,n){if(this.width===e&&this.height===n)return this;let i=(this.width-e)/2,l=(this.height-n)/2;if(BROWSER_ENV){let f=this.channels,p=this.toCanvas();const b=createCanvasFunction(e,n).getContext("2d");let w=0,v=0,g=0,u=0;return i>=0?w=i:g=-i,l>=0?v=l:u=-l,b.drawImage(p,w,v,e,n,g,u,e,n),new RawImage(b.getImageData(0,0,e,n).data,e,n,4).convert(f)}else{let f=this.toSharp();if(i>=0&&l>=0)f=f.extract({left:Math.floor(i),top:Math.floor(l),width:e,height:n});else if(i<=0&&l<=0){let p=Math.floor(-l),b=Math.floor(-i);f=f.extend({top:p,left:b,right:e-this.width-b,bottom:n-this.height-p})}else{let p=[0,0],b=0;l<0?(p[0]=Math.floor(-l),p[1]=n-this.height-p[0]):b=Math.floor(l);let w=[0,0],v=0;i<0?(w[0]=Math.floor(-i),w[1]=e-this.width-w[0]):v=Math.floor(i),f=f.extend({top:p[0],bottom:p[1],left:w[0],right:w[1]}).extract({left:v,top:b,width:e,height:n})}return await loadImageFunction(f)}}async toBlob(e="image/png",n=1){if(!BROWSER_ENV)throw new Error("toBlob() is only supported in browser environments.");return await this.toCanvas().convertToBlob({type:e,quality:n})}toTensor(e="CHW"){let n=new Tensor("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if(e!=="HWC")if(e==="CHW")n=n.permute(2,0,1);else throw new Error(`Unsupported channel format: ${e}`);return n}toCanvas(){if(!BROWSER_ENV)throw new Error("toCanvas() is only supported in browser environments.");let e=this.clone().rgba(),n=createCanvasFunction(e.width,e.height),i=new ImageDataClass(e.data,e.width,e.height);return n.getContext("2d").putImageData(i,0,0),n}_update(e,n,i,l=null){return this.data=e,this.width=n,this.height=i,l!==null&&(this.channels=l),this}clone(){return new RawImage(this.data.slice(),this.width,this.height,this.channels)}convert(e){if(this.channels===e)return this;switch(e){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(e){if(BROWSER_ENV){if(WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const n=e.split(".").pop().toLowerCase(),i=CONTENT_TYPE_MAP.get(n)??"image/png",l=await this.toBlob(i),f=URL.createObjectURL(l),p=document.createElement("a");p.href=f,p.download=e,p.click(),p.remove()}else{if(env$1.useFS)return await this.toSharp().toFile(e);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}}toSharp(){if(BROWSER_ENV)throw new Error("toSharp() is only supported in server-side environments.");return sharp(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}async function read_audio(t,e){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const n=await(await getFile(t)).arrayBuffer(),i=new AudioContext({sampleRate:e});typeof e>"u"&&console.warn(`No sampling rate provided, using default of ${i.sampleRate}Hz.`);const l=await i.decodeAudioData(n);let f;if(l.numberOfChannels===2){const p=Math.sqrt(2),b=l.getChannelData(0),w=l.getChannelData(1);f=new Float32Array(b.length);for(let v=0;v<l.length;++v)f[v]=p*(b[v]+w[v])/2}else f=l.getChannelData(0);return f}function hanning(t){if(t<1)return new Float64Array;if(t===1)return new Float64Array([1]);const e=t-1,n=Math.PI/e,i=new Float64Array(t);for(let l=0;l<t;++l){const f=2*l-e;i[l]=.5+.5*Math.cos(n*f)}return i}const HERTZ_TO_MEL_MAPPING={htk:t=>2595*Math.log10(1+t/700),kaldi:t=>1127*Math.log(1+t/700),slaney:(t,e=1e3,n=15,i=27/Math.log(6.4))=>t>=e?n+Math.log(t/e)*i:3*t/200};function hertz_to_mel(t,e="htk"){const n=HERTZ_TO_MEL_MAPPING[e];if(!n)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof t=="number"?n(t):t.map(i=>n(i))}const MEL_TO_HERTZ_MAPPING={htk:t=>700*(10**(t/2595)-1),kaldi:t=>700*(Math.exp(t/1127)-1),slaney:(t,e=1e3,n=15,i=Math.log(6.4)/27)=>t>=n?e*Math.exp(i*(t-n)):200*t/3};function mel_to_hertz(t,e="htk"){const n=MEL_TO_HERTZ_MAPPING[e];if(!n)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof t=="number"?n(t):t.map(i=>n(i))}function _create_triangular_filter_bank(t,e){const n=Float64Array.from({length:e.length-1},(p,b)=>e[b+1]-e[b]),i=Array.from({length:t.length},()=>new Array(e.length));for(let p=0;p<t.length;++p){const b=i[p];for(let w=0;w<e.length;++w)b[w]=e[w]-t[p]}const l=e.length-2,f=Array.from({length:l},()=>new Array(t.length));for(let p=0;p<t.length;++p){const b=i[p];for(let w=0;w<l;++w){const v=-b[w]/n[w],g=b[w+2]/n[w+1];f[w][p]=Math.max(0,Math.min(v,g))}}return f}function linspace(t,e,n){const i=(e-t)/(n-1);return Float64Array.from({length:n},(l,f)=>t+i*f)}function mel_filter_bank(t,e,n,i,l,f=null,p="htk",b=!1){if(f!==null&&f!=="slaney")throw new Error('norm must be one of null or "slaney"');const w=hertz_to_mel(n,p),v=hertz_to_mel(i,p),g=linspace(w,v,e+2);let u=mel_to_hertz(g,p),o;if(b){const _=l/(t*2);o=hertz_to_mel(Float64Array.from({length:t},(S,T)=>T*_),p),u=g}else o=linspace(0,Math.floor(l/2),t);const h=_create_triangular_filter_bank(o,u);if(f!==null&&f==="slaney")for(let _=0;_<e;++_){const S=h[_],T=2/(u[_+2]-u[_]);for(let O=0;O<t;++O)S[O]*=T}return h}function padReflect(t,e,n){const i=new t.constructor(t.length+e+n),l=t.length-1;for(let f=0;f<t.length;++f)i[e+f]=t[f];for(let f=1;f<=e;++f)i[e-f]=t[calculateReflectOffset(f,l)];for(let f=1;f<=n;++f)i[l+e+f]=t[calculateReflectOffset(l-f,l)];return i}function _db_conversion_helper(t,e,n,i,l){if(n<=0)throw new Error("reference must be greater than zero");if(i<=0)throw new Error("min_value must be greater than zero");n=Math.max(i,n);const f=Math.log10(n);for(let p=0;p<t.length;++p)t[p]=e*Math.log10(Math.max(i,t[p])-f);if(l!==null){if(l<=0)throw new Error("db_range must be greater than zero");const p=max$1(t)[0]-l;for(let b=0;b<t.length;++b)t[b]=Math.max(t[b],p)}return t}function amplitude_to_db(t,e=1,n=1e-5,i=null){return _db_conversion_helper(t,20,e,n,i)}function power_to_db(t,e=1,n=1e-10,i=null){return _db_conversion_helper(t,10,e,n,i)}function spectrogram(t,e,n,i,{fft_length:l=null,power:f=1,center:p=!0,pad_mode:b="reflect",onesided:w=!0,preemphasis:v=null,mel_filters:g=null,mel_floor:u=1e-10,log_mel:o=null,reference:h=1,min_value:_=1e-10,db_range:S=null,remove_dc_offset:T=null,max_num_frames:O=null,do_pad:j=!0,transpose:C=!1}={}){const D=e.length;if(l===null&&(l=n),n>l)throw Error(`frame_length (${n}) may not be larger than fft_length (${l})`);if(D!==n)throw new Error(`Length of the window (${D}) must equal frame_length (${n})`);if(i<=0)throw new Error("hop_length must be greater than zero");if(f===null&&g!==null)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(p){if(b!=="reflect")throw new Error(`pad_mode="${b}" not implemented yet.`);const z=Math.floor((l-1)/2)+1;t=padReflect(t,z,z)}const R=Math.floor(1+Math.floor((t.length-n)/i)),I=w?Math.floor(l/2)+1:l;let $=R,F=R;O!==null&&(O>R?j&&(F=O):F=$=O);const L=new FFT(l),V=new Float64Array(l),Y=new Float64Array(L.outputBufferSize),Q=new Array($);for(let z=0;z<$;++z){const q=z*i;for(let ae=0;ae<n;++ae)V[ae]=t[q+ae];if(T){let ae=0;for(let Z=0;Z<n;++Z)ae+=V[Z];const we=ae/n;for(let Z=0;Z<n;++Z)V[Z]-=we}if(v!==null){for(let ae=n-1;ae>=1;--ae)V[ae]-=v*V[ae-1];V[0]*=1-v}for(let ae=0;ae<e.length;++ae)V[ae]*=e[ae];L.realTransform(Y,V);const ce=new Array(I);for(let ae=0;ae<ce.length;++ae){const we=ae<<1;ce[ae]=Y[we]**2+Y[we+1]**2}Q[z]=ce}if(f!==null&&f!==2){const z=2/f;for(let q=0;q<Q.length;++q){const ce=Q[q];for(let ae=0;ae<ce.length;++ae)ce[ae]**=z}}const ee=g.length,X=new Float32Array(ee*F),W=C?[F,ee]:[ee,F];for(let z=0;z<ee;++z){const q=g[z];for(let ce=0;ce<$;++ce){const ae=Q[ce];let we=0;for(let Z=0;Z<I;++Z)we+=q[Z]*ae[Z];X[C?ce*ee+z:z*$+ce]=Math.max(u,we)}}if(f!==null&&o!==null){const z=Math.min(X.length,$*ee);switch(o){case"log":for(let q=0;q<z;++q)X[q]=Math.log(X[q]);break;case"log10":for(let q=0;q<z;++q)X[q]=Math.log10(X[q]);break;case"dB":if(f===1)amplitude_to_db(X,h,_,S);else if(f===2)power_to_db(X,h,_,S);else throw new Error(`Cannot use log_mel option '${o}' with power ${f}`);break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${o}'`)}}return{data:X,dims:W}}function window_function(t,e,{periodic:n=!0,frame_length:i=null,center:l=!0}={}){const f=n?t+1:t;let p;switch(e){case"boxcar":p=new Float64Array(f).fill(1);break;case"hann":case"hann_window":p=hanning(f);break;case"povey":p=hanning(f).map(b=>Math.pow(b,.85));break;default:throw new Error(`Unknown window type ${e}.`)}if(n&&(p=p.subarray(0,t)),i===null)return p;if(t>i)throw new Error(`Length of the window (${t}) may not be larger than frame_length (${i})`);return p}function center_to_corners_format([t,e,n,i]){return[t-n/2,e-i/2,t+n/2,e+i/2]}function post_process_object_detection(t,e=.5,n=null,i=!1){const l=t.logits,f=t.pred_boxes,[p,b,w]=l.dims;if(n!==null&&n.length!==p)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let v=[];for(let g=0;g<p;++g){let u=n!==null?n[g]:null,o={boxes:[],classes:[],scores:[]},h=l[g],_=f[g];for(let S=0;S<b;++S){let T=h[S],O=[],j;if(i){j=T.sigmoid().data;for(let C=0;C<j.length;++C)j[C]>e&&O.push(C)}else{let C=max$1(T.data)[1];if(C===w-1)continue;O.push(C),j=softmax(T.data)}for(const C of O){let D=_[S].data;D=center_to_corners_format(D),u!==null&&(D=D.map((R,I)=>R*u[(I+1)%2])),o.boxes.push(D),o.classes.push(C),o.scores.push(j[C])}}v.push(o)}return v}function validate_audio_inputs(t,e){var n;if(!(t instanceof Float32Array||t instanceof Float64Array))throw new Error(`${e} expects input to be a Float32Array or a Float64Array, but got ${((n=t==null?void 0:t.constructor)==null?void 0:n.name)??typeof t} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}function constraint_to_multiple_of(t,e,n=0,i=null){const l=t/e;let f=bankers_round(l)*e;return i!==null&&f>i&&(f=Math.floor(l)*e),f<n&&(f=Math.ceil(l)*e),f}function enforce_size_divisibility([t,e],n){return[Math.max(Math.floor(t/n),1)*n,Math.max(Math.floor(e/n),1)*n]}class FeatureExtractor extends Callable{constructor(e){super(),this.config=e}}class ImageFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.image_mean=this.config.image_mean??this.config.mean,this.image_std=this.config.image_std??this.config.std,this.resample=this.config.resample??2,this.do_rescale=this.config.do_rescale??!0,this.rescale_factor=this.config.rescale_factor??1/255,this.do_normalize=this.config.do_normalize,this.do_resize=this.config.do_resize,this.do_thumbnail=this.config.do_thumbnail,this.size=this.config.size,this.size_divisibility=this.config.size_divisibility??this.config.size_divisor,this.do_center_crop=this.config.do_center_crop,this.crop_size=this.config.crop_size,this.do_convert_rgb=this.config.do_convert_rgb??!0,this.do_crop_margin=this.config.do_crop_margin,this.pad_size=this.config.pad_size,this.do_pad=this.config.do_pad,this.do_pad&&!this.pad_size&&this.size&&this.size.width!==void 0&&this.size.height!==void 0&&(this.pad_size=this.size),this.do_flip_channel_order=this.config.do_flip_channel_order??!1}async thumbnail(e,n,i=2){const l=e.height,f=e.width,p=n.height,b=n.width;let w=Math.min(l,p),v=Math.min(f,b);return w===l&&v===f?e:(l>f?v=Math.floor(f*w/l):f>l&&(w=Math.floor(l*v/f)),await e.resize(v,w,{resample:i}))}async crop_margin(e,n=200){const i=e.clone().grayscale(),l=min$1(i.data)[0],p=max$1(i.data)[0]-l;if(p===0)return e;const b=n/255;let w=i.width,v=i.height,g=0,u=0;for(let o=0;o<i.height;++o){const h=o*i.width;for(let _=0;_<i.width;++_)(i.data[h+_]-l)/p<b&&(w=Math.min(w,_),v=Math.min(v,o),g=Math.max(g,_),u=Math.max(u,o))}return e=await e.crop([w,v,g,u]),e}pad_image(e,n,i,{mode:l="constant",center:f=!1,constant_values:p=0}={}){const[b,w,v]=n;let g,u;if(typeof i=="number"?(g=i,u=i):(g=i.width,u=i.height),g!==w||u!==b){const o=new Float32Array(g*u*v);if(Array.isArray(p))for(let S=0;S<o.length;++S)o[S]=p[S%v];else p!==0&&o.fill(p);const[h,_]=f?[Math.floor((g-w)/2),Math.floor((u-b)/2)]:[0,0];for(let S=0;S<b;++S){const T=(S+_)*g,O=S*w;for(let j=0;j<w;++j){const C=(T+j+h)*v,D=(O+j)*v;for(let R=0;R<v;++R)o[C+R]=e[D+R]}}if(l==="symmetric"){if(f)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const S=b-1,T=w-1;for(let O=0;O<u;++O){const j=O*g,C=calculateReflectOffset(O,S)*w;for(let D=0;D<g;++D){if(O<b&&D<w)continue;const R=(j+D)*v,I=(C+calculateReflectOffset(D,T))*v;for(let $=0;$<v;++$)o[R+$]=e[I+$]}}}e=o,n=[u,g,v]}return[e,n]}rescale(e){for(let n=0;n<e.length;++n)e[n]=this.rescale_factor*e[n]}get_resize_output_image_size(e,n){const[i,l]=e.size;let f,p;if(this.do_thumbnail){const{height:b,width:w}=n;f=Math.min(b,w)}else Number.isInteger(n)?(f=n,p=this.config.max_size??f):n!==void 0&&(f=n.shortest_edge,p=n.longest_edge);if(f!==void 0||p!==void 0){const b=f===void 0?1:Math.max(f/i,f/l),w=i*b,v=l*b,g=p===void 0?1:Math.min(p/w,p/v);let u=Math.floor(Number((w*g).toFixed(2))),o=Math.floor(Number((v*g).toFixed(2)));return this.size_divisibility!==void 0&&([u,o]=enforce_size_divisibility([u,o],this.size_divisibility)),[u,o]}else if(n!==void 0&&n.width!==void 0&&n.height!==void 0){let b=n.width,w=n.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let v=w/l,g=b/i;Math.abs(1-g)<Math.abs(1-v)?v=g:g=v,w=constraint_to_multiple_of(v*l,this.config.ensure_multiple_of),b=constraint_to_multiple_of(g*i,this.config.ensure_multiple_of)}return[b,w]}else{if(this.size_divisibility!==void 0)return enforce_size_divisibility([i,l],this.size_divisibility);throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(n)}`)}}async resize(e){const[n,i]=this.get_resize_output_image_size(e,this.size);return await e.resize(n,i,{resample:this.resample})}async preprocess(e,{do_normalize:n=null,do_pad:i=null,do_convert_rgb:l=null,do_convert_grayscale:f=null,do_flip_channel_order:p=null}={}){this.do_crop_margin&&(e=await this.crop_margin(e));const[b,w]=e.size;if(l??this.do_convert_rgb?e=e.rgb():f&&(e=e.grayscale()),this.do_resize&&(e=await this.resize(e)),this.do_thumbnail&&(e=await this.thumbnail(e,this.size,this.resample)),this.do_center_crop){let h,_;Number.isInteger(this.crop_size)?(h=this.crop_size,_=this.crop_size):(h=this.crop_size.width,_=this.crop_size.height),e=await e.center_crop(h,_)}const v=[e.height,e.width];let g=Float32Array.from(e.data),u=[e.height,e.width,e.channels];if(this.do_rescale&&this.rescale(g),n??this.do_normalize){let h=this.image_mean;Array.isArray(this.image_mean)||(h=new Array(e.channels).fill(h));let _=this.image_std;if(Array.isArray(this.image_std)||(_=new Array(e.channels).fill(h)),h.length!==e.channels||_.length!==e.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${h.length}) and \`image_std\` (${_.length}) must match the number of channels in the image (${e.channels}).`);for(let S=0;S<g.length;S+=e.channels)for(let T=0;T<e.channels;++T)g[S+T]=(g[S+T]-h[T])/_[T]}if(i??this.do_pad){if(this.pad_size)[g,u]=this.pad_image(g,[e.height,e.width,e.channels],this.pad_size);else if(this.size_divisibility){const[h,_]=enforce_size_divisibility([u[1],u[0]],this.size_divisibility);[g,u]=this.pad_image(g,u,{width:h,height:_})}}if(p??this.do_flip_channel_order){if(u[2]!==3)throw new Error("Flipping channel order is only supported for RGB images.");for(let h=0;h<g.length;h+=3){const _=g[h];g[h]=g[h+2],g[h+2]=_}}const o=new Tensor("float32",g,u).permute(2,0,1);return{original_size:[w,b],reshaped_input_size:v,pixel_values:o}}async _call(e,...n){Array.isArray(e)||(e=[e]);const i=await Promise.all(e.map(f=>this.preprocess(f)));return{pixel_values:stack(i.map(f=>f.pixel_values),0),original_sizes:i.map(f=>f.original_size),reshaped_input_sizes:i.map(f=>f.reshaped_input_size)}}}class SegformerFeatureExtractor extends ImageFeatureExtractor{post_process_semantic_segmentation(e,n=null){const i=e.logits,l=i.dims[0];if(n!==null&&n.length!==l)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const f=[];for(let p=0;p<l;++p){const b=n!==null?n[p]:null;let w=i[p];b!==null&&(w=interpolate$2(w,b,"bilinear",!1));const[v,g]=b??w.dims.slice(-2),u=new Tensor("int32",new Int32Array(v*g),[v,g]),o=w[0].data;for(let T=1;T<w.dims[0];++T){const O=w[T].data;for(let j=0;j<O.length;++j)O[j]>o[j]&&(o[j]=O[j],u.data[j]=T)}const h=new Array(w.dims[0]),_=u.data;for(let T=0;T<_.length;++T){const O=_[T];h[O]=O}const S=h.filter(T=>T!==void 0);f.push({segmentation:u,labels:S})}return f}}class DPTFeatureExtractor extends ImageFeatureExtractor{}class DPTImageProcessor extends DPTFeatureExtractor{}class BitImageProcessor extends ImageFeatureExtractor{}class GLPNFeatureExtractor extends ImageFeatureExtractor{}class CLIPFeatureExtractor extends ImageFeatureExtractor{}class ChineseCLIPFeatureExtractor extends ImageFeatureExtractor{}class SiglipImageProcessor extends ImageFeatureExtractor{}class ConvNextFeatureExtractor extends ImageFeatureExtractor{constructor(e){super(e),this.crop_pct=this.config.crop_pct??224/256}async resize(e){var i;const n=(i=this.size)==null?void 0:i.shortest_edge;if(n===void 0)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(n<384){const l=Math.floor(n/this.crop_pct),[f,p]=this.get_resize_output_image_size(e,{shortest_edge:l});e=await e.resize(f,p,{resample:this.resample}),e=await e.center_crop(n,n)}else e=await e.resize(n,n,{resample:this.resample});return e}}class ConvNextImageProcessor extends ConvNextFeatureExtractor{}class ViTFeatureExtractor extends ImageFeatureExtractor{}class ViTImageProcessor extends ImageFeatureExtractor{}class EfficientNetImageProcessor extends ImageFeatureExtractor{constructor(e){super(e),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(n=>n*n))}}class MobileViTFeatureExtractor extends ImageFeatureExtractor{}class MobileViTImageProcessor extends MobileViTFeatureExtractor{}class OwlViTFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...e){return post_process_object_detection(...e)}}class Owlv2ImageProcessor extends OwlViTFeatureExtractor{}class DeiTFeatureExtractor extends ImageFeatureExtractor{}class BeitFeatureExtractor extends ImageFeatureExtractor{}class DonutFeatureExtractor extends ImageFeatureExtractor{pad_image(e,n,i,l={}){const[f,p,b]=n;let w=this.image_mean;Array.isArray(this.image_mean)||(w=new Array(b).fill(w));let v=this.image_std;Array.isArray(v)||(v=new Array(b).fill(w));const g=w.map((u,o)=>-u/v[o]);return super.pad_image(e,n,i,{center:!0,constant_values:g,...l})}}class NougatImageProcessor extends DonutFeatureExtractor{}class DetrFeatureExtractor extends ImageFeatureExtractor{async _call(e){const n=await super._call(e),i=[n.pixel_values.dims[0],64,64],l=new Tensor("int64",new BigInt64Array(i.reduce((f,p)=>f*p)).fill(1n),i);return{...n,pixel_mask:l}}post_process_object_detection(...e){return post_process_object_detection(...e)}remove_low_and_no_objects(e,n,i,l){let f=[],p=[],b=[];for(let w=0;w<e.dims[0];++w){let v=e[w],g=n[w],u=max$1(v.data)[1];if(u===l)continue;let h=softmax(v.data)[u];h>i&&(f.push(g),p.push(h),b.push(u))}return[f,p,b]}check_segment_validity(e,n,i,l=.5,f=.8){let p=[],b=0,w=0;for(let g=0;g<e.length;++g)e[g]===i&&(p.push(g),++b),n[i].data[g]>=l&&++w;let v=b>0&&w>0;return v&&(v=b/w>f),[v,p]}compute_segments(e,n,i,l,f,p=null,b=null){let[w,v]=b??e[0].dims,g=new Tensor("int32",new Int32Array(w*v),[w,v]),u=[];if(b!==null)for(let S=0;S<e.length;++S)e[S]=interpolate$2(e[S],b,"bilinear",!1);let o=new Int32Array(e[0].data.length),h=new Float32Array(e[0].data.length);for(let S=0;S<e.length;++S){let T=n[S];for(let O=0;O<e[S].data.length;++O)e[S].data[O]*=T,e[S].data[O]>h[O]&&(o[O]=S,h[O]=e[S].data[O])}let _=0;for(let S=0;S<i.length;++S){let T=i[S],[O,j]=this.check_segment_validity(o,e,S,l,f);if(O){++_;for(let C of j)g.data[C]=_;u.push({id:_,label_id:T,score:n[S]})}}return[g,u]}post_process_panoptic_segmentation(e,n=.5,i=.5,l=.8,f=null,p=null){f===null&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),f=new Set);const b=e.logits,v=e.pred_masks.sigmoid();let[g,u,o]=b.dims;if(o-=1,p!==null&&p.length!==g)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let h=[];for(let _=0;_<g;++_){let S=p!==null?p[_]:null,T=b[_],O=v[_],[j,C,D]=this.remove_low_and_no_objects(T,O,n,o);if(D.length===0){let[$,F]=S??O.dims.slice(-2),L=new Tensor("int32",new Int32Array($*F).fill(-1),[$,F]);h.push({segmentation:L,segments_info:[]});continue}let[R,I]=this.compute_segments(j,C,D,i,l,f,S);h.push({segmentation:R,segments_info:I})}return h}post_process_instance_segmentation(){throw Error("Not implemented yet")}}class YolosFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...e){return post_process_object_detection(...e)}}class SamImageProcessor extends ImageFeatureExtractor{reshape_input_points(e,n,i){e=structuredClone(e);let l=calculateDimensions(e);if(l.length===3)l=[1,...l],e=[e];else if(l.length!==4)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let f=0;f<e.length;++f){let p=n[f],b=i[f],w=[b[0]/p[0],b[1]/p[1]];for(let v=0;v<e[f].length;++v)for(let g=0;g<e[f][v].length;++g)for(let u=0;u<e[f][v][g].length;++u)e[f][v][g][u]*=w[u]}return new Tensor("float32",Float32Array.from(e.flat(1/0)),l)}add_input_labels(e,n){let i=calculateDimensions(e);if(i.length===2)i=[1,...i],e=[e];else if(i.length!==3)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(i.some((l,f)=>l!==n.dims[f]))throw Error(`The first ${i.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new Tensor("int64",e.flat(1/0).map(BigInt),i)}async _call(e,n=null,i=null){const l=await super._call(e);if(n&&(l.input_points=this.reshape_input_points(n,l.original_sizes,l.reshaped_input_sizes)),i){if(!l.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");l.input_labels=this.add_input_labels(i,l.input_points)}return l}post_process_masks(e,n,i,{mask_threshold:l=0,binarize:f=!0,pad_size:p=null}={}){const b=[];p=p??this.pad_size;const w=[p.height,p.width];for(let v=0;v<n.length;++v){const g=n[v],u=i[v],o=e[v],h=[];for(let _=0;_<o.dims[0];++_){const S=o[_];let T=interpolate$2(S,w,"bilinear",!1);if(T=T.slice(null,[0,u[0]],[0,u[1]]),T=interpolate$2(T,g,"bilinear",!1),f){const O=new Uint8Array(T.data.length);for(let j=0;j<T.data.length;++j)T.data[j]>l&&(O[j]=1);T=new Tensor("bool",O,T.dims)}h.push(T)}b.push(stack(h))}return b}}class Swin2SRImageProcessor extends ImageFeatureExtractor{pad_image(e,n,i,l={}){const[f,p,b]=n;return super.pad_image(e,n,{width:p+(i-p%i)%i,height:f+(i-f%i)%i},{mode:"symmetric",center:!1,constant_values:-1,...l})}}class VitMatteImageProcessor extends ImageFeatureExtractor{async _call(e,n){Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]);const i=await Promise.all(e.map(p=>this.preprocess(p))),l=await Promise.all(n.map(p=>this.preprocess(p,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:stack(i.map((p,b)=>cat([p.pixel_values,l[b].pixel_values],0)),0),original_sizes:i.map(p=>p.original_size),reshaped_input_sizes:i.map(p=>p.reshaped_input_size)}}}class WhisperFeatureExtractor extends FeatureExtractor{constructor(e){var n;super(e),(n=this.config).mel_filters??(n.mel_filters=mel_filter_bank(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney")),this.window=window_function(this.config.n_fft,"hann")}_extract_fbank_features(e){const{data:n,dims:i}=spectrogram(e,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:this.config.nb_max_frames}),l=max$1(n)[0];for(let f=0;f<n.length;++f)n[f]=(Math.max(n[f],l-8)+4)/4;return{data:n,dims:i}}async _call(e){validate_audio_inputs(e,"WhisperFeatureExtractor");let n;e.length>this.config.n_samples?(console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),n=e.slice(0,this.config.n_samples)):(n=new Float32Array(this.config.n_samples),n.set(e));const{data:i,dims:l}=this._extract_fbank_features(n);return{input_features:new Tensor("float32",i,[1,...l])}}}class Wav2Vec2FeatureExtractor extends FeatureExtractor{_zero_mean_unit_var_norm(e){const i=e.reduce((f,p)=>f+p,0)/e.length,l=e.reduce((f,p)=>f+(p-i)**2,0)/e.length;return e.map(f=>(f-i)/Math.sqrt(l+1e-7))}async _call(e){validate_audio_inputs(e,"Wav2Vec2FeatureExtractor"),e instanceof Float64Array&&(e=new Float32Array(e));let n=e;this.config.do_normalize&&(n=this._zero_mean_unit_var_norm(n));const i=[1,n.length];return{input_values:new Tensor("float32",n,i),attention_mask:new Tensor("int64",new BigInt64Array(n.length).fill(1n),i)}}}class SeamlessM4TFeatureExtractor extends FeatureExtractor{constructor(e){super(e);const n=this.config.sampling_rate,i=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(n/2),n,null,"kaldi",!0);for(let l=0;l<i.length;++l)i[l].push(0);this.mel_filters=i,this.window=window_function(400,"povey",{periodic:!1})}_extract_fbank_features(e,n){return e=e.map(i=>i*32768),spectrogram(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:n,transpose:!0})}async _call(e,{padding:n=!0,pad_to_multiple_of:i=2,do_normalize_per_mel_bins:l=!0,return_attention_mask:f=!0}={}){validate_audio_inputs(e,"SeamlessM4TFeatureExtractor");let p=this._extract_fbank_features(e,this.config.max_length);if(l){const[_,S]=p.dims;for(let T=0;T<S;++T){let O=0;for(let R=0;R<_;++R)O+=p.data[R*S+T];const j=O/_;let C=0;for(let R=0;R<_;++R)C+=(p.data[R*S+T]-j)**2;C/=_-1;const D=Math.sqrt(C+1e-7);for(let R=0;R<_;++R){const I=R*S+T;p.data[I]=(p.data[I]-j)/D}}}let b;if(n){const[_,S]=p.dims,T=_%i;if(T>0){const O=new Float32Array(S*(_+T));O.set(p.data),O.fill(this.config.padding_value,p.data.length);const j=_+T;p={data:O,dims:[j,S]},f&&(b=new Tensor("int64",new BigInt64Array(j),[1,j]),b.data.fill(1n,0,_))}}const[w,v]=p.dims,g=this.config.stride;if(w%g!==0)throw new Error(`The number of frames (${w}) must be a multiple of the stride (${g}).`);const o=new Tensor("float32",p.data,p.dims).view(1,Math.floor(w/g),v*g),h={input_features:o};if(f){const _=o.dims[1],S=new Tensor("int64",new BigInt64Array(_),[1,_]);if(b)for(let T=1,O=0;T<w;T+=g,++O)S.data[O]=b.data[T];else S.data.fill(1n);h.attention_mask=S}return h}}class ASTFeatureExtractor extends FeatureExtractor{constructor(e){super(e);const n=this.config.sampling_rate,i=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(n/2),n,null,"kaldi",!0);for(let l=0;l<i.length;++l)i[l].push(0);this.mel_filters=i,this.window=window_function(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}_extract_fbank_features(e,n){return spectrogram(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:n,transpose:!0})}async _call(e){validate_audio_inputs(e,"ASTFeatureExtractor");const n=this._extract_fbank_features(e,this.config.max_length);if(this.config.do_normalize){const i=this.std*2;for(let l=0;l<n.data.length;++l)n.data[l]=(n.data[l]-this.mean)/i}return{input_values:new Tensor("float32",n.data,[1,...n.dims])}}}class ClapFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.mel_filters=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=window_function(this.config.fft_window_size,"hann")}_get_input_mel(e,n,i,l){let f,p=!1;const b=e.length-n;if(b>0)if(i==="rand_trunc"){p=!0;const w=Math.floor(Math.random()*(b+1));e=e.subarray(w,w+n),f=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples),f.dims=[1,...f.dims]}else throw new Error(`Truncation strategy "${i}" not implemented`);else{if(b<0){let w=new Float64Array(n);if(w.set(e),l==="repeat")for(let v=e.length;v<n;v+=e.length)w.set(e.subarray(0,Math.min(e.length,n-v)),v);else if(l==="repeatpad")for(let v=e.length;v<-b;v+=e.length)w.set(e,v);e=w}if(i==="fusion")throw new Error(`Truncation strategy "${i}" not implemented`);f=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples),f.dims=[1,...f.dims]}return{...f,longer:p}}_extract_fbank_features(e,n,i=null){return spectrogram(e,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:n,log_mel:"dB",max_num_frames:i,do_pad:!1,transpose:!0})}async _call(e,{max_length:n=null}={}){validate_audio_inputs(e,"ClapFeatureExtractor");const i=this._get_input_mel(e,n??this.config.nb_max_samples,this.config.truncation,this.config.padding);return{input_features:new Tensor("float32",i.data,[1,...i.dims])}}}class SpeechT5FeatureExtractor extends FeatureExtractor{}class Processor extends Callable{constructor(e){super(),this.feature_extractor=e}async _call(e,...n){return await this.feature_extractor(e,...n)}}class SamProcessor extends Processor{async _call(...e){return await this.feature_extractor(...e)}post_process_masks(...e){return this.feature_extractor.post_process_masks(...e)}reshape_input_points(...e){return this.feature_extractor.reshape_input_points(...e)}}class WhisperProcessor extends Processor{async _call(e){return await this.feature_extractor(e)}}class Wav2Vec2ProcessorWithLM extends Processor{async _call(e){return await this.feature_extractor(e)}}class SpeechT5Processor extends Processor{async _call(e){return await this.feature_extractor(e)}}class OwlViTProcessor extends Processor{}class AutoProcessor{static async from_pretrained(e,{progress_callback:n=null,config:i=null,cache_dir:l=null,local_files_only:f=!1,revision:p="main"}={}){let b=i??await getModelJSON(e,"preprocessor_config.json",!0,{progress_callback:n,cache_dir:l,local_files_only:f,revision:p}),w=b.feature_extractor_type??b.image_processor_type,v=this.FEATURE_EXTRACTOR_CLASS_MAPPING[w];if(!v)if(b.size!==void 0)console.warn(`Feature extractor type "${w}" not found, assuming ImageFeatureExtractor due to size parameter in config.`),v=ImageFeatureExtractor;else throw new Error(`Unknown Feature Extractor type: ${w}`);let g=this.PROCESSOR_CLASS_MAPPING[b.processor_class]??Processor,u=new v(b);return new g(u)}}De(AutoProcessor,"FEATURE_EXTRACTOR_CLASS_MAPPING",{ImageFeatureExtractor,WhisperFeatureExtractor,ViTFeatureExtractor,MobileViTFeatureExtractor,MobileViTImageProcessor,OwlViTFeatureExtractor,Owlv2ImageProcessor,CLIPFeatureExtractor,ChineseCLIPFeatureExtractor,SiglipImageProcessor,ConvNextFeatureExtractor,ConvNextImageProcessor,SegformerFeatureExtractor,BitImageProcessor,DPTImageProcessor,DPTFeatureExtractor,GLPNFeatureExtractor,BeitFeatureExtractor,DeiTFeatureExtractor,DetrFeatureExtractor,YolosFeatureExtractor,DonutFeatureExtractor,NougatImageProcessor,EfficientNetImageProcessor,ViTImageProcessor,VitMatteImageProcessor,SamImageProcessor,Swin2SRImageProcessor,Wav2Vec2FeatureExtractor,SeamlessM4TFeatureExtractor,SpeechT5FeatureExtractor,ASTFeatureExtractor,ClapFeatureExtractor}),De(AutoProcessor,"PROCESSOR_CLASS_MAPPING",{WhisperProcessor,Wav2Vec2ProcessorWithLM,SamProcessor,SpeechT5Processor,OwlViTProcessor});async function prepareImages(t){return Array.isArray(t)||(t=[t]),await Promise.all(t.map(e=>RawImage.read(e)))}async function prepareAudios(t,e){return Array.isArray(t)||(t=[t]),await Promise.all(t.map(n=>typeof n=="string"||n instanceof URL?read_audio(n,e):n instanceof Float64Array?new Float32Array(n):n))}function get_bounding_box(t,e){e&&(t=t.map(p=>p|0));const[n,i,l,f]=t;return{xmin:n,ymin:i,xmax:l,ymax:f}}class Pipeline extends Callable{constructor({task:e,model:n,tokenizer:i=null,processor:l=null}){super(),this.task=e,this.model=n,this.tokenizer=i,this.processor=l}async dispose(){await this.model.dispose()}}class TextClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:n=1}={}){const i=this.tokenizer(e,{padding:!0,truncation:!0}),l=await this.model(i),f=this.model.config.problem_type==="multi_label_classification"?w=>w.sigmoid().data:w=>softmax(w.data),p=this.model.config.id2label,b=[];for(const w of l.logits){const v=f(w),u=getTopItems(v,n).map(o=>({label:p[o[0]],score:o[1]}));n===1?b.push(...u):b.push(u)}return Array.isArray(e)||n===1?b:b[0]}}class TokenClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{ignore_labels:n=["O"]}={}){const i=Array.isArray(e),l=this.tokenizer(i?e:[e],{padding:!0,truncation:!0}),p=(await this.model(l)).logits,b=this.model.config.id2label,w=[];for(let v=0;v<p.dims[0];++v){const g=l.input_ids[v],u=p[v],o=[];for(let h=0;h<u.dims[0];++h){const _=u[h],S=max$1(_.data)[1],T=b?b[S]:`LABEL_${S}`;if(n.includes(T))continue;const O=this.tokenizer.decode([g[h].item()],{skip_special_tokens:!0});if(O==="")continue;const j=softmax(_.data);o.push({entity:T,score:j[S],index:h,word:O,start:null,end:null})}w.push(o)}return i?w:w[0]}}class QuestionAnsweringPipeline extends Pipeline{constructor(e){super(e)}async _call(e,n,{topk:i=1}={}){const l=this.tokenizer(e,{text_pair:n,padding:!0,truncation:!0}),f=await this.model(l),p=[];for(let b=0;b<f.start_logits.dims[0];++b){const w=l.input_ids[b],v=w.indexOf(this.tokenizer.sep_token_id),g=Array.from(softmax(f.start_logits[b].data)).map((h,_)=>[h,_]).filter(h=>h[1]>v),u=Array.from(softmax(f.end_logits[b].data)).map((h,_)=>[h,_]).filter(h=>h[1]>v),o=product(g,u).filter(h=>h[0][1]<=h[1][1]).map(h=>[h[0][1],h[1][1],h[0][0]*h[1][0]]).sort((h,_)=>_[2]-h[2]);for(let h=0;h<Math.min(o.length,i);++h){const[_,S,T]=o[h],O=[...w].slice(_,S+1),j=this.tokenizer.decode(O,{skip_special_tokens:!0});p.push({answer:j,score:T})}}return i===1?p[0]:p}}class FillMaskPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:n=5}={}){const i=this.tokenizer(e,{padding:!0,truncation:!0}),l=await this.model(i),f=[];for(let p=0;p<i.input_ids.dims[0];++p){const b=i.input_ids[p],w=b.indexOf(this.tokenizer.mask_token_id);if(w===-1)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const g=l.logits[p][w],u=getTopItems(softmax(g.data),n);f.push(u.map(o=>{const h=[...b];return h[w]=o[0],{score:o[1],token:o[0],token_str:this.tokenizer.model.vocab[o[0]],sequence:this.tokenizer.decode(h,{skip_special_tokens:!0})}}))}return Array.isArray(e)?f:f[0]}}class Text2TextGenerationPipeline extends Pipeline{constructor(n){super(n);De(this,"_key","generated_text")}async _call(n,i={}){Array.isArray(n)||(n=[n]),this.model.config.prefix&&(n=n.map(v=>this.model.config.prefix+v));const l=this.model.config.task_specific_params;l&&l[this.task]&&l[this.task].prefix&&(n=n.map(v=>l[this.task].prefix+v));const f=this.tokenizer,p={padding:!0,truncation:!0};let b;this instanceof TranslationPipeline&&"_build_translation_inputs"in f?b=f._build_translation_inputs(n,p,i).input_ids:b=f(n,p).input_ids;const w=await this.model.generate(b,i);return f.batch_decode(w,{skip_special_tokens:!0}).map(v=>({[this._key]:v}))}}class SummarizationPipeline extends Text2TextGenerationPipeline{constructor(n){super(n);De(this,"_key","summary_text")}}class TranslationPipeline extends Text2TextGenerationPipeline{constructor(n){super(n);De(this,"_key","translation_text")}}function isChat(t){return Array.isArray(t)&&t.every(e=>"role"in e&&"content"in e)}class TextGenerationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,n={}){let i=!1,l=!1,f;if(typeof e=="string")f=e=[e];else if(Array.isArray(e)&&e.every(_=>typeof _=="string"))i=!0,f=e;else{if(isChat(e))e=[e];else if(Array.isArray(e)&&e.every(isChat))i=!0;else throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");l=!0,f=e.map(_=>this.tokenizer.apply_chat_template(_,{tokenize:!1,add_generation_prompt:!0}))}const p=n.add_special_tokens??!1,b=l?!1:n.return_full_text??!0;this.tokenizer.padding_side="left";const{input_ids:w,attention_mask:v}=this.tokenizer(f,{add_special_tokens:p,padding:!0,truncation:!0}),g=await this.model.generate(w,n,null,{inputs_attention_mask:v});let u=this.tokenizer.batch_decode(g,{skip_special_tokens:!0}),o;!b&&w.dims.at(-1)>0&&(o=this.tokenizer.batch_decode(w,{skip_special_tokens:!0}).map(_=>_.length));const h=Array.from({length:e.length},_=>[]);for(let _=0;_<u.length;++_){const S=Math.floor(_/g.length*e.length);o&&(u[_]=u[_].slice(o[S])),h[S].push({generated_text:l?[...e[S],{role:"assistant",content:u[_]}]:u[_]})}return!i&&h.length===1?h[0]:h}}class ZeroShotClassificationPipeline extends Pipeline{constructor(e){super(e),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([n,i])=>[n.toLowerCase(),i])),this.entailment_id=this.label2id.entailment,this.entailment_id===void 0&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,this.contradiction_id===void 0&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(e,n,{hypothesis_template:i="This example is {}.",multi_label:l=!1}={}){const f=Array.isArray(e);f||(e=[e]),Array.isArray(n)||(n=[n]);const p=n.map(v=>i.replace("{}",v)),b=l||n.length===1,w=[];for(const v of e){const g=[];for(const h of p){const _=this.tokenizer(v,{text_pair:h,padding:!0,truncation:!0}),S=await this.model(_);b?g.push([S.logits.data[this.contradiction_id],S.logits.data[this.entailment_id]]):g.push(S.logits.data[this.entailment_id])}const o=(b?g.map(h=>softmax(h)[1]):softmax(g)).map((h,_)=>[h,_]).sort((h,_)=>_[0]-h[0]);w.push({sequence:v,labels:o.map(h=>n[h[1]]),scores:o.map(h=>h[0])})}return f?w:w[0]}}class FeatureExtractionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{pooling:n="none",normalize:i=!1,quantize:l=!1,precision:f="binary"}={}){const p=this.tokenizer(e,{padding:!0,truncation:!0}),b=await this.model(p);let w=b.last_hidden_state??b.logits??b.token_embeddings;if(n!=="none")if(n==="mean")w=mean_pooling(w,p.attention_mask);else if(n==="cls")w=w.slice(null,0);else throw Error(`Pooling method '${n}' not supported.`);return i&&(w=w.normalize(2,-1)),l&&(w=quantize_embeddings(w,f)),w}}class ImageFeatureExtractionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{pool:n=null}={}){const i=await prepareImages(e),{pixel_values:l}=await this.processor(i),f=await this.model({pixel_values:l});let p;if(n){if(!("pooler_output"in f))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");p=f.pooler_output}else p=f.last_hidden_state??f.logits??f.image_embeds;return p}}class AudioClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:n=null}={}){const i=!Array.isArray(e),l=this.processor.feature_extractor.config.sampling_rate,f=await prepareAudios(e,l),p=this.model.config.id2label,b=[];for(const w of f){const v=await this.processor(w),u=(await this.model(v)).logits[0],h=getTopItems(softmax(u.data),n).map(_=>({label:p[_[0]],score:_[1]}));n===1?b.push(...h):b.push(h)}return!i||n===1?b:b[0]}}class ZeroShotAudioClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,n,{hypothesis_template:i="This is a sound of {}."}={}){const l=!Array.isArray(e);l&&(e=[e]);const f=n.map(g=>i.replace("{}",g)),p=this.tokenizer(f,{padding:!0,truncation:!0}),b=this.processor.feature_extractor.config.sampling_rate,w=await prepareAudios(e,b),v=[];for(const g of w){const u=await this.processor(g),o=await this.model({...p,...u}),h=softmax(o.logits_per_audio.data);v.push([...h].map((_,S)=>({score:_,label:n[S]})))}return l?v[0]:v}}class AutomaticSpeechRecognitionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,n={}){switch(this.model.config.model_type){case"whisper":return this._call_whisper(e,n);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":return this._call_wav2vec2(e,n);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(e,n={}){n.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),n.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const i=!Array.isArray(e);i&&(e=[e]);const l=this.processor.feature_extractor.config.sampling_rate,f=await prepareAudios(e,l),p=[];for(const b of f){const w=await this.processor(b),g=(await this.model(w)).logits[0],u=[];for(const h of g)u.push(max$1(h.data)[1]);const o=this.tokenizer.decode(u);p.push({text:o})}return i?p[0]:p}async _call_whisper(e,n={}){const i=n.return_timestamps??!1,l=n.chunk_length_s??0,f=n.chunk_callback??null,p=n.force_full_sequences??!1;let b=n.stride_length_s??null;i==="word"&&(n.return_token_timestamps=!0);const w=pop(n,"language",null),v=pop(n,"task",null);if(w||v||i){if(n.forced_decoder_ids)throw new Error("Cannot specify `language`/`task`/`return_timestamps` and `forced_decoder_ids` at the same time.");const T=this.tokenizer.get_decoder_prompt_ids({language:w,task:v,no_timestamps:!i});T.length>0&&(n.forced_decoder_ids=T)}const g=!Array.isArray(e);g&&(e=[e]);const u=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,o=this.processor.feature_extractor.config.hop_length,h=this.processor.feature_extractor.config.sampling_rate,_=await prepareAudios(e,h),S=[];for(const T of _){let O=[];if(l>0){if(b===null)b=l/6;else if(l<=b)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const D=h*l,R=h*b,I=D-2*R;let $=0;for(;$<T.length;){const F=T.subarray($,$+D),L=await this.processor(F),V=$===0,Y=$+I>=T.length;O.push({stride:[F.length,V?0:R,Y?0:R],input_features:L.input_features,is_last:Y}),$+=I}}else O=[{stride:[T.length,0,0],input_features:(await this.processor(T)).input_features,is_last:!0}];for(const D of O){n.num_frames=Math.floor(D.stride[0]/o);const R=await this.model.generate(D.input_features,n);i==="word"?(D.tokens=R.sequences[0],D.token_timestamps=R.token_timestamps.tolist()[0].map(I=>round$1(I,2))):D.tokens=R[0],D.stride=D.stride.map(I=>I/h),f!==null&&f(D)}const[j,C]=this.tokenizer._decode_asr(O,{time_precision:u,return_timestamps:i,force_full_sequences:p});S.push({text:j,...C})}return g?S[0]:S}}class ImageToTextPipeline extends Pipeline{constructor(e){super(e)}async _call(e,n={}){const i=Array.isArray(e),l=await prepareImages(e),{pixel_values:f}=await this.processor(l),p=[];for(const b of f){b.dims=[1,...b.dims];const w=await this.model.generate(b,n),v=this.tokenizer.batch_decode(w,{skip_special_tokens:!0}).map(g=>({generated_text:g.trim()}));p.push(v)}return i?p:p[0]}}class ImageClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:n=1}={}){const i=Array.isArray(e),l=await prepareImages(e),{pixel_values:f}=await this.processor(l),p=await this.model({pixel_values:f}),b=this.model.config.id2label,w=[];for(const v of p.logits){const u=getTopItems(softmax(v.data),n).map(o=>({label:b[o[0]],score:o[1]}));n===1?w.push(...u):w.push(u)}return i||n===1?w:w[0]}}class ImageSegmentationPipeline extends Pipeline{constructor(e){super(e),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(e,{threshold:n=.5,mask_threshold:i=.5,overlap_mask_area_threshold:l=.8,label_ids_to_fuse:f=null,target_sizes:p=null,subtask:b=null}={}){if(Array.isArray(e)&&e.length!==1)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const v=await prepareImages(e),g=v.map(O=>[O.height,O.width]),{pixel_values:u,pixel_mask:o}=await this.processor(v),h=await this.model({pixel_values:u,pixel_mask:o});let _=null;if(b!==null)_=this.subtasks_mapping[b];else for(let[O,j]of Object.entries(this.subtasks_mapping))if(j in this.processor.feature_extractor){_=this.processor.feature_extractor[j].bind(this.processor.feature_extractor),b=O;break}const S=this.model.config.id2label,T=[];if(b==="panoptic"||b==="instance"){const O=_(h,n,i,l,f,p??g)[0],j=O.segmentation;for(const C of O.segments_info){const D=new Uint8ClampedArray(j.data.length);for(let I=0;I<j.data.length;++I)j.data[I]===C.id&&(D[I]=255);const R=new RawImage(D,j.dims[1],j.dims[0],1);T.push({score:C.score,label:S[C.label_id],mask:R})}}else if(b==="semantic"){const{segmentation:O,labels:j}=_(h,p??g)[0];for(const C of j){const D=new Uint8ClampedArray(O.data.length);for(let I=0;I<O.data.length;++I)O.data[I]===C&&(D[I]=255);const R=new RawImage(D,O.dims[1],O.dims[0],1);T.push({score:null,label:S[C],mask:R})}}else throw Error(`Subtask ${b} not supported.`);return T}}class ZeroShotImageClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,n,{hypothesis_template:i="This is a photo of {}"}={}){const l=Array.isArray(e),f=await prepareImages(e),p=n.map(o=>i.replace("{}",o)),b=this.tokenizer(p,{padding:this.model.config.model_type==="siglip"?"max_length":!0,truncation:!0}),{pixel_values:w}=await this.processor(f),v=await this.model({...b,pixel_values:w}),g=this.model.config.model_type==="siglip"?o=>o.sigmoid().data:o=>softmax(o.data),u=[];for(const o of v.logits_per_image){const _=[...g(o)].map((S,T)=>({score:S,label:n[T]}));_.sort((S,T)=>T.score-S.score),u.push(_)}return l?u:u[0]}}class ObjectDetectionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{threshold:n=.9,percentage:i=!1}={}){const l=Array.isArray(e);if(l&&e.length!==1)throw Error("Object detection pipeline currently only supports a batch size of 1.");const f=await prepareImages(e),p=i?null:f.map(h=>[h.height,h.width]),{pixel_values:b,pixel_mask:w}=await this.processor(f),v=await this.model({pixel_values:b,pixel_mask:w}),g=this.processor.feature_extractor.post_process_object_detection(v,n,p),u=this.model.config.id2label,o=g.map(h=>h.boxes.map((_,S)=>({score:h.scores[S],label:u[h.classes[S]],box:get_bounding_box(_,!i)})));return l?o:o[0]}}class ZeroShotObjectDetectionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,n,{threshold:i=.1,topk:l=null,percentage:f=!1}={}){const p=Array.isArray(e),b=await prepareImages(e),w=this.tokenizer(n,{padding:!0,truncation:!0}),v=await this.processor(b),g=[];for(let u=0;u<b.length;++u){const o=b[u],h=f?null:[[o.height,o.width]],_=v.pixel_values[u].unsqueeze_(0),S=await this.model({...w,pixel_values:_}),T=this.processor.feature_extractor.post_process_object_detection(S,i,h,!0)[0];let O=T.boxes.map((j,C)=>({score:T.scores[C],label:n[T.classes[C]],box:get_bounding_box(j,!f)})).sort((j,C)=>C.score-j.score);l!==null&&(O=O.slice(0,l)),g.push(O)}return p?g:g[0]}}class DocumentQuestionAnsweringPipeline extends Pipeline{constructor(e){super(e)}async _call(e,n,i={}){const l=(await prepareImages(e))[0],{pixel_values:f}=await this.processor(l),p=`<s_docvqa><s_question>${n}</s_question><s_answer>`,b=this.tokenizer(p,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,w=await this.model.generate(f,{...i,decoder_input_ids:b,max_length:this.model.config.decoder.max_position_embeddings}),g=this.tokenizer.batch_decode(w)[0].match(/<s_answer>(.*?)<\/s_answer>/);let u=null;return g&&g.length>=2&&(u=g[1].trim()),[{answer:u}]}}class TextToAudioPipeline extends Pipeline{constructor(n){super(n);De(this,"DEFAULT_VOCODER_ID","Xenova/speecht5_hifigan");this.vocoder=n.vocoder??null}async _call(n,{speaker_embeddings:i=null}={}){return this.processor?this._call_text_to_spectrogram(n,{speaker_embeddings:i}):this._call_text_to_waveform(n)}async _call_text_to_waveform(n){const i=this.tokenizer(n,{padding:!0,truncation:!0}),{waveform:l}=await this.model(i),f=this.model.config.sampling_rate;return{audio:l.data,sampling_rate:f}}async _call_text_to_spectrogram(n,{speaker_embeddings:i}){if(this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{quantized:!1})),(typeof i=="string"||i instanceof URL)&&(i=new Float32Array(await(await fetch(i)).arrayBuffer())),i instanceof Float32Array)i=new Tensor("float32",i,[1,i.length]);else if(!(i instanceof Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");const{input_ids:l}=this.tokenizer(n,{padding:!0,truncation:!0}),{waveform:f}=await this.model.generate_speech(l,i,{vocoder:this.vocoder}),p=this.processor.feature_extractor.config.sampling_rate;return{audio:f.data,sampling_rate:p}}}class ImageToImagePipeline extends Pipeline{constructor(e){super(e)}async _call(e){const n=await prepareImages(e),i=await this.processor(n),l=await this.model(i),f=[];for(const p of l.reconstruction){const b=p.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");f.push(RawImage.fromTensor(b))}return f.length>1?f:f[0]}}class DepthEstimationPipeline extends Pipeline{constructor(e){super(e)}async _call(e){const n=await prepareImages(e),i=await this.processor(n),{predicted_depth:l}=await this.model(i),f=[];for(let p=0;p<n.length;++p){const b=interpolate$2(l[p],n[p].size.reverse(),"bilinear",!1),w=b.mul_(255/max$1(b.data)[0]).to("uint8");f.push({predicted_depth:l[p],depth:RawImage.fromTensor(w)})}return f.length>1?f:f[0]}}const SUPPORTED_TASKS=Object.freeze({"text-classification":{tokenizer:AutoTokenizer,pipeline:TextClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:AutoTokenizer,pipeline:TokenClassificationPipeline,model:AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:AutoTokenizer,pipeline:QuestionAnsweringPipeline,model:AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:AutoTokenizer,pipeline:FillMaskPipeline,model:AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:AutoTokenizer,pipeline:SummarizationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:AutoTokenizer,pipeline:TranslationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:AutoTokenizer,pipeline:Text2TextGenerationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:AutoTokenizer,pipeline:TextGenerationPipeline,model:AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:AudioClassificationPipeline,model:AutoModelForAudioClassification,processor:AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotAudioClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:AutoTokenizer,pipeline:AutomaticSpeechRecognitionPipeline,model:[AutoModelForSpeechSeq2Seq,AutoModelForCTC],processor:AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:AutoTokenizer,pipeline:TextToAudioPipeline,model:[AutoModelForTextToWaveform,AutoModelForTextToSpectrogram],processor:[AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:AutoTokenizer,pipeline:ImageToTextPipeline,model:AutoModelForVision2Seq,processor:AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:ImageClassificationPipeline,model:AutoModelForImageClassification,processor:AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:ImageSegmentationPipeline,model:[AutoModelForImageSegmentation,AutoModelForSemanticSegmentation],processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"zero-shot-image-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotImageClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:ObjectDetectionPipeline,model:AutoModelForObjectDetection,processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:AutoTokenizer,pipeline:ZeroShotObjectDetectionPipeline,model:AutoModelForZeroShotObjectDetection,processor:AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:AutoTokenizer,pipeline:DocumentQuestionAnsweringPipeline,model:AutoModelForDocumentQuestionAnswering,processor:AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:ImageToImagePipeline,model:AutoModelForImageToImage,processor:AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:DepthEstimationPipeline,model:AutoModelForDepthEstimation,processor:AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:AutoTokenizer,pipeline:FeatureExtractionPipeline,model:AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:AutoProcessor,pipeline:ImageFeatureExtractionPipeline,model:[AutoModelForImageFeatureExtraction,AutoModel],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),TASK_ALIASES=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function pipeline(t,e=null,{quantized:n=!0,progress_callback:i=null,config:l=null,cache_dir:f=null,local_files_only:p=!1,revision:b="main",model_file_name:w=null}={}){t=TASK_ALIASES[t]??t;const v=SUPPORTED_TASKS[t.split("_",1)[0]];if(!v)throw Error(`Unsupported pipeline: ${t}. Must be one of [${Object.keys(SUPPORTED_TASKS)}]`);e||(e=v.default.model,console.log(`No model specified. Using default model: "${e}".`));const g={quantized:n,progress_callback:i,config:l,cache_dir:f,local_files_only:p,revision:b,model_file_name:w},u=new Map([["tokenizer",v.tokenizer],["model",v.model],["processor",v.processor]]),o=await loadItems(u,e,g);o.task=t,dispatchCallback(i,{status:"ready",task:t,model:e});const h=v.pipeline;return new h(o)}async function loadItems(t,e,n){const i=Object.create(null),l=[];for(let[f,p]of t.entries()){if(!p)continue;let b;Array.isArray(p)?b=new Promise(async(w,v)=>{let g;for(let u of p){if(u===null){w(null);return}try{w(await u.from_pretrained(e,n));return}catch(o){g=o}}v(g)}):b=p.from_pretrained(e,n),i[f]=b,l.push(b)}await Promise.all(l);for(let[f,p]of Object.entries(i))i[f]=await p;return i}async function getPipeline$1(){return pipeline}class LlamaLLM{constructor(){this.model=null,this.isLoaded=!1,this.isLoading=!1,this.fallbackModels=["Xenova/LaMini-Flan-T5-248M","Xenova/distilgpt2","Xenova/gpt2"],this.modelName=this.fallbackModels[0],this.maxTokens=1024,this.loadingProgress=0}async initialize(){if(this.isLoaded||this.isLoading)return this.model;this.isLoading=!0,console.log(" Loading Llama compatible model...");for(const e of this.fallbackModels)try{console.log(` Attempting to load: ${e}`);const n=await getPipeline$1(),i=/t5|flan/i.test(e)?"text2text-generation":"text-generation";return this.model=await n(i,e,{progress_callback:l=>{l.status==="downloading"&&(this.loadingProgress=Math.round(l.loaded/l.total*100),console.log(` Llama loading: ${this.loadingProgress}%`),window.dispatchEvent(new CustomEvent("llmLoadingProgress",{detail:{model:"llama",progress:this.loadingProgress}})))}}),this.modelName=e,this.isLoaded=!0,this.isLoading=!1,console.log(` Llama loaded successfully: ${e}`),window.dispatchEvent(new CustomEvent("llmReady",{detail:{model:"llama",hemisphere:"llama"}})),this.model}catch(n){console.log(` Failed to load ${e}: ${n.message}`)}throw this.isLoading=!1,new Error("Failed to load any Llama compatible model")}async generate(e,n={}){var l;this.isLoaded||await this.initialize();const i={max_new_tokens:n.maxTokens??150,temperature:n.temperature??0,do_sample:n.do_sample??!1,top_k:n.top_k??1,top_p:n.topP??1,repetition_penalty:n.repetition_penalty??1.02,seed:n.seed??44,...n};try{console.log(" Llama generating response...");const f=await this.model(e,i),p=Array.isArray(f)?((l=f[0])==null?void 0:l.generated_text)??"":(f==null?void 0:f.generated_text)??"",b=String(p).replace(e,"").replace(/^\s+|\s+$/g,"").replace(/\s+/g," ");return console.log(" Llama response generated"),{text:b,model:"llama",tokens:b.split(" ").length,hemisphere:"llama"}}catch(f){throw console.error(" Llama generation failed:",f),f}}async chat(e,n=[]){let i="<|begin_of_text|>";return n.length>0&&n.forEach(l=>{i+=`<|start_header_id|>${l.role}<|end_header_id|>
${l.content}<|eot_id|>`}),i+=`<|start_header_id|>user<|end_header_id|>
${e}<|eot_id|><|start_header_id|>assistant<|end_header_id|>
`,await this.generate(i,{maxTokens:200})}async databaseQuery(e,n=""){let i=`Database Query Assistant

`;return n&&(i+=`Schema: ${n}

`),i+=`Query: ${e}

Response:`,await this.generate(i,{maxTokens:150,temperature:.3})}async dataAnalysis(e,n){const i=`Data Analysis Task

Data: ${JSON.stringify(e,null,2)}

Question: ${n}

Analysis:`;return await this.generate(i,{maxTokens:200})}async processWithContext(e,n){this.isLoaded||await this.initialize();const i=`${n}
${e}`;return console.log("Processing with context:",i),await this.model(i,{max_length:this.maxTokens})}getStatus(){return{model:"llama",name:"Llama 3.2-1B",isLoaded:this.isLoaded,isLoading:this.isLoading,progress:this.loadingProgress,hemisphere:"llama",color:"#87CEEB",capabilities:["chat","database","analysis","general"],contextLength:this.maxTokens}}}const llamaLLM=new LlamaLLM;window.llamaLLM=llamaLLM;window.LlamaLLM=LlamaLLM;async function getPipeline(){return pipeline}class Phi3LLM{constructor(){this.model=null,this.isLoaded=!1,this.isLoading=!1,this.modelName="microsoft/Phi-3-mini-4k-instruct",this.maxTokens=4096,this.loadingProgress=0,this.fallbackModels=["microsoft/Phi-3-mini-4k-instruct","Xenova/LaMini-Flan-T5-248M","Xenova/distilgpt2","Xenova/gpt2","Xenova/distilbert-base-uncased"]}async initialize(){if(this.isLoaded||this.isLoading)return this.model;this.isLoading=!0,console.log(" Loading PHI-3 Mini (4K context)...");for(const e of this.fallbackModels)try{console.log(` Attempting to load: ${e}`);const n=await getPipeline(),i=/t5|flan/i.test(e)?"text2text-generation":"text-generation";return this.model=await n(i,e,{progress_callback:l=>{l.status==="downloading"&&(this.loadingProgress=Math.round(l.loaded/l.total*100),console.log(` PHI-3 loading: ${this.loadingProgress}%`),window.dispatchEvent(new CustomEvent("llmLoadingProgress",{detail:{model:"phi3",progress:this.loadingProgress}})))}}),this.modelName=e,this.isLoaded=!0,this.isLoading=!1,console.log(` PHI-3 loaded successfully: ${e}`),window.dispatchEvent(new CustomEvent("llmReady",{detail:{model:"phi3",hemisphere:"phi3"}})),this.model}catch(n){console.log(` Failed to load ${e}: ${n.message}`),console.log(" Error details:",n),n.message.includes("fetch")?console.log(` Network issue with ${e}, trying next...`):n.message.includes("ONNX")?console.log(` ONNX compatibility issue with ${e}, trying next...`):n.message.includes("memory")&&console.log(` Memory issue with ${e}, trying smaller model...`)}throw this.isLoading=!1,new Error("Failed to load any PHI-3 compatible model")}async generate(e,n={}){var l;this.isLoaded||await this.initialize();const i={max_new_tokens:n.maxTokens??150,temperature:n.temperature??0,do_sample:n.do_sample??!1,top_k:n.top_k??1,top_p:n.topP??1,repetition_penalty:n.repetition_penalty??1.05,seed:n.seed??42,...n};try{console.log(" PHI-3 generating response...");const f=await this.model(e,i),p=Array.isArray(f)?((l=f[0])==null?void 0:l.generated_text)??"":(f==null?void 0:f.generated_text)??"",b=String(p).replace(e,"").replace(/^\s+|\s+$/g,"").replace(/\s+/g," ");return console.log(" PHI-3 response generated"),{text:b,model:"phi3",tokens:b.split(" ").length,hemisphere:"phi3"}}catch(f){throw console.error(" PHI-3 generation failed:",f),f}}async chat(e,n=[]){let i="";return n.length>0&&n.forEach(l=>{i+=`${l.role==="user"?"User":"Assistant"}: ${l.content}
`}),i+=`User: ${e}
Assistant:`,await this.generate(i,{maxTokens:200})}async reason(e,n=[]){let i=`Problem: ${e}

`;return n.length>0&&(i+=`Previous reasoning steps:
`,n.forEach((l,f)=>{i+=`${f+1}. ${l}
`}),i+=`
`),i+="Next reasoning step:",await this.generate(i,{maxTokens:100,temperature:.3})}async summarize(e,n=100){const i=`Summarize the following text in ${n} words or less:

${e}

Summary:`;return await this.generate(i,{maxTokens:n+20})}async processWithContext(e,n){this.isLoaded||await this.initialize();const i=`${n}
${e}`;return console.log("Processing with context:",i),await this.model(i,{max_length:this.maxTokens})}getStatus(){return{model:"phi3",name:"PHI-3 Mini 128K",isLoaded:this.isLoaded,isLoading:this.isLoading,progress:this.loadingProgress,hemisphere:"phi3",color:"#FFD700",capabilities:["chat","reasoning","summarization","rag"],contextLength:this.maxTokens}}}const phi3LLM=new Phi3LLM;window.phi3LLM=phi3LLM;window.Phi3LLM=Phi3LLM;function embedText(t){return t.split(" ").map(e=>e.split("").reduce((n,i)=>n+i.charCodeAt(0),0))}class AgentTeam{constructor(){this.models=[gemmaLLM,llamaLLM,phi3LLM],this.isLoaded=!1}async initialize(){await Promise.all(this.models.map(e=>e.initialize())),this.isLoaded=!0}async embedContext(e){return this.models.map(n=>({model:n.getStatus().model,embedding:embedText(e)}))}async askAllModels(e,n=""){this.isLoaded||await this.initialize();const i=await this.embedContext(n);return{responses:await Promise.all([gemmaLLM.chat(e,[{role:"system",content:n}]),llamaLLM.chat(e,[{role:"system",content:n}]),phi3LLM.chat(e,[{role:"system",content:n}])]),embeddings:i}}async answer(e,n=""){const{responses:i}=await this.askAllModels(e,n);return{best:i.reduce((f,p)=>f.text.length>p.text.length?f:p),all:i}}}const agentTeam=new AgentTeam;window.agentTeam=agentTeam;const IconWrapper=({children:t,className:e})=>jsxRuntimeExports.jsx("div",{className:`h-6 w-6 ${e||""}`,children:t}),PaperAirplaneIcon=({className:t})=>jsxRuntimeExports.jsx(IconWrapper,{className:t,children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})})}),ArrowPathIcon=({className:t})=>jsxRuntimeExports.jsx(IconWrapper,{className:t,children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.667 0l3.181-3.183m-3.181-4.991v4.99"})})}),MicrophoneIcon=({className:t})=>jsxRuntimeExports.jsx(IconWrapper,{className:t,children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 006-6v-1.5m-6 7.5a6 6 0 01-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 01-3-3V4.5a3 3 0 016 0v8.25a3 3 0 01-3 3z"})})}),LinkIcon=({className:t})=>jsxRuntimeExports.jsx(IconWrapper,{className:t,children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})})}),__vite_import_meta_env__={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_OPENROUTER:"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",VITE_OPENROUTER_API_KEY:""},OPENERS_CLOSERS={1:{opener:"Every great story starts below the surfacelets dig where the promise began.",closer:"One promise planted underground and its still feeding the future."},2:{opener:"Heres the mapbecause every legend deserves coordinates.",closer:"We know our route; now lets walk it together."},3:{opener:"Every masterpiece stands on its framelets meet ours.",closer:"Foundations this strong dont crumble; they carry generations."},4:{opener:"Some people chase profitwe fell for perfection.",closer:"That love became our blueprintand it still builds every day."},5:{opener:"Heres the crossroadswhere credibility meets scale.",closer:"The engines builtthe key just turned."},6:{opener:"Progress doesnt sprintit marches with purpose.",closer:"Fifty years of footstepsall still heading forward."},7:{opener:"The future didnt surprise uswe invited it in.",closer:"Tomorrow isnt coming at uswere already walking in its direction."},8:{opener:"Lets lift the hood and see modernization in motion.",closer:"Old soul, new enginethats modern mastery."},9:{opener:"Every storm tests the structureours was built for weather.",closer:"Preparedness isnt protectionits profit."},10:{opener:"Order is how excellence remembers what passion built.",closer:"When process holds purpose, performance follows."},11:{opener:"Great companies dont rise from spreadsheetsthey rise from people.",closer:"Hands-on leadershipbecause respect is built, not appointed."},12:{opener:"Control the cycle, command the outcome.",closer:"When every link is ours, the chain never breaks."},13:{opener:"Proof doesnt bragit shows up in results.",closer:"Performance recorded, trust reinforced."},14:{opener:"Numbers matter more when they measure people.",closer:"When you quantify care, you multiply success."},15:{opener:"Trajectory timelets turn data into distance.",closer:"Thats not a forecastits a flight path."},16:{opener:"Legacy isnt nostalgiaits navigation.",closer:"Were not keeping history alive; history is keeping us aligned."},17:{opener:"Every transformation must pass its exams.",closer:"Principle became performanceand the grade was profit."},18:{opener:"The night shift never sleepsand neither does ambition.",closer:"The horizon isnt a lineits our next milestone."},19:{opener:"Stories inspire; data confirms.",closer:"Facts are the quiet proof of faith."},20:{opener:"Every ending is just a higher floor in the same building.",closer:"And as the next 50 years begin, the lights stay on, the flow stays strong, and the promise stays kept."}};function assembleNarration(t,e,n,i){const{preferRuntime:l=!0,includePageTitle:f=!0}=i??{},p=t+1,b=OPENERS_CLOSERS[p],w=(l?b==null?void 0:b.opener:e.opener)??e.opener??"",v=(l?b==null?void 0:b.closer:e.closer)??e.closer??"";return[f?`Page ${p}  ${e.title}.`:"",w,n,v].filter(Boolean).join(" ").replace(/\s+/g," ").trim()}const chatbotContext=`
You are Agent Lee, a Strategic Analyst AI presenting the Visu-Sewer investment thesis. Your persona is that of an expert from a top-tier business school, combining financial acumen with organizational psychology. You communicate with precision, confidence, and a data-driven perspective.

**Your Core Mandate:**
1.  **Present with Authority:** Guide users through the 18-section pitch deck FROM THE BEGINNING (Section 0).
2.  **Provide Evidence-Based Answers:** Answer questions based on the presentation content.
3.  **Default to Company Data:** For questions about Visu-Sewer, use content from this presentation and https://visu-sewer.com/.

**Deck Structure (18 sections, ALWAYS START AT SECTION 0):**
- Section 0: Investment Thesis Cover (START HERE)
- Section 1: Presentation Index (Roadmap of all sections)
- Sections 2-16: Strategic narrative sections
- Section 17: Closing & Thank You (Final message)
- You MUST begin presentations at Section 0, not at the end.

**Your Capabilities:**
- Navigate through presentation sections (start at 0)
- Open external URLs
- Provide strategic analysis

**Your Persona:**
Professional, analytical, concise. Deep analysis, brief responses.
`,Chatbot=({isOpen:t,setIsOpen:e,startPresentation:n,pausePresentation:i,setCurrentSection:l,currentSection:f,isNarrating:p,presentationState:b})=>{const[w,v]=reactExports.useState(!1),[g,u]=reactExports.useState(0),o=reactExports.useRef(null),h=String((__vite_import_meta_env__==null?void 0:__vite_import_meta_env__.VITE_TTS_VOICE_LOCK)||"").toLowerCase()==="true",_=String((__vite_import_meta_env__==null?void 0:__vite_import_meta_env__.VITE_TTS_ENGINE_LOCK)||"").toLowerCase()==="true",[S,T]=reactExports.useState("browser"),[O,j]=reactExports.useState([]),[C,D]=reactExports.useState(!1),[R,I]=reactExports.useState(-1),[$,F]=reactExports.useState("idle"),L=reactExports.useRef("idle"),V=reactExports.useRef(null),Y=(()=>{var Ne;try{return((Ne=window.localStorage)==null?void 0:Ne.getItem("agentLee.voice"))||(__vite_import_meta_env__==null?void 0:__vite_import_meta_env__.VITE_TTS_SELECTED_VOICE)||""}catch{return(__vite_import_meta_env__==null?void 0:__vite_import_meta_env__.VITE_TTS_SELECTED_VOICE)||""}})(),[Q,ee]=reactExports.useState(Y),{play:X,stop:W,voicesLoaded:z}=useTTS({selectedVoice:Q}),q=reactExports.useRef(X),[ce,ae]=reactExports.useState([]),[we,Z]=reactExports.useState(""),[ue,Pe]=reactExports.useState(!1),[Re,pe]=reactExports.useState(!1);reactExports.useEffect(()=>{try{Q&&window.localStorage.setItem("agentLee.voice",Q)}catch{}},[Q]),reactExports.useEffect(()=>{t&&!C&&ce.length===0&&(l(0),D(!0))},[t,C,ce.length,l]),reactExports.useEffect(()=>{if(b==="presenting"&&f===0&&R===-1&&z){const Ne=pitchDeckData[0],Ge="Hello  I'm Agent Lee, your strategic presenter and guide. "+assembleNarration(0,Ne,Ne.narrative,{includePageTitle:!0});console.log(" Agent Lee starting greeting:",Ge.substring(0,100)+"..."),console.log(" Current presentationState:",b),console.log(" Current section:",f),console.log(" Last narrated section:",R),console.log(" About to call speakRef.current()..."),ae([{role:"model",text:Ge,sources:[]}]),setTimeout(()=>{console.log(" NOW calling speak function..."),F("started"),L.current="started",q.current(Ge)},100),I(0)}},[b,f,R,z]),reactExports.useEffect(()=>{if(t&&b==="presenting"&&f!==R&&f!==0){W();const Ne=pitchDeckData[f];if(Ne&&Ne.narrative){const Ge=setTimeout(()=>{const Ue=f+1,Ze=assembleNarration(f,Ne,Ne.narrative,{includePageTitle:!0});console.log(" Agent Lee narrating page",Ue),ae(yt=>[...yt,{role:"model",text:Ze,sources:[]}]),F("started"),L.current="started",q.current(Ze),I(f)},800);return()=>clearTimeout(Ge)}}},[t,b,f,R,W]);const[Ae,Ce]=reactExports.useState(!1);reactExports.useEffect(()=>{const Ne=pitchDeckData.length-1,Ge=f===Ne,Ue=pitchDeckData[f];if(t&&!Ae&&Ge&&(Ue==null?void 0:Ue.content.type)==="closing"){const Ze=setTimeout(()=>{const yt="We've reached the end of our journey together. Thank you for experiencing the Visu-Sewer story with me. This is not just a financial opportunityit's an invitation to join a legacy of excellence that has been 50 years in the making. If you have any questions or would like to discuss partnership opportunities, I'm here to help.";ae(Nt=>[...Nt,{role:"model",text:yt,sources:[]}]),X(yt),Ce(!0)},2e3);return()=>clearTimeout(Ze)}},[t,f,Ae,X]);const $e=Ne=>{const Ge=Ne.toLowerCase(),Ue=pitchDeckData.filter(Ze=>Ze.title.toLowerCase().includes(Ge)||Ze.narrative&&Ze.narrative.toLowerCase().includes(Ge)).slice(0,3);return Ue.length===0?"I'm operating in offline fallback mode. I couldn't find a direct match in the deck; please try a more specific keyword (e.g., 'human capital', 'timeline', 'capital structure').":`Offline strategic summary (model unavailable). Relevant sections:

`+Ue.map(Ze=>` ${Ze.title}: ${Ze.narrative.substring(0,320)}${Ze.narrative.length>320?"":""}`).join(`

`)},[se,ke]=reactExports.useState(null),[Ie,de]=reactExports.useState(""),qe=reactExports.useCallback(async Ne=>{if(!Ne.trim()||ue)return;e(!0),i(),W(),de(Ne);const Ge={role:"user",text:Ne};ae(Ue=>[...Ue,Ge]),Z(""),Pe(!0);try{const Ue=Ne.match(/page\s+(\d{1,2})/i);if(Ue){const We=Math.max(1,Math.min(parseInt(Ue[1],10),pitchDeckData.length)),Yt=We-1;l(Yt),ke(Yt);const tr=`Navigating to Page ${We}: ${pitchDeckData[Yt].title}.`;ae(It=>[...It,{role:"model",text:tr,sources:[]}]),X(tr),Pe(!1);return}let Ze="";/chart|graph|metric|data|evidence|source/i.test(Ne)&&(Ze=pitchDeckData.map((We,Yt)=>`Page ${Yt+1}: ${We.title} - ${We.narrative}`).join(`
`));const yt=`

If you want to trigger a UI action, output a single JSON object on its own line with the keys "function" and "args".
Examples:
{"function":"navigateToSection","args":{"sectionIndex":3}}
{"function":"openLink","args":{"url":"https://example.com"}}
Otherwise respond with a helpful, conversational message.`,Nt=ce.map(We=>({role:We.role,content:We.text})),Ut={role:"system",content:chatbotContext+yt+(Ze?`

Relevant chart/graph context:
${Ze}`:"")};let ht;try{const We=await agentTeam.answer(Ne,Ut.content);ht=We&&We.best&&We.best.text?We.best.text:String(We)}catch(We){console.warn("LLM unavailable, using fallback responder:",We),ht=$e(Ne)}let Ct=!1;const Ot=ht.trim();if(Ot.startsWith("{")){let We=0,Yt=-1;for(let tr=0;tr<Ot.length;tr++){const It=Ot[tr];if(It==="{"&&We++,It==="}"&&(We--,We===0)){Yt=tr;break}}if(Yt>0){const tr=Ot.slice(0,Yt+1);try{const It=JSON.parse(tr);if(It&&It.function){if(Ct=!0,It.function==="navigateToSection"&&It.args&&It.args.sectionIndex!==void 0){const Xt=Number(It.args.sectionIndex);if(Xt>=0&&Xt<pitchDeckData.length){l(Xt),ke(Xt);const yr=`Of course. Navigating to "${pitchDeckData[Xt].title}".`;ae(en=>[...en,{role:"model",text:yr,sources:[]}]),X(yr)}}else if(It.function==="openLink"&&It.args&&It.args.url){window.open(It.args.url,"_blank");const Xt="I've opened that link for you in a new tab.";ae(yr=>[...yr,{role:"model",text:Xt,sources:[]}]),X(Xt)}}}catch(It){console.warn("Failed to parse model JSON action:",It)}}}if(!Ct){const We={role:"model",text:ht,sources:[]};ae(Yt=>[...Yt,We]),X(ht)}}catch(Ue){console.error("Error with model pipeline:",Ue);const Ze=$e(Ne);ae(yt=>[...yt,{role:"model",text:Ze}]),X(Ze)}finally{Pe(!1)}},[ue,ce,i,l,X,W,e]),Fe=()=>{var Ge;if(Re){(Ge=V.current)==null||Ge.stop(),pe(!1);return}const Ne=window.SpeechRecognition||window.webkitSpeechRecognition;if(!Ne){alert("Speech recognition is not supported in this browser.");return}i(),W(),V.current=new Ne,V.current.continuous=!1,V.current.interimResults=!1,V.current.lang="en-US",V.current.onstart=()=>pe(!0),V.current.onend=()=>pe(!1),V.current.onerror=Ue=>{console.warn("Speech recognition error:",Ue.error),pe(!1)},V.current.onresult=Ue=>{const Ze=Ue.results[0][0].transcript;Z(Ze),qe(Ze)},V.current.start()};return reactExports.useEffect(()=>{var Ne;(Ne=o.current)==null||Ne.scrollIntoView({behavior:"smooth"})},[ce]),jsxRuntimeExports.jsxs("div",{className:"chatbot-container",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{e(!t),b==="presenting"&&i()},className:"relative bg-white rounded-full shadow-2xl hover:shadow-3xl transition-all transform hover:scale-110 border-4 border-blue-400 p-2 mb-4 mx-auto block group","aria-label":"Toggle AI Assistant",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-blue-500 rounded-full blur-xl opacity-50 group-hover:opacity-75 animate-pulse"}),jsxRuntimeExports.jsx("img",{src:"/images/agent-lee-visu-sewer.png",alt:"Agent Lee AI Assistant",className:"relative h-20 w-20 rounded-full object-contain",onError:Ne=>{Ne.currentTarget.src="/images/visu-sewer-logo.png"}})]}),jsxRuntimeExports.jsxs("div",{className:`w-full h-full bg-white rounded-2xl shadow-2xl flex flex-col transition-all duration-300 ease-out ${t?"opacity-100":"opacity-0 pointer-events-none"}`,children:[jsxRuntimeExports.jsxs("header",{className:"bg-blue-800 text-white p-3 rounded-t-2xl flex justify-between items-center",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-base",children:"Agent Lee Strategic Presenter"}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:jsxRuntimeExports.jsx("button",{onClick:()=>v(!w),className:"text-white hover:bg-blue-700 p-1 rounded transition-colors","aria-label":"Voice settings",title:"Voice Settings",children:jsxRuntimeExports.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15.414a2 2 0 010-2.828l6.364-6.364a2 2 0 012.828 0l6.364 6.364a2 2 0 010 2.828l-6.364 6.364a2 2 0 01-2.828 0l-6.364-6.364z"})})})})]}),g>=3&&b==="presenting"&&jsxRuntimeExports.jsx("div",{className:"bg-amber-100 border-l-4 border-amber-500 p-3 mx-3 mt-3 rounded-md",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("svg",{className:"h-5 w-5 text-amber-500 mr-2 shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"}),jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"}),"speakRef.current = speak;",jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-amber-800",children:"Voice Narration Unavailable"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-amber-700 mt-1",children:"Auto-advance disabled. Use navigation controls below."})]})]})}),b==="presenting"&&jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 border-b border-blue-200 p-2 flex justify-between items-center gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{f>0&&l(f-1)},disabled:f===0,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white text-xs font-medium rounded hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors","aria-label":"Previous slide",children:[jsxRuntimeExports.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous"]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-600 font-medium",children:["Page ",f+1," of ",pitchDeckData.length]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{f<pitchDeckData.length-1&&l(f+1)},disabled:f===pitchDeckData.length-1,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white text-xs font-medium rounded hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors","aria-label":"Next slide",children:["Next",jsxRuntimeExports.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),w&&z&&jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 border-b border-blue-200 p-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"voice-selector",className:"block text-xs font-semibold text-gray-700 mb-1",children:" Select Voice"}),jsxRuntimeExports.jsxs("select",{id:"voice-selector",value:Q,onChange:Ne=>{h||ee(Ne.target.value)},className:"w-full p-1.5 border border-blue-300 rounded-lg text-xs focus:ring-2 focus:ring-blue-500 outline-none bg-white","aria-label":"Select voice for AI assistant",disabled:h,children:[jsxRuntimeExports.jsx("option",{value:"",children:" Auto-select (Curated)"}),filterCuratedVoices(O).map((Ne,Ge)=>jsxRuntimeExports.jsxs("option",{value:Ne.name,children:[Ne.name," (",Ne.lang,")"]},Ge))]}),jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"engine-selector",className:"block text-xs font-semibold text-gray-700 mb-1",children:" TTS Engine"}),jsxRuntimeExports.jsxs("select",{id:"engine-selector",value:S,onChange:Ne=>{_||T(Ne.target.value)},className:"w-full p-1.5 border border-blue-300 rounded-lg text-xs focus:ring-2 focus:ring-blue-500 outline-none bg-white","aria-label":"Select TTS engine",disabled:_,children:[jsxRuntimeExports.jsx("option",{value:"browser",children:"Browser (Local)"}),jsxRuntimeExports.jsx("option",{value:"azure",children:"Azure Cloud"}),jsxRuntimeExports.jsx("option",{value:"gemini",children:"Gemini Cloud"}),jsxRuntimeExports.jsx("option",{value:"orpheus",children:"Orpheus (Backend)"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>{const Ne="Hello, this is Agent Lee. Audio is working correctly.";console.log(" Testing audio from button click..."),X(Ne)},className:"mt-1.5 w-full text-xs bg-blue-600 text-white py-1 px-2 rounded hover:bg-blue-700 transition-colors",disabled:ue,children:" Test Audio"}),(h||_)&&jsxRuntimeExports.jsxs("div",{className:"mt-2 text-[10px] text-gray-600 italic",children:[h&&jsxRuntimeExports.jsx("div",{children:"Voice locked to environment default."}),_&&jsxRuntimeExports.jsx("div",{children:"Engine locked; fallback disabled."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 p-3 overflow-y-auto bg-gray-50",children:[ce.length===0&&jsxRuntimeExports.jsx("div",{className:"text-center text-xs text-gray-500 p-3",children:'Ask for analysis, e.g., "Go to the human capital metrics" or "What are the current market trends?"'}),ce.map((Ne,Ge)=>jsxRuntimeExports.jsx("div",{className:`flex my-2 ${Ne.role==="user"?"justify-end":"justify-start"}`,children:jsxRuntimeExports.jsxs("div",{className:`p-2 rounded-lg max-w-[90%] break-word shadow-sm text-xs ${Ne.role==="user"?"bg-blue-600 text-white":"bg-gray-200 text-gray-800"}`,children:[Ne.text,Ne.sources&&Ne.sources.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-300",children:[jsxRuntimeExports.jsx("h4",{className:"text-xs font-bold text-gray-600 mb-1",children:"Sources:"}),jsxRuntimeExports.jsx("ul",{className:"space-y-1",children:Ne.sources.map((Ue,Ze)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start",children:[jsxRuntimeExports.jsx(LinkIcon,{className:"h-3 w-3 text-gray-500 mr-1 mt-0.5 shrink-0"}),jsxRuntimeExports.jsx("a",{href:Ue.web.uri,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-700 hover:underline break-all",children:Ue.web.title})]},Ze))})]})]})},Ge)),ue&&jsxRuntimeExports.jsx("div",{className:"flex justify-start my-2",children:jsxRuntimeExports.jsx("div",{className:"p-2 rounded-lg bg-gray-200 text-gray-800",children:jsxRuntimeExports.jsx(ArrowPathIcon,{className:"h-4 w-4 animate-spin"})})}),jsxRuntimeExports.jsx("div",{ref:o})]}),jsxRuntimeExports.jsx("form",{onSubmit:Ne=>{Ne.preventDefault(),qe(we)},className:"p-3 border-t bg-white rounded-b-2xl sticky bottom-0 z-10",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("input",{type:"text",value:we,onChange:Ne=>Z(Ne.target.value),placeholder:"Type or use mic...",className:"flex-1 p-1.5 text-xs border rounded-l-lg focus:outline-none",onKeyPress:Ne=>{Ne.key==="Enter"&&(Ne.preventDefault(),qe(we))}}),jsxRuntimeExports.jsx("button",{type:"button",className:"ml-2 px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded border border-blue-300 hover:bg-blue-200",disabled:se===null,onClick:()=>{se!==null&&(l(se),ae(Ne=>[...Ne,{role:"model",text:`Resuming presentation at section ${se+1}: ${pitchDeckData[se].title}.`,sources:[]}]))},children:"Resume Presentation"}),jsxRuntimeExports.jsx("button",{type:"button",className:"ml-2 px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded border border-gray-300 hover:bg-gray-200",disabled:!Ie,onClick:()=>{Ie&&qe(Ie)},children:"Repeat Last Question"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:Fe,className:`p-1.5 border-t border-b ${Re?"bg-red-500 text-white":"bg-white hover:bg-gray-100"} transition-colors`,"aria-label":"Use microphone",children:jsxRuntimeExports.jsx(MicrophoneIcon,{})}),jsxRuntimeExports.jsx("button",{type:"submit",className:"p-1.5 bg-blue-600 text-white rounded-r-lg hover:bg-blue-700 disabled:bg-blue-300",disabled:!we.trim()||ue,"aria-label":"Send message",children:jsxRuntimeExports.jsx(PaperAirplaneIcon,{})})]})})]})]})},CONSENT_KEY="vsw.consent",VOICE_KEY="agentLee.voice",MIC_KEY="agentLee.mic",allowedVoiceNames=["Microsoft Ava Online (Natural)","Microsoft Andrew Online (Natural)","Microsoft Emma Online (Natural)","Microsoft Brian Online (Natural)","Microsoft Ana Online (Natural)","Microsoft AndrewMultilingual Online (Natural)","Microsoft Aria Online (Natural)","Microsoft AvaMultilingual Online (Natural)","Microsoft BrianMultilingual Online (Natural)","Microsoft Christopher Online (Natural)","Microsoft EmmaMultilingual Online (Natural)","Microsoft Eric Online (Natural)","Microsoft Guy Online (Natural)","Microsoft Jenny Online (Natural)","Microsoft Michelle Online (Natural)","Microsoft Roger Online (Natural)","Microsoft Steffan Online (Natural)"],msNaturalMatcher=t=>allowedVoiceNames.includes(t.name)&&(t.lang||"").toLowerCase()==="en-us",enUSMatcher=t=>(t.lang||"").toLowerCase().startsWith("en-us");function ConsentScreen({onAccept:t,onDecline:e}){const[n,i]=reactExports.useState(!1),[l,f]=reactExports.useState([]),[p,b]=reactExports.useState("Microsoft Eric Online (Natural)"),[w,v]=reactExports.useState(!0),[g,u]=reactExports.useState(!1),[o,h]=reactExports.useState(()=>{try{return localStorage.getItem(MIC_KEY)==="true"}catch{return!1}}),[_,S]=reactExports.useState(null),[T,O]=reactExports.useState(1.35),[j,C]=reactExports.useState(.65),[D,R]=reactExports.useState(!1),I=reactExports.useRef(null);reactExports.useEffect(()=>{try{const W=localStorage.getItem(VOICE_KEY);W&&b(W)}catch{}},[]),reactExports.useEffect(()=>{let W=!1;const z=()=>{var q,ce;try{const ae=((ce=(q=window.speechSynthesis)==null?void 0:q.getVoices)==null?void 0:ce.call(q))||[];if(!W&&(f(ae),v(!1),!p&&ae.length)){const we=ae.find(msNaturalMatcher)||ae.find(enUSMatcher)||ae[0];if(we){b(we.name);try{localStorage.setItem(VOICE_KEY,we.name)}catch{}}}}catch{W||(f([]),v(!1))}};if(z(),typeof window<"u"&&"speechSynthesis"in window){const q=()=>z();window.speechSynthesis.onvoiceschanged=q;const ce=setTimeout(z,750);return()=>{W=!0,window.speechSynthesis.onvoiceschanged=null,clearTimeout(ce)}}},[p]);const $=reactExports.useMemo(()=>{const W=l.map(we=>({name:we.name,lang:we.lang,voice:we})),z=W.filter(we=>we.voice&&msNaturalMatcher(we.voice)),q=W.filter(we=>we.voice&&enUSMatcher(we.voice)),ce=new Set,ae=[];for(const we of[z,q,W])for(const Z of we)ce.has(Z.name)||(ce.add(Z.name),ae.push(Z));return ae},[l]),F=reactExports.useMemo(()=>l.find(W=>W.name===p),[l,p]),L=async()=>{if(F)try{u(!0),I.current&&(window.speechSynthesis.cancel(),I.current=null);const W=new SpeechSynthesisUtterance("Hello. This is the selected voice. Your settings will be applied immediately.");W.voice=F,W.rate=T,W.pitch=j,I.current=W,W.onend=()=>u(!1),W.onerror=()=>u(!1),window.speechSynthesis.speak(W)}catch{u(!1)}},V=()=>{try{window.speechSynthesis.cancel(),u(!1)}catch{}},Y=W=>{b(W);try{localStorage.setItem(VOICE_KEY,W)}catch{}},Q=async()=>{S(null);try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(z=>z.stop()),h(!0);try{localStorage.setItem(MIC_KEY,"true")}catch{}}catch(W){h(!1),S((W==null?void 0:W.message)||"Microphone access was denied.");try{localStorage.setItem(MIC_KEY,"false")}catch{}}},ee=()=>{if(n){try{localStorage.setItem(CONSENT_KEY,JSON.stringify({ts:new Date().toISOString(),agreed:!0,voice:p||null,mic:o||!1,version:1}))}catch{}t==null||t()}},X=()=>{try{localStorage.removeItem(CONSENT_KEY)}catch{}e==null||e()};return reactExports.useEffect(()=>{try{console.assert(typeof window<"u","Window missing"),console.assert(typeof window.speechSynthesis<"u","speechSynthesis missing")}catch{}},[]),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",role:"dialog","aria-modal":"true","aria-label":"Consent and permissions",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl w-full rounded-2xl bg-white text-gray-900 shadow-2xl overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 border-b flex items-center justify-between bg-gray-50",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold",children:"Consent & Settings  Presentation Access"}),jsxRuntimeExports.jsxs("span",{className:`inline-flex items-center gap-2 text-xs px-2 py-1 rounded ${o?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-600"}`,title:o?"Microphone enabled":"Microphone disabled",children:[jsxRuntimeExports.jsx("span",{className:`h-2 w-2 rounded-full ${o?"bg-emerald-500":"bg-gray-400"}`}),"Mic ",o?"Ready":"Off"]})]}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-5 space-y-6 max-h-[70vh] overflow-auto",children:[jsxRuntimeExports.jsxs("section",{"aria-labelledby":"overview",children:[jsxRuntimeExports.jsx("h3",{id:"overview",className:"font-semibold text-lg mb-2",children:"Quick Overview"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm leading-6",children:[jsxRuntimeExports.jsxs("li",{children:["This deck runs fully in your browser. It may use"," ",jsxRuntimeExports.jsx("strong",{children:"text-to-speech"})," for narration and can optionally use your"," ",jsxRuntimeExports.jsx("strong",{children:"microphone"})," when you explicitly allow it."]}),jsxRuntimeExports.jsxs("li",{children:["Your selections are stored ",jsxRuntimeExports.jsx("strong",{children:"locally only"})," (no cloud upload) to improve your experience."]}),jsxRuntimeExports.jsx("li",{children:"You can change or revoke permissions at any time from Settings."})]})]}),jsxRuntimeExports.jsxs("section",{"aria-labelledby":"voice",className:"border rounded-lg p-4",children:[jsxRuntimeExports.jsx("h3",{id:"voice",className:"font-semibold mb-1",children:"Voice (Microsoft Natural  English, United States preferred)"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Pick a speaking voice. We prioritize Microsoft Natural en-US voices. If not available on this device, well list other en-US options, then all voices."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[jsxRuntimeExports.jsxs("div",{className:"grow",children:[jsxRuntimeExports.jsx("label",{htmlFor:"voiceSelect",className:"text-sm font-medium",children:"Select voice"}),jsxRuntimeExports.jsxs("select",{id:"voiceSelect",className:"mt-1 w-full rounded-md border px-3 py-2 text-sm",disabled:w||$.length===0,value:p,onChange:W=>Y(W.target.value),children:[w&&jsxRuntimeExports.jsx("option",{children:"Loading voices"}),!w&&$.length===0&&jsxRuntimeExports.jsx("option",{children:"No voices detected"}),!w&&$.map(W=>jsxRuntimeExports.jsxs("option",{value:W.name,children:[W.name," ",W.lang?` ${W.lang}`:""]},W.name))]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"rounded-md border px-3 py-2 text-sm",onClick:L,disabled:!F||g,children:g?"Testing":"Test Voice"}),jsxRuntimeExports.jsx("button",{type:"button",className:"rounded-md border px-3 py-2 text-sm",onClick:V,children:"Stop"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"text-sm font-medium",children:["Rate: ",T.toFixed(2)]}),jsxRuntimeExports.jsx("input",{type:"range",min:.5,max:1.5,step:.05,value:T,onChange:W=>O(parseFloat(W.target.value)),className:"w-full",title:"Speech rate","aria-label":"Speech rate"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"text-sm font-medium",children:["Pitch: ",j.toFixed(2)]}),jsxRuntimeExports.jsx("input",{type:"range",min:.5,max:2,step:.05,value:j,onChange:W=>C(parseFloat(W.target.value)),className:"w-full",title:"Speech pitch","aria-label":"Speech pitch"})]})]})]}),jsxRuntimeExports.jsxs("section",{"aria-labelledby":"microphone",className:"border rounded-lg p-4",children:[jsxRuntimeExports.jsx("h3",{id:"microphone",className:"font-semibold mb-1",children:"Microphone (optional)"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Enable this only if you want voice input for Q&A or commands. You can turn this off later."}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",className:`rounded-md border px-3 py-2 text-sm ${o?"bg-emerald-50 border-emerald-300":""}`,onClick:Q,children:o?"Re-check Microphone":"Enable Microphone"}),_&&jsxRuntimeExports.jsx("span",{className:"text-xs text-red-600",children:_})]})]}),jsxRuntimeExports.jsxs("section",{"aria-labelledby":"notice",className:"border rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h3",{id:"notice",className:"font-semibold",children:"Full consent notice"}),jsxRuntimeExports.jsx("button",{type:"button",className:"text-sm underline",onClick:()=>R(W=>!W),children:D?"Hide details":"Show details"})]}),jsxRuntimeExports.jsxs("div",{className:`${D?"block":"hidden"} mt-3 space-y-4 text-sm`,children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium",children:"What this deck does"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Renders an investor/operations presentation and optional AI narration in your browser."}),jsxRuntimeExports.jsx("li",{children:"May generate charts/animations; no personal analytics or tracking is sent to a server."})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium",children:"Data handling & storage"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Stores small preferences locally: consent, voice choice, mic flag."}),jsxRuntimeExports.jsxs("li",{children:["Keys used: ",jsxRuntimeExports.jsx("code",{children:"vsw.consent"}),", ",jsxRuntimeExports.jsx("code",{children:"agentLee.voice"}),","," ",jsxRuntimeExports.jsx("code",{children:"agentLee.mic"}),"."]}),jsxRuntimeExports.jsx("li",{children:"No uploads occur without an explicit, separate action you initiate."})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium",children:"Microphone & speech"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Narration uses your devices built-in text-to-speech (voices)."}),jsxRuntimeExports.jsx("li",{children:"Microphone access is requested only when you press Enable Microphone."}),jsxRuntimeExports.jsx("li",{children:"You can revoke access in your browser/site permissions anytime."})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium",children:"Your controls"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Change voice at any time; test before use."}),jsxRuntimeExports.jsx("li",{children:"Print a copy of this notice for your records."}),jsxRuntimeExports.jsx("li",{children:"Decline to exit; Accept to proceed."})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium",children:"Risks & limitations"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Voice availability varies by OS/Browser; Microsoft Natural voices may not be present on all devices."}),jsxRuntimeExports.jsx("li",{children:"Browser updates or corporate policies can affect TTS or mic access."}),jsxRuntimeExports.jsx("li",{children:"This deck does not replace official corporate policy or binding legal agreements."})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex items-start gap-3",children:[jsxRuntimeExports.jsx("input",{id:"agree",type:"checkbox",className:"mt-1",checked:n,onChange:W=>i(W.target.checked)}),jsxRuntimeExports.jsx("label",{htmlFor:"agree",className:"text-sm",children:"I have read and understand the above. I consent to local storage of my preferences and optional use of device text-to-speech and microphone as I enable them."})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 border-t bg-gray-50 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"text-sm underline",onClick:()=>window.print(),children:"Print this notice"}),jsxRuntimeExports.jsx("button",{type:"button",className:"text-sm underline",onClick:()=>{if(typeof window<"u"&&"speechSynthesis"in window){try{const z=new SpeechSynthesisUtterance(" ");window.speechSynthesis.speak(z),window.speechSynthesis.cancel()}catch{}const W=window.speechSynthesis.getVoices();f(W)}},children:"Refresh voices"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"rounded-md border px-4 py-2 text-sm",onClick:X,children:"Decline"}),jsxRuntimeExports.jsx("button",{type:"button",className:`rounded-md px-4 py-2 text-sm text-white ${n?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"}`,disabled:!n,onClick:ee,children:"Accept & Continue"})]})]})]})})}const Closing=({section:t})=>{if(t.content.type!=="closing")return null;const{message:e,callToAction:n}=t.content;return jsxRuntimeExports.jsx("div",{className:"p-4 md:p-6 h-full flex items-center justify-center bg-linear-to-br from-blue-900 via-blue-800 to-blue-900 text-white overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-6xl mx-auto grid grid-cols-2 gap-6 items-center",children:[jsxRuntimeExports.jsx("div",{className:"closing-message opacity-0 flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-full max-w-md",children:jsxRuntimeExports.jsx("img",{src:"/images/america-visu-sewer.png",alt:"VisuSewer America",className:"w-full h-auto object-contain drop-shadow-2xl"})})}),jsxRuntimeExports.jsxs("div",{className:"closing-message opacity-0 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-3",children:"Thank You"}),jsxRuntimeExports.jsx("p",{className:"text-lg md:text-xl text-blue-200 mb-4",children:"From Roots to Resilience: The Journey Continues"})]}),jsxRuntimeExports.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:jsxRuntimeExports.jsx("p",{className:"text-sm md:text-base leading-relaxed text-blue-50",children:e})}),jsxRuntimeExports.jsx("div",{className:"closing-cta opacity-0",children:jsxRuntimeExports.jsxs("div",{className:"bg-blue-500 hover:bg-blue-600 rounded-xl p-4 shadow-2xl transition-all duration-300 hover:scale-105 cursor-pointer",children:[jsxRuntimeExports.jsx("p",{className:"text-xl font-bold mb-1",children:n}),jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-100",children:"Contact us to explore how VisuSewer can serve your infrastructure needs"})]})}),jsxRuntimeExports.jsxs("div",{className:"pt-4 border-t border-white/20 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-blue-300",children:"VisuSewer  50 Years of Excellence  1975-2025"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-blue-400 mt-1",children:"Powered by Agent Lee Strategic Analysis AI"})]})]})]})})};function r(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(n=r(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function clsx(){for(var t,e,n=0,i="",l=arguments.length;n<l;n++)(t=arguments[n])&&(e=r(t))&&(i&&(i+=" "),i+=e);return i}var EventKeys=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function isEventKey(t){if(typeof t!="string")return!1;var e=EventKeys;return e.includes(t)}var SVGElementPropKeys=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function isSvgElementPropKey(t){if(typeof t!="string")return!1;var e=SVGElementPropKeys;return e.includes(t)}function isDataAttribute(t){return typeof t=="string"&&t.startsWith("data-")}function svgPropertiesNoEvents(t){var e=Object.entries(t).filter(n=>{var[i]=n;return isSvgElementPropKey(i)||isDataAttribute(i)});return Object.fromEntries(e)}function svgPropertiesNoEventsFromUnknown(t){if(t==null)return null;if(reactExports.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return svgPropertiesNoEvents(e)}return typeof t=="object"&&!Array.isArray(t)?svgPropertiesNoEvents(t):null}function svgPropertiesAndEvents(t){var e=Object.entries(t).filter(n=>{var[i]=n;return isSvgElementPropKey(i)||isDataAttribute(i)||isEventKey(i)});return Object.fromEntries(e)}function svgPropertiesAndEventsFromUnknown(t){return t==null?null:reactExports.isValidElement(t)?svgPropertiesAndEvents(t.props):typeof t=="object"&&!Array.isArray(t)?svgPropertiesAndEvents(t):null}var _excluded$n=["children","width","height","viewBox","className","style","title","desc"];function _extends$t(){return _extends$t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$t.apply(null,arguments)}function _objectWithoutProperties$n(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$n(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$n(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Surface=reactExports.forwardRef((t,e)=>{var{children:n,width:i,height:l,viewBox:f,className:p,style:b,title:w,desc:v}=t,g=_objectWithoutProperties$n(t,_excluded$n),u=f||{width:i,height:l,x:0,y:0},o=clsx("recharts-surface",p);return reactExports.createElement("svg",_extends$t({},svgPropertiesAndEvents(g),{className:o,width:i,height:l,style:b,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height),ref:e}),reactExports.createElement("title",null,w),reactExports.createElement("desc",null,v),n)}),_excluded$m=["children","className"];function _extends$s(){return _extends$s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$s.apply(null,arguments)}function _objectWithoutProperties$m(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$m(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$m(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Layer=reactExports.forwardRef((t,e)=>{var{children:n,className:i}=t,l=_objectWithoutProperties$m(t,_excluded$m),f=clsx("recharts-layer",i);return reactExports.createElement("g",_extends$s({className:f},svgPropertiesAndEvents(l),{ref:e}),n)}),reactDomExports=requireReactDom(),LegendPortalContext=reactExports.createContext(null),useLegendPortal=()=>reactExports.useContext(LegendPortalContext);function constant$1(t){return function(){return t}}const cos=Math.cos,sin=Math.sin,sqrt$1=Math.sqrt,pi$1=Math.PI,tau$1=2*pi$1,pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function append(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function appendRound(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return append;const n=10**e;return function(i){this._+=i[0];for(let l=1,f=i.length;l<f;++l)this._+=Math.round(arguments[l]*n)/n+i[l]}}class Path{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?append:appendRound(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,l){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+l}`}bezierCurveTo(e,n,i,l,f,p){this._append`C${+e},${+n},${+i},${+l},${this._x1=+f},${this._y1=+p}`}arcTo(e,n,i,l,f){if(e=+e,n=+n,i=+i,l=+l,f=+f,f<0)throw new Error(`negative radius: ${f}`);let p=this._x1,b=this._y1,w=i-e,v=l-n,g=p-e,u=b-n,o=g*g+u*u;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(o>epsilon)if(!(Math.abs(u*w-v*g)>epsilon)||!f)this._append`L${this._x1=e},${this._y1=n}`;else{let h=i-p,_=l-b,S=w*w+v*v,T=h*h+_*_,O=Math.sqrt(S),j=Math.sqrt(o),C=f*Math.tan((pi-Math.acos((S+o-T)/(2*O*j)))/2),D=C/j,R=C/O;Math.abs(D-1)>epsilon&&this._append`L${e+D*g},${n+D*u}`,this._append`A${f},${f},0,0,${+(u*h>g*_)},${this._x1=e+R*w},${this._y1=n+R*v}`}}arc(e,n,i,l,f,p){if(e=+e,n=+n,i=+i,p=!!p,i<0)throw new Error(`negative radius: ${i}`);let b=i*Math.cos(l),w=i*Math.sin(l),v=e+b,g=n+w,u=1^p,o=p?l-f:f-l;this._x1===null?this._append`M${v},${g}`:(Math.abs(this._x1-v)>epsilon||Math.abs(this._y1-g)>epsilon)&&this._append`L${v},${g}`,i&&(o<0&&(o=o%tau+tau),o>tauEpsilon?this._append`A${i},${i},0,1,${u},${e-b},${n-w}A${i},${i},0,1,${u},${this._x1=v},${this._y1=g}`:o>epsilon&&this._append`A${i},${i},0,${+(o>=pi)},${u},${this._x1=e+i*Math.cos(f)},${this._y1=n+i*Math.sin(f)}`)}rect(e,n,i,l){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+l}h${-i}Z`}toString(){return this._}}function withPath(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new Path(e)}function array(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Linear(t){this._context=t}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function curveLinear(t){return new Linear(t)}function x(t){return t[0]}function y(t){return t[1]}function shapeLine(t,e){var n=constant$1(!0),i=null,l=curveLinear,f=null,p=withPath(b);t=typeof t=="function"?t:t===void 0?x:constant$1(t),e=typeof e=="function"?e:e===void 0?y:constant$1(e);function b(w){var v,g=(w=array(w)).length,u,o=!1,h;for(i==null&&(f=l(h=p())),v=0;v<=g;++v)!(v<g&&n(u=w[v],v,w))===o&&((o=!o)?f.lineStart():f.lineEnd()),o&&f.point(+t(u,v,w),+e(u,v,w));if(h)return f=null,h+""||null}return b.x=function(w){return arguments.length?(t=typeof w=="function"?w:constant$1(+w),b):t},b.y=function(w){return arguments.length?(e=typeof w=="function"?w:constant$1(+w),b):e},b.defined=function(w){return arguments.length?(n=typeof w=="function"?w:constant$1(!!w),b):n},b.curve=function(w){return arguments.length?(l=w,i!=null&&(f=l(i)),b):l},b.context=function(w){return arguments.length?(w==null?i=f=null:f=l(i=w),b):i},b}function shapeArea(t,e,n){var i=null,l=constant$1(!0),f=null,p=curveLinear,b=null,w=withPath(v);t=typeof t=="function"?t:t===void 0?x:constant$1(+t),e=typeof e=="function"?e:constant$1(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?y:constant$1(+n);function v(u){var o,h,_,S=(u=array(u)).length,T,O=!1,j,C=new Array(S),D=new Array(S);for(f==null&&(b=p(j=w())),o=0;o<=S;++o){if(!(o<S&&l(T=u[o],o,u))===O)if(O=!O)h=o,b.areaStart(),b.lineStart();else{for(b.lineEnd(),b.lineStart(),_=o-1;_>=h;--_)b.point(C[_],D[_]);b.lineEnd(),b.areaEnd()}O&&(C[o]=+t(T,o,u),D[o]=+e(T,o,u),b.point(i?+i(T,o,u):C[o],n?+n(T,o,u):D[o]))}if(j)return b=null,j+""||null}function g(){return shapeLine().defined(l).curve(p).context(f)}return v.x=function(u){return arguments.length?(t=typeof u=="function"?u:constant$1(+u),i=null,v):t},v.x0=function(u){return arguments.length?(t=typeof u=="function"?u:constant$1(+u),v):t},v.x1=function(u){return arguments.length?(i=u==null?null:typeof u=="function"?u:constant$1(+u),v):i},v.y=function(u){return arguments.length?(e=typeof u=="function"?u:constant$1(+u),n=null,v):e},v.y0=function(u){return arguments.length?(e=typeof u=="function"?u:constant$1(+u),v):e},v.y1=function(u){return arguments.length?(n=u==null?null:typeof u=="function"?u:constant$1(+u),v):n},v.lineX0=v.lineY0=function(){return g().x(t).y(e)},v.lineY1=function(){return g().x(t).y(n)},v.lineX1=function(){return g().x(i).y(e)},v.defined=function(u){return arguments.length?(l=typeof u=="function"?u:constant$1(!!u),v):l},v.curve=function(u){return arguments.length?(p=u,f!=null&&(b=p(f)),v):p},v.context=function(u){return arguments.length?(u==null?f=b=null:b=p(f=u),v):f},v}class Bump{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function bumpX(t){return new Bump(t,!0)}function bumpY(t){return new Bump(t,!1)}const symbolCircle={draw(t,e){const n=sqrt$1(e/pi$1);t.moveTo(n,0),t.arc(0,0,n,0,tau$1)}},symbolCross={draw(t,e){const n=sqrt$1(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},tan30=sqrt$1(1/3),tan30_2=tan30*2,symbolDiamond={draw(t,e){const n=sqrt$1(e/tan30_2),i=n*tan30;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},symbolSquare={draw(t,e){const n=sqrt$1(e),i=-n/2;t.rect(i,i,n,n)}},ka=.8908130915292852,kr=sin(pi$1/10)/sin(7*pi$1/10),kx=sin(tau$1/10)*kr,ky=-cos(tau$1/10)*kr,symbolStar={draw(t,e){const n=sqrt$1(e*ka),i=kx*n,l=ky*n;t.moveTo(0,-n),t.lineTo(i,l);for(let f=1;f<5;++f){const p=tau$1*f/5,b=cos(p),w=sin(p);t.lineTo(w*n,-b*n),t.lineTo(b*i-w*l,w*i+b*l)}t.closePath()}},sqrt3=sqrt$1(3),symbolTriangle={draw(t,e){const n=-sqrt$1(e/(sqrt3*3));t.moveTo(0,n*2),t.lineTo(-sqrt3*n,-n),t.lineTo(sqrt3*n,-n),t.closePath()}},c=-.5,s=sqrt$1(3)/2,k=1/sqrt$1(12),a=(k/2+1)*3,symbolWye={draw(t,e){const n=sqrt$1(e/a),i=n/2,l=n*k,f=i,p=n*k+n,b=-f,w=p;t.moveTo(i,l),t.lineTo(f,p),t.lineTo(b,w),t.lineTo(c*i-s*l,s*i+c*l),t.lineTo(c*f-s*p,s*f+c*p),t.lineTo(c*b-s*w,s*b+c*w),t.lineTo(c*i+s*l,c*l-s*i),t.lineTo(c*f+s*p,c*p-s*f),t.lineTo(c*b+s*w,c*w-s*b),t.closePath()}};function Symbol$1(t,e){let n=null,i=withPath(l);t=typeof t=="function"?t:constant$1(t||symbolCircle),e=typeof e=="function"?e:constant$1(e===void 0?64:+e);function l(){let f;if(n||(n=f=i()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),f)return n=null,f+""||null}return l.type=function(f){return arguments.length?(t=typeof f=="function"?f:constant$1(f),l):t},l.size=function(f){return arguments.length?(e=typeof f=="function"?f:constant$1(+f),l):e},l.context=function(f){return arguments.length?(n=f??null,l):n},l}function noop$5(){}function point$2(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Basis(t){this._context=t}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function curveBasis(t){return new Basis(t)}function BasisClosed(t){this._context=t}BasisClosed.prototype={areaStart:noop$5,areaEnd:noop$5,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:point$2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function curveBasisClosed(t){return new BasisClosed(t)}function BasisOpen(t){this._context=t}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:point$2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function curveBasisOpen(t){return new BasisOpen(t)}function LinearClosed(t){this._context=t}LinearClosed.prototype={areaStart:noop$5,areaEnd:noop$5,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function curveLinearClosed(t){return new LinearClosed(t)}function sign(t){return t<0?-1:1}function slope3(t,e,n){var i=t._x1-t._x0,l=e-t._x1,f=(t._y1-t._y0)/(i||l<0&&-0),p=(n-t._y1)/(l||i<0&&-0),b=(f*l+p*i)/(i+l);return(sign(f)+sign(p))*Math.min(Math.abs(f),Math.abs(p),.5*Math.abs(b))||0}function slope2(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function point$1(t,e,n){var i=t._x0,l=t._y0,f=t._x1,p=t._y1,b=(f-i)/3;t._context.bezierCurveTo(i+b,l+b*e,f-b,p-b*n,f,p)}function MonotoneX(t){this._context=t}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,n=slope3(this,t,e)),n);break;default:point$1(this,this._t0,n=slope3(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function MonotoneY(t){this._context=new ReflectContext(t)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(t,e){MonotoneX.prototype.point.call(this,e,t)};function ReflectContext(t){this._context=t}ReflectContext.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,l,f){this._context.bezierCurveTo(e,t,i,n,f,l)}};function monotoneX(t){return new MonotoneX(t)}function monotoneY(t){return new MonotoneY(t)}function Natural(t){this._context=t}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=controlPoints(t),l=controlPoints(e),f=0,p=1;p<n;++f,++p)this._context.bezierCurveTo(i[0][f],l[0][f],i[1][f],l[1][f],t[p],e[p]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function controlPoints(t){var e,n=t.length-1,i,l=new Array(n),f=new Array(n),p=new Array(n);for(l[0]=0,f[0]=2,p[0]=t[0]+2*t[1],e=1;e<n-1;++e)l[e]=1,f[e]=4,p[e]=4*t[e]+2*t[e+1];for(l[n-1]=2,f[n-1]=7,p[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=l[e]/f[e-1],f[e]-=i,p[e]-=i*p[e-1];for(l[n-1]=p[n-1]/f[n-1],e=n-2;e>=0;--e)l[e]=(p[e]-l[e+1])/f[e];for(f[n-1]=(t[n]+l[n-1])/2,e=0;e<n-1;++e)f[e]=2*t[e+1]-l[e+1];return[l,f]}function curveNatural(t){return new Natural(t)}function Step(t,e){this._context=t,this._t=e}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function curveStep(t){return new Step(t,.5)}function stepBefore(t){return new Step(t,0)}function stepAfter(t){return new Step(t,1)}function stackOffsetNone(t,e){if((p=t.length)>1)for(var n=1,i,l,f=t[e[0]],p,b=f.length;n<p;++n)for(l=f,f=t[e[n]],i=0;i<b;++i)f[i][1]+=f[i][0]=isNaN(l[i][1])?l[i][0]:l[i][1]}function stackOrderNone(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function stackValue(t,e){return t[e]}function stackSeries(t){const e=[];return e.key=t,e}function shapeStack(){var t=constant$1([]),e=stackOrderNone,n=stackOffsetNone,i=stackValue;function l(f){var p=Array.from(t.apply(this,arguments),stackSeries),b,w=p.length,v=-1,g;for(const u of f)for(b=0,++v;b<w;++b)(p[b][v]=[0,+i(u,p[b].key,v,f)]).data=u;for(b=0,g=array(e(p));b<w;++b)p[g[b]].index=b;return n(p,g),p}return l.keys=function(f){return arguments.length?(t=typeof f=="function"?f:constant$1(Array.from(f)),l):t},l.value=function(f){return arguments.length?(i=typeof f=="function"?f:constant$1(+f),l):i},l.order=function(f){return arguments.length?(e=f==null?stackOrderNone:typeof f=="function"?f:constant$1(Array.from(f)),l):e},l.offset=function(f){return arguments.length?(n=f??stackOffsetNone,l):n},l}function stackOffsetExpand(t,e){if((i=t.length)>0){for(var n,i,l=0,f=t[0].length,p;l<f;++l){for(p=n=0;n<i;++n)p+=t[n][l][1]||0;if(p)for(n=0;n<i;++n)t[n][l][1]/=p}stackOffsetNone(t,e)}}function stackOffsetSilhouette(t,e){if((l=t.length)>0){for(var n=0,i=t[e[0]],l,f=i.length;n<f;++n){for(var p=0,b=0;p<l;++p)b+=t[p][n][1]||0;i[n][1]+=i[n][0]=-b/2}stackOffsetNone(t,e)}}function stackOffsetWiggle(t,e){if(!(!((p=t.length)>0)||!((f=(l=t[e[0]]).length)>0))){for(var n=0,i=1,l,f,p;i<f;++i){for(var b=0,w=0,v=0;b<p;++b){for(var g=t[e[b]],u=g[i][1]||0,o=g[i-1][1]||0,h=(u-o)/2,_=0;_<b;++_){var S=t[e[_]],T=S[i][1]||0,O=S[i-1][1]||0;h+=T-O}w+=u,v+=h*u}l[i-1][1]+=l[i-1][0]=n,w&&(n-=v/w)}l[i-1][1]+=l[i-1][0]=n,stackOffsetNone(t,e)}}var get$2={},isUnsafeProperty={},hasRequiredIsUnsafeProperty;function requireIsUnsafeProperty(){return hasRequiredIsUnsafeProperty||(hasRequiredIsUnsafeProperty=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(isUnsafeProperty)),isUnsafeProperty}var isDeepKey={},hasRequiredIsDeepKey;function requireIsDeepKey(){return hasRequiredIsDeepKey||(hasRequiredIsDeepKey=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(isDeepKey)),isDeepKey}var toKey={},hasRequiredToKey;function requireToKey(){return hasRequiredToKey||(hasRequiredToKey=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;return typeof n=="string"||typeof n=="symbol"?n:Object.is((i=n==null?void 0:n.valueOf)==null?void 0:i.call(n),-0)?"-0":String(n)}t.toKey=e})(toKey)),toKey}var toPath={},toString$1={},hasRequiredToString;function requireToString(){return hasRequiredToString||(hasRequiredToString=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const i=String(n);return i==="0"&&Object.is(Number(n),-0)?"-0":i}t.toString=e})(toString$1)),toString$1}var hasRequiredToPath;function requireToPath(){return hasRequiredToPath||(hasRequiredToPath=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireToString(),n=requireToKey();function i(l){if(Array.isArray(l))return l.map(n.toKey);if(typeof l=="symbol")return[l];l=e.toString(l);const f=[],p=l.length;if(p===0)return f;let b=0,w="",v="",g=!1;for(l.charCodeAt(0)===46&&(f.push(""),b++);b<p;){const u=l[b];v?u==="\\"&&b+1<p?(b++,w+=l[b]):u===v?v="":w+=u:g?u==='"'||u==="'"?v=u:u==="]"?(g=!1,f.push(w),w=""):w+=u:u==="["?(g=!0,w&&(f.push(w),w="")):u==="."?w&&(f.push(w),w=""):w+=u,b++}return w&&f.push(w),f}t.toPath=i})(toPath)),toPath}var hasRequiredGet$1;function requireGet$1(){return hasRequiredGet$1||(hasRequiredGet$1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireIsUnsafeProperty(),n=requireIsDeepKey(),i=requireToKey(),l=requireToPath();function f(b,w,v){if(b==null)return v;switch(typeof w){case"string":{if(e.isUnsafeProperty(w))return v;const g=b[w];return g===void 0?n.isDeepKey(w)?f(b,l.toPath(w),v):v:g}case"number":case"symbol":{typeof w=="number"&&(w=i.toKey(w));const g=b[w];return g===void 0?v:g}default:{if(Array.isArray(w))return p(b,w,v);if(Object.is(w==null?void 0:w.valueOf(),-0)?w="-0":w=String(w),e.isUnsafeProperty(w))return v;const g=b[w];return g===void 0?v:g}}}function p(b,w,v){if(w.length===0)return v;let g=b;for(let u=0;u<w.length;u++){if(g==null||e.isUnsafeProperty(w[u]))return v;g=g[w[u]]}return g===void 0?v:g}t.get=f})(get$2)),get$2}var get$1,hasRequiredGet;function requireGet(){return hasRequiredGet||(hasRequiredGet=1,get$1=requireGet$1().get),get$1}var getExports=requireGet();const get=getDefaultExportFromCjs(getExports);var mathSign=t=>t===0?0:t>0?1:-1,isNan=t=>typeof t=="number"&&t!=+t,isPercent=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,isNumber=t=>(typeof t=="number"||t instanceof Number)&&!isNan(t),isNumOrStr=t=>isNumber(t)||typeof t=="string",idCounter=0,uniqueId=t=>{var e=++idCounter;return"".concat(t||"").concat(e)},getPercentValue=function t(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!isNumber(e)&&typeof e!="string")return i;var f;if(isPercent(e)){if(n==null)return i;var p=e.indexOf("%");f=n*parseFloat(e.slice(0,p))/100}else f=+e;return isNan(f)&&(f=i),l&&n!=null&&f>n&&(f=n),f},hasDuplicate=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},i=0;i<e;i++)if(!n[t[i]])n[t[i]]=!0;else return!0;return!1};function interpolate$1(t,e,n){return isNumber(t)&&isNumber(e)?t+n*(e-t):e}function findEntryInArray(t,e,n){if(!(!t||!t.length))return t.find(i=>i&&(typeof e=="function"?e(i):get(i,e))===n)}var isNullish=t=>t===null||typeof t>"u",upperFirst=t=>isNullish(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),_excluded$l=["type","size","sizeType"];function _extends$r(){return _extends$r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$r.apply(null,arguments)}function ownKeys$C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$C(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$C(Object(n),!0).forEach(function(i){_defineProperty$E(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$C(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$E(t,e,n){return(e=_toPropertyKey$E(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$E(t){var e=_toPrimitive$E(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$E(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _objectWithoutProperties$l(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$l(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$l(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var symbolFactories={symbolCircle,symbolCross,symbolDiamond,symbolSquare,symbolStar,symbolTriangle,symbolWye},RADIAN$1=Math.PI/180,getSymbolFactory=t=>{var e="symbol".concat(upperFirst(t));return symbolFactories[e]||symbolCircle},calculateAreaSize=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*RADIAN$1;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.tan(i)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},registerSymbol=(t,e)=>{symbolFactories["symbol".concat(upperFirst(t))]=e},Symbols=t=>{var{type:e="circle",size:n=64,sizeType:i="area"}=t,l=_objectWithoutProperties$l(t,_excluded$l),f=_objectSpread$C(_objectSpread$C({},l),{},{type:e,size:n,sizeType:i}),p="circle";typeof e=="string"&&(p=e);var b=()=>{var o=getSymbolFactory(p),h=Symbol$1().type(o).size(calculateAreaSize(n,i,p)),_=h();if(_!==null)return _},{className:w,cx:v,cy:g}=f,u=svgPropertiesAndEvents(f);return v===+v&&g===+g&&n===+n?reactExports.createElement("path",_extends$r({},u,{className:clsx("recharts-symbols",w),transform:"translate(".concat(v,", ").concat(g,")"),d:b()})):null};Symbols.registerSymbol=registerSymbol;var adaptEventHandlers=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(reactExports.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(l=>{isEventKey(l)&&(i[l]=(f=>n[l](n,f)))}),i},getEventHandlerOfChild=(t,e,n)=>i=>(t(e,n,i),null),adaptEventsOfChild=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var i=null;return Object.keys(t).forEach(l=>{var f=t[l];isEventKey(l)&&typeof f=="function"&&(i||(i={}),i[l]=getEventHandlerOfChild(f,e,n))}),i};function _extends$q(){return _extends$q=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$q.apply(null,arguments)}function ownKeys$B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$B(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$B(Object(n),!0).forEach(function(i){_defineProperty$D(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$B(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$D(t,e,n){return(e=_toPropertyKey$D(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$D(t){var e=_toPrimitive$D(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$D(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SIZE=32;class DefaultLegendContent extends reactExports.PureComponent{renderIcon(e,n){var{inactiveColor:i}=this.props,l=SIZE/2,f=SIZE/6,p=SIZE/3,b=e.inactive?i:e.color,w=n??e.type;if(w==="none")return null;if(w==="plainline")return reactExports.createElement("line",{strokeWidth:4,fill:"none",stroke:b,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:l,x2:SIZE,y2:l,className:"recharts-legend-icon"});if(w==="line")return reactExports.createElement("path",{strokeWidth:4,fill:"none",stroke:b,d:"M0,".concat(l,"h").concat(p,`
            A`).concat(f,",").concat(f,",0,1,1,").concat(2*p,",").concat(l,`
            H`).concat(SIZE,"M").concat(2*p,",").concat(l,`
            A`).concat(f,",").concat(f,",0,1,1,").concat(p,",").concat(l),className:"recharts-legend-icon"});if(w==="rect")return reactExports.createElement("path",{stroke:"none",fill:b,d:"M0,".concat(SIZE/8,"h").concat(SIZE,"v").concat(SIZE*3/4,"h").concat(-SIZE,"z"),className:"recharts-legend-icon"});if(reactExports.isValidElement(e.legendIcon)){var v=_objectSpread$B({},e);return delete v.legendIcon,reactExports.cloneElement(e.legendIcon,v)}return reactExports.createElement(Symbols,{fill:b,cx:l,cy:l,size:SIZE,sizeType:"diameter",type:w})}renderItems(){var{payload:e,iconSize:n,layout:i,formatter:l,inactiveColor:f,iconType:p}=this.props,b={x:0,y:0,width:SIZE,height:SIZE},w={display:i==="horizontal"?"inline-block":"block",marginRight:10},v={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((g,u)=>{var o=g.formatter||l,h=clsx({"recharts-legend-item":!0,["legend-item-".concat(u)]:!0,inactive:g.inactive});if(g.type==="none")return null;var _=g.inactive?f:g.color,S=o?o(g.value,g,u):g.value;return reactExports.createElement("li",_extends$q({className:h,style:w,key:"legend-item-".concat(u)},adaptEventsOfChild(this.props,g,u)),reactExports.createElement(Surface,{width:n,height:n,viewBox:b,style:v,"aria-label":"".concat(S," legend icon")},this.renderIcon(g,p)),reactExports.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},S))})}render(){var{payload:e,layout:n,align:i}=this.props;if(!e||!e.length)return null;var l={padding:0,margin:0,textAlign:n==="horizontal"?i:"left"};return reactExports.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}_defineProperty$D(DefaultLegendContent,"displayName","Legend");_defineProperty$D(DefaultLegendContent,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var uniqBy$3={},uniqBy$2={},hasRequiredUniqBy$2;function requireUniqBy$2(){return hasRequiredUniqBy$2||(hasRequiredUniqBy$2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){const l=new Map;for(let f=0;f<n.length;f++){const p=n[f],b=i(p);l.has(b)||l.set(b,p)}return Array.from(l.values())}t.uniqBy=e})(uniqBy$2)),uniqBy$2}var identity$4={},hasRequiredIdentity;function requireIdentity(){return hasRequiredIdentity||(hasRequiredIdentity=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(identity$4)),identity$4}var isArrayLikeObject={},isArrayLike={},isLength={},hasRequiredIsLength;function requireIsLength(){return hasRequiredIsLength||(hasRequiredIsLength=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(isLength)),isLength}var hasRequiredIsArrayLike;function requireIsArrayLike(){return hasRequiredIsArrayLike||(hasRequiredIsArrayLike=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireIsLength();function n(i){return i!=null&&typeof i!="function"&&e.isLength(i.length)}t.isArrayLike=n})(isArrayLike)),isArrayLike}var isObjectLike={},hasRequiredIsObjectLike;function requireIsObjectLike(){return hasRequiredIsObjectLike||(hasRequiredIsObjectLike=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(isObjectLike)),isObjectLike}var hasRequiredIsArrayLikeObject;function requireIsArrayLikeObject(){return hasRequiredIsArrayLikeObject||(hasRequiredIsArrayLikeObject=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireIsArrayLike(),n=requireIsObjectLike();function i(l){return n.isObjectLike(l)&&e.isArrayLike(l)}t.isArrayLikeObject=i})(isArrayLikeObject)),isArrayLikeObject}var iteratee={},property={},hasRequiredProperty;function requireProperty(){return hasRequiredProperty||(hasRequiredProperty=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireGet$1();function n(i){return function(l){return e.get(l,i)}}t.property=n})(property)),property}var matches={},isMatch={},isMatchWith={},isObject={},hasRequiredIsObject;function requireIsObject(){return hasRequiredIsObject||(hasRequiredIsObject=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(isObject)),isObject}var isPrimitive={},hasRequiredIsPrimitive;function requireIsPrimitive(){return hasRequiredIsPrimitive||(hasRequiredIsPrimitive=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(isPrimitive)),isPrimitive}var eq={},hasRequiredEq;function requireEq(){return hasRequiredEq||(hasRequiredEq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){return n===i||Number.isNaN(n)&&Number.isNaN(i)}t.eq=e})(eq)),eq}var hasRequiredIsMatchWith;function requireIsMatchWith(){return hasRequiredIsMatchWith||(hasRequiredIsMatchWith=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireIsObject(),n=requireIsPrimitive(),i=requireEq();function l(g,u,o){return typeof o!="function"?l(g,u,()=>{}):f(g,u,function h(_,S,T,O,j,C){const D=o(_,S,T,O,j,C);return D!==void 0?!!D:f(_,S,h,C)},new Map)}function f(g,u,o,h){if(u===g)return!0;switch(typeof u){case"object":return p(g,u,o,h);case"function":return Object.keys(u).length>0?f(g,{...u},o,h):i.eq(g,u);default:return e.isObject(g)?typeof u=="string"?u==="":!0:i.eq(g,u)}}function p(g,u,o,h){if(u==null)return!0;if(Array.isArray(u))return w(g,u,o,h);if(u instanceof Map)return b(g,u,o,h);if(u instanceof Set)return v(g,u,o,h);const _=Object.keys(u);if(g==null)return _.length===0;if(_.length===0)return!0;if(h!=null&&h.has(u))return h.get(u)===g;h==null||h.set(u,g);try{for(let S=0;S<_.length;S++){const T=_[S];if(!n.isPrimitive(g)&&!(T in g)||u[T]===void 0&&g[T]!==void 0||u[T]===null&&g[T]!==null||!o(g[T],u[T],T,g,u,h))return!1}return!0}finally{h==null||h.delete(u)}}function b(g,u,o,h){if(u.size===0)return!0;if(!(g instanceof Map))return!1;for(const[_,S]of u.entries()){const T=g.get(_);if(o(T,S,_,g,u,h)===!1)return!1}return!0}function w(g,u,o,h){if(u.length===0)return!0;if(!Array.isArray(g))return!1;const _=new Set;for(let S=0;S<u.length;S++){const T=u[S];let O=!1;for(let j=0;j<g.length;j++){if(_.has(j))continue;const C=g[j];let D=!1;if(o(C,T,S,g,u,h)&&(D=!0),D){_.add(j),O=!0;break}}if(!O)return!1}return!0}function v(g,u,o,h){return u.size===0?!0:g instanceof Set?w([...g],[...u],o,h):!1}t.isMatchWith=l,t.isSetMatch=v})(isMatchWith)),isMatchWith}var hasRequiredIsMatch;function requireIsMatch(){return hasRequiredIsMatch||(hasRequiredIsMatch=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireIsMatchWith();function n(i,l){return e.isMatchWith(i,l,()=>{})}t.isMatch=n})(isMatch)),isMatch}var cloneDeep$1={},cloneDeepWith$1={},getSymbols={},hasRequiredGetSymbols;function requireGetSymbols(){return hasRequiredGetSymbols||(hasRequiredGetSymbols=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(i=>Object.prototype.propertyIsEnumerable.call(n,i))}t.getSymbols=e})(getSymbols)),getSymbols}var getTag={},hasRequiredGetTag;function requireGetTag(){return hasRequiredGetTag||(hasRequiredGetTag=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(getTag)),getTag}var tags={},hasRequiredTags;function requireTags(){return hasRequiredTags||(hasRequiredTags=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",i="[object Number]",l="[object Boolean]",f="[object Arguments]",p="[object Symbol]",b="[object Date]",w="[object Map]",v="[object Set]",g="[object Array]",u="[object Function]",o="[object ArrayBuffer]",h="[object Object]",_="[object Error]",S="[object DataView]",T="[object Uint8Array]",O="[object Uint8ClampedArray]",j="[object Uint16Array]",C="[object Uint32Array]",D="[object BigUint64Array]",R="[object Int8Array]",I="[object Int16Array]",$="[object Int32Array]",F="[object BigInt64Array]",L="[object Float32Array]",V="[object Float64Array]";t.argumentsTag=f,t.arrayBufferTag=o,t.arrayTag=g,t.bigInt64ArrayTag=F,t.bigUint64ArrayTag=D,t.booleanTag=l,t.dataViewTag=S,t.dateTag=b,t.errorTag=_,t.float32ArrayTag=L,t.float64ArrayTag=V,t.functionTag=u,t.int16ArrayTag=I,t.int32ArrayTag=$,t.int8ArrayTag=R,t.mapTag=w,t.numberTag=i,t.objectTag=h,t.regexpTag=e,t.setTag=v,t.stringTag=n,t.symbolTag=p,t.uint16ArrayTag=j,t.uint32ArrayTag=C,t.uint8ArrayTag=T,t.uint8ClampedArrayTag=O})(tags)),tags}var isTypedArray={},hasRequiredIsTypedArray;function requireIsTypedArray(){return hasRequiredIsTypedArray||(hasRequiredIsTypedArray=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(isTypedArray)),isTypedArray}var hasRequiredCloneDeepWith$1;function requireCloneDeepWith$1(){return hasRequiredCloneDeepWith$1||(hasRequiredCloneDeepWith$1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireGetSymbols(),n=requireGetTag(),i=requireTags(),l=requireIsPrimitive(),f=requireIsTypedArray();function p(g,u){return b(g,void 0,g,new Map,u)}function b(g,u,o,h=new Map,_=void 0){const S=_==null?void 0:_(g,u,o,h);if(S!==void 0)return S;if(l.isPrimitive(g))return g;if(h.has(g))return h.get(g);if(Array.isArray(g)){const T=new Array(g.length);h.set(g,T);for(let O=0;O<g.length;O++)T[O]=b(g[O],O,o,h,_);return Object.hasOwn(g,"index")&&(T.index=g.index),Object.hasOwn(g,"input")&&(T.input=g.input),T}if(g instanceof Date)return new Date(g.getTime());if(g instanceof RegExp){const T=new RegExp(g.source,g.flags);return T.lastIndex=g.lastIndex,T}if(g instanceof Map){const T=new Map;h.set(g,T);for(const[O,j]of g)T.set(O,b(j,O,o,h,_));return T}if(g instanceof Set){const T=new Set;h.set(g,T);for(const O of g)T.add(b(O,void 0,o,h,_));return T}if(typeof Buffer<"u"&&Buffer.isBuffer(g))return g.subarray();if(f.isTypedArray(g)){const T=new(Object.getPrototypeOf(g)).constructor(g.length);h.set(g,T);for(let O=0;O<g.length;O++)T[O]=b(g[O],O,o,h,_);return T}if(g instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&g instanceof SharedArrayBuffer)return g.slice(0);if(g instanceof DataView){const T=new DataView(g.buffer.slice(0),g.byteOffset,g.byteLength);return h.set(g,T),w(T,g,o,h,_),T}if(typeof File<"u"&&g instanceof File){const T=new File([g],g.name,{type:g.type});return h.set(g,T),w(T,g,o,h,_),T}if(typeof Blob<"u"&&g instanceof Blob){const T=new Blob([g],{type:g.type});return h.set(g,T),w(T,g,o,h,_),T}if(g instanceof Error){const T=new g.constructor;return h.set(g,T),T.message=g.message,T.name=g.name,T.stack=g.stack,T.cause=g.cause,w(T,g,o,h,_),T}if(g instanceof Boolean){const T=new Boolean(g.valueOf());return h.set(g,T),w(T,g,o,h,_),T}if(g instanceof Number){const T=new Number(g.valueOf());return h.set(g,T),w(T,g,o,h,_),T}if(g instanceof String){const T=new String(g.valueOf());return h.set(g,T),w(T,g,o,h,_),T}if(typeof g=="object"&&v(g)){const T=Object.create(Object.getPrototypeOf(g));return h.set(g,T),w(T,g,o,h,_),T}return g}function w(g,u,o=g,h,_){const S=[...Object.keys(u),...e.getSymbols(u)];for(let T=0;T<S.length;T++){const O=S[T],j=Object.getOwnPropertyDescriptor(g,O);(j==null||j.writable)&&(g[O]=b(u[O],O,o,h,_))}}function v(g){switch(n.getTag(g)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=p,t.cloneDeepWithImpl=b,t.copyProperties=w})(cloneDeepWith$1)),cloneDeepWith$1}var hasRequiredCloneDeep$1;function requireCloneDeep$1(){return hasRequiredCloneDeep$1||(hasRequiredCloneDeep$1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireCloneDeepWith$1();function n(i){return e.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}t.cloneDeep=n})(cloneDeep$1)),cloneDeep$1}var hasRequiredMatches;function requireMatches(){return hasRequiredMatches||(hasRequiredMatches=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireIsMatch(),n=requireCloneDeep$1();function i(l){return l=n.cloneDeep(l),f=>e.isMatch(f,l)}t.matches=i})(matches)),matches}var matchesProperty={},cloneDeep={},cloneDeepWith={},hasRequiredCloneDeepWith;function requireCloneDeepWith(){return hasRequiredCloneDeepWith||(hasRequiredCloneDeepWith=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireCloneDeepWith$1(),n=requireTags();function i(l,f){return e.cloneDeepWith(l,(p,b,w,v)=>{const g=f==null?void 0:f(p,b,w,v);if(g!==void 0)return g;if(typeof l=="object")switch(Object.prototype.toString.call(l)){case n.numberTag:case n.stringTag:case n.booleanTag:{const u=new l.constructor(l==null?void 0:l.valueOf());return e.copyProperties(u,l),u}case n.argumentsTag:{const u={};return e.copyProperties(u,l),u.length=l.length,u[Symbol.iterator]=l[Symbol.iterator],u}default:return}})}t.cloneDeepWith=i})(cloneDeepWith)),cloneDeepWith}var hasRequiredCloneDeep;function requireCloneDeep(){return hasRequiredCloneDeep||(hasRequiredCloneDeep=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireCloneDeepWith();function n(i){return e.cloneDeepWith(i)}t.cloneDeep=n})(cloneDeep)),cloneDeep}var has$1={},isIndex={},hasRequiredIsIndex;function requireIsIndex(){return hasRequiredIsIndex||(hasRequiredIsIndex=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(i,l=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<l;case"symbol":return!1;case"string":return e.test(i)}}t.isIndex=n})(isIndex)),isIndex}var isArguments={},hasRequiredIsArguments;function requireIsArguments(){return hasRequiredIsArguments||(hasRequiredIsArguments=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireGetTag();function n(i){return i!==null&&typeof i=="object"&&e.getTag(i)==="[object Arguments]"}t.isArguments=n})(isArguments)),isArguments}var hasRequiredHas;function requireHas(){return hasRequiredHas||(hasRequiredHas=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireIsDeepKey(),n=requireIsIndex(),i=requireIsArguments(),l=requireToPath();function f(p,b){let w;if(Array.isArray(b)?w=b:typeof b=="string"&&e.isDeepKey(b)&&(p==null?void 0:p[b])==null?w=l.toPath(b):w=[b],w.length===0)return!1;let v=p;for(let g=0;g<w.length;g++){const u=w[g];if((v==null||!Object.hasOwn(v,u))&&!((Array.isArray(v)||i.isArguments(v))&&n.isIndex(u)&&u<v.length))return!1;v=v[u]}return!0}t.has=f})(has$1)),has$1}var hasRequiredMatchesProperty;function requireMatchesProperty(){return hasRequiredMatchesProperty||(hasRequiredMatchesProperty=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireIsMatch(),n=requireToKey(),i=requireCloneDeep(),l=requireGet$1(),f=requireHas();function p(b,w){switch(typeof b){case"object":{Object.is(b==null?void 0:b.valueOf(),-0)&&(b="-0");break}case"number":{b=n.toKey(b);break}}return w=i.cloneDeep(w),function(v){const g=l.get(v,b);return g===void 0?f.has(v,b):w===void 0?g===void 0:e.isMatch(g,w)}}t.matchesProperty=p})(matchesProperty)),matchesProperty}var hasRequiredIteratee;function requireIteratee(){return hasRequiredIteratee||(hasRequiredIteratee=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireIdentity(),n=requireProperty(),i=requireMatches(),l=requireMatchesProperty();function f(p){if(p==null)return e.identity;switch(typeof p){case"function":return p;case"object":return Array.isArray(p)&&p.length===2?l.matchesProperty(p[0],p[1]):i.matches(p);case"string":case"symbol":case"number":return n.property(p)}}t.iteratee=f})(iteratee)),iteratee}var hasRequiredUniqBy$1;function requireUniqBy$1(){return hasRequiredUniqBy$1||(hasRequiredUniqBy$1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireUniqBy$2(),n=requireIdentity(),i=requireIsArrayLikeObject(),l=requireIteratee();function f(p,b=n.identity){return i.isArrayLikeObject(p)?e.uniqBy(Array.from(p),l.iteratee(b)):[]}t.uniqBy=f})(uniqBy$3)),uniqBy$3}var uniqBy$1,hasRequiredUniqBy;function requireUniqBy(){return hasRequiredUniqBy||(hasRequiredUniqBy=1,uniqBy$1=requireUniqBy$1().uniqBy),uniqBy$1}var uniqByExports=requireUniqBy();const uniqBy=getDefaultExportFromCjs(uniqByExports);function getUniqPayload(t,e,n){return e===!0?uniqBy(t,n):typeof e=="function"?uniqBy(t,e):t}var withSelector$1={exports:{}},withSelector_production={},shim={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var t=requireReact();function e(u,o){return u===o&&(u!==0||1/u===1/o)||u!==u&&o!==o}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,l=t.useEffect,f=t.useLayoutEffect,p=t.useDebugValue;function b(u,o){var h=o(),_=i({inst:{value:h,getSnapshot:o}}),S=_[0].inst,T=_[1];return f(function(){S.value=h,S.getSnapshot=o,w(S)&&T({inst:S})},[u,h,o]),l(function(){return w(S)&&T({inst:S}),u(function(){w(S)&&T({inst:S})})},[u]),p(h),h}function w(u){var o=u.getSnapshot;u=u.value;try{var h=o();return!n(u,h)}catch{return!0}}function v(u,o){return o()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?v:b;return useSyncExternalStoreShim_production.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:g,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredWithSelector_production;function requireWithSelector_production(){if(hasRequiredWithSelector_production)return withSelector_production;hasRequiredWithSelector_production=1;var t=requireReact(),e=requireShim();function n(v,g){return v===g&&(v!==0||1/v===1/g)||v!==v&&g!==g}var i=typeof Object.is=="function"?Object.is:n,l=e.useSyncExternalStore,f=t.useRef,p=t.useEffect,b=t.useMemo,w=t.useDebugValue;return withSelector_production.useSyncExternalStoreWithSelector=function(v,g,u,o,h){var _=f(null);if(_.current===null){var S={hasValue:!1,value:null};_.current=S}else S=_.current;_=b(function(){function O(I){if(!j){if(j=!0,C=I,I=o(I),h!==void 0&&S.hasValue){var $=S.value;if(h($,I))return D=$}return D=I}if($=D,i(C,I))return $;var F=o(I);return h!==void 0&&h($,F)?(C=I,$):(C=I,D=F)}var j=!1,C,D,R=u===void 0?null:u;return[function(){return O(g())},R===null?void 0:function(){return O(R())}]},[g,u,o,h]);var T=l(v,_[0],_[1]);return p(function(){S.hasValue=!0,S.value=T},[T]),w(T),T},withSelector_production}var hasRequiredWithSelector$1;function requireWithSelector$1(){return hasRequiredWithSelector$1||(hasRequiredWithSelector$1=1,withSelector$1.exports=requireWithSelector_production()),withSelector$1.exports}var withSelectorExports=requireWithSelector$1(),RechartsReduxContext=reactExports.createContext(null),noopDispatch=t=>t,useAppDispatch=()=>{var t=reactExports.useContext(RechartsReduxContext);return t?t.store.dispatch:noopDispatch},noop$4=()=>{},addNestedSubNoop=()=>noop$4,refEquality=(t,e)=>t===e;function useAppSelector(t){var e=reactExports.useContext(RechartsReduxContext);return withSelectorExports.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:addNestedSubNoop,e?e.store.getState:noop$4,e?e.store.getState:noop$4,e?t:noop$4,refEquality)}function assertIsFunction(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function assertIsObject(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function assertIsArrayOfFunctions(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${n}]`)}}var ensureIsArray=t=>Array.isArray(t)?t:[t];function getDependencies(t){const e=Array.isArray(t[0])?t[0]:t;return assertIsArrayOfFunctions(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function collectInputSelectorResults(t,e){const n=[],{length:i}=t;for(let l=0;l<i;l++)n.push(t[l].apply(null,e));return n}var StrongRef=class{constructor(t){this.value=t}deref(){return this.value}},Ref=typeof WeakRef<"u"?WeakRef:StrongRef,UNTERMINATED=0,TERMINATED=1;function createCacheNode(){return{s:UNTERMINATED,v:void 0,o:null,p:null}}function weakMapMemoize(t,e={}){let n=createCacheNode();const{resultEqualityCheck:i}=e;let l,f=0;function p(){var u;let b=n;const{length:w}=arguments;for(let o=0,h=w;o<h;o++){const _=arguments[o];if(typeof _=="function"||typeof _=="object"&&_!==null){let S=b.o;S===null&&(b.o=S=new WeakMap);const T=S.get(_);T===void 0?(b=createCacheNode(),S.set(_,b)):b=T}else{let S=b.p;S===null&&(b.p=S=new Map);const T=S.get(_);T===void 0?(b=createCacheNode(),S.set(_,b)):b=T}}const v=b;let g;if(b.s===TERMINATED)g=b.v;else if(g=t.apply(null,arguments),f++,i){const o=((u=l==null?void 0:l.deref)==null?void 0:u.call(l))??l;o!=null&&i(o,g)&&(g=o,f!==0&&f--),l=typeof g=="object"&&g!==null||typeof g=="function"?new Ref(g):g}return v.s=TERMINATED,v.v=g,g}return p.clearCache=()=>{n=createCacheNode(),p.resetResultsCount()},p.resultsCount=()=>f,p.resetResultsCount=()=>{f=0},p}function createSelectorCreator(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,i=(...l)=>{let f=0,p=0,b,w={},v=l.pop();typeof v=="object"&&(w=v,v=l.pop()),assertIsFunction(v,`createSelector expects an output function after the inputs, but received: [${typeof v}]`);const g={...n,...w},{memoize:u,memoizeOptions:o=[],argsMemoize:h=weakMapMemoize,argsMemoizeOptions:_=[]}=g,S=ensureIsArray(o),T=ensureIsArray(_),O=getDependencies(l),j=u(function(){return f++,v.apply(null,arguments)},...S),C=h(function(){p++;const R=collectInputSelectorResults(O,arguments);return b=j.apply(null,R),b},...T);return Object.assign(C,{resultFunc:v,memoizedResultFunc:j,dependencies:O,dependencyRecomputations:()=>p,resetDependencyRecomputations:()=>{p=0},lastResult:()=>b,recomputations:()=>f,resetRecomputations:()=>{f=0},memoize:u,argsMemoize:h})};return Object.assign(i,{withTypes:()=>i}),i}var createSelector=createSelectorCreator(weakMapMemoize),createStructuredSelector=Object.assign((t,e=createSelector)=>{assertIsObject(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),i=n.map(f=>t[f]);return e(i,(...f)=>f.reduce((p,b,w)=>(p[n[w]]=b,p),{}))},{withTypes:()=>createStructuredSelector}),sortBy$2={},orderBy={},compareValues={},hasRequiredCompareValues;function requireCompareValues(){return hasRequiredCompareValues||(hasRequiredCompareValues=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const n=(i,l,f)=>{if(i!==l){const p=e(i),b=e(l);if(p===b&&p===0){if(i<l)return f==="desc"?1:-1;if(i>l)return f==="desc"?-1:1}return f==="desc"?b-p:p-b}return 0};t.compareValues=n})(compareValues)),compareValues}var isKey={},isSymbol={},hasRequiredIsSymbol;function requireIsSymbol(){return hasRequiredIsSymbol||(hasRequiredIsSymbol=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(isSymbol)),isSymbol}var hasRequiredIsKey;function requireIsKey(){return hasRequiredIsKey||(hasRequiredIsKey=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireIsSymbol(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function l(f,p){return Array.isArray(f)?!1:typeof f=="number"||typeof f=="boolean"||f==null||e.isSymbol(f)?!0:typeof f=="string"&&(i.test(f)||!n.test(f))||p!=null&&Object.hasOwn(p,f)}t.isKey=l})(isKey)),isKey}var hasRequiredOrderBy;function requireOrderBy(){return hasRequiredOrderBy||(hasRequiredOrderBy=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireCompareValues(),n=requireIsKey(),i=requireToPath();function l(f,p,b,w){if(f==null)return[];b=w?void 0:b,Array.isArray(f)||(f=Object.values(f)),Array.isArray(p)||(p=p==null?[null]:[p]),p.length===0&&(p=[null]),Array.isArray(b)||(b=b==null?[]:[b]),b=b.map(h=>String(h));const v=(h,_)=>{let S=h;for(let T=0;T<_.length&&S!=null;++T)S=S[_[T]];return S},g=(h,_)=>_==null||h==null?_:typeof h=="object"&&"key"in h?Object.hasOwn(_,h.key)?_[h.key]:v(_,h.path):typeof h=="function"?h(_):Array.isArray(h)?v(_,h):typeof _=="object"?_[h]:_,u=p.map(h=>(Array.isArray(h)&&h.length===1&&(h=h[0]),h==null||typeof h=="function"||Array.isArray(h)||n.isKey(h)?h:{key:h,path:i.toPath(h)}));return f.map(h=>({original:h,criteria:u.map(_=>g(_,h))})).slice().sort((h,_)=>{for(let S=0;S<u.length;S++){const T=e.compareValues(h.criteria[S],_.criteria[S],b[S]);if(T!==0)return T}return 0}).map(h=>h.original)}t.orderBy=l})(orderBy)),orderBy}var flatten={},hasRequiredFlatten;function requireFlatten(){return hasRequiredFlatten||(hasRequiredFlatten=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i=1){const l=[],f=Math.floor(i),p=(b,w)=>{for(let v=0;v<b.length;v++){const g=b[v];Array.isArray(g)&&w<f?p(g,w+1):l.push(g)}};return p(n,0),l}t.flatten=e})(flatten)),flatten}var isIterateeCall={},hasRequiredIsIterateeCall;function requireIsIterateeCall(){return hasRequiredIsIterateeCall||(hasRequiredIsIterateeCall=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireIsIndex(),n=requireIsArrayLike(),i=requireIsObject(),l=requireEq();function f(p,b,w){return i.isObject(w)&&(typeof b=="number"&&n.isArrayLike(w)&&e.isIndex(b)&&b<w.length||typeof b=="string"&&b in w)?l.eq(w[b],p):!1}t.isIterateeCall=f})(isIterateeCall)),isIterateeCall}var hasRequiredSortBy$1;function requireSortBy$1(){return hasRequiredSortBy$1||(hasRequiredSortBy$1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireOrderBy(),n=requireFlatten(),i=requireIsIterateeCall();function l(f,...p){const b=p.length;return b>1&&i.isIterateeCall(f,p[0],p[1])?p=[]:b>2&&i.isIterateeCall(p[0],p[1],p[2])&&(p=[p[0]]),e.orderBy(f,n.flatten(p),["asc"])}t.sortBy=l})(sortBy$2)),sortBy$2}var sortBy$1,hasRequiredSortBy;function requireSortBy(){return hasRequiredSortBy||(hasRequiredSortBy=1,sortBy$1=requireSortBy$1().sortBy),sortBy$1}var sortByExports=requireSortBy();const sortBy=getDefaultExportFromCjs(sortByExports);var selectLegendSettings=t=>t.legend.settings,selectLegendSize=t=>t.legend.size,selectAllLegendPayload2DArray=t=>t.legend.payload,selectLegendPayload=createSelector([selectAllLegendPayload2DArray,selectLegendSettings],(t,e)=>{var{itemSorter:n}=e,i=t.flat(1);return n?sortBy(i,n):i});function useLegendPayload(){return useAppSelector(selectLegendPayload)}var EPS$1=1;function useElementOffset(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=reactExports.useState({height:0,left:0,top:0,width:0}),i=reactExports.useCallback(l=>{if(l!=null){var f=l.getBoundingClientRect(),p={height:f.height,left:f.left,top:f.top,width:f.width};(Math.abs(p.height-e.height)>EPS$1||Math.abs(p.left-e.left)>EPS$1||Math.abs(p.top-e.top)>EPS$1||Math.abs(p.width-e.width)>EPS$1)&&n({height:p.height,left:p.left,top:p.top,width:p.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,i]}function formatProdErrorMessage$1(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var $$observable=typeof Symbol=="function"&&Symbol.observable||"@@observable",symbol_observable_default=$$observable,randomString=()=>Math.random().toString(36).substring(7).split("").join("."),ActionTypes={INIT:`@@redux/INIT${randomString()}`,REPLACE:`@@redux/REPLACE${randomString()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${randomString()}`},actionTypes_default=ActionTypes;function isPlainObject$4(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function createStore(t,e,n){if(typeof t!="function")throw new Error(formatProdErrorMessage$1(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage$1(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(formatProdErrorMessage$1(1));return n(createStore)(t,e)}let i=t,l=e,f=new Map,p=f,b=0,w=!1;function v(){p===f&&(p=new Map,f.forEach((T,O)=>{p.set(O,T)}))}function g(){if(w)throw new Error(formatProdErrorMessage$1(3));return l}function u(T){if(typeof T!="function")throw new Error(formatProdErrorMessage$1(4));if(w)throw new Error(formatProdErrorMessage$1(5));let O=!0;v();const j=b++;return p.set(j,T),function(){if(O){if(w)throw new Error(formatProdErrorMessage$1(6));O=!1,v(),p.delete(j),f=null}}}function o(T){if(!isPlainObject$4(T))throw new Error(formatProdErrorMessage$1(7));if(typeof T.type>"u")throw new Error(formatProdErrorMessage$1(8));if(typeof T.type!="string")throw new Error(formatProdErrorMessage$1(17));if(w)throw new Error(formatProdErrorMessage$1(9));try{w=!0,l=i(l,T)}finally{w=!1}return(f=p).forEach(j=>{j()}),T}function h(T){if(typeof T!="function")throw new Error(formatProdErrorMessage$1(10));i=T,o({type:actionTypes_default.REPLACE})}function _(){const T=u;return{subscribe(O){if(typeof O!="object"||O===null)throw new Error(formatProdErrorMessage$1(11));function j(){const D=O;D.next&&D.next(g())}return j(),{unsubscribe:T(j)}},[symbol_observable_default](){return this}}}return o({type:actionTypes_default.INIT}),{dispatch:o,subscribe:u,getState:g,replaceReducer:h,[symbol_observable_default]:_}}function assertReducerShape(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:actionTypes_default.INIT})>"u")throw new Error(formatProdErrorMessage$1(12));if(typeof n(void 0,{type:actionTypes_default.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(formatProdErrorMessage$1(13))})}function combineReducers(t){const e=Object.keys(t),n={};for(let f=0;f<e.length;f++){const p=e[f];typeof t[p]=="function"&&(n[p]=t[p])}const i=Object.keys(n);let l;try{assertReducerShape(n)}catch(f){l=f}return function(p={},b){if(l)throw l;let w=!1;const v={};for(let g=0;g<i.length;g++){const u=i[g],o=n[u],h=p[u],_=o(h,b);if(typeof _>"u")throw b&&b.type,new Error(formatProdErrorMessage$1(14));v[u]=_,w=w||_!==h}return w=w||i.length!==Object.keys(p).length,w?v:p}}function compose$1(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...i)=>e(n(...i)))}function applyMiddleware(...t){return e=>(n,i)=>{const l=e(n,i);let f=()=>{throw new Error(formatProdErrorMessage$1(15))};const p={getState:l.getState,dispatch:(w,...v)=>f(w,...v)},b=t.map(w=>w(p));return f=compose$1(...b)(l.dispatch),{...l,dispatch:f}}}function isAction(t){return isPlainObject$4(t)&&"type"in t&&typeof t.type=="string"}var NOTHING=Symbol.for("immer-nothing"),DRAFTABLE=Symbol.for("immer-draftable"),DRAFT_STATE=Symbol.for("immer-state");function die(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf=Object.getPrototypeOf;function isDraft(t){return!!t&&!!t[DRAFT_STATE]}function isDraftable(t){var e;return t?isPlainObject$3(t)||Array.isArray(t)||!!t[DRAFTABLE]||!!((e=t.constructor)!=null&&e[DRAFTABLE])||isMap(t)||isSet(t):!1}var objectCtorString=Object.prototype.constructor.toString(),cachedCtorStrings=new WeakMap;function isPlainObject$3(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let i=cachedCtorStrings.get(n);return i===void 0&&(i=Function.toString.call(n),cachedCtorStrings.set(n,i)),i===objectCtorString}function each(t,e,n=!0){getArchtype(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(l=>{e(l,t[l],t)}):t.forEach((i,l)=>e(l,i,t))}function getArchtype(t){const e=t[DRAFT_STATE];return e?e.type_:Array.isArray(t)?1:isMap(t)?2:isSet(t)?3:0}function has(t,e){return getArchtype(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function set(t,e,n){const i=getArchtype(t);i===2?t.set(e,n):i===3?t.add(n):t[e]=n}function is(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function isMap(t){return t instanceof Map}function isSet(t){return t instanceof Set}function latest(t){return t.copy_||t.base_}function shallowCopy(t,e){if(isMap(t))return new Map(t);if(isSet(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=isPlainObject$3(t);if(e===!0||e==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(t);delete i[DRAFT_STATE];let l=Reflect.ownKeys(i);for(let f=0;f<l.length;f++){const p=l[f],b=i[p];b.writable===!1&&(b.writable=!0,b.configurable=!0),(b.get||b.set)&&(i[p]={configurable:!0,writable:!0,enumerable:b.enumerable,value:t[p]})}return Object.create(getPrototypeOf(t),i)}else{const i=getPrototypeOf(t);if(i!==null&&n)return{...t};const l=Object.create(i);return Object.assign(l,t)}}function freeze(t,e=!1){return isFrozen(t)||isDraft(t)||!isDraftable(t)||(getArchtype(t)>1&&Object.defineProperties(t,{set:dontMutateMethodOverride,add:dontMutateMethodOverride,clear:dontMutateMethodOverride,delete:dontMutateMethodOverride}),Object.freeze(t),e&&Object.values(t).forEach(n=>freeze(n,!0))),t}function dontMutateFrozenCollections(){die(2)}var dontMutateMethodOverride={value:dontMutateFrozenCollections};function isFrozen(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var plugins={};function getPlugin(t){const e=plugins[t];return e||die(0,t),e}var currentScope;function getCurrentScope(){return currentScope}function createScope(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope(t,e){e&&(getPlugin("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function revokeScope(t){leaveScope(t),t.drafts_.forEach(revokeDraft),t.drafts_=null}function leaveScope(t){t===currentScope&&(currentScope=t.parent_)}function enterScope(t){return currentScope=createScope(currentScope,t)}function revokeDraft(t){const e=t[DRAFT_STATE];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function processResult(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[DRAFT_STATE].modified_&&(revokeScope(e),die(4)),isDraftable(t)&&(t=finalize(e,t),e.parent_||maybeFreeze(e,t)),e.patches_&&getPlugin("Patches").generateReplacementPatches_(n[DRAFT_STATE].base_,t,e.patches_,e.inversePatches_)):t=finalize(e,n,[]),revokeScope(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==NOTHING?t:void 0}function finalize(t,e,n){if(isFrozen(e))return e;const i=t.immer_.shouldUseStrictIteration(),l=e[DRAFT_STATE];if(!l)return each(e,(f,p)=>finalizeProperty(t,l,e,f,p,n),i),e;if(l.scope_!==t)return e;if(!l.modified_)return maybeFreeze(t,l.base_,!0),l.base_;if(!l.finalized_){l.finalized_=!0,l.scope_.unfinalizedDrafts_--;const f=l.copy_;let p=f,b=!1;l.type_===3&&(p=new Set(f),f.clear(),b=!0),each(p,(w,v)=>finalizeProperty(t,l,f,w,v,n,b),i),maybeFreeze(t,f,!1),n&&t.patches_&&getPlugin("Patches").generatePatches_(l,n,t.patches_,t.inversePatches_)}return l.copy_}function finalizeProperty(t,e,n,i,l,f,p){if(l==null||typeof l!="object"&&!p)return;const b=isFrozen(l);if(!(b&&!p)){if(isDraft(l)){const w=f&&e&&e.type_!==3&&!has(e.assigned_,i)?f.concat(i):void 0,v=finalize(t,l,w);if(set(n,i,v),isDraft(v))t.canAutoFreeze_=!1;else return}else p&&n.add(l);if(isDraftable(l)&&!b){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[i]===l&&b)return;finalize(t,l),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&(isMap(n)?n.has(i):Object.prototype.propertyIsEnumerable.call(n,i))&&maybeFreeze(t,l)}}}function maybeFreeze(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&freeze(e,n)}function createProxyProxy(t,e){const n=Array.isArray(t),i={type_:n?1:0,scope_:e?e.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let l=i,f=objectTraps;n&&(l=[i],f=arrayTraps);const{revoke:p,proxy:b}=Proxy.revocable(l,f);return i.draft_=b,i.revoke_=p,b}var objectTraps={get(t,e){if(e===DRAFT_STATE)return t;const n=latest(t);if(!has(n,e))return readPropFromProto(t,n,e);const i=n[e];return t.finalized_||!isDraftable(i)?i:i===peek(t.base_,e)?(prepareCopy(t),t.copy_[e]=createProxy(i,t)):i},has(t,e){return e in latest(t)},ownKeys(t){return Reflect.ownKeys(latest(t))},set(t,e,n){const i=getDescriptorFromProto(latest(t),e);if(i!=null&&i.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const l=peek(latest(t),e),f=l==null?void 0:l[DRAFT_STATE];if(f&&f.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(is(n,l)&&(n!==void 0||has(t.base_,e)))return!0;prepareCopy(t),markChanged(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return peek(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,prepareCopy(t),markChanged(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=latest(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:i.enumerable,value:n[e]}},defineProperty(){die(11)},getPrototypeOf(t){return getPrototypeOf(t.base_)},setPrototypeOf(){die(12)}},arrayTraps={};each(objectTraps,(t,e)=>{arrayTraps[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});arrayTraps.deleteProperty=function(t,e){return arrayTraps.set.call(this,t,e,void 0)};arrayTraps.set=function(t,e,n){return objectTraps.set.call(this,t[0],e,n,t[0])};function peek(t,e){const n=t[DRAFT_STATE];return(n?latest(n):t)[e]}function readPropFromProto(t,e,n){var l;const i=getDescriptorFromProto(e,n);return i?"value"in i?i.value:(l=i.get)==null?void 0:l.call(t.draft_):void 0}function getDescriptorFromProto(t,e){if(!(e in t))return;let n=getPrototypeOf(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=getPrototypeOf(n)}}function markChanged(t){t.modified_||(t.modified_=!0,t.parent_&&markChanged(t.parent_))}function prepareCopy(t){t.copy_||(t.copy_=shallowCopy(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Immer2=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,i)=>{if(typeof e=="function"&&typeof n!="function"){const f=n;n=e;const p=this;return function(w=f,...v){return p.produce(w,g=>n.call(this,g,...v))}}typeof n!="function"&&die(6),i!==void 0&&typeof i!="function"&&die(7);let l;if(isDraftable(e)){const f=enterScope(this),p=createProxy(e,void 0);let b=!0;try{l=n(p),b=!1}finally{b?revokeScope(f):leaveScope(f)}return usePatchesInScope(f,i),processResult(l,f)}else if(!e||typeof e!="object"){if(l=n(e),l===void 0&&(l=e),l===NOTHING&&(l=void 0),this.autoFreeze_&&freeze(l,!0),i){const f=[],p=[];getPlugin("Patches").generateReplacementPatches_(e,l,f,p),i(f,p)}return l}else die(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(p,...b)=>this.produceWithPatches(p,w=>e(w,...b));let i,l;return[this.produce(e,n,(p,b)=>{i=p,l=b}),i,l]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){isDraftable(t)||die(8),isDraft(t)&&(t=current(t));const e=enterScope(this),n=createProxy(t,void 0);return n[DRAFT_STATE].isManual_=!0,leaveScope(e),n}finishDraft(t,e){const n=t&&t[DRAFT_STATE];(!n||!n.isManual_)&&die(9);const{scope_:i}=n;return usePatchesInScope(i,e),processResult(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const l=e[n];if(l.path.length===0&&l.op==="replace"){t=l.value;break}}n>-1&&(e=e.slice(n+1));const i=getPlugin("Patches").applyPatches_;return isDraft(t)?i(t,e):this.produce(t,l=>i(l,e))}};function createProxy(t,e){const n=isMap(t)?getPlugin("MapSet").proxyMap_(t,e):isSet(t)?getPlugin("MapSet").proxySet_(t,e):createProxyProxy(t,e);return(e?e.scope_:getCurrentScope()).drafts_.push(n),n}function current(t){return isDraft(t)||die(10,t),currentImpl(t)}function currentImpl(t){if(!isDraftable(t)||isFrozen(t))return t;const e=t[DRAFT_STATE];let n,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=shallowCopy(t,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else n=shallowCopy(t,!0);return each(n,(l,f)=>{set(n,l,currentImpl(f))},i),e&&(e.finalized_=!1),n}var immer=new Immer2,produce=immer.produce,setUseStrictIteration=immer.setUseStrictIteration.bind(immer);function castDraft(t){return t}function createThunkMiddleware(t){return({dispatch:n,getState:i})=>l=>f=>typeof f=="function"?f(n,i,t):l(f)}var thunk=createThunkMiddleware(),withExtraArgument=createThunkMiddleware,composeWithDevTools=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?compose$1:compose$1.apply(null,arguments)};function createAction(t,e){function n(...i){if(e){let l=e(...i);if(!l)throw new Error(formatProdErrorMessage(0));return{type:t,payload:l.payload,..."meta"in l&&{meta:l.meta},..."error"in l&&{error:l.error}}}return{type:t,payload:i[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=i=>isAction(i)&&i.type===t,n}var Tuple=class lo extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,lo.prototype)}static get[Symbol.species](){return lo}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new lo(...e[0].concat(this)):new lo(...e.concat(this))}};function freezeDraftable(t){return isDraftable(t)?produce(t,()=>{}):t}function getOrInsertComputed(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function isBoolean(t){return typeof t=="boolean"}var buildGetDefaultMiddleware=()=>function(e){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:l=!0,actionCreatorCheck:f=!0}=e??{};let p=new Tuple;return n&&(isBoolean(n)?p.push(thunk):p.push(withExtraArgument(n.extraArgument))),p},SHOULD_AUTOBATCH="RTK_autoBatch",prepareAutoBatched=()=>t=>({payload:t,meta:{[SHOULD_AUTOBATCH]:!0}}),createQueueWithTimer=t=>e=>{setTimeout(e,t)},autoBatchEnhancer=(t={type:"raf"})=>e=>(...n)=>{const i=e(...n);let l=!0,f=!1,p=!1;const b=new Set,w=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:createQueueWithTimer(10):t.type==="callback"?t.queueNotification:createQueueWithTimer(t.timeout),v=()=>{p=!1,f&&(f=!1,b.forEach(g=>g()))};return Object.assign({},i,{subscribe(g){const u=()=>l&&g(),o=i.subscribe(u);return b.add(g),()=>{o(),b.delete(g)}},dispatch(g){var u;try{return l=!((u=g==null?void 0:g.meta)!=null&&u[SHOULD_AUTOBATCH]),f=!l,f&&(p||(p=!0,w(v))),i.dispatch(g)}finally{l=!0}}})},buildGetDefaultEnhancers=t=>function(n){const{autoBatch:i=!0}=n??{};let l=new Tuple(t);return i&&l.push(autoBatchEnhancer(typeof i=="object"?i:void 0)),l};function configureStore(t){const e=buildGetDefaultMiddleware(),{reducer:n=void 0,middleware:i,devTools:l=!0,preloadedState:f=void 0,enhancers:p=void 0}=t||{};let b;if(typeof n=="function")b=n;else if(isPlainObject$4(n))b=combineReducers(n);else throw new Error(formatProdErrorMessage(1));let w;typeof i=="function"?w=i(e):w=e();let v=compose$1;l&&(v=composeWithDevTools({trace:!1,...typeof l=="object"&&l}));const g=applyMiddleware(...w),u=buildGetDefaultEnhancers(g);let o=typeof p=="function"?p(u):u();const h=v(...o);return createStore(b,f,h)}function executeReducerBuilderCallback(t){const e={},n=[];let i;const l={addCase(f,p){const b=typeof f=="string"?f:f.type;if(!b)throw new Error(formatProdErrorMessage(28));if(b in e)throw new Error(formatProdErrorMessage(29));return e[b]=p,l},addAsyncThunk(f,p){return p.pending&&(e[f.pending.type]=p.pending),p.rejected&&(e[f.rejected.type]=p.rejected),p.fulfilled&&(e[f.fulfilled.type]=p.fulfilled),p.settled&&n.push({matcher:f.settled,reducer:p.settled}),l},addMatcher(f,p){return n.push({matcher:f,reducer:p}),l},addDefaultCase(f){return i=f,l}};return t(l),[e,n,i]}setUseStrictIteration(!1);function isStateFunction(t){return typeof t=="function"}function createReducer(t,e){let[n,i,l]=executeReducerBuilderCallback(e),f;if(isStateFunction(t))f=()=>freezeDraftable(t());else{const b=freezeDraftable(t);f=()=>b}function p(b=f(),w){let v=[n[w.type],...i.filter(({matcher:g})=>g(w)).map(({reducer:g})=>g)];return v.filter(g=>!!g).length===0&&(v=[l]),v.reduce((g,u)=>{if(u)if(isDraft(g)){const h=u(g,w);return h===void 0?g:h}else{if(isDraftable(g))return produce(g,o=>u(o,w));{const o=u(g,w);if(o===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return o}}return g},b)}return p.getInitialState=f,p}var urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nanoid=(t=21)=>{let e="",n=t;for(;n--;)e+=urlAlphabet[Math.random()*64|0];return e},asyncThunkSymbol=Symbol.for("rtk-slice-createasyncthunk");function getType(t,e){return`${t}/${e}`}function buildCreateSlice({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[asyncThunkSymbol];return function(l){const{name:f,reducerPath:p=f}=l;if(!f)throw new Error(formatProdErrorMessage(11));const b=(typeof l.reducers=="function"?l.reducers(buildReducerCreators()):l.reducers)||{},w=Object.keys(b),v={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},g={addCase(D,R){const I=typeof D=="string"?D:D.type;if(!I)throw new Error(formatProdErrorMessage(12));if(I in v.sliceCaseReducersByType)throw new Error(formatProdErrorMessage(13));return v.sliceCaseReducersByType[I]=R,g},addMatcher(D,R){return v.sliceMatchers.push({matcher:D,reducer:R}),g},exposeAction(D,R){return v.actionCreators[D]=R,g},exposeCaseReducer(D,R){return v.sliceCaseReducersByName[D]=R,g}};w.forEach(D=>{const R=b[D],I={reducerName:D,type:getType(f,D),createNotation:typeof l.reducers=="function"};isAsyncThunkSliceReducerDefinition(R)?handleThunkCaseReducerDefinition(I,R,g,e):handleNormalReducerDefinition(I,R,g)});function u(){const[D={},R=[],I=void 0]=typeof l.extraReducers=="function"?executeReducerBuilderCallback(l.extraReducers):[l.extraReducers],$={...D,...v.sliceCaseReducersByType};return createReducer(l.initialState,F=>{for(let L in $)F.addCase(L,$[L]);for(let L of v.sliceMatchers)F.addMatcher(L.matcher,L.reducer);for(let L of R)F.addMatcher(L.matcher,L.reducer);I&&F.addDefaultCase(I)})}const o=D=>D,h=new Map,_=new WeakMap;let S;function T(D,R){return S||(S=u()),S(D,R)}function O(){return S||(S=u()),S.getInitialState()}function j(D,R=!1){function I(F){let L=F[D];return typeof L>"u"&&R&&(L=getOrInsertComputed(_,I,O)),L}function $(F=o){const L=getOrInsertComputed(h,R,()=>new WeakMap);return getOrInsertComputed(L,F,()=>{const V={};for(const[Y,Q]of Object.entries(l.selectors??{}))V[Y]=wrapSelector(Q,F,()=>getOrInsertComputed(_,F,O),R);return V})}return{reducerPath:D,getSelectors:$,get selectors(){return $(I)},selectSlice:I}}const C={name:f,reducer:T,actions:v.actionCreators,caseReducers:v.sliceCaseReducersByName,getInitialState:O,...j(p),injectInto(D,{reducerPath:R,...I}={}){const $=R??p;return D.inject({reducerPath:$,reducer:T},I),{...C,...j($,!0)}}};return C}}function wrapSelector(t,e,n,i){function l(f,...p){let b=e(f);return typeof b>"u"&&i&&(b=n()),t(b,...p)}return l.unwrapped=t,l}var createSlice=buildCreateSlice();function buildReducerCreators(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function handleNormalReducerDefinition({type:t,reducerName:e,createNotation:n},i,l){let f,p;if("reducer"in i){if(n&&!isCaseReducerWithPrepareDefinition(i))throw new Error(formatProdErrorMessage(17));f=i.reducer,p=i.prepare}else f=i;l.addCase(t,f).exposeCaseReducer(e,f).exposeAction(e,p?createAction(t,p):createAction(t))}function isAsyncThunkSliceReducerDefinition(t){return t._reducerDefinitionType==="asyncThunk"}function isCaseReducerWithPrepareDefinition(t){return t._reducerDefinitionType==="reducerWithPrepare"}function handleThunkCaseReducerDefinition({type:t,reducerName:e},n,i,l){if(!l)throw new Error(formatProdErrorMessage(18));const{payloadCreator:f,fulfilled:p,pending:b,rejected:w,settled:v,options:g}=n,u=l(t,f,g);i.exposeAction(e,u),p&&i.addCase(u.fulfilled,p),b&&i.addCase(u.pending,b),w&&i.addCase(u.rejected,w),v&&i.addMatcher(u.settled,v),i.exposeCaseReducer(e,{fulfilled:p||noop$3,pending:b||noop$3,rejected:w||noop$3,settled:v||noop$3})}function noop$3(){}var task="task",listener="listener",completed="completed",cancelled="cancelled",taskCancelled=`task-${cancelled}`,taskCompleted=`task-${completed}`,listenerCancelled=`${listener}-${cancelled}`,listenerCompleted=`${listener}-${completed}`,TaskAbortError=class{constructor(t){De(this,"name","TaskAbortError");De(this,"message");this.code=t,this.message=`${task} ${cancelled} (reason: ${t})`}},assertFunction=(t,e)=>{if(typeof t!="function")throw new TypeError(formatProdErrorMessage(32))},noop2=()=>{},catchRejection=(t,e=noop2)=>(t.catch(e),t),addAbortSignalListener=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),abortControllerWithReason=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},validateActive=t=>{if(t.aborted){const{reason:e}=t;throw new TaskAbortError(e)}};function raceWithSignal(t,e){let n=noop2;return new Promise((i,l)=>{const f=()=>l(new TaskAbortError(t.reason));if(t.aborted){f();return}n=addAbortSignalListener(t,f),e.finally(()=>n()).then(i,l)}).finally(()=>{n=noop2})}var runTask=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof TaskAbortError?"cancelled":"rejected",error:n}}finally{e==null||e()}},createPause=t=>e=>catchRejection(raceWithSignal(t,e).then(n=>(validateActive(t),n))),createDelay=t=>{const e=createPause(t);return n=>e(new Promise(i=>setTimeout(i,n)))},{assign}=Object,INTERNAL_NIL_TOKEN={},alm="listenerMiddleware",createFork=(t,e)=>{const n=i=>addAbortSignalListener(t,()=>abortControllerWithReason(i,t.reason));return(i,l)=>{assertFunction(i);const f=new AbortController;n(f);const p=runTask(async()=>{validateActive(t),validateActive(f.signal);const b=await i({pause:createPause(f.signal),delay:createDelay(f.signal),signal:f.signal});return validateActive(f.signal),b},()=>abortControllerWithReason(f,taskCompleted));return l!=null&&l.autoJoin&&e.push(p.catch(noop2)),{result:createPause(t)(p),cancel(){abortControllerWithReason(f,taskCancelled)}}}},createTakePattern=(t,e)=>{const n=async(i,l)=>{validateActive(e);let f=()=>{};const b=[new Promise((w,v)=>{let g=t({predicate:i,effect:(u,o)=>{o.unsubscribe(),w([u,o.getState(),o.getOriginalState()])}});f=()=>{g(),v()}})];l!=null&&b.push(new Promise(w=>setTimeout(w,l,null)));try{const w=await raceWithSignal(e,Promise.race(b));return validateActive(e),w}finally{f()}};return(i,l)=>catchRejection(n(i,l))},getListenerEntryPropsFrom=t=>{let{type:e,actionCreator:n,matcher:i,predicate:l,effect:f}=t;if(e)l=createAction(e).match;else if(n)e=n.type,l=n.match;else if(i)l=i;else if(!l)throw new Error(formatProdErrorMessage(21));return assertFunction(f),{predicate:l,type:e,effect:f}},createListenerEntry=assign(t=>{const{type:e,predicate:n,effect:i}=getListenerEntryPropsFrom(t);return{id:nanoid(),effect:i,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(formatProdErrorMessage(22))}}},{withTypes:()=>createListenerEntry}),findListenerEntry=(t,e)=>{const{type:n,effect:i,predicate:l}=getListenerEntryPropsFrom(e);return Array.from(t.values()).find(f=>(typeof n=="string"?f.type===n:f.predicate===l)&&f.effect===i)},cancelActiveListeners=t=>{t.pending.forEach(e=>{abortControllerWithReason(e,listenerCancelled)})},createClearListenerMiddleware=(t,e)=>()=>{for(const n of e.keys())cancelActiveListeners(n);t.clear()},safelyNotifyError=(t,e,n)=>{try{t(e,n)}catch(i){setTimeout(()=>{throw i},0)}},addListener=assign(createAction(`${alm}/add`),{withTypes:()=>addListener}),clearAllListeners=createAction(`${alm}/removeAll`),removeListener=assign(createAction(`${alm}/remove`),{withTypes:()=>removeListener}),defaultErrorHandler=(...t)=>{console.error(`${alm}/error`,...t)},createListenerMiddleware=(t={})=>{const e=new Map,n=new Map,i=h=>{const _=n.get(h)??0;n.set(h,_+1)},l=h=>{const _=n.get(h)??1;_===1?n.delete(h):n.set(h,_-1)},{extra:f,onError:p=defaultErrorHandler}=t;assertFunction(p);const b=h=>(h.unsubscribe=()=>e.delete(h.id),e.set(h.id,h),_=>{h.unsubscribe(),_!=null&&_.cancelActive&&cancelActiveListeners(h)}),w=h=>{const _=findListenerEntry(e,h)??createListenerEntry(h);return b(_)};assign(w,{withTypes:()=>w});const v=h=>{const _=findListenerEntry(e,h);return _&&(_.unsubscribe(),h.cancelActive&&cancelActiveListeners(_)),!!_};assign(v,{withTypes:()=>v});const g=async(h,_,S,T)=>{const O=new AbortController,j=createTakePattern(w,O.signal),C=[];try{h.pending.add(O),i(h),await Promise.resolve(h.effect(_,assign({},S,{getOriginalState:T,condition:(D,R)=>j(D,R).then(Boolean),take:j,delay:createDelay(O.signal),pause:createPause(O.signal),extra:f,signal:O.signal,fork:createFork(O.signal,C),unsubscribe:h.unsubscribe,subscribe:()=>{e.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((D,R,I)=>{D!==O&&(abortControllerWithReason(D,listenerCancelled),I.delete(D))})},cancel:()=>{abortControllerWithReason(O,listenerCancelled),h.pending.delete(O)},throwIfCancelled:()=>{validateActive(O.signal)}})))}catch(D){D instanceof TaskAbortError||safelyNotifyError(p,D,{raisedBy:"effect"})}finally{await Promise.all(C),abortControllerWithReason(O,listenerCompleted),l(h),h.pending.delete(O)}},u=createClearListenerMiddleware(e,n);return{middleware:h=>_=>S=>{if(!isAction(S))return _(S);if(addListener.match(S))return w(S.payload);if(clearAllListeners.match(S)){u();return}if(removeListener.match(S))return v(S.payload);let T=h.getState();const O=()=>{if(T===INTERNAL_NIL_TOKEN)throw new Error(formatProdErrorMessage(23));return T};let j;try{if(j=_(S),e.size>0){const C=h.getState(),D=Array.from(e.values());for(const R of D){let I=!1;try{I=R.predicate(S,C,T)}catch($){I=!1,safelyNotifyError(p,$,{raisedBy:"predicate"})}I&&g(R,S,h,O)}}}finally{T=INTERNAL_NIL_TOKEN}return j},startListening:w,stopListening:v,clearListeners:u}};function formatProdErrorMessage(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var initialState$a={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},chartLayoutSlice=createSlice({name:"chartLayout",initialState:initialState$a,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,i,l,f;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(i=e.payload.right)!==null&&i!==void 0?i:0,t.margin.bottom=(l=e.payload.bottom)!==null&&l!==void 0?l:0,t.margin.left=(f=e.payload.left)!==null&&f!==void 0?f:0},setScale(t,e){t.scale=e.payload}}}),{setMargin,setLayout,setChartSize,setScale}=chartLayoutSlice.actions,chartLayoutReducer=chartLayoutSlice.reducer;function ownKeys$A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$A(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$A(Object(n),!0).forEach(function(i){_defineProperty$C(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$A(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$C(t,e,n){return(e=_toPropertyKey$C(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$C(t){var e=_toPrimitive$C(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$C(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RADIAN=Math.PI/180,radianToDegree=t=>t*180/Math.PI,polarToCartesian=(t,e,n,i)=>({x:t+Math.cos(-RADIAN*i)*n,y:e+Math.sin(-RADIAN*i)*n}),getMaxRadius=function t(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(i.left||0)-(i.right||0)),Math.abs(n-(i.top||0)-(i.bottom||0)))/2},distanceBetweenPoints=(t,e)=>{var{x:n,y:i}=t,{x:l,y:f}=e;return Math.sqrt((n-l)**2+(i-f)**2)},getAngleOfPoint=(t,e)=>{var{x:n,y:i}=t,{cx:l,cy:f}=e,p=distanceBetweenPoints({x:n,y:i},{x:l,y:f});if(p<=0)return{radius:p,angle:0};var b=(n-l)/p,w=Math.acos(b);return i>f&&(w=2*Math.PI-w),{radius:p,angle:radianToDegree(w),angleInRadian:w}},formatAngleOfSector=t=>{var{startAngle:e,endAngle:n}=t,i=Math.floor(e/360),l=Math.floor(n/360),f=Math.min(i,l);return{startAngle:e-f*360,endAngle:n-f*360}},reverseFormatAngleOfSector=(t,e)=>{var{startAngle:n,endAngle:i}=e,l=Math.floor(n/360),f=Math.floor(i/360),p=Math.min(l,f);return t+p*360},inRangeOfSector=(t,e)=>{var{x:n,y:i}=t,{radius:l,angle:f}=getAngleOfPoint({x:n,y:i},e),{innerRadius:p,outerRadius:b}=e;if(l<p||l>b||l===0)return null;var{startAngle:w,endAngle:v}=formatAngleOfSector(e),g=f,u;if(w<=v){for(;g>v;)g-=360;for(;g<w;)g+=360;u=g>=w&&g<=v}else{for(;g>w;)g-=360;for(;g<v;)g+=360;u=g>=v&&g<=w}return u?_objectSpread$A(_objectSpread$A({},e),{},{radius:l,angle:reverseFormatAngleOfSector(g,e)}):null};function getSliced(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function ownKeys$z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$z(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$z(Object(n),!0).forEach(function(i){_defineProperty$B(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$z(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$B(t,e,n){return(e=_toPropertyKey$B(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$B(t){var e=_toPrimitive$B(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$B(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function getValueByDataKey(t,e,n){return isNullish(t)||isNullish(e)?n:isNumOrStr(e)?get(t,e,n):typeof e=="function"?e(t):n}var calculateActiveTickIndex=(t,e,n,i,l)=>{var f,p=-1,b=(f=e==null?void 0:e.length)!==null&&f!==void 0?f:0;if(b<=1||t==null)return 0;if(i==="angleAxis"&&l!=null&&Math.abs(Math.abs(l[1]-l[0])-360)<=1e-6)for(var w=0;w<b;w++){var v=w>0?n[w-1].coordinate:n[b-1].coordinate,g=n[w].coordinate,u=w>=b-1?n[0].coordinate:n[w+1].coordinate,o=void 0;if(mathSign(g-v)!==mathSign(u-g)){var h=[];if(mathSign(u-g)===mathSign(l[1]-l[0])){o=u;var _=g+l[1]-l[0];h[0]=Math.min(_,(_+v)/2),h[1]=Math.max(_,(_+v)/2)}else{o=v;var S=u+l[1]-l[0];h[0]=Math.min(g,(S+g)/2),h[1]=Math.max(g,(S+g)/2)}var T=[Math.min(g,(o+g)/2),Math.max(g,(o+g)/2)];if(t>T[0]&&t<=T[1]||t>=h[0]&&t<=h[1]){({index:p}=n[w]);break}}else{var O=Math.min(v,u),j=Math.max(v,u);if(t>(O+g)/2&&t<=(j+g)/2){({index:p}=n[w]);break}}}else if(e){for(var C=0;C<b;C++)if(C===0&&t<=(e[C].coordinate+e[C+1].coordinate)/2||C>0&&C<b-1&&t>(e[C].coordinate+e[C-1].coordinate)/2&&t<=(e[C].coordinate+e[C+1].coordinate)/2||C===b-1&&t>(e[C].coordinate+e[C-1].coordinate)/2){({index:p}=e[C]);break}}return p},appendOffsetOfLegend=(t,e,n)=>{if(e&&n){var{width:i,height:l}=n,{align:f,verticalAlign:p,layout:b}=e;if((b==="vertical"||b==="horizontal"&&p==="middle")&&f!=="center"&&isNumber(t[f]))return _objectSpread$z(_objectSpread$z({},t),{},{[f]:t[f]+(i||0)});if((b==="horizontal"||b==="vertical"&&f==="center")&&p!=="middle"&&isNumber(t[p]))return _objectSpread$z(_objectSpread$z({},t),{},{[p]:t[p]+(l||0)})}return t},isCategoricalAxis=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",getCoordinatesOfGrid=(t,e,n,i)=>{if(i)return t.map(b=>b.coordinate);var l,f,p=t.map(b=>(b.coordinate===e&&(l=!0),b.coordinate===n&&(f=!0),b.coordinate));return l||p.push(e),f||p.push(n),p},getTicksOfAxis=(t,e,n)=>{if(!t)return null;var{duplicateDomain:i,type:l,range:f,scale:p,realScaleType:b,isCategorical:w,categoricalDomain:v,tickCount:g,ticks:u,niceTicks:o,axisType:h}=t;if(!p)return null;var _=b==="scaleBand"&&p.bandwidth?p.bandwidth()/2:2,S=l==="category"&&p.bandwidth?p.bandwidth()/_:0;if(S=h==="angleAxis"&&f&&f.length>=2?mathSign(f[0]-f[1])*2*S:S,u||o){var T=(u||o||[]).map((O,j)=>{var C=i?i.indexOf(O):O;return{coordinate:p(C)+S,value:O,offset:S,index:j}});return T.filter(O=>!isNan(O.coordinate))}return w&&v?v.map((O,j)=>({coordinate:p(O)+S,value:O,index:j,offset:S})):p.ticks&&g!=null?p.ticks(g).map((O,j)=>({coordinate:p(O)+S,value:O,offset:S,index:j})):p.domain().map((O,j)=>({coordinate:p(O)+S,value:i?i[O]:O,index:j,offset:S}))},EPS=1e-4,checkDomainOfScale=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,i=t.range(),l=Math.min(i[0],i[1])-EPS,f=Math.max(i[0],i[1])+EPS,p=t(e[0]),b=t(e[n-1]);(p<l||p>f||b<l||b>f)&&t.domain([e[0],e[n-1]])}},truncateByDomain=(t,e)=>{if(!e||e.length!==2||!isNumber(e[0])||!isNumber(e[1]))return t;var n=Math.min(e[0],e[1]),i=Math.max(e[0],e[1]),l=[t[0],t[1]];return(!isNumber(t[0])||t[0]<n)&&(l[0]=n),(!isNumber(t[1])||t[1]>i)&&(l[1]=i),l[0]>i&&(l[0]=i),l[1]<n&&(l[1]=n),l},offsetSign=t=>{var e=t.length;if(!(e<=0))for(var n=0,i=t[0].length;n<i;++n)for(var l=0,f=0,p=0;p<e;++p){var b=isNan(t[p][n][1])?t[p][n][0]:t[p][n][1];b>=0?(t[p][n][0]=l,t[p][n][1]=l+b,l=t[p][n][1]):(t[p][n][0]=f,t[p][n][1]=f+b,f=t[p][n][1])}},offsetPositive=t=>{var e=t.length;if(!(e<=0))for(var n=0,i=t[0].length;n<i;++n)for(var l=0,f=0;f<e;++f){var p=isNan(t[f][n][1])?t[f][n][0]:t[f][n][1];p>=0?(t[f][n][0]=l,t[f][n][1]=l+p,l=t[f][n][1]):(t[f][n][0]=0,t[f][n][1]=0)}},STACK_OFFSET_MAP={sign:offsetSign,expand:stackOffsetExpand,none:stackOffsetNone,silhouette:stackOffsetSilhouette,wiggle:stackOffsetWiggle,positive:offsetPositive},getStackedData=(t,e,n)=>{var i=STACK_OFFSET_MAP[n],l=shapeStack().keys(e).value((f,p)=>+getValueByDataKey(f,p,0)).order(stackOrderNone).offset(i);return l(t)};function getNormalizedStackId(t){return t==null?void 0:String(t)}function getCateCoordinateOfLine(t){var{axis:e,ticks:n,bandSize:i,entry:l,index:f,dataKey:p}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!isNullish(l[e.dataKey])){var b=findEntryInArray(n,"value",l[e.dataKey]);if(b)return b.coordinate+i/2}return n[f]?n[f].coordinate+i/2:null}var w=getValueByDataKey(l,isNullish(p)?e.dataKey:p);return isNullish(w)?null:e.scale(w)}var getCateCoordinateOfBar=t=>{var{axis:e,ticks:n,offset:i,bandSize:l,entry:f,index:p}=t;if(e.type==="category")return n[p]?n[p].coordinate+i:null;var b=getValueByDataKey(f,e.dataKey,e.scale.domain()[p]);return isNullish(b)?null:e.scale(b)-l/2+i},getBaseValueOfBar=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var i=Math.min(n[0],n[1]),l=Math.max(n[0],n[1]);return i<=0&&l>=0?0:l<0?l:i}return n[0]},getDomainOfSingle=t=>{var e=t.flat(2).filter(isNumber);return[Math.min(...e),Math.max(...e)]},makeDomainFinite=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],getDomainOfStackGroups=(t,e,n)=>{if(t!=null)return makeDomainFinite(Object.keys(t).reduce((i,l)=>{var f=t[l],{stackedData:p}=f,b=p.reduce((w,v)=>{var g=getSliced(v,e,n),u=getDomainOfSingle(g);return[Math.min(w[0],u[0]),Math.max(w[1],u[1])]},[1/0,-1/0]);return[Math.min(b[0],i[0]),Math.max(b[1],i[1])]},[1/0,-1/0]))},MIN_VALUE_REG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MAX_VALUE_REG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,getBandSizeOfAxis=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&e&&e.length>=2){for(var l=sortBy(e,g=>g.coordinate),f=1/0,p=1,b=l.length;p<b;p++){var w=l[p],v=l[p-1];f=Math.min((w.coordinate||0)-(v.coordinate||0),f)}return f===1/0?0:f}return n?void 0:0};function getTooltipEntry(t){var{tooltipEntrySettings:e,dataKey:n,payload:i,value:l,name:f}=t;return _objectSpread$z(_objectSpread$z({},e),{},{dataKey:n,payload:i,value:l,name:f})}function getTooltipNameProp(t,e){if(t)return String(t);if(typeof e=="string")return e}function inRange(t,e,n,i,l){if(n==="horizontal"||n==="vertical"){var f=t>=l.left&&t<=l.left+l.width&&e>=l.top&&e<=l.top+l.height;return f?{x:t,y:e}:null}return i?inRangeOfSector({x:t,y:e},i):null}var getActiveCoordinate=(t,e,n,i)=>{var l=e.find(v=>v&&v.index===n);if(l){if(t==="horizontal")return{x:l.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:l.coordinate};if(t==="centric"){var f=l.coordinate,{radius:p}=i;return _objectSpread$z(_objectSpread$z(_objectSpread$z({},i),polarToCartesian(i.cx,i.cy,p,f)),{},{angle:f,radius:p})}var b=l.coordinate,{angle:w}=i;return _objectSpread$z(_objectSpread$z(_objectSpread$z({},i),polarToCartesian(i.cx,i.cy,b,w)),{},{angle:w,radius:b})}return{x:0,y:0}},calculateTooltipPos=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,selectChartWidth=t=>t.layout.width,selectChartHeight=t=>t.layout.height,selectContainerScale=t=>t.layout.scale,selectMargin=t=>t.layout.margin,selectAllXAxes=createSelector(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),selectAllYAxes=createSelector(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),DATA_ITEM_INDEX_ATTRIBUTE_NAME="data-recharts-item-index",DATA_ITEM_DATAKEY_ATTRIBUTE_NAME="data-recharts-item-data-key",DEFAULT_Y_AXIS_WIDTH=60;function ownKeys$y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$y(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$y(Object(n),!0).forEach(function(i){_defineProperty$A(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$y(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$A(t,e,n){return(e=_toPropertyKey$A(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$A(t){var e=_toPrimitive$A(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$A(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var selectBrushHeight=t=>t.brush.height;function selectLeftAxesOffset(t){var e=selectAllYAxes(t);return e.reduce((n,i)=>{if(i.orientation==="left"&&!i.mirror&&!i.hide){var l=typeof i.width=="number"?i.width:DEFAULT_Y_AXIS_WIDTH;return n+l}return n},0)}function selectRightAxesOffset(t){var e=selectAllYAxes(t);return e.reduce((n,i)=>{if(i.orientation==="right"&&!i.mirror&&!i.hide){var l=typeof i.width=="number"?i.width:DEFAULT_Y_AXIS_WIDTH;return n+l}return n},0)}function selectTopAxesOffset(t){var e=selectAllXAxes(t);return e.reduce((n,i)=>i.orientation==="top"&&!i.mirror&&!i.hide?n+i.height:n,0)}function selectBottomAxesOffset(t){var e=selectAllXAxes(t);return e.reduce((n,i)=>i.orientation==="bottom"&&!i.mirror&&!i.hide?n+i.height:n,0)}var selectChartOffsetInternal=createSelector([selectChartWidth,selectChartHeight,selectMargin,selectBrushHeight,selectLeftAxesOffset,selectRightAxesOffset,selectTopAxesOffset,selectBottomAxesOffset,selectLegendSettings,selectLegendSize],(t,e,n,i,l,f,p,b,w,v)=>{var g={left:(n.left||0)+l,right:(n.right||0)+f},u={top:(n.top||0)+p,bottom:(n.bottom||0)+b},o=_objectSpread$y(_objectSpread$y({},u),g),h=o.bottom;o.bottom+=i,o=appendOffsetOfLegend(o,w,v);var _=t-o.left-o.right,S=e-o.top-o.bottom;return _objectSpread$y(_objectSpread$y({brushBottom:h},o),{},{width:Math.max(_,0),height:Math.max(S,0)})}),selectChartViewBox=createSelector(selectChartOffsetInternal,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),selectAxisViewBox=createSelector(selectChartWidth,selectChartHeight,(t,e)=>({x:0,y:0,width:t,height:e})),PanoramaContext=reactExports.createContext(null),useIsPanorama=()=>reactExports.useContext(PanoramaContext)!=null,selectBrushSettings=t=>t.brush,selectBrushDimensions=createSelector([selectBrushSettings,selectChartOffsetInternal,selectMargin],(t,e,n)=>({height:t.height,x:isNumber(t.x)?t.x:e.left,y:isNumber(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:isNumber(t.width)?t.width:e.width})),throttle$2={},debounce$1={},debounce={},hasRequiredDebounce$1;function requireDebounce$1(){return hasRequiredDebounce$1||(hasRequiredDebounce$1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i,{signal:l,edges:f}={}){let p,b=null;const w=f!=null&&f.includes("leading"),v=f==null||f.includes("trailing"),g=()=>{b!==null&&(n.apply(p,b),p=void 0,b=null)},u=()=>{v&&g(),S()};let o=null;const h=()=>{o!=null&&clearTimeout(o),o=setTimeout(()=>{o=null,u()},i)},_=()=>{o!==null&&(clearTimeout(o),o=null)},S=()=>{_(),p=void 0,b=null},T=()=>{g()},O=function(...j){if(l!=null&&l.aborted)return;p=this,b=j;const C=o==null;h(),w&&C&&g()};return O.schedule=h,O.cancel=S,O.flush=T,l==null||l.addEventListener("abort",S,{once:!0}),O}t.debounce=e})(debounce)),debounce}var hasRequiredDebounce;function requireDebounce(){return hasRequiredDebounce||(hasRequiredDebounce=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireDebounce$1();function n(i,l=0,f={}){typeof f!="object"&&(f={});const{leading:p=!1,trailing:b=!0,maxWait:w}=f,v=Array(2);p&&(v[0]="leading"),b&&(v[1]="trailing");let g,u=null;const o=e.debounce(function(...S){g=i.apply(this,S),u=null},l,{edges:v}),h=function(...S){return w!=null&&(u===null&&(u=Date.now()),Date.now()-u>=w)?(g=i.apply(this,S),u=Date.now(),o.cancel(),o.schedule(),g):(o.apply(this,S),g)},_=()=>(o.flush(),g);return h.cancel=o.cancel,h.flush=_,h}t.debounce=n})(debounce$1)),debounce$1}var hasRequiredThrottle$1;function requireThrottle$1(){return hasRequiredThrottle$1||(hasRequiredThrottle$1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireDebounce();function n(i,l=0,f={}){const{leading:p=!0,trailing:b=!0}=f;return e.debounce(i,l,{leading:p,maxWait:l,trailing:b})}t.throttle=n})(throttle$2)),throttle$2}var throttle$1,hasRequiredThrottle;function requireThrottle(){return hasRequiredThrottle||(hasRequiredThrottle=1,throttle$1=requireThrottle$1().throttle),throttle$1}var throttleExports=requireThrottle();const throttle=getDefaultExportFromCjs(throttleExports);var warn=function t(e,n){for(var i=arguments.length,l=new Array(i>2?i-2:0),f=2;f<i;f++)l[f-2]=arguments[f]},calculateChartDimensions=(t,e,n)=>{var{width:i="100%",height:l="100%",aspect:f,maxHeight:p}=n,b=isPercent(i)?t:Number(i),w=isPercent(l)?e:Number(l);return f&&f>0&&(b?w=b/f:w&&(b=w*f),p&&w>p&&(w=p)),{calculatedWidth:b,calculatedHeight:w}},bothOverflow={width:0,height:0,overflow:"visible"},overflowX={width:0,overflowX:"visible"},overflowY={height:0,overflowY:"visible"},noStyle={},getInnerDivStyle=t=>{var{width:e,height:n}=t,i=isPercent(e),l=isPercent(n);return i&&l?bothOverflow:i?overflowX:l?overflowY:noStyle};function getDefaultWidthAndHeight(t){var{width:e,height:n,aspect:i}=t,l=e,f=n;return l===void 0&&f===void 0?(l="100%",f="100%"):l===void 0?l=i&&i>0?void 0:"100%":f===void 0&&(f=i&&i>0?void 0:"100%"),{width:l,height:f}}function isWellBehavedNumber(t){return Number.isFinite(t)}function isPositiveNumber(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function _extends$p(){return _extends$p=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$p.apply(null,arguments)}function ownKeys$x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$x(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$x(Object(n),!0).forEach(function(i){_defineProperty$z(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$x(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$z(t,e,n){return(e=_toPropertyKey$z(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$z(t){var e=_toPrimitive$z(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$z(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ResponsiveContainerContext=reactExports.createContext({width:-1,height:-1});function ResponsiveContainerContextProvider(t){var{children:e,width:n,height:i}=t,l=reactExports.useMemo(()=>({width:n,height:i}),[n,i]);return n<=0||i<=0?null:reactExports.createElement(ResponsiveContainerContext.Provider,{value:l},e)}var useResponsiveContainerContext=()=>reactExports.useContext(ResponsiveContainerContext),SizeDetectorContainer=reactExports.forwardRef((t,e)=>{var{aspect:n,initialDimension:i={width:-1,height:-1},width:l,height:f,minWidth:p=0,minHeight:b,maxHeight:w,children:v,debounce:g=0,id:u,className:o,onResize:h,style:_={}}=t,S=reactExports.useRef(null),T=reactExports.useRef();T.current=h,reactExports.useImperativeHandle(e,()=>S.current);var[O,j]=reactExports.useState({containerWidth:i.width,containerHeight:i.height}),C=reactExports.useCallback((F,L)=>{j(V=>{var Y=Math.round(F),Q=Math.round(L);return V.containerWidth===Y&&V.containerHeight===Q?V:{containerWidth:Y,containerHeight:Q}})},[]);reactExports.useEffect(()=>{var F=Q=>{var ee,{width:X,height:W}=Q[0].contentRect;C(X,W),(ee=T.current)===null||ee===void 0||ee.call(T,X,W)};g>0&&(F=throttle(F,g,{trailing:!0,leading:!1}));var L=new ResizeObserver(F),{width:V,height:Y}=S.current.getBoundingClientRect();return C(V,Y),L.observe(S.current),()=>{L.disconnect()}},[C,g]);var{containerWidth:D,containerHeight:R}=O;warn(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:I,calculatedHeight:$}=calculateChartDimensions(D,R,{width:l,height:f,aspect:n,maxHeight:w});return warn(I>0||$>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,$,l,f,p,b,n),reactExports.createElement("div",{id:u?"".concat(u):void 0,className:clsx("recharts-responsive-container",o),style:_objectSpread$x(_objectSpread$x({},_),{},{width:l,height:f,minWidth:p,minHeight:b,maxHeight:w}),ref:S},reactExports.createElement("div",{style:getInnerDivStyle({width:l,height:f})},reactExports.createElement(ResponsiveContainerContextProvider,{width:I,height:$},v)))}),ResponsiveContainer=reactExports.forwardRef((t,e)=>{var n=useResponsiveContainerContext();if(isPositiveNumber(n.width)&&isPositiveNumber(n.height))return t.children;var{width:i,height:l}=getDefaultWidthAndHeight({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:f,calculatedHeight:p}=calculateChartDimensions(void 0,void 0,{width:i,height:l,aspect:t.aspect,maxHeight:t.maxHeight});return isNumber(f)&&isNumber(p)?reactExports.createElement(ResponsiveContainerContextProvider,{width:f,height:p},t.children):reactExports.createElement(SizeDetectorContainer,_extends$p({},t,{width:i,height:l,ref:e}))}),useViewBox=()=>{var t,e=useIsPanorama(),n=useAppSelector(selectChartViewBox),i=useAppSelector(selectBrushDimensions),l=(t=useAppSelector(selectBrushSettings))===null||t===void 0?void 0:t.padding;return!e||!i||!l?n:{width:i.width-l.left-l.right,height:i.height-l.top-l.bottom,x:l.left,y:l.top}},manyComponentsThrowErrorsIfOffsetIsUndefined={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},useOffsetInternal=()=>{var t;return(t=useAppSelector(selectChartOffsetInternal))!==null&&t!==void 0?t:manyComponentsThrowErrorsIfOffsetIsUndefined},useChartWidth=()=>useAppSelector(selectChartWidth),useChartHeight=()=>useAppSelector(selectChartHeight),useMargin=()=>useAppSelector(t=>t.layout.margin),selectChartLayout=t=>t.layout.layoutType,useChartLayout=()=>useAppSelector(selectChartLayout),ReportChartSize=t=>{var e=useAppDispatch(),n=useIsPanorama(),{width:i,height:l}=t,f=useResponsiveContainerContext(),p=i,b=l;return f&&(p=f.width>0?f.width:i,b=f.height>0?f.height:l),reactExports.useEffect(()=>{!n&&isPositiveNumber(p)&&isPositiveNumber(b)&&e(setChartSize({width:p,height:b}))},[e,n,p,b]),null},initialState$9={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},legendSlice=createSlice({name:"legend",initialState:initialState$9,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:prepareAutoBatched()},removeLegendPayload:{reducer(t,e){var n=current(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:prepareAutoBatched()}}}),{setLegendSize,setLegendSettings,addLegendPayload,removeLegendPayload}=legendSlice.actions,legendReducer=legendSlice.reducer,_excluded$k=["contextPayload"];function _extends$o(){return _extends$o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$o.apply(null,arguments)}function ownKeys$w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$w(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$w(Object(n),!0).forEach(function(i){_defineProperty$y(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$w(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$y(t,e,n){return(e=_toPropertyKey$y(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$y(t){var e=_toPrimitive$y(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$y(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _objectWithoutProperties$k(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$k(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$k(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function defaultUniqBy$1(t){return t.value}function LegendContent(t){var{contextPayload:e}=t,n=_objectWithoutProperties$k(t,_excluded$k),i=getUniqPayload(e,t.payloadUniqBy,defaultUniqBy$1),l=_objectSpread$w(_objectSpread$w({},n),{},{payload:i});return reactExports.isValidElement(t.content)?reactExports.cloneElement(t.content,l):typeof t.content=="function"?reactExports.createElement(t.content,l):reactExports.createElement(DefaultLegendContent,l)}function getDefaultPosition(t,e,n,i,l,f){var{layout:p,align:b,verticalAlign:w}=e,v,g;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(b==="center"&&p==="vertical"?v={left:((i||0)-f.width)/2}:v=b==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(w==="middle"?g={top:((l||0)-f.height)/2}:g=w==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),_objectSpread$w(_objectSpread$w({},v),g)}function LegendSettingsDispatcher(t){var e=useAppDispatch();return reactExports.useEffect(()=>{e(setLegendSettings(t))},[e,t]),null}function LegendSizeDispatcher(t){var e=useAppDispatch();return reactExports.useEffect(()=>(e(setLegendSize(t)),()=>{e(setLegendSize({width:0,height:0}))}),[e,t]),null}function LegendWrapper(t){var e=useLegendPayload(),n=useLegendPortal(),i=useMargin(),{width:l,height:f,wrapperStyle:p,portal:b}=t,[w,v]=useElementOffset([e]),g=useChartWidth(),u=useChartHeight();if(g==null||u==null)return null;var o=g-(i.left||0)-(i.right||0),h=Legend.getWidthOrHeight(t.layout,f,l,o),_=b?p:_objectSpread$w(_objectSpread$w({position:"absolute",width:(h==null?void 0:h.width)||l||"auto",height:(h==null?void 0:h.height)||f||"auto"},getDefaultPosition(p,t,i,g,u,w)),p),S=b??n;if(S==null)return null;var T=reactExports.createElement("div",{className:"recharts-legend-wrapper",style:_,ref:v},reactExports.createElement(LegendSettingsDispatcher,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),reactExports.createElement(LegendSizeDispatcher,{width:w.width,height:w.height}),reactExports.createElement(LegendContent,_extends$o({},t,h,{margin:i,chartWidth:g,chartHeight:u,contextPayload:e})));return reactDomExports.createPortal(T,S)}class Legend extends reactExports.PureComponent{static getWidthOrHeight(e,n,i,l){return e==="vertical"&&isNumber(n)?{height:n}:e==="horizontal"?{width:i||l}:null}render(){return reactExports.createElement(LegendWrapper,this.props)}}_defineProperty$y(Legend,"displayName","Legend");_defineProperty$y(Legend,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function _extends$n(){return _extends$n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$n.apply(null,arguments)}function ownKeys$v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$v(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$v(Object(n),!0).forEach(function(i){_defineProperty$x(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$v(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$x(t,e,n){return(e=_toPropertyKey$x(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$x(t){var e=_toPrimitive$x(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$x(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function defaultFormatter(t){return Array.isArray(t)&&isNumOrStr(t[0])&&isNumOrStr(t[1])?t.join(" ~ "):t}var DefaultTooltipContent=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:i={},labelStyle:l={},payload:f,formatter:p,itemSorter:b,wrapperClassName:w,labelClassName:v,label:g,labelFormatter:u,accessibilityLayer:o=!1}=t,h=()=>{if(f&&f.length){var R={padding:0,margin:0},I=(b?sortBy(f,b):f).map(($,F)=>{if($.type==="none")return null;var L=$.formatter||p||defaultFormatter,{value:V,name:Y}=$,Q=V,ee=Y;if(L){var X=L(V,Y,$,F,f);if(Array.isArray(X))[Q,ee]=X;else if(X!=null)Q=X;else return null}var W=_objectSpread$v({display:"block",paddingTop:4,paddingBottom:4,color:$.color||"#000"},i);return reactExports.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(F),style:W},isNumOrStr(ee)?reactExports.createElement("span",{className:"recharts-tooltip-item-name"},ee):null,isNumOrStr(ee)?reactExports.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,reactExports.createElement("span",{className:"recharts-tooltip-item-value"},Q),reactExports.createElement("span",{className:"recharts-tooltip-item-unit"},$.unit||""))});return reactExports.createElement("ul",{className:"recharts-tooltip-item-list",style:R},I)}return null},_=_objectSpread$v({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),S=_objectSpread$v({margin:0},l),T=!isNullish(g),O=T?g:"",j=clsx("recharts-default-tooltip",w),C=clsx("recharts-tooltip-label",v);T&&u&&f!==void 0&&f!==null&&(O=u(g,f));var D=o?{role:"status","aria-live":"assertive"}:{};return reactExports.createElement("div",_extends$n({className:j,style:_},D),reactExports.createElement("p",{className:C,style:S},reactExports.isValidElement(O)?O:"".concat(O)),h())},CSS_CLASS_PREFIX="recharts-tooltip-wrapper",TOOLTIP_HIDDEN={visibility:"hidden"};function getTooltipCSSClassName(t){var{coordinate:e,translateX:n,translateY:i}=t;return clsx(CSS_CLASS_PREFIX,{["".concat(CSS_CLASS_PREFIX,"-right")]:isNumber(n)&&e&&isNumber(e.x)&&n>=e.x,["".concat(CSS_CLASS_PREFIX,"-left")]:isNumber(n)&&e&&isNumber(e.x)&&n<e.x,["".concat(CSS_CLASS_PREFIX,"-bottom")]:isNumber(i)&&e&&isNumber(e.y)&&i>=e.y,["".concat(CSS_CLASS_PREFIX,"-top")]:isNumber(i)&&e&&isNumber(e.y)&&i<e.y})}function getTooltipTranslateXY(t){var{allowEscapeViewBox:e,coordinate:n,key:i,offsetTopLeft:l,position:f,reverseDirection:p,tooltipDimension:b,viewBox:w,viewBoxDimension:v}=t;if(f&&isNumber(f[i]))return f[i];var g=n[i]-b-(l>0?l:0),u=n[i]+l;if(e[i])return p[i]?g:u;var o=w[i];if(o==null)return 0;if(p[i]){var h=g,_=o;return h<_?Math.max(u,o):Math.max(g,o)}if(v==null)return 0;var S=u+b,T=o+v;return S>T?Math.max(g,o):Math.max(u,o)}function getTransformStyle(t){var{translateX:e,translateY:n,useTranslate3d:i}=t;return{transform:i?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function getTooltipTranslate(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:i,position:l,reverseDirection:f,tooltipBox:p,useTranslate3d:b,viewBox:w}=t,v,g,u;return p.height>0&&p.width>0&&n?(g=getTooltipTranslateXY({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:i,position:l,reverseDirection:f,tooltipDimension:p.width,viewBox:w,viewBoxDimension:w.width}),u=getTooltipTranslateXY({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:i,position:l,reverseDirection:f,tooltipDimension:p.height,viewBox:w,viewBoxDimension:w.height}),v=getTransformStyle({translateX:g,translateY:u,useTranslate3d:b})):v=TOOLTIP_HIDDEN,{cssProperties:v,cssClasses:getTooltipCSSClassName({translateX:g,translateY:u,coordinate:n})}}function ownKeys$u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$u(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$u(Object(n),!0).forEach(function(i){_defineProperty$w(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$u(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$w(t,e,n){return(e=_toPropertyKey$w(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$w(t){var e=_toPrimitive$w(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$w(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class TooltipBoundingBox extends reactExports.PureComponent{constructor(){super(...arguments),_defineProperty$w(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),_defineProperty$w(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,i,l,f;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&n!==void 0?n:0,y:(l=(f=this.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&l!==void 0?l:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:i,animationEasing:l,children:f,coordinate:p,hasPayload:b,isAnimationActive:w,offset:v,position:g,reverseDirection:u,useTranslate3d:o,viewBox:h,wrapperStyle:_,lastBoundingBox:S,innerRef:T,hasPortalFromProps:O}=this.props,{cssClasses:j,cssProperties:C}=getTooltipTranslate({allowEscapeViewBox:n,coordinate:p,offsetTopLeft:v,position:g,reverseDirection:u,tooltipBox:{height:S.height,width:S.width},useTranslate3d:o,viewBox:h}),D=O?{}:_objectSpread$u(_objectSpread$u({transition:w&&e?"transform ".concat(i,"ms ").concat(l):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&b?"visible":"hidden",position:"absolute",top:0,left:0}),R=_objectSpread$u(_objectSpread$u({},D),{},{visibility:!this.state.dismissed&&e&&b?"visible":"hidden"},_);return reactExports.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:j,style:R,ref:T},f)}}var parseIsSsrByDefault=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Global={devToolsEnabled:!1,isSsr:parseIsSsrByDefault()},useAccessibilityLayer=()=>useAppSelector(t=>t.rootProps.accessibilityLayer);function _extends$m(){return _extends$m=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$m.apply(null,arguments)}function ownKeys$t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$t(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$t(Object(n),!0).forEach(function(i){_defineProperty$v(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$t(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$v(t,e,n){return(e=_toPropertyKey$v(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$v(t){var e=_toPrimitive$v(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$v(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CURVE_FACTORIES={curveBasisClosed,curveBasisOpen,curveBasis,curveBumpX:bumpX,curveBumpY:bumpY,curveLinearClosed,curveLinear,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural,curveStep,curveStepAfter:stepAfter,curveStepBefore:stepBefore},defined=t=>isWellBehavedNumber(t.x)&&isWellBehavedNumber(t.y),getX=t=>t.x,getY=t=>t.y,getCurveFactory=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(upperFirst(t));return(n==="curveMonotone"||n==="curveBump")&&e?CURVE_FACTORIES["".concat(n).concat(e==="vertical"?"Y":"X")]:CURVE_FACTORIES[n]||curveLinear},getPath$1=t=>{var{type:e="linear",points:n=[],baseLine:i,layout:l,connectNulls:f=!1}=t,p=getCurveFactory(e,l),b=f?n.filter(defined):n,w;if(Array.isArray(i)){var v=f?i.filter(u=>defined(u)):i,g=b.map((u,o)=>_objectSpread$t(_objectSpread$t({},u),{},{base:v[o]}));return l==="vertical"?w=shapeArea().y(getY).x1(getX).x0(u=>u.base.x):w=shapeArea().x(getX).y1(getY).y0(u=>u.base.y),w.defined(defined).curve(p),w(g)}return l==="vertical"&&isNumber(i)?w=shapeArea().y(getY).x1(getX).x0(i):isNumber(i)?w=shapeArea().x(getX).y1(getY).y0(i):w=shapeLine().x(getX).y(getY),w.defined(defined).curve(p),w(b)},Curve=t=>{var{className:e,points:n,path:i,pathRef:l}=t;if((!n||!n.length)&&!i)return null;var f=n&&n.length?getPath$1(t):i;return reactExports.createElement("path",_extends$m({},svgPropertiesNoEvents(t),adaptEventHandlers(t),{className:clsx("recharts-curve",e),d:f===null?void 0:f,ref:l}))},_excluded$j=["x","y","top","left","width","height","className"];function _extends$l(){return _extends$l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$l.apply(null,arguments)}function ownKeys$s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$s(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$s(Object(n),!0).forEach(function(i){_defineProperty$u(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$s(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$u(t,e,n){return(e=_toPropertyKey$u(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$u(t){var e=_toPrimitive$u(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$u(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _objectWithoutProperties$j(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$j(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$j(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var getPath=(t,e,n,i,l,f)=>"M".concat(t,",").concat(l,"v").concat(i,"M").concat(f,",").concat(e,"h").concat(n),Cross=t=>{var{x:e=0,y:n=0,top:i=0,left:l=0,width:f=0,height:p=0,className:b}=t,w=_objectWithoutProperties$j(t,_excluded$j),v=_objectSpread$s({x:e,y:n,top:i,left:l,width:f,height:p},w);return!isNumber(e)||!isNumber(n)||!isNumber(f)||!isNumber(p)||!isNumber(i)||!isNumber(l)?null:reactExports.createElement("path",_extends$l({},svgPropertiesAndEvents(v),{className:clsx("recharts-cross",b),d:getPath(e,n,f,p,i,l)}))};function getCursorRectangle(t,e,n,i){var l=i/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-l:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-l,width:t==="horizontal"?i:n.width-1,height:t==="horizontal"?n.height-1:i}}function ownKeys$r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$r(Object(n),!0).forEach(function(i){_defineProperty$t(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$r(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$t(t,e,n){return(e=_toPropertyKey$t(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$t(t){var e=_toPrimitive$t(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$t(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function resolveDefaultProps(t,e){var n=_objectSpread$r({},t),i=e,l=Object.keys(e),f=l.reduce((p,b)=>(p[b]===void 0&&i[b]!==void 0&&(p[b]=i[b]),p),n);return f}function noop$2(){}function isNotNil(t){return t!=null}function ownKeys$q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$q(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$q(Object(n),!0).forEach(function(i){_defineProperty$s(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$q(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$s(t,e,n){return(e=_toPropertyKey$s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$s(t){var e=_toPrimitive$s(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$s(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var getDashCase=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),getTransitionVal=(t,e,n)=>t.map(i=>"".concat(getDashCase(i)," ").concat(e,"ms ").concat(n)).join(","),getIntersectionKeys=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,i)=>n.filter(l=>i.includes(l))),mapObject=(t,e)=>Object.keys(e).reduce((n,i)=>_objectSpread$q(_objectSpread$q({},n),{},{[i]:t(i,e[i])}),{});function ownKeys$p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$p(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$p(Object(n),!0).forEach(function(i){_defineProperty$r(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$p(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$r(t,e,n){return(e=_toPropertyKey$r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$r(t){var e=_toPrimitive$r(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$r(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var alpha=(t,e,n)=>t+(e-t)*n,needContinue=t=>{var{from:e,to:n}=t;return e!==n},calStepperVals=(t,e,n)=>{var i=mapObject((l,f)=>{if(needContinue(f)){var[p,b]=t(f.from,f.to,f.velocity);return _objectSpread$p(_objectSpread$p({},f),{},{from:p,velocity:b})}return f},e);return n<1?mapObject((l,f)=>needContinue(f)?_objectSpread$p(_objectSpread$p({},f),{},{velocity:alpha(f.velocity,i[l].velocity,n),from:alpha(f.from,i[l].from,n)}):f,e):calStepperVals(t,i,n-1)};function createStepperUpdate(t,e,n,i,l,f){var p,b=i.reduce((o,h)=>_objectSpread$p(_objectSpread$p({},o),{},{[h]:{from:t[h],velocity:0,to:e[h]}}),{}),w=()=>mapObject((o,h)=>h.from,b),v=()=>!Object.values(b).filter(needContinue).length,g=null,u=o=>{p||(p=o);var h=o-p,_=h/n.dt;b=calStepperVals(n,b,_),l(_objectSpread$p(_objectSpread$p(_objectSpread$p({},t),e),w())),p=o,v()||(g=f.setTimeout(u))};return()=>(g=f.setTimeout(u),()=>{g()})}function createTimingUpdate(t,e,n,i,l,f,p){var b=null,w=l.reduce((u,o)=>_objectSpread$p(_objectSpread$p({},u),{},{[o]:[t[o],e[o]]}),{}),v,g=u=>{v||(v=u);var o=(u-v)/i,h=mapObject((S,T)=>alpha(...T,n(o)),w);if(f(_objectSpread$p(_objectSpread$p(_objectSpread$p({},t),e),h)),o<1)b=p.setTimeout(g);else{var _=mapObject((S,T)=>alpha(...T,n(1)),w);f(_objectSpread$p(_objectSpread$p(_objectSpread$p({},t),e),_))}};return()=>(b=p.setTimeout(g),()=>{b()})}const configUpdate=(t,e,n,i,l,f)=>{var p=getIntersectionKeys(t,e);return n.isStepper===!0?createStepperUpdate(t,e,n,p,l,f):createTimingUpdate(t,e,n,i,p,l,f)};var ACCURACY=1e-4,cubicBezierFactor=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],evaluatePolynomial=(t,e)=>t.map((n,i)=>n*e**i).reduce((n,i)=>n+i),cubicBezier=(t,e)=>n=>{var i=cubicBezierFactor(t,e);return evaluatePolynomial(i,n)},derivativeCubicBezier=(t,e)=>n=>{var i=cubicBezierFactor(t,e),l=[...i.map((f,p)=>f*p).slice(1),0];return evaluatePolynomial(l,n)},configBezier=function t(){for(var e,n,i,l,f=arguments.length,p=new Array(f),b=0;b<f;b++)p[b]=arguments[b];if(p.length===1)switch(p[0]){case"linear":[e,i,n,l]=[0,0,1,1];break;case"ease":[e,i,n,l]=[.25,.1,.25,1];break;case"ease-in":[e,i,n,l]=[.42,0,1,1];break;case"ease-out":[e,i,n,l]=[.42,0,.58,1];break;case"ease-in-out":[e,i,n,l]=[0,0,.58,1];break;default:{var w=p[0].split("(");w[0]==="cubic-bezier"&&w[1].split(")")[0].split(",").length===4&&([e,i,n,l]=w[1].split(")")[0].split(",").map(_=>parseFloat(_)))}}else p.length===4&&([e,i,n,l]=p);var v=cubicBezier(e,n),g=cubicBezier(i,l),u=derivativeCubicBezier(e,n),o=_=>_>1?1:_<0?0:_,h=_=>{for(var S=_>1?1:_,T=S,O=0;O<8;++O){var j=v(T)-S,C=u(T);if(Math.abs(j-S)<ACCURACY||C<ACCURACY)return g(T);T=o(T-j/C)}return g(T)};return h.isStepper=!1,h},configSpring=function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:i=8,dt:l=17}=e,f=(p,b,w)=>{var v=-(p-b)*n,g=w*i,u=w+(v-g)*l/1e3,o=w*l/1e3+p;return Math.abs(o-b)<ACCURACY&&Math.abs(u)<ACCURACY?[b,0]:[o,u]};return f.isStepper=!0,f.dt=l,f},configEasing=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return configBezier(t);case"spring":return configSpring();default:if(t.split("(")[0]==="cubic-bezier")return configBezier(t)}return typeof t=="function"?t:null};function createAnimateManager(t){var e,n=()=>null,i=!1,l=null,f=p=>{if(!i){if(Array.isArray(p)){if(!p.length)return;var b=p,[w,...v]=b;if(typeof w=="number"){l=t.setTimeout(f.bind(null,v),w);return}f(w),l=t.setTimeout(f.bind(null,v));return}typeof p=="string"&&(e=p,n(e)),typeof p=="object"&&(e=p,n(e)),typeof p=="function"&&p()}};return{stop:()=>{i=!0},start:p=>{i=!1,l&&(l(),l=null),f(p)},subscribe:p=>(n=p,()=>{n=()=>null}),getTimeoutController:()=>t}}class RequestAnimationFrameTimeoutController{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),l=null,f=p=>{p-i>=n?e(p):typeof requestAnimationFrame=="function"&&(l=requestAnimationFrame(f))};return l=requestAnimationFrame(f),()=>{cancelAnimationFrame(l)}}}function createDefaultAnimationManager(){return createAnimateManager(new RequestAnimationFrameTimeoutController)}var AnimationManagerContext=reactExports.createContext(createDefaultAnimationManager);function useAnimationManager(t,e){var n=reactExports.useContext(AnimationManagerContext);return reactExports.useMemo(()=>e??n(t),[t,e,n])}var defaultJavascriptAnimateProps={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},from={t:0},to={t:1};function JavascriptAnimate(t){var e=resolveDefaultProps(t,defaultJavascriptAnimateProps),{isActive:n,canBegin:i,duration:l,easing:f,begin:p,onAnimationEnd:b,onAnimationStart:w,children:v}=e,g=useAnimationManager(e.animationId,e.animationManager),[u,o]=reactExports.useState(n?from:to),h=reactExports.useRef(null);return reactExports.useEffect(()=>{n||o(to)},[n]),reactExports.useEffect(()=>{if(!n||!i)return noop$2;var _=configUpdate(from,to,configEasing(f),l,o,g.getTimeoutController()),S=()=>{h.current=_()};return g.start([w,p,S,l,b]),()=>{g.stop(),h.current&&h.current(),b()}},[n,i,l,f,p,w,b,g]),v(u.t)}function useAnimationId(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=reactExports.useRef(uniqueId(e)),i=reactExports.useRef(t);return i.current!==t&&(n.current=uniqueId(e),i.current=t),n.current}var _excluded$i=["radius"],_excluded2$a=["radius"];function ownKeys$o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$o(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$o(Object(n),!0).forEach(function(i){_defineProperty$q(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$o(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$q(t,e,n){return(e=_toPropertyKey$q(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$q(t){var e=_toPrimitive$q(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$q(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _extends$k(){return _extends$k=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$k.apply(null,arguments)}function _objectWithoutProperties$i(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$i(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$i(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var getRectanglePath=(t,e,n,i,l)=>{var f=Math.min(Math.abs(n)/2,Math.abs(i)/2),p=i>=0?1:-1,b=n>=0?1:-1,w=i>=0&&n>=0||i<0&&n<0?1:0,v;if(f>0&&l instanceof Array){for(var g=[0,0,0,0],u=0,o=4;u<o;u++)g[u]=l[u]>f?f:l[u];v="M".concat(t,",").concat(e+p*g[0]),g[0]>0&&(v+="A ".concat(g[0],",").concat(g[0],",0,0,").concat(w,",").concat(t+b*g[0],",").concat(e)),v+="L ".concat(t+n-b*g[1],",").concat(e),g[1]>0&&(v+="A ".concat(g[1],",").concat(g[1],",0,0,").concat(w,`,
        `).concat(t+n,",").concat(e+p*g[1])),v+="L ".concat(t+n,",").concat(e+i-p*g[2]),g[2]>0&&(v+="A ".concat(g[2],",").concat(g[2],",0,0,").concat(w,`,
        `).concat(t+n-b*g[2],",").concat(e+i)),v+="L ".concat(t+b*g[3],",").concat(e+i),g[3]>0&&(v+="A ".concat(g[3],",").concat(g[3],",0,0,").concat(w,`,
        `).concat(t,",").concat(e+i-p*g[3])),v+="Z"}else if(f>0&&l===+l&&l>0){var h=Math.min(f,l);v="M ".concat(t,",").concat(e+p*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(w,",").concat(t+b*h,",").concat(e,`
            L `).concat(t+n-b*h,",").concat(e,`
            A `).concat(h,",").concat(h,",0,0,").concat(w,",").concat(t+n,",").concat(e+p*h,`
            L `).concat(t+n,",").concat(e+i-p*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(w,",").concat(t+n-b*h,",").concat(e+i,`
            L `).concat(t+b*h,",").concat(e+i,`
            A `).concat(h,",").concat(h,",0,0,").concat(w,",").concat(t,",").concat(e+i-p*h," Z")}else v="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return v},defaultProps$6={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rectangle=t=>{var e=resolveDefaultProps(t,defaultProps$6),n=reactExports.useRef(null),[i,l]=reactExports.useState(-1);reactExports.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var q=n.current.getTotalLength();q&&l(q)}catch{}},[]);var{x:f,y:p,width:b,height:w,radius:v,className:g}=e,{animationEasing:u,animationDuration:o,animationBegin:h,isAnimationActive:_,isUpdateAnimationActive:S}=e,T=reactExports.useRef(b),O=reactExports.useRef(w),j=reactExports.useRef(f),C=reactExports.useRef(p),D=reactExports.useMemo(()=>({x:f,y:p,width:b,height:w,radius:v}),[f,p,b,w,v]),R=useAnimationId(D,"rectangle-");if(f!==+f||p!==+p||b!==+b||w!==+w||b===0||w===0)return null;var I=clsx("recharts-rectangle",g);if(!S){var $=svgPropertiesAndEvents(e),{radius:F}=$,L=_objectWithoutProperties$i($,_excluded$i);return reactExports.createElement("path",_extends$k({},L,{radius:typeof v=="number"?v:void 0,className:I,d:getRectanglePath(f,p,b,w,v)}))}var V=T.current,Y=O.current,Q=j.current,ee=C.current,X="0px ".concat(i===-1?1:i,"px"),W="".concat(i,"px 0px"),z=getTransitionVal(["strokeDasharray"],o,typeof u=="string"?u:void 0);return reactExports.createElement(JavascriptAnimate,{animationId:R,key:R,canBegin:i>0,duration:o,easing:u,isActive:S,begin:h},q=>{var ce=interpolate$1(V,b,q),ae=interpolate$1(Y,w,q),we=interpolate$1(Q,f,q),Z=interpolate$1(ee,p,q);n.current&&(T.current=ce,O.current=ae,j.current=we,C.current=Z);var ue;_?q>0?ue={transition:z,strokeDasharray:W}:ue={strokeDasharray:X}:ue={strokeDasharray:W};var Pe=svgPropertiesAndEvents(e),{radius:Re}=Pe,pe=_objectWithoutProperties$i(Pe,_excluded2$a);return reactExports.createElement("path",_extends$k({},pe,{radius:typeof v=="number"?v:void 0,className:I,d:getRectanglePath(we,Z,ce,ae,v),ref:n,style:_objectSpread$o(_objectSpread$o({},ue),e.style)}))})};function getRadialCursorPoints(t){var{cx:e,cy:n,radius:i,startAngle:l,endAngle:f}=t,p=polarToCartesian(e,n,i,l),b=polarToCartesian(e,n,i,f);return{points:[p,b],cx:e,cy:n,radius:i,startAngle:l,endAngle:f}}function _extends$j(){return _extends$j=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$j.apply(null,arguments)}var getDeltaAngle$1=(t,e)=>{var n=mathSign(e-t),i=Math.min(Math.abs(e-t),359.999);return n*i},getTangentCircle=t=>{var{cx:e,cy:n,radius:i,angle:l,sign:f,isExternal:p,cornerRadius:b,cornerIsExternal:w}=t,v=b*(p?1:-1)+i,g=Math.asin(b/v)/RADIAN,u=w?l:l+f*g,o=polarToCartesian(e,n,v,u),h=polarToCartesian(e,n,i,u),_=w?l-f*g:l,S=polarToCartesian(e,n,v*Math.cos(g*RADIAN),_);return{center:o,circleTangency:h,lineTangency:S,theta:g}},getSectorPath=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:l,startAngle:f,endAngle:p}=t,b=getDeltaAngle$1(f,p),w=f+b,v=polarToCartesian(e,n,l,f),g=polarToCartesian(e,n,l,w),u="M ".concat(v.x,",").concat(v.y,`
    A `).concat(l,",").concat(l,`,0,
    `).concat(+(Math.abs(b)>180),",").concat(+(f>w),`,
    `).concat(g.x,",").concat(g.y,`
  `);if(i>0){var o=polarToCartesian(e,n,i,f),h=polarToCartesian(e,n,i,w);u+="L ".concat(h.x,",").concat(h.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(b)>180),",").concat(+(f<=w),`,
            `).concat(o.x,",").concat(o.y," Z")}else u+="L ".concat(e,",").concat(n," Z");return u},getSectorWithCorner=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:l,cornerRadius:f,forceCornerRadius:p,cornerIsExternal:b,startAngle:w,endAngle:v}=t,g=mathSign(v-w),{circleTangency:u,lineTangency:o,theta:h}=getTangentCircle({cx:e,cy:n,radius:l,angle:w,sign:g,cornerRadius:f,cornerIsExternal:b}),{circleTangency:_,lineTangency:S,theta:T}=getTangentCircle({cx:e,cy:n,radius:l,angle:v,sign:-g,cornerRadius:f,cornerIsExternal:b}),O=b?Math.abs(w-v):Math.abs(w-v)-h-T;if(O<0)return p?"M ".concat(o.x,",").concat(o.y,`
        a`).concat(f,",").concat(f,",0,0,1,").concat(f*2,`,0
        a`).concat(f,",").concat(f,",0,0,1,").concat(-f*2,`,0
      `):getSectorPath({cx:e,cy:n,innerRadius:i,outerRadius:l,startAngle:w,endAngle:v});var j="M ".concat(o.x,",").concat(o.y,`
    A`).concat(f,",").concat(f,",0,0,").concat(+(g<0),",").concat(u.x,",").concat(u.y,`
    A`).concat(l,",").concat(l,",0,").concat(+(O>180),",").concat(+(g<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(f,",").concat(f,",0,0,").concat(+(g<0),",").concat(S.x,",").concat(S.y,`
  `);if(i>0){var{circleTangency:C,lineTangency:D,theta:R}=getTangentCircle({cx:e,cy:n,radius:i,angle:w,sign:g,isExternal:!0,cornerRadius:f,cornerIsExternal:b}),{circleTangency:I,lineTangency:$,theta:F}=getTangentCircle({cx:e,cy:n,radius:i,angle:v,sign:-g,isExternal:!0,cornerRadius:f,cornerIsExternal:b}),L=b?Math.abs(w-v):Math.abs(w-v)-R-F;if(L<0&&f===0)return"".concat(j,"L").concat(e,",").concat(n,"Z");j+="L".concat($.x,",").concat($.y,`
      A`).concat(f,",").concat(f,",0,0,").concat(+(g<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(L>180),",").concat(+(g>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(f,",").concat(f,",0,0,").concat(+(g<0),",").concat(D.x,",").concat(D.y,"Z")}else j+="L".concat(e,",").concat(n,"Z");return j},defaultProps$5={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Sector=t=>{var e=resolveDefaultProps(t,defaultProps$5),{cx:n,cy:i,innerRadius:l,outerRadius:f,cornerRadius:p,forceCornerRadius:b,cornerIsExternal:w,startAngle:v,endAngle:g,className:u}=e;if(f<l||v===g)return null;var o=clsx("recharts-sector",u),h=f-l,_=getPercentValue(p,h,0,!0),S;return _>0&&Math.abs(v-g)<360?S=getSectorWithCorner({cx:n,cy:i,innerRadius:l,outerRadius:f,cornerRadius:Math.min(_,h/2),forceCornerRadius:b,cornerIsExternal:w,startAngle:v,endAngle:g}):S=getSectorPath({cx:n,cy:i,innerRadius:l,outerRadius:f,startAngle:v,endAngle:g}),reactExports.createElement("path",_extends$j({},svgPropertiesAndEvents(e),{className:o,d:S}))};function getCursorPoints(t,e,n){var i,l,f,p;if(t==="horizontal")i=e.x,f=i,l=n.top,p=n.top+n.height;else if(t==="vertical")l=e.y,p=l,i=n.left,f=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:b,cy:w,innerRadius:v,outerRadius:g,angle:u}=e,o=polarToCartesian(b,w,v,u),h=polarToCartesian(b,w,g,u);i=o.x,l=o.y,f=h.x,p=h.y}else return getRadialCursorPoints(e);return[{x:i,y:l},{x:f,y:p}]}var range$4={},toFinite={},toNumber={},hasRequiredToNumber;function requireToNumber(){return hasRequiredToNumber||(hasRequiredToNumber=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireIsSymbol();function n(i){return e.isSymbol(i)?NaN:Number(i)}t.toNumber=n})(toNumber)),toNumber}var hasRequiredToFinite;function requireToFinite(){return hasRequiredToFinite||(hasRequiredToFinite=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireToNumber();function n(i){return i?(i=e.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}t.toFinite=n})(toFinite)),toFinite}var hasRequiredRange$1;function requireRange$1(){return hasRequiredRange$1||(hasRequiredRange$1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireIsIterateeCall(),n=requireToFinite();function i(l,f,p){p&&typeof p!="number"&&e.isIterateeCall(l,f,p)&&(f=p=void 0),l=n.toFinite(l),f===void 0?(f=l,l=0):f=n.toFinite(f),p=p===void 0?l<f?1:-1:n.toFinite(p);const b=Math.max(Math.ceil((f-l)/(p||1)),0),w=new Array(b);for(let v=0;v<b;v++)w[v]=l,l+=p;return w}t.range=i})(range$4)),range$4}var range$3,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range$3=requireRange$1().range),range$3}var rangeExports=requireRange();const range$2=getDefaultExportFromCjs(rangeExports);function ascending(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function descending(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bisector(t){let e,n,i;t.length!==2?(e=ascending,n=(b,w)=>ascending(t(b),w),i=(b,w)=>t(b)-w):(e=t===ascending||t===descending?t:zero$1,n=t,i=t);function l(b,w,v=0,g=b.length){if(v<g){if(e(w,w)!==0)return g;do{const u=v+g>>>1;n(b[u],w)<0?v=u+1:g=u}while(v<g)}return v}function f(b,w,v=0,g=b.length){if(v<g){if(e(w,w)!==0)return g;do{const u=v+g>>>1;n(b[u],w)<=0?v=u+1:g=u}while(v<g)}return v}function p(b,w,v=0,g=b.length){const u=l(b,w,v,g-1);return u>v&&i(b[u-1],w)>-i(b[u],w)?u-1:u}return{left:l,center:p,right:f}}function zero$1(){return 0}function number$2(t){return t===null?NaN:+t}function*numbers(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right;bisector(number$2).center;class InternMap extends Map{constructor(e,n=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,l]of e)this.set(i,l)}get(e){return super.get(intern_get(this,e))}has(e){return super.has(intern_get(this,e))}set(e,n){return super.set(intern_set(this,e),n)}delete(e){return super.delete(intern_delete(this,e))}}function intern_get({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function intern_set({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function intern_delete({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function keyof(t){return t!==null&&typeof t=="object"?t.valueOf():t}function compareDefined(t=ascending){if(t===ascending)return ascendingDefined;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function ascendingDefined(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(t,e,n){const i=(e-t)/Math.max(0,n),l=Math.floor(Math.log10(i)),f=i/Math.pow(10,l),p=f>=e10?10:f>=e5?5:f>=e2?2:1;let b,w,v;return l<0?(v=Math.pow(10,-l)/p,b=Math.round(t*v),w=Math.round(e*v),b/v<t&&++b,w/v>e&&--w,v=-v):(v=Math.pow(10,l)*p,b=Math.round(t/v),w=Math.round(e/v),b*v<t&&++b,w*v>e&&--w),w<b&&.5<=n&&n<2?tickSpec(t,e,n*2):[b,w,v]}function ticks(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[l,f,p]=i?tickSpec(e,t,n):tickSpec(t,e,n);if(!(f>=l))return[];const b=f-l+1,w=new Array(b);if(i)if(p<0)for(let v=0;v<b;++v)w[v]=(f-v)/-p;else for(let v=0;v<b;++v)w[v]=(f-v)*p;else if(p<0)for(let v=0;v<b;++v)w[v]=(l+v)/-p;else for(let v=0;v<b;++v)w[v]=(l+v)*p;return w}function tickIncrement(t,e,n){return e=+e,t=+t,n=+n,tickSpec(t,e,n)[2]}function tickStep(t,e,n){e=+e,t=+t,n=+n;const i=e<t,l=i?tickIncrement(e,t,n):tickIncrement(t,e,n);return(i?-1:1)*(l<0?1/-l:l)}function max(t,e){let n;for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);return n}function min(t,e){let n;for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);return n}function quickselect(t,e,n=0,i=1/0,l){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(l=l===void 0?ascendingDefined:compareDefined(l);i>n;){if(i-n>600){const w=i-n+1,v=e-n+1,g=Math.log(w),u=.5*Math.exp(2*g/3),o=.5*Math.sqrt(g*u*(w-u)/w)*(v-w/2<0?-1:1),h=Math.max(n,Math.floor(e-v*u/w+o)),_=Math.min(i,Math.floor(e+(w-v)*u/w+o));quickselect(t,e,h,_,l)}const f=t[e];let p=n,b=i;for(swap(t,n,e),l(t[i],f)>0&&swap(t,n,i);p<b;){for(swap(t,p,b),++p,--b;l(t[p],f)<0;)++p;for(;l(t[b],f)>0;)--b}l(t[n],f)===0?swap(t,n,b):(++b,swap(t,b,i)),b<=e&&(n=b+1),e<=b&&(i=b-1)}return t}function swap(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function quantile$1(t,e,n){if(t=Float64Array.from(numbers(t)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return min(t);if(e>=1)return max(t);var i,l=(i-1)*e,f=Math.floor(l),p=max(quickselect(t,f).subarray(0,f+1)),b=min(t.subarray(f+1));return p+(b-p)*(l-f)}}function quantileSorted(t,e,n=number$2){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,l=(i-1)*e,f=Math.floor(l),p=+n(t[f],f,t),b=+n(t[f+1],f+1,t);return p+(b-p)*(l-f)}}function range$1(t,e,n){t=+t,e=+e,n=(l=arguments.length)<2?(e=t,t=0,1):l<3?1:+n;for(var i=-1,l=Math.max(0,Math.ceil((e-t)/n))|0,f=new Array(l);++i<l;)f[i]=t+i*n;return f}function initRange(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function initInterpolator(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const implicit=Symbol("implicit");function ordinal(){var t=new InternMap,e=[],n=[],i=implicit;function l(f){let p=t.get(f);if(p===void 0){if(i!==implicit)return i;t.set(f,p=e.push(f)-1)}return n[p%n.length]}return l.domain=function(f){if(!arguments.length)return e.slice();e=[],t=new InternMap;for(const p of f)t.has(p)||t.set(p,e.push(p)-1);return l},l.range=function(f){return arguments.length?(n=Array.from(f),l):n.slice()},l.unknown=function(f){return arguments.length?(i=f,l):i},l.copy=function(){return ordinal(e,n).unknown(i)},initRange.apply(l,arguments),l}function band(){var t=ordinal().unknown(void 0),e=t.domain,n=t.range,i=0,l=1,f,p,b=!1,w=0,v=0,g=.5;delete t.unknown;function u(){var o=e().length,h=l<i,_=h?l:i,S=h?i:l;f=(S-_)/Math.max(1,o-w+v*2),b&&(f=Math.floor(f)),_+=(S-_-f*(o-w))*g,p=f*(1-w),b&&(_=Math.round(_),p=Math.round(p));var T=range$1(o).map(function(O){return _+f*O});return n(h?T.reverse():T)}return t.domain=function(o){return arguments.length?(e(o),u()):e()},t.range=function(o){return arguments.length?([i,l]=o,i=+i,l=+l,u()):[i,l]},t.rangeRound=function(o){return[i,l]=o,i=+i,l=+l,b=!0,u()},t.bandwidth=function(){return p},t.step=function(){return f},t.round=function(o){return arguments.length?(b=!!o,u()):b},t.padding=function(o){return arguments.length?(w=Math.min(1,v=+o),u()):w},t.paddingInner=function(o){return arguments.length?(w=Math.min(1,o),u()):w},t.paddingOuter=function(o){return arguments.length?(v=+o,u()):v},t.align=function(o){return arguments.length?(g=Math.max(0,Math.min(1,o)),u()):g},t.copy=function(){return band(e(),[i,l]).round(b).paddingInner(w).paddingOuter(v).align(g)},initRange.apply(u(),arguments)}function pointish(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return pointish(e())},t}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}function define(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function extend(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=reHex.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?rgbn(e):n===3?new Rgb(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?rgba(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?rgba(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=reRgbInteger.exec(t))?new Rgb(e[1],e[2],e[3],1):(e=reRgbPercent.exec(t))?new Rgb(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=reRgbaInteger.exec(t))?rgba(e[1],e[2],e[3],e[4]):(e=reRgbaPercent.exec(t))?rgba(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=reHslPercent.exec(t))?hsla(e[1],e[2]/100,e[3]/100,1):(e=reHslaPercent.exec(t))?hsla(e[1],e[2]/100,e[3]/100,e[4]):named.hasOwnProperty(t)?rgbn(named[t]):t==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(t){return new Rgb(t>>16&255,t>>8&255,t&255,1)}function rgba(t,e,n,i){return i<=0&&(t=e=n=NaN),new Rgb(t,e,n,i)}function rgbConvert(t){return t instanceof Color||(t=color(t)),t?(t=t.rgb(),new Rgb(t.r,t.g,t.b,t.opacity)):new Rgb}function rgb$1(t,e,n,i){return arguments.length===1?rgbConvert(t):new Rgb(t,e,n,i??1)}function Rgb(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}define(Rgb,rgb$1,extend(Color,{brighter(t){return t=t==null?brighter:Math.pow(brighter,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?darker:Math.pow(darker,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const t=clampa(this.opacity);return`${t===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${t===1?")":`, ${t})`}`}function clampa(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function clampi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hex(t){return t=clampi(t),(t<16?"0":"")+t.toString(16)}function hsla(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Hsl(t,e,n,i)}function hslConvert(t){if(t instanceof Hsl)return new Hsl(t.h,t.s,t.l,t.opacity);if(t instanceof Color||(t=color(t)),!t)return new Hsl;if(t instanceof Hsl)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,l=Math.min(e,n,i),f=Math.max(e,n,i),p=NaN,b=f-l,w=(f+l)/2;return b?(e===f?p=(n-i)/b+(n<i)*6:n===f?p=(i-e)/b+2:p=(e-n)/b+4,b/=w<.5?f+l:2-f-l,p*=60):b=w>0&&w<1?0:p,new Hsl(p,b,w,t.opacity)}function hsl(t,e,n,i){return arguments.length===1?hslConvert(t):new Hsl(t,e,n,i??1)}function Hsl(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}define(Hsl,hsl,extend(Color,{brighter(t){return t=t==null?brighter:Math.pow(brighter,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?darker:Math.pow(darker,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,l=2*n-i;return new Rgb(hsl2rgb(t>=240?t-240:t+120,l,i),hsl2rgb(t,l,i),hsl2rgb(t<120?t+240:t-120,l,i),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=clampa(this.opacity);return`${t===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function clamph(t){return t=(t||0)%360,t<0?t+360:t}function clampt(t){return Math.max(0,Math.min(1,t||0))}function hsl2rgb(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const constant=t=>()=>t;function linear$1(t,e){return function(n){return t+n*e}}function exponential(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function gamma(t){return(t=+t)==1?nogamma:function(e,n){return n-e?exponential(e,n,t):constant(isNaN(e)?n:e)}}function nogamma(t,e){var n=e-t;return n?linear$1(t,n):constant(isNaN(t)?e:t)}const rgb=(function t(e){var n=gamma(e);function i(l,f){var p=n((l=rgb$1(l)).r,(f=rgb$1(f)).r),b=n(l.g,f.g),w=n(l.b,f.b),v=nogamma(l.opacity,f.opacity);return function(g){return l.r=p(g),l.g=b(g),l.b=w(g),l.opacity=v(g),l+""}}return i.gamma=t,i})(1);function numberArray(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),l;return function(f){for(l=0;l<n;++l)i[l]=t[l]*(1-f)+e[l]*f;return i}}function isNumberArray(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function genericArray(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,l=new Array(i),f=new Array(n),p;for(p=0;p<i;++p)l[p]=interpolate(t[p],e[p]);for(;p<n;++p)f[p]=e[p];return function(b){for(p=0;p<i;++p)f[p]=l[p](b);return f}}function date$1(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function interpolateNumber(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function object(t,e){var n={},i={},l;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(l in e)l in t?n[l]=interpolate(t[l],e[l]):i[l]=e[l];return function(f){for(l in n)i[l]=n[l](f);return i}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(t){return function(){return t}}function one(t){return function(e){return t(e)+""}}function string(t,e){var n=reA.lastIndex=reB.lastIndex=0,i,l,f,p=-1,b=[],w=[];for(t=t+"",e=e+"";(i=reA.exec(t))&&(l=reB.exec(e));)(f=l.index)>n&&(f=e.slice(n,f),b[p]?b[p]+=f:b[++p]=f),(i=i[0])===(l=l[0])?b[p]?b[p]+=l:b[++p]=l:(b[++p]=null,w.push({i:p,x:interpolateNumber(i,l)})),n=reB.lastIndex;return n<e.length&&(f=e.slice(n),b[p]?b[p]+=f:b[++p]=f),b.length<2?w[0]?one(w[0].x):zero(e):(e=w.length,function(v){for(var g=0,u;g<e;++g)b[(u=w[g]).i]=u.x(v);return b.join("")})}function interpolate(t,e){var n=typeof e,i;return e==null||n==="boolean"?constant(e):(n==="number"?interpolateNumber:n==="string"?(i=color(e))?(e=i,rgb):string:e instanceof color?rgb:e instanceof Date?date$1:isNumberArray(e)?numberArray:Array.isArray(e)?genericArray:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?object:interpolateNumber)(t,e)}function interpolateRound(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function piecewise(t,e){e===void 0&&(e=t,t=interpolate);for(var n=0,i=e.length-1,l=e[0],f=new Array(i<0?0:i);n<i;)f[n]=t(l,l=e[++n]);return function(p){var b=Math.max(0,Math.min(i-1,Math.floor(p*=i)));return f[b](p-b)}}function constants(t){return function(){return t}}function number$1(t){return+t}var unit=[0,1];function identity$3(t){return t}function normalize(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:constants(isNaN(e)?NaN:.5)}function clamper(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function bimap(t,e,n){var i=t[0],l=t[1],f=e[0],p=e[1];return l<i?(i=normalize(l,i),f=n(p,f)):(i=normalize(i,l),f=n(f,p)),function(b){return f(i(b))}}function polymap(t,e,n){var i=Math.min(t.length,e.length)-1,l=new Array(i),f=new Array(i),p=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++p<i;)l[p]=normalize(t[p],t[p+1]),f[p]=n(e[p],e[p+1]);return function(b){var w=bisectRight(t,b,1,i)-1;return f[w](l[w](b))}}function copy$1(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function transformer$2(){var t=unit,e=unit,n=interpolate,i,l,f,p=identity$3,b,w,v;function g(){var o=Math.min(t.length,e.length);return p!==identity$3&&(p=clamper(t[0],t[o-1])),b=o>2?polymap:bimap,w=v=null,u}function u(o){return o==null||isNaN(o=+o)?f:(w||(w=b(t.map(i),e,n)))(i(p(o)))}return u.invert=function(o){return p(l((v||(v=b(e,t.map(i),interpolateNumber)))(o)))},u.domain=function(o){return arguments.length?(t=Array.from(o,number$1),g()):t.slice()},u.range=function(o){return arguments.length?(e=Array.from(o),g()):e.slice()},u.rangeRound=function(o){return e=Array.from(o),n=interpolateRound,g()},u.clamp=function(o){return arguments.length?(p=o?!0:identity$3,g()):p!==identity$3},u.interpolate=function(o){return arguments.length?(n=o,g()):n},u.unknown=function(o){return arguments.length?(f=o,u):f},function(o,h){return i=o,l=h,g()}}function continuous(){return transformer$2()(identity$3,identity$3)}function formatDecimal(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function formatDecimalParts(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function exponent(t){return t=formatDecimalParts(Math.abs(t)),t?t[1]:NaN}function formatGroup(t,e){return function(n,i){for(var l=n.length,f=[],p=0,b=t[0],w=0;l>0&&b>0&&(w+b+1>i&&(b=Math.max(1,i-w)),f.push(n.substring(l-=b,l+b)),!((w+=b+1)>i));)b=t[p=(p+1)%t.length];return f.reverse().join(e)}}function formatNumerals(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(t){if(!(e=re.exec(t)))throw new Error("invalid format: "+t);var e;return new FormatSpecifier({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(t){e:for(var e=t.length,n=1,i=-1,l;n<e;++n)switch(t[n]){case".":i=l=n;break;case"0":i===0&&(i=n),l=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(l+1):t}var prefixExponent;function formatPrefixAuto(t,e){var n=formatDecimalParts(t,e);if(!n)return t+"";var i=n[0],l=n[1],f=l-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,p=i.length;return f===p?i:f>p?i+new Array(f-p+1).join("0"):f>0?i.slice(0,f)+"."+i.slice(f):"0."+new Array(1-f).join("0")+formatDecimalParts(t,Math.max(0,e+f-1))[0]}function formatRounded(t,e){var n=formatDecimalParts(t,e);if(!n)return t+"";var i=n[0],l=n[1];return l<0?"0."+new Array(-l).join("0")+i:i.length>l+1?i.slice(0,l+1)+"."+i.slice(l+1):i+new Array(l-i.length+2).join("0")}const formatTypes={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:formatDecimal,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>formatRounded(t*100,e),r:formatRounded,s:formatPrefixAuto,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function identity$2(t){return t}var map$1=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(t){var e=t.grouping===void 0||t.thousands===void 0?identity$2:formatGroup(map$1.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",l=t.decimal===void 0?".":t.decimal+"",f=t.numerals===void 0?identity$2:formatNumerals(map$1.call(t.numerals,String)),p=t.percent===void 0?"%":t.percent+"",b=t.minus===void 0?"":t.minus+"",w=t.nan===void 0?"NaN":t.nan+"";function v(u){u=formatSpecifier(u);var o=u.fill,h=u.align,_=u.sign,S=u.symbol,T=u.zero,O=u.width,j=u.comma,C=u.precision,D=u.trim,R=u.type;R==="n"?(j=!0,R="g"):formatTypes[R]||(C===void 0&&(C=12),D=!0,R="g"),(T||o==="0"&&h==="=")&&(T=!0,o="0",h="=");var I=S==="$"?n:S==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",$=S==="$"?i:/[%p]/.test(R)?p:"",F=formatTypes[R],L=/[defgprs%]/.test(R);C=C===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function V(Y){var Q=I,ee=$,X,W,z;if(R==="c")ee=F(Y)+ee,Y="";else{Y=+Y;var q=Y<0||1/Y<0;if(Y=isNaN(Y)?w:F(Math.abs(Y),C),D&&(Y=formatTrim(Y)),q&&+Y==0&&_!=="+"&&(q=!1),Q=(q?_==="("?_:b:_==="-"||_==="("?"":_)+Q,ee=(R==="s"?prefixes[8+prefixExponent/3]:"")+ee+(q&&_==="("?")":""),L){for(X=-1,W=Y.length;++X<W;)if(z=Y.charCodeAt(X),48>z||z>57){ee=(z===46?l+Y.slice(X+1):Y.slice(X))+ee,Y=Y.slice(0,X);break}}}j&&!T&&(Y=e(Y,1/0));var ce=Q.length+Y.length+ee.length,ae=ce<O?new Array(O-ce+1).join(o):"";switch(j&&T&&(Y=e(ae+Y,ae.length?O-ee.length:1/0),ae=""),h){case"<":Y=Q+Y+ee+ae;break;case"=":Y=Q+ae+Y+ee;break;case"^":Y=ae.slice(0,ce=ae.length>>1)+Q+Y+ee+ae.slice(ce);break;default:Y=ae+Q+Y+ee;break}return f(Y)}return V.toString=function(){return u+""},V}function g(u,o){var h=v((u=formatSpecifier(u),u.type="f",u)),_=Math.max(-8,Math.min(8,Math.floor(exponent(o)/3)))*3,S=Math.pow(10,-_),T=prefixes[8+_/3];return function(O){return h(S*O)+T}}return{format:v,formatPrefix:g}}var locale$1,format,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(t){return locale$1=formatLocale$1(t),format=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(t){return Math.max(0,-exponent(Math.abs(t)))}function precisionPrefix(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(e)/3)))*3-exponent(Math.abs(t)))}function precisionRound(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,exponent(e)-exponent(t))+1}function tickFormat(t,e,n,i){var l=tickStep(t,e,n),f;switch(i=formatSpecifier(i??",f"),i.type){case"s":{var p=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(f=precisionPrefix(l,p))&&(i.precision=f),formatPrefix(i,p)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(f=precisionRound(l,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=f-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(f=precisionFixed(l))&&(i.precision=f-(i.type==="%")*2);break}}return format(i)}function linearish(t){var e=t.domain;return t.ticks=function(n){var i=e();return ticks(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var l=e();return tickFormat(l[0],l[l.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),l=0,f=i.length-1,p=i[l],b=i[f],w,v,g=10;for(b<p&&(v=p,p=b,b=v,v=l,l=f,f=v);g-- >0;){if(v=tickIncrement(p,b,n),v===w)return i[l]=p,i[f]=b,e(i);if(v>0)p=Math.floor(p/v)*v,b=Math.ceil(b/v)*v;else if(v<0)p=Math.ceil(p*v)/v,b=Math.floor(b*v)/v;else break;w=v}return t},t}function linear(){var t=continuous();return t.copy=function(){return copy$1(t,linear())},initRange.apply(t,arguments),linearish(t)}function identity$1(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,number$1),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return identity$1(t).unknown(e)},t=arguments.length?Array.from(t,number$1):[0,1],linearish(n)}function nice(t,e){t=t.slice();var n=0,i=t.length-1,l=t[n],f=t[i],p;return f<l&&(p=n,n=i,i=p,p=l,l=f,f=p),t[n]=e.floor(l),t[i]=e.ceil(f),t}function transformLog(t){return Math.log(t)}function transformExp(t){return Math.exp(t)}function transformLogn(t){return-Math.log(-t)}function transformExpn(t){return-Math.exp(-t)}function pow10(t){return isFinite(t)?+("1e"+t):t<0?0:t}function powp(t){return t===10?pow10:t===Math.E?Math.exp:e=>Math.pow(t,e)}function logp(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function reflect(t){return(e,n)=>-t(-e,n)}function loggish(t){const e=t(transformLog,transformExp),n=e.domain;let i=10,l,f;function p(){return l=logp(i),f=powp(i),n()[0]<0?(l=reflect(l),f=reflect(f),t(transformLogn,transformExpn)):t(transformLog,transformExp),e}return e.base=function(b){return arguments.length?(i=+b,p()):i},e.domain=function(b){return arguments.length?(n(b),p()):n()},e.ticks=b=>{const w=n();let v=w[0],g=w[w.length-1];const u=g<v;u&&([v,g]=[g,v]);let o=l(v),h=l(g),_,S;const T=b==null?10:+b;let O=[];if(!(i%1)&&h-o<T){if(o=Math.floor(o),h=Math.ceil(h),v>0){for(;o<=h;++o)for(_=1;_<i;++_)if(S=o<0?_/f(-o):_*f(o),!(S<v)){if(S>g)break;O.push(S)}}else for(;o<=h;++o)for(_=i-1;_>=1;--_)if(S=o>0?_/f(-o):_*f(o),!(S<v)){if(S>g)break;O.push(S)}O.length*2<T&&(O=ticks(v,g,T))}else O=ticks(o,h,Math.min(h-o,T)).map(f);return u?O.reverse():O},e.tickFormat=(b,w)=>{if(b==null&&(b=10),w==null&&(w=i===10?"s":","),typeof w!="function"&&(!(i%1)&&(w=formatSpecifier(w)).precision==null&&(w.trim=!0),w=format(w)),b===1/0)return w;const v=Math.max(1,i*b/e.ticks().length);return g=>{let u=g/f(Math.round(l(g)));return u*i<i-.5&&(u*=i),u<=v?w(g):""}},e.nice=()=>n(nice(n(),{floor:b=>f(Math.floor(l(b))),ceil:b=>f(Math.ceil(l(b)))})),e}function log(){const t=loggish(transformer$2()).domain([1,10]);return t.copy=()=>copy$1(t,log()).base(t.base()),initRange.apply(t,arguments),t}function transformSymlog(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function transformSymexp(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function symlogish(t){var e=1,n=t(transformSymlog(e),transformSymexp(e));return n.constant=function(i){return arguments.length?t(transformSymlog(e=+i),transformSymexp(e)):e},linearish(n)}function symlog(){var t=symlogish(transformer$2());return t.copy=function(){return copy$1(t,symlog()).constant(t.constant())},initRange.apply(t,arguments)}function transformPow(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function transformSqrt(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function transformSquare(t){return t<0?-t*t:t*t}function powish(t){var e=t(identity$3,identity$3),n=1;function i(){return n===1?t(identity$3,identity$3):n===.5?t(transformSqrt,transformSquare):t(transformPow(n),transformPow(1/n))}return e.exponent=function(l){return arguments.length?(n=+l,i()):n},linearish(e)}function pow(){var t=powish(transformer$2());return t.copy=function(){return copy$1(t,pow()).exponent(t.exponent())},initRange.apply(t,arguments),t}function sqrt(){return pow.apply(null,arguments).exponent(.5)}function square(t){return Math.sign(t)*t*t}function unsquare(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function radial(){var t=continuous(),e=[0,1],n=!1,i;function l(f){var p=unsquare(t(f));return isNaN(p)?i:n?Math.round(p):p}return l.invert=function(f){return t.invert(square(f))},l.domain=function(f){return arguments.length?(t.domain(f),l):t.domain()},l.range=function(f){return arguments.length?(t.range((e=Array.from(f,number$1)).map(square)),l):e.slice()},l.rangeRound=function(f){return l.range(f).round(!0)},l.round=function(f){return arguments.length?(n=!!f,l):n},l.clamp=function(f){return arguments.length?(t.clamp(f),l):t.clamp()},l.unknown=function(f){return arguments.length?(i=f,l):i},l.copy=function(){return radial(t.domain(),e).round(n).clamp(t.clamp()).unknown(i)},initRange.apply(l,arguments),linearish(l)}function quantile(){var t=[],e=[],n=[],i;function l(){var p=0,b=Math.max(1,e.length);for(n=new Array(b-1);++p<b;)n[p-1]=quantileSorted(t,p/b);return f}function f(p){return p==null||isNaN(p=+p)?i:e[bisectRight(n,p)]}return f.invertExtent=function(p){var b=e.indexOf(p);return b<0?[NaN,NaN]:[b>0?n[b-1]:t[0],b<n.length?n[b]:t[t.length-1]]},f.domain=function(p){if(!arguments.length)return t.slice();t=[];for(let b of p)b!=null&&!isNaN(b=+b)&&t.push(b);return t.sort(ascending),l()},f.range=function(p){return arguments.length?(e=Array.from(p),l()):e.slice()},f.unknown=function(p){return arguments.length?(i=p,f):i},f.quantiles=function(){return n.slice()},f.copy=function(){return quantile().domain(t).range(e).unknown(i)},initRange.apply(f,arguments)}function quantize(){var t=0,e=1,n=1,i=[.5],l=[0,1],f;function p(w){return w!=null&&w<=w?l[bisectRight(i,w,0,n)]:f}function b(){var w=-1;for(i=new Array(n);++w<n;)i[w]=((w+1)*e-(w-n)*t)/(n+1);return p}return p.domain=function(w){return arguments.length?([t,e]=w,t=+t,e=+e,b()):[t,e]},p.range=function(w){return arguments.length?(n=(l=Array.from(w)).length-1,b()):l.slice()},p.invertExtent=function(w){var v=l.indexOf(w);return v<0?[NaN,NaN]:v<1?[t,i[0]]:v>=n?[i[n-1],e]:[i[v-1],i[v]]},p.unknown=function(w){return arguments.length&&(f=w),p},p.thresholds=function(){return i.slice()},p.copy=function(){return quantize().domain([t,e]).range(l).unknown(f)},initRange.apply(linearish(p),arguments)}function threshold(){var t=[.5],e=[0,1],n,i=1;function l(f){return f!=null&&f<=f?e[bisectRight(t,f,0,i)]:n}return l.domain=function(f){return arguments.length?(t=Array.from(f),i=Math.min(t.length,e.length-1),l):t.slice()},l.range=function(f){return arguments.length?(e=Array.from(f),i=Math.min(t.length,e.length-1),l):e.slice()},l.invertExtent=function(f){var p=e.indexOf(f);return[t[p-1],t[p]]},l.unknown=function(f){return arguments.length?(n=f,l):n},l.copy=function(){return threshold().domain(t).range(e).unknown(n)},initRange.apply(l,arguments)}const t0=new Date,t1=new Date;function timeInterval(t,e,n,i){function l(f){return t(f=arguments.length===0?new Date:new Date(+f)),f}return l.floor=f=>(t(f=new Date(+f)),f),l.ceil=f=>(t(f=new Date(f-1)),e(f,1),t(f),f),l.round=f=>{const p=l(f),b=l.ceil(f);return f-p<b-f?p:b},l.offset=(f,p)=>(e(f=new Date(+f),p==null?1:Math.floor(p)),f),l.range=(f,p,b)=>{const w=[];if(f=l.ceil(f),b=b==null?1:Math.floor(b),!(f<p)||!(b>0))return w;let v;do w.push(v=new Date(+f)),e(f,b),t(f);while(v<f&&f<p);return w},l.filter=f=>timeInterval(p=>{if(p>=p)for(;t(p),!f(p);)p.setTime(p-1)},(p,b)=>{if(p>=p)if(b<0)for(;++b<=0;)for(;e(p,-1),!f(p););else for(;--b>=0;)for(;e(p,1),!f(p););}),n&&(l.count=(f,p)=>(t0.setTime(+f),t1.setTime(+p),t(t0),t(t1),Math.floor(n(t0,t1))),l.every=f=>(f=Math.floor(f),!isFinite(f)||!(f>0)?null:f>1?l.filter(i?p=>i(p)%f===0:p=>l.count(0,p)%f===0):l)),l}const millisecond=timeInterval(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);millisecond.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?timeInterval(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):millisecond);millisecond.range;const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,second=timeInterval(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*durationSecond)},(t,e)=>(e-t)/durationSecond,t=>t.getUTCSeconds());second.range;const timeMinute=timeInterval(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*durationSecond)},(t,e)=>{t.setTime(+t+e*durationMinute)},(t,e)=>(e-t)/durationMinute,t=>t.getMinutes());timeMinute.range;const utcMinute=timeInterval(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*durationMinute)},(t,e)=>(e-t)/durationMinute,t=>t.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*durationSecond-t.getMinutes()*durationMinute)},(t,e)=>{t.setTime(+t+e*durationHour)},(t,e)=>(e-t)/durationHour,t=>t.getHours());timeHour.range;const utcHour=timeInterval(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*durationHour)},(t,e)=>(e-t)/durationHour,t=>t.getUTCHours());utcHour.range;const timeDay=timeInterval(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*durationMinute)/durationDay,t=>t.getDate()-1);timeDay.range;const utcDay=timeInterval(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/durationDay,t=>t.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/durationDay,t=>Math.floor(t/durationDay));unixDay.range;function timeWeekday(t){return timeInterval(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(t){return timeInterval(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());timeMonth.range;const utcMonth=timeInterval(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());utcMonth.range;const timeYear=timeInterval(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());timeYear.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:timeInterval(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});timeYear.range;const utcYear=timeInterval(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());utcYear.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:timeInterval(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});utcYear.range;function ticker(t,e,n,i,l,f){const p=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[f,1,durationMinute],[f,5,5*durationMinute],[f,15,15*durationMinute],[f,30,30*durationMinute],[l,1,durationHour],[l,3,3*durationHour],[l,6,6*durationHour],[l,12,12*durationHour],[i,1,durationDay],[i,2,2*durationDay],[n,1,durationWeek],[e,1,durationMonth],[e,3,3*durationMonth],[t,1,durationYear]];function b(v,g,u){const o=g<v;o&&([v,g]=[g,v]);const h=u&&typeof u.range=="function"?u:w(v,g,u),_=h?h.range(v,+g+1):[];return o?_.reverse():_}function w(v,g,u){const o=Math.abs(g-v)/u,h=bisector(([,,T])=>T).right(p,o);if(h===p.length)return t.every(tickStep(v/durationYear,g/durationYear,u));if(h===0)return millisecond.every(Math.max(tickStep(v,g,u),1));const[_,S]=p[o/p[h-1][2]<p[h][2]/o?h-1:h];return _.every(S)}return[b,w]}const[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function utcDate(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function newDate(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function formatLocale(t){var e=t.dateTime,n=t.date,i=t.time,l=t.periods,f=t.days,p=t.shortDays,b=t.months,w=t.shortMonths,v=formatRe(l),g=formatLookup(l),u=formatRe(f),o=formatLookup(f),h=formatRe(p),_=formatLookup(p),S=formatRe(b),T=formatLookup(b),O=formatRe(w),j=formatLookup(w),C={a:q,A:ce,b:ae,B:we,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:Z,q:ue,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},D={a:Pe,A:Re,b:pe,B:Ae,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:Ce,q:$e,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},R={a:V,A:Y,b:Q,B:ee,c:X,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:L,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:W,X:z,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};C.x=I(n,C),C.X=I(i,C),C.c=I(e,C),D.x=I(n,D),D.X=I(i,D),D.c=I(e,D);function I(se,ke){return function(Ie){var de=[],qe=-1,Fe=0,Ne=se.length,Ge,Ue,Ze;for(Ie instanceof Date||(Ie=new Date(+Ie));++qe<Ne;)se.charCodeAt(qe)===37&&(de.push(se.slice(Fe,qe)),(Ue=pads[Ge=se.charAt(++qe)])!=null?Ge=se.charAt(++qe):Ue=Ge==="e"?" ":"0",(Ze=ke[Ge])&&(Ge=Ze(Ie,Ue)),de.push(Ge),Fe=qe+1);return de.push(se.slice(Fe,qe)),de.join("")}}function $(se,ke){return function(Ie){var de=newDate(1900,void 0,1),qe=F(de,se,Ie+="",0),Fe,Ne;if(qe!=Ie.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(ke&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(Fe=utcDate(newDate(de.y,0,1)),Ne=Fe.getUTCDay(),Fe=Ne>4||Ne===0?utcMonday.ceil(Fe):utcMonday(Fe),Fe=utcDay.offset(Fe,(de.V-1)*7),de.y=Fe.getUTCFullYear(),de.m=Fe.getUTCMonth(),de.d=Fe.getUTCDate()+(de.w+6)%7):(Fe=localDate(newDate(de.y,0,1)),Ne=Fe.getDay(),Fe=Ne>4||Ne===0?timeMonday.ceil(Fe):timeMonday(Fe),Fe=timeDay.offset(Fe,(de.V-1)*7),de.y=Fe.getFullYear(),de.m=Fe.getMonth(),de.d=Fe.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),Ne="Z"in de?utcDate(newDate(de.y,0,1)).getUTCDay():localDate(newDate(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(Ne+5)%7:de.w+de.U*7-(Ne+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,utcDate(de)):localDate(de)}}function F(se,ke,Ie,de){for(var qe=0,Fe=ke.length,Ne=Ie.length,Ge,Ue;qe<Fe;){if(de>=Ne)return-1;if(Ge=ke.charCodeAt(qe++),Ge===37){if(Ge=ke.charAt(qe++),Ue=R[Ge in pads?ke.charAt(qe++):Ge],!Ue||(de=Ue(se,Ie,de))<0)return-1}else if(Ge!=Ie.charCodeAt(de++))return-1}return de}function L(se,ke,Ie){var de=v.exec(ke.slice(Ie));return de?(se.p=g.get(de[0].toLowerCase()),Ie+de[0].length):-1}function V(se,ke,Ie){var de=h.exec(ke.slice(Ie));return de?(se.w=_.get(de[0].toLowerCase()),Ie+de[0].length):-1}function Y(se,ke,Ie){var de=u.exec(ke.slice(Ie));return de?(se.w=o.get(de[0].toLowerCase()),Ie+de[0].length):-1}function Q(se,ke,Ie){var de=O.exec(ke.slice(Ie));return de?(se.m=j.get(de[0].toLowerCase()),Ie+de[0].length):-1}function ee(se,ke,Ie){var de=S.exec(ke.slice(Ie));return de?(se.m=T.get(de[0].toLowerCase()),Ie+de[0].length):-1}function X(se,ke,Ie){return F(se,e,ke,Ie)}function W(se,ke,Ie){return F(se,n,ke,Ie)}function z(se,ke,Ie){return F(se,i,ke,Ie)}function q(se){return p[se.getDay()]}function ce(se){return f[se.getDay()]}function ae(se){return w[se.getMonth()]}function we(se){return b[se.getMonth()]}function Z(se){return l[+(se.getHours()>=12)]}function ue(se){return 1+~~(se.getMonth()/3)}function Pe(se){return p[se.getUTCDay()]}function Re(se){return f[se.getUTCDay()]}function pe(se){return w[se.getUTCMonth()]}function Ae(se){return b[se.getUTCMonth()]}function Ce(se){return l[+(se.getUTCHours()>=12)]}function $e(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var ke=I(se+="",C);return ke.toString=function(){return se},ke},parse:function(se){var ke=$(se+="",!1);return ke.toString=function(){return se},ke},utcFormat:function(se){var ke=I(se+="",D);return ke.toString=function(){return se},ke},utcParse:function(se){var ke=$(se+="",!0);return ke.toString=function(){return se},ke}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(t,e,n){var i=t<0?"-":"",l=(i?-t:t)+"",f=l.length;return i+(f<n?new Array(n-f+1).join(e)+l:l)}function requote(t){return t.replace(requoteRe,"\\$&")}function formatRe(t){return new RegExp("^(?:"+t.map(requote).join("|")+")","i")}function formatLookup(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function parseWeekdayNumberSunday(t,e,n){var i=numberRe.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function parseWeekdayNumberMonday(t,e,n){var i=numberRe.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function parseWeekNumberSunday(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function parseWeekNumberISO(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function parseWeekNumberMonday(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function parseFullYear(t,e,n){var i=numberRe.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function parseYear(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function parseZone(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function parseQuarter(t,e,n){var i=numberRe.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function parseMonthNumber(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function parseDayOfMonth(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function parseDayOfYear(t,e,n){var i=numberRe.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function parseHour24(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function parseMinutes(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function parseSeconds(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function parseMilliseconds(t,e,n){var i=numberRe.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function parseMicroseconds(t,e,n){var i=numberRe.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function parseLiteralPercent(t,e,n){var i=percentRe.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function parseUnixTimestamp(t,e,n){var i=numberRe.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function parseUnixTimestampSeconds(t,e,n){var i=numberRe.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function formatDayOfMonth(t,e){return pad(t.getDate(),e,2)}function formatHour24(t,e){return pad(t.getHours(),e,2)}function formatHour12(t,e){return pad(t.getHours()%12||12,e,2)}function formatDayOfYear(t,e){return pad(1+timeDay.count(timeYear(t),t),e,3)}function formatMilliseconds(t,e){return pad(t.getMilliseconds(),e,3)}function formatMicroseconds(t,e){return formatMilliseconds(t,e)+"000"}function formatMonthNumber(t,e){return pad(t.getMonth()+1,e,2)}function formatMinutes(t,e){return pad(t.getMinutes(),e,2)}function formatSeconds(t,e){return pad(t.getSeconds(),e,2)}function formatWeekdayNumberMonday(t){var e=t.getDay();return e===0?7:e}function formatWeekNumberSunday(t,e){return pad(timeSunday.count(timeYear(t)-1,t),e,2)}function dISO(t){var e=t.getDay();return e>=4||e===0?timeThursday(t):timeThursday.ceil(t)}function formatWeekNumberISO(t,e){return t=dISO(t),pad(timeThursday.count(timeYear(t),t)+(timeYear(t).getDay()===4),e,2)}function formatWeekdayNumberSunday(t){return t.getDay()}function formatWeekNumberMonday(t,e){return pad(timeMonday.count(timeYear(t)-1,t),e,2)}function formatYear(t,e){return pad(t.getFullYear()%100,e,2)}function formatYearISO(t,e){return t=dISO(t),pad(t.getFullYear()%100,e,2)}function formatFullYear(t,e){return pad(t.getFullYear()%1e4,e,4)}function formatFullYearISO(t,e){var n=t.getDay();return t=n>=4||n===0?timeThursday(t):timeThursday.ceil(t),pad(t.getFullYear()%1e4,e,4)}function formatZone(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+pad(e/60|0,"0",2)+pad(e%60,"0",2)}function formatUTCDayOfMonth(t,e){return pad(t.getUTCDate(),e,2)}function formatUTCHour24(t,e){return pad(t.getUTCHours(),e,2)}function formatUTCHour12(t,e){return pad(t.getUTCHours()%12||12,e,2)}function formatUTCDayOfYear(t,e){return pad(1+utcDay.count(utcYear(t),t),e,3)}function formatUTCMilliseconds(t,e){return pad(t.getUTCMilliseconds(),e,3)}function formatUTCMicroseconds(t,e){return formatUTCMilliseconds(t,e)+"000"}function formatUTCMonthNumber(t,e){return pad(t.getUTCMonth()+1,e,2)}function formatUTCMinutes(t,e){return pad(t.getUTCMinutes(),e,2)}function formatUTCSeconds(t,e){return pad(t.getUTCSeconds(),e,2)}function formatUTCWeekdayNumberMonday(t){var e=t.getUTCDay();return e===0?7:e}function formatUTCWeekNumberSunday(t,e){return pad(utcSunday.count(utcYear(t)-1,t),e,2)}function UTCdISO(t){var e=t.getUTCDay();return e>=4||e===0?utcThursday(t):utcThursday.ceil(t)}function formatUTCWeekNumberISO(t,e){return t=UTCdISO(t),pad(utcThursday.count(utcYear(t),t)+(utcYear(t).getUTCDay()===4),e,2)}function formatUTCWeekdayNumberSunday(t){return t.getUTCDay()}function formatUTCWeekNumberMonday(t,e){return pad(utcMonday.count(utcYear(t)-1,t),e,2)}function formatUTCYear(t,e){return pad(t.getUTCFullYear()%100,e,2)}function formatUTCYearISO(t,e){return t=UTCdISO(t),pad(t.getUTCFullYear()%100,e,2)}function formatUTCFullYear(t,e){return pad(t.getUTCFullYear()%1e4,e,4)}function formatUTCFullYearISO(t,e){var n=t.getUTCDay();return t=n>=4||n===0?utcThursday(t):utcThursday.ceil(t),pad(t.getUTCFullYear()%1e4,e,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(t){return+t}function formatUnixTimestampSeconds(t){return Math.floor(+t/1e3)}var locale,timeFormat,utcFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(t){return locale=formatLocale(t),timeFormat=locale.format,locale.parse,utcFormat=locale.utcFormat,locale.utcParse,locale}function date(t){return new Date(t)}function number(t){return t instanceof Date?+t:+new Date(+t)}function calendar(t,e,n,i,l,f,p,b,w,v){var g=continuous(),u=g.invert,o=g.domain,h=v(".%L"),_=v(":%S"),S=v("%I:%M"),T=v("%I %p"),O=v("%a %d"),j=v("%b %d"),C=v("%B"),D=v("%Y");function R(I){return(w(I)<I?h:b(I)<I?_:p(I)<I?S:f(I)<I?T:i(I)<I?l(I)<I?O:j:n(I)<I?C:D)(I)}return g.invert=function(I){return new Date(u(I))},g.domain=function(I){return arguments.length?o(Array.from(I,number)):o().map(date)},g.ticks=function(I){var $=o();return t($[0],$[$.length-1],I??10)},g.tickFormat=function(I,$){return $==null?R:v($)},g.nice=function(I){var $=o();return(!I||typeof I.range!="function")&&(I=e($[0],$[$.length-1],I??10)),I?o(nice($,I)):g},g.copy=function(){return copy$1(g,calendar(t,e,n,i,l,f,p,b,w,v))},g}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function transformer$1(){var t=0,e=1,n,i,l,f,p=identity$3,b=!1,w;function v(u){return u==null||isNaN(u=+u)?w:p(l===0?.5:(u=(f(u)-n)*l,b?Math.max(0,Math.min(1,u)):u))}v.domain=function(u){return arguments.length?([t,e]=u,n=f(t=+t),i=f(e=+e),l=n===i?0:1/(i-n),v):[t,e]},v.clamp=function(u){return arguments.length?(b=!!u,v):b},v.interpolator=function(u){return arguments.length?(p=u,v):p};function g(u){return function(o){var h,_;return arguments.length?([h,_]=o,p=u(h,_),v):[p(0),p(1)]}}return v.range=g(interpolate),v.rangeRound=g(interpolateRound),v.unknown=function(u){return arguments.length?(w=u,v):w},function(u){return f=u,n=u(t),i=u(e),l=n===i?0:1/(i-n),v}}function copy(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function sequential(){var t=linearish(transformer$1()(identity$3));return t.copy=function(){return copy(t,sequential())},initInterpolator.apply(t,arguments)}function sequentialLog(){var t=loggish(transformer$1()).domain([1,10]);return t.copy=function(){return copy(t,sequentialLog()).base(t.base())},initInterpolator.apply(t,arguments)}function sequentialSymlog(){var t=symlogish(transformer$1());return t.copy=function(){return copy(t,sequentialSymlog()).constant(t.constant())},initInterpolator.apply(t,arguments)}function sequentialPow(){var t=powish(transformer$1());return t.copy=function(){return copy(t,sequentialPow()).exponent(t.exponent())},initInterpolator.apply(t,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function sequentialQuantile(){var t=[],e=identity$3;function n(i){if(i!=null&&!isNaN(i=+i))return e((bisectRight(t,i,1)-1)/(t.length-1))}return n.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let l of i)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(ascending),n},n.interpolator=function(i){return arguments.length?(e=i,n):e},n.range=function(){return t.map((i,l)=>e(l/(t.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(l,f)=>quantile$1(t,f/i))},n.copy=function(){return sequentialQuantile(e).domain(t)},initInterpolator.apply(n,arguments)}function transformer(){var t=0,e=.5,n=1,i=1,l,f,p,b,w,v=identity$3,g,u=!1,o;function h(S){return isNaN(S=+S)?o:(S=.5+((S=+g(S))-f)*(i*S<i*f?b:w),v(u?Math.max(0,Math.min(1,S)):S))}h.domain=function(S){return arguments.length?([t,e,n]=S,l=g(t=+t),f=g(e=+e),p=g(n=+n),b=l===f?0:.5/(f-l),w=f===p?0:.5/(p-f),i=f<l?-1:1,h):[t,e,n]},h.clamp=function(S){return arguments.length?(u=!!S,h):u},h.interpolator=function(S){return arguments.length?(v=S,h):v};function _(S){return function(T){var O,j,C;return arguments.length?([O,j,C]=T,v=piecewise(S,[O,j,C]),h):[v(0),v(.5),v(1)]}}return h.range=_(interpolate),h.rangeRound=_(interpolateRound),h.unknown=function(S){return arguments.length?(o=S,h):o},function(S){return g=S,l=S(t),f=S(e),p=S(n),b=l===f?0:.5/(f-l),w=f===p?0:.5/(p-f),i=f<l?-1:1,h}}function diverging(){var t=linearish(transformer()(identity$3));return t.copy=function(){return copy(t,diverging())},initInterpolator.apply(t,arguments)}function divergingLog(){var t=loggish(transformer()).domain([.1,1,10]);return t.copy=function(){return copy(t,divergingLog()).base(t.base())},initInterpolator.apply(t,arguments)}function divergingSymlog(){var t=symlogish(transformer());return t.copy=function(){return copy(t,divergingSymlog()).constant(t.constant())},initInterpolator.apply(t,arguments)}function divergingPow(){var t=powish(transformer());return t.copy=function(){return copy(t,divergingPow()).exponent(t.exponent())},initInterpolator.apply(t,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}const d3Scales=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:band,scaleDiverging:diverging,scaleDivergingLog:divergingLog,scaleDivergingPow:divergingPow,scaleDivergingSqrt:divergingSqrt,scaleDivergingSymlog:divergingSymlog,scaleIdentity:identity$1,scaleImplicit:implicit,scaleLinear:linear,scaleLog:log,scaleOrdinal:ordinal,scalePoint:point,scalePow:pow,scaleQuantile:quantile,scaleQuantize:quantize,scaleRadial:radial,scaleSequential:sequential,scaleSequentialLog:sequentialLog,scaleSequentialPow:sequentialPow,scaleSequentialQuantile:sequentialQuantile,scaleSequentialSqrt:sequentialSqrt,scaleSequentialSymlog:sequentialSymlog,scaleSqrt:sqrt,scaleSymlog:symlog,scaleThreshold:threshold,scaleTime:time,scaleUtc:utcTime,tickFormat},Symbol.toStringTag,{value:"Module"}));var selectChartDataWithIndexes=t=>t.chartData,selectChartDataAndAlwaysIgnoreIndexes=createSelector([selectChartDataWithIndexes],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),selectChartDataWithIndexesIfNotInPanorama=(t,e,n,i)=>i?selectChartDataAndAlwaysIgnoreIndexes(t):selectChartDataWithIndexes(t);function isWellFormedNumberDomain(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(isWellBehavedNumber(e)&&isWellBehavedNumber(n))return!0}return!1}function extendDomain(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function numericalDomainSpecifiedWithoutRequiringData(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,i]=t,l,f;if(isWellBehavedNumber(n))l=n;else if(typeof n=="function")return;if(isWellBehavedNumber(i))f=i;else if(typeof i=="function")return;var p=[l,f];if(isWellFormedNumberDomain(p))return p}}function parseNumericalUserDomain(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var i=t(e,n);if(isWellFormedNumberDomain(i))return extendDomain(i,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[l,f]=t,p,b;if(l==="auto")e!=null&&(p=Math.min(...e));else if(isNumber(l))p=l;else if(typeof l=="function")try{e!=null&&(p=l(e==null?void 0:e[0]))}catch{}else if(typeof l=="string"&&MIN_VALUE_REG.test(l)){var w=MIN_VALUE_REG.exec(l);if(w==null||e==null)p=void 0;else{var v=+w[1];p=e[0]-v}}else p=e==null?void 0:e[0];if(f==="auto")e!=null&&(b=Math.max(...e));else if(isNumber(f))b=f;else if(typeof f=="function")try{e!=null&&(b=f(e==null?void 0:e[1]))}catch{}else if(typeof f=="string"&&MAX_VALUE_REG.test(f)){var g=MAX_VALUE_REG.exec(f);if(g==null||e==null)b=void 0;else{var u=+g[1];b=e[1]+u}}else b=e==null?void 0:e[1];var o=[p,b];if(isWellFormedNumberDomain(o))return e==null?o:extendDomain(o,e,n)}}}var MAX_DIGITS=1e9,defaults={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Decimal,external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",exponentOutOfRange=decimalError+"Exponent out of range: ",mathfloor=Math.floor,mathpow=Math.pow,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ONE,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,MAX_E=mathfloor(MAX_SAFE_INTEGER/LOG_BASE),P={};P.absoluteValue=P.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};P.comparedTo=P.cmp=function(t){var e,n,i,l,f=this;if(t=new f.constructor(t),f.s!==t.s)return f.s||-t.s;if(f.e!==t.e)return f.e>t.e^f.s<0?1:-1;for(i=f.d.length,l=t.d.length,e=0,n=i<l?i:l;e<n;++e)if(f.d[e]!==t.d[e])return f.d[e]>t.d[e]^f.s<0?1:-1;return i===l?0:i>l^f.s<0?1:-1};P.decimalPlaces=P.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*LOG_BASE;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};P.dividedBy=P.div=function(t){return divide(this,new this.constructor(t))};P.dividedToIntegerBy=P.idiv=function(t){var e=this,n=e.constructor;return round(divide(e,new n(t),0,1),n.precision)};P.equals=P.eq=function(t){return!this.cmp(t)};P.exponent=function(){return getBase10Exponent(this)};P.greaterThan=P.gt=function(t){return this.cmp(t)>0};P.greaterThanOrEqualTo=P.gte=function(t){return this.cmp(t)>=0};P.isInteger=P.isint=function(){return this.e>this.d.length-2};P.isNegative=P.isneg=function(){return this.s<0};P.isPositive=P.ispos=function(){return this.s>0};P.isZero=function(){return this.s===0};P.lessThan=P.lt=function(t){return this.cmp(t)<0};P.lessThanOrEqualTo=P.lte=function(t){return this.cmp(t)<1};P.logarithm=P.log=function(t){var e,n=this,i=n.constructor,l=i.precision,f=l+5;if(t===void 0)t=new i(10);else if(t=new i(t),t.s<1||t.eq(ONE))throw Error(decimalError+"NaN");if(n.s<1)throw Error(decimalError+(n.s?"NaN":"-Infinity"));return n.eq(ONE)?new i(0):(external=!1,e=divide(ln(n,f),ln(t,f),f),external=!0,round(e,l))};P.minus=P.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?subtract(e,t):add(e,(t.s=-t.s,t))};P.modulo=P.mod=function(t){var e,n=this,i=n.constructor,l=i.precision;if(t=new i(t),!t.s)throw Error(decimalError+"NaN");return n.s?(external=!1,e=divide(n,t,0,1).times(t),external=!0,n.minus(e)):round(new i(n),l)};P.naturalExponential=P.exp=function(){return exp(this)};P.naturalLogarithm=P.ln=function(){return ln(this)};P.negated=P.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};P.plus=P.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?add(e,t):subtract(e,(t.s=-t.s,t))};P.precision=P.sd=function(t){var e,n,i,l=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(invalidArgument+t);if(e=getBase10Exponent(l)+1,i=l.d.length-1,n=i*LOG_BASE+1,i=l.d[i],i){for(;i%10==0;i/=10)n--;for(i=l.d[0];i>=10;i/=10)n++}return t&&e>n?e:n};P.squareRoot=P.sqrt=function(){var t,e,n,i,l,f,p,b=this,w=b.constructor;if(b.s<1){if(!b.s)return new w(0);throw Error(decimalError+"NaN")}for(t=getBase10Exponent(b),external=!1,l=Math.sqrt(+b),l==0||l==1/0?(e=digitsToString(b.d),(e.length+t)%2==0&&(e+="0"),l=Math.sqrt(e),t=mathfloor((t+1)/2)-(t<0||t%2),l==1/0?e="5e"+t:(e=l.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),i=new w(e)):i=new w(l.toString()),n=w.precision,l=p=n+3;;)if(f=i,i=f.plus(divide(b,f,p+2)).times(.5),digitsToString(f.d).slice(0,p)===(e=digitsToString(i.d)).slice(0,p)){if(e=e.slice(p-3,p+1),l==p&&e=="4999"){if(round(f,n+1,0),f.times(f).eq(b)){i=f;break}}else if(e!="9999")break;p+=4}return external=!0,round(i,n)};P.times=P.mul=function(t){var e,n,i,l,f,p,b,w,v,g=this,u=g.constructor,o=g.d,h=(t=new u(t)).d;if(!g.s||!t.s)return new u(0);for(t.s*=g.s,n=g.e+t.e,w=o.length,v=h.length,w<v&&(f=o,o=h,h=f,p=w,w=v,v=p),f=[],p=w+v,i=p;i--;)f.push(0);for(i=v;--i>=0;){for(e=0,l=w+i;l>i;)b=f[l]+h[i]*o[l-i-1]+e,f[l--]=b%BASE|0,e=b/BASE|0;f[l]=(f[l]+e)%BASE|0}for(;!f[--p];)f.pop();return e?++n:f.shift(),t.d=f,t.e=n,external?round(t,u.precision):t};P.toDecimalPlaces=P.todp=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(checkInt32(t,0,MAX_DIGITS),e===void 0?e=i.rounding:checkInt32(e,0,8),round(n,t+getBase10Exponent(n)+1,e))};P.toExponential=function(t,e){var n,i=this,l=i.constructor;return t===void 0?n=toString(i,!0):(checkInt32(t,0,MAX_DIGITS),e===void 0?e=l.rounding:checkInt32(e,0,8),i=round(new l(i),t+1,e),n=toString(i,!0,t+1)),n};P.toFixed=function(t,e){var n,i,l=this,f=l.constructor;return t===void 0?toString(l):(checkInt32(t,0,MAX_DIGITS),e===void 0?e=f.rounding:checkInt32(e,0,8),i=round(new f(l),t+getBase10Exponent(l)+1,e),n=toString(i.abs(),!1,t+getBase10Exponent(i)+1),l.isneg()&&!l.isZero()?"-"+n:n)};P.toInteger=P.toint=function(){var t=this,e=t.constructor;return round(new e(t),getBase10Exponent(t)+1,e.rounding)};P.toNumber=function(){return+this};P.toPower=P.pow=function(t){var e,n,i,l,f,p,b=this,w=b.constructor,v=12,g=+(t=new w(t));if(!t.s)return new w(ONE);if(b=new w(b),!b.s){if(t.s<1)throw Error(decimalError+"Infinity");return b}if(b.eq(ONE))return b;if(i=w.precision,t.eq(ONE))return round(b,i);if(e=t.e,n=t.d.length-1,p=e>=n,f=b.s,p){if((n=g<0?-g:g)<=MAX_SAFE_INTEGER){for(l=new w(ONE),e=Math.ceil(i/LOG_BASE+4),external=!1;n%2&&(l=l.times(b),truncate(l.d,e)),n=mathfloor(n/2),n!==0;)b=b.times(b),truncate(b.d,e);return external=!0,t.s<0?new w(ONE).div(l):round(l,i)}}else if(f<0)throw Error(decimalError+"NaN");return f=f<0&&t.d[Math.max(e,n)]&1?-1:1,b.s=1,external=!1,l=t.times(ln(b,i+v)),external=!0,l=exp(l),l.s=f,l};P.toPrecision=function(t,e){var n,i,l=this,f=l.constructor;return t===void 0?(n=getBase10Exponent(l),i=toString(l,n<=f.toExpNeg||n>=f.toExpPos)):(checkInt32(t,1,MAX_DIGITS),e===void 0?e=f.rounding:checkInt32(e,0,8),l=round(new f(l),t,e),n=getBase10Exponent(l),i=toString(l,t<=n||n<=f.toExpNeg,t)),i};P.toSignificantDigits=P.tosd=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(checkInt32(t,1,MAX_DIGITS),e===void 0?e=i.rounding:checkInt32(e,0,8)),round(new i(n),t,e)};P.toString=P.valueOf=P.val=P.toJSON=P[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=getBase10Exponent(t),n=t.constructor;return toString(t,e<=n.toExpNeg||e>=n.toExpPos)};function add(t,e){var n,i,l,f,p,b,w,v,g=t.constructor,u=g.precision;if(!t.s||!e.s)return e.s||(e=new g(t)),external?round(e,u):e;if(w=t.d,v=e.d,p=t.e,l=e.e,w=w.slice(),f=p-l,f){for(f<0?(i=w,f=-f,b=v.length):(i=v,l=p,b=w.length),p=Math.ceil(u/LOG_BASE),b=p>b?p+1:b+1,f>b&&(f=b,i.length=1),i.reverse();f--;)i.push(0);i.reverse()}for(b=w.length,f=v.length,b-f<0&&(f=b,i=v,v=w,w=i),n=0;f;)n=(w[--f]=w[f]+v[f]+n)/BASE|0,w[f]%=BASE;for(n&&(w.unshift(n),++l),b=w.length;w[--b]==0;)w.pop();return e.d=w,e.e=l,external?round(e,u):e}function checkInt32(t,e,n){if(t!==~~t||t<e||t>n)throw Error(invalidArgument+t)}function digitsToString(t){var e,n,i,l=t.length-1,f="",p=t[0];if(l>0){for(f+=p,e=1;e<l;e++)i=t[e]+"",n=LOG_BASE-i.length,n&&(f+=getZeroString(n)),f+=i;p=t[e],i=p+"",n=LOG_BASE-i.length,n&&(f+=getZeroString(n))}else if(p===0)return"0";for(;p%10===0;)p/=10;return f+p}var divide=(function(){function t(i,l){var f,p=0,b=i.length;for(i=i.slice();b--;)f=i[b]*l+p,i[b]=f%BASE|0,p=f/BASE|0;return p&&i.unshift(p),i}function e(i,l,f,p){var b,w;if(f!=p)w=f>p?1:-1;else for(b=w=0;b<f;b++)if(i[b]!=l[b]){w=i[b]>l[b]?1:-1;break}return w}function n(i,l,f){for(var p=0;f--;)i[f]-=p,p=i[f]<l[f]?1:0,i[f]=p*BASE+i[f]-l[f];for(;!i[0]&&i.length>1;)i.shift()}return function(i,l,f,p){var b,w,v,g,u,o,h,_,S,T,O,j,C,D,R,I,$,F,L=i.constructor,V=i.s==l.s?1:-1,Y=i.d,Q=l.d;if(!i.s)return new L(i);if(!l.s)throw Error(decimalError+"Division by zero");for(w=i.e-l.e,$=Q.length,R=Y.length,h=new L(V),_=h.d=[],v=0;Q[v]==(Y[v]||0);)++v;if(Q[v]>(Y[v]||0)&&--w,f==null?j=f=L.precision:p?j=f+(getBase10Exponent(i)-getBase10Exponent(l))+1:j=f,j<0)return new L(0);if(j=j/LOG_BASE+2|0,v=0,$==1)for(g=0,Q=Q[0],j++;(v<R||g)&&j--;v++)C=g*BASE+(Y[v]||0),_[v]=C/Q|0,g=C%Q|0;else{for(g=BASE/(Q[0]+1)|0,g>1&&(Q=t(Q,g),Y=t(Y,g),$=Q.length,R=Y.length),D=$,S=Y.slice(0,$),T=S.length;T<$;)S[T++]=0;F=Q.slice(),F.unshift(0),I=Q[0],Q[1]>=BASE/2&&++I;do g=0,b=e(Q,S,$,T),b<0?(O=S[0],$!=T&&(O=O*BASE+(S[1]||0)),g=O/I|0,g>1?(g>=BASE&&(g=BASE-1),u=t(Q,g),o=u.length,T=S.length,b=e(u,S,o,T),b==1&&(g--,n(u,$<o?F:Q,o))):(g==0&&(b=g=1),u=Q.slice()),o=u.length,o<T&&u.unshift(0),n(S,u,T),b==-1&&(T=S.length,b=e(Q,S,$,T),b<1&&(g++,n(S,$<T?F:Q,T))),T=S.length):b===0&&(g++,S=[0]),_[v++]=g,b&&S[0]?S[T++]=Y[D]||0:(S=[Y[D]],T=1);while((D++<R||S[0]!==void 0)&&j--)}return _[0]||_.shift(),h.e=w,round(h,p?f+getBase10Exponent(h)+1:f)}})();function exp(t,e){var n,i,l,f,p,b,w=0,v=0,g=t.constructor,u=g.precision;if(getBase10Exponent(t)>16)throw Error(exponentOutOfRange+getBase10Exponent(t));if(!t.s)return new g(ONE);for(external=!1,b=u,p=new g(.03125);t.abs().gte(.1);)t=t.times(p),v+=5;for(i=Math.log(mathpow(2,v))/Math.LN10*2+5|0,b+=i,n=l=f=new g(ONE),g.precision=b;;){if(l=round(l.times(t),b),n=n.times(++w),p=f.plus(divide(l,n,b)),digitsToString(p.d).slice(0,b)===digitsToString(f.d).slice(0,b)){for(;v--;)f=round(f.times(f),b);return g.precision=u,e==null?(external=!0,round(f,u)):f}f=p}}function getBase10Exponent(t){for(var e=t.e*LOG_BASE,n=t.d[0];n>=10;n/=10)e++;return e}function getLn10(t,e,n){if(e>t.LN10.sd())throw external=!0,n&&(t.precision=n),Error(decimalError+"LN10 precision limit exceeded");return round(new t(t.LN10),e)}function getZeroString(t){for(var e="";t--;)e+="0";return e}function ln(t,e){var n,i,l,f,p,b,w,v,g,u=1,o=10,h=t,_=h.d,S=h.constructor,T=S.precision;if(h.s<1)throw Error(decimalError+(h.s?"NaN":"-Infinity"));if(h.eq(ONE))return new S(0);if(e==null?(external=!1,v=T):v=e,h.eq(10))return e==null&&(external=!0),getLn10(S,v);if(v+=o,S.precision=v,n=digitsToString(_),i=n.charAt(0),f=getBase10Exponent(h),Math.abs(f)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)h=h.times(t),n=digitsToString(h.d),i=n.charAt(0),u++;f=getBase10Exponent(h),i>1?(h=new S("0."+n),f++):h=new S(i+"."+n.slice(1))}else return w=getLn10(S,v+2,T).times(f+""),h=ln(new S(i+"."+n.slice(1)),v-o).plus(w),S.precision=T,e==null?(external=!0,round(h,T)):h;for(b=p=h=divide(h.minus(ONE),h.plus(ONE),v),g=round(h.times(h),v),l=3;;){if(p=round(p.times(g),v),w=b.plus(divide(p,new S(l),v)),digitsToString(w.d).slice(0,v)===digitsToString(b.d).slice(0,v))return b=b.times(2),f!==0&&(b=b.plus(getLn10(S,v+2,T).times(f+""))),b=divide(b,new S(u),v),S.precision=T,e==null?(external=!0,round(b,T)):b;b=w,l+=2}}function parseDecimal(t,e){var n,i,l;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;)++i;for(l=e.length;e.charCodeAt(l-1)===48;)--l;if(e=e.slice(i,l),e){if(l-=i,n=n-i-1,t.e=mathfloor(n/LOG_BASE),t.d=[],i=(n+1)%LOG_BASE,n<0&&(i+=LOG_BASE),i<l){for(i&&t.d.push(+e.slice(0,i)),l-=LOG_BASE;i<l;)t.d.push(+e.slice(i,i+=LOG_BASE));e=e.slice(i),i=LOG_BASE-e.length}else i-=l;for(;i--;)e+="0";if(t.d.push(+e),external&&(t.e>MAX_E||t.e<-MAX_E))throw Error(exponentOutOfRange+n)}else t.s=0,t.e=0,t.d=[0];return t}function round(t,e,n){var i,l,f,p,b,w,v,g,u=t.d;for(p=1,f=u[0];f>=10;f/=10)p++;if(i=e-p,i<0)i+=LOG_BASE,l=e,v=u[g=0];else{if(g=Math.ceil((i+1)/LOG_BASE),f=u.length,g>=f)return t;for(v=f=u[g],p=1;f>=10;f/=10)p++;i%=LOG_BASE,l=i-LOG_BASE+p}if(n!==void 0&&(f=mathpow(10,p-l-1),b=v/f%10|0,w=e<0||u[g+1]!==void 0||v%f,w=n<4?(b||w)&&(n==0||n==(t.s<0?3:2)):b>5||b==5&&(n==4||w||n==6&&(i>0?l>0?v/mathpow(10,p-l):0:u[g-1])%10&1||n==(t.s<0?8:7))),e<1||!u[0])return w?(f=getBase10Exponent(t),u.length=1,e=e-f-1,u[0]=mathpow(10,(LOG_BASE-e%LOG_BASE)%LOG_BASE),t.e=mathfloor(-e/LOG_BASE)||0):(u.length=1,u[0]=t.e=t.s=0),t;if(i==0?(u.length=g,f=1,g--):(u.length=g+1,f=mathpow(10,LOG_BASE-i),u[g]=l>0?(v/mathpow(10,p-l)%mathpow(10,l)|0)*f:0),w)for(;;)if(g==0){(u[0]+=f)==BASE&&(u[0]=1,++t.e);break}else{if(u[g]+=f,u[g]!=BASE)break;u[g--]=0,f=1}for(i=u.length;u[--i]===0;)u.pop();if(external&&(t.e>MAX_E||t.e<-MAX_E))throw Error(exponentOutOfRange+getBase10Exponent(t));return t}function subtract(t,e){var n,i,l,f,p,b,w,v,g,u,o=t.constructor,h=o.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new o(t),external?round(e,h):e;if(w=t.d,u=e.d,i=e.e,v=t.e,w=w.slice(),p=v-i,p){for(g=p<0,g?(n=w,p=-p,b=u.length):(n=u,i=v,b=w.length),l=Math.max(Math.ceil(h/LOG_BASE),b)+2,p>l&&(p=l,n.length=1),n.reverse(),l=p;l--;)n.push(0);n.reverse()}else{for(l=w.length,b=u.length,g=l<b,g&&(b=l),l=0;l<b;l++)if(w[l]!=u[l]){g=w[l]<u[l];break}p=0}for(g&&(n=w,w=u,u=n,e.s=-e.s),b=w.length,l=u.length-b;l>0;--l)w[b++]=0;for(l=u.length;l>p;){if(w[--l]<u[l]){for(f=l;f&&w[--f]===0;)w[f]=BASE-1;--w[f],w[l]+=BASE}w[l]-=u[l]}for(;w[--b]===0;)w.pop();for(;w[0]===0;w.shift())--i;return w[0]?(e.d=w,e.e=i,external?round(e,h):e):new o(0)}function toString(t,e,n){var i,l=getBase10Exponent(t),f=digitsToString(t.d),p=f.length;return e?(n&&(i=n-p)>0?f=f.charAt(0)+"."+f.slice(1)+getZeroString(i):p>1&&(f=f.charAt(0)+"."+f.slice(1)),f=f+(l<0?"e":"e+")+l):l<0?(f="0."+getZeroString(-l-1)+f,n&&(i=n-p)>0&&(f+=getZeroString(i))):l>=p?(f+=getZeroString(l+1-p),n&&(i=n-l-1)>0&&(f=f+"."+getZeroString(i))):((i=l+1)<p&&(f=f.slice(0,i)+"."+f.slice(i)),n&&(i=n-p)>0&&(l+1===p&&(f+="."),f+=getZeroString(i))),t.s<0?"-"+f:f}function truncate(t,e){if(t.length>e)return t.length=e,!0}function clone(t){var e,n,i;function l(f){var p=this;if(!(p instanceof l))return new l(f);if(p.constructor=l,f instanceof l){p.s=f.s,p.e=f.e,p.d=(f=f.d)?f.slice():f;return}if(typeof f=="number"){if(f*0!==0)throw Error(invalidArgument+f);if(f>0)p.s=1;else if(f<0)f=-f,p.s=-1;else{p.s=0,p.e=0,p.d=[0];return}if(f===~~f&&f<1e7){p.e=0,p.d=[f];return}return parseDecimal(p,f.toString())}else if(typeof f!="string")throw Error(invalidArgument+f);if(f.charCodeAt(0)===45?(f=f.slice(1),p.s=-1):p.s=1,isDecimal.test(f))parseDecimal(p,f);else throw Error(invalidArgument+f)}if(l.prototype=P,l.ROUND_UP=0,l.ROUND_DOWN=1,l.ROUND_CEIL=2,l.ROUND_FLOOR=3,l.ROUND_HALF_UP=4,l.ROUND_HALF_DOWN=5,l.ROUND_HALF_EVEN=6,l.ROUND_HALF_CEIL=7,l.ROUND_HALF_FLOOR=8,l.clone=clone,l.config=l.set=config,t===void 0&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return l.config(t),l}function config(t){if(!t||typeof t!="object")throw Error(decimalError+"Object expected");var e,n,i,l=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<l.length;e+=3)if((i=t[n=l[e]])!==void 0)if(mathfloor(i)===i&&i>=l[e+1]&&i<=l[e+2])this[n]=i;else throw Error(invalidArgument+n+": "+i);if((i=t[n="LN10"])!==void 0)if(i==Math.LN10)this[n]=new this(i);else throw Error(invalidArgument+n+": "+i);return this}var Decimal=clone(defaults);ONE=new Decimal(1);const Decimal$1=Decimal;var identity=t=>t,PLACE_HOLDER={},isPlaceHolder=t=>t===PLACE_HOLDER,curry0=t=>function e(){return arguments.length===0||arguments.length===1&&isPlaceHolder(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},curryN=(t,e)=>t===1?e:curry0(function(){for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];var f=i.filter(p=>p!==PLACE_HOLDER).length;return f>=t?e(...i):curryN(t-f,curry0(function(){for(var p=arguments.length,b=new Array(p),w=0;w<p;w++)b[w]=arguments[w];var v=i.map(g=>isPlaceHolder(g)?b.shift():g);return e(...v,...b)}))}),curry=t=>curryN(t.length,t),range=(t,e)=>{for(var n=[],i=t;i<e;++i)n[i-t]=i;return n},map=curry((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),compose=function t(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(!n.length)return identity;var l=n.reverse(),f=l[0],p=l.slice(1);return function(){return p.reduce((b,w)=>w(b),f(...arguments))}},reverse=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),memoize=t=>{var e=null,n=null;return function(){for(var i=arguments.length,l=new Array(i),f=0;f<i;f++)l[f]=arguments[f];return e&&l.every((p,b)=>{var w;return p===((w=e)===null||w===void 0?void 0:w[b])})||(e=l,n=t(...l)),n}};function getDigitCount(t){var e;return t===0?e=1:e=Math.floor(new Decimal$1(t).abs().log(10).toNumber())+1,e}function rangeStep(t,e,n){for(var i=new Decimal$1(t),l=0,f=[];i.lt(e)&&l<1e5;)f.push(i.toNumber()),i=i.add(n),l++;return f}curry((t,e,n)=>{var i=+t,l=+e;return i+n*(l-i)});curry((t,e,n)=>{var i=e-+t;return i=i||1/0,(n-t)/i});curry((t,e,n)=>{var i=e-+t;return i=i||1/0,Math.max(0,Math.min(1,(n-t)/i))});var getValidInterval=t=>{var[e,n]=t,[i,l]=[e,n];return e>n&&([i,l]=[n,e]),[i,l]},getFormatStep=(t,e,n)=>{if(t.lte(0))return new Decimal$1(0);var i=getDigitCount(t.toNumber()),l=new Decimal$1(10).pow(i),f=t.div(l),p=i!==1?.05:.1,b=new Decimal$1(Math.ceil(f.div(p).toNumber())).add(n).mul(p),w=b.mul(l);return e?new Decimal$1(w.toNumber()):new Decimal$1(Math.ceil(w.toNumber()))},getTickOfSingleValue=(t,e,n)=>{var i=new Decimal$1(1),l=new Decimal$1(t);if(!l.isint()&&n){var f=Math.abs(t);f<1?(i=new Decimal$1(10).pow(getDigitCount(t)-1),l=new Decimal$1(Math.floor(l.div(i).toNumber())).mul(i)):f>1&&(l=new Decimal$1(Math.floor(t)))}else t===0?l=new Decimal$1(Math.floor((e-1)/2)):n||(l=new Decimal$1(Math.floor(t)));var p=Math.floor((e-1)/2),b=compose(map(w=>l.add(new Decimal$1(w-p).mul(i)).toNumber()),range);return b(0,e)},_calculateStep=function t(e,n,i,l){var f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(i-1)))return{step:new Decimal$1(0),tickMin:new Decimal$1(0),tickMax:new Decimal$1(0)};var p=getFormatStep(new Decimal$1(n).sub(e).div(i-1),l,f),b;e<=0&&n>=0?b=new Decimal$1(0):(b=new Decimal$1(e).add(n).div(2),b=b.sub(new Decimal$1(b).mod(p)));var w=Math.ceil(b.sub(e).div(p).toNumber()),v=Math.ceil(new Decimal$1(n).sub(b).div(p).toNumber()),g=w+v+1;return g>i?_calculateStep(e,n,i,l,f+1):(g<i&&(v=n>0?v+(i-g):v,w=n>0?w:w+(i-g)),{step:p,tickMin:b.sub(new Decimal$1(w).mul(p)),tickMax:b.add(new Decimal$1(v).mul(p))})};function getNiceTickValuesFn(t){var[e,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,f=Math.max(i,2),[p,b]=getValidInterval([e,n]);if(p===-1/0||b===1/0){var w=b===1/0?[p,...range(0,i-1).map(()=>1/0)]:[...range(0,i-1).map(()=>-1/0),b];return e>n?reverse(w):w}if(p===b)return getTickOfSingleValue(p,i,l);var{step:v,tickMin:g,tickMax:u}=_calculateStep(p,b,f,l,0),o=rangeStep(g,u.add(new Decimal$1(.1).mul(v)),v);return e>n?reverse(o):o}function getTickValuesFixedDomainFn(t,e){var[n,i]=t,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[f,p]=getValidInterval([n,i]);if(f===-1/0||p===1/0)return[n,i];if(f===p)return[f];var b=Math.max(e,2),w=getFormatStep(new Decimal$1(p).sub(f).div(b-1),l,0),v=[...rangeStep(new Decimal$1(f),new Decimal$1(p),w),p];return l===!1&&(v=v.map(g=>Math.round(g))),n>i?reverse(v):v}var getNiceTickValues=memoize(getNiceTickValuesFn),getTickValuesFixedDomain=memoize(getTickValuesFixedDomainFn),selectRootMaxBarSize=t=>t.rootProps.maxBarSize,selectBarGap=t=>t.rootProps.barGap,selectBarCategoryGap=t=>t.rootProps.barCategoryGap,selectRootBarSize=t=>t.rootProps.barSize,selectStackOffsetType=t=>t.rootProps.stackOffset,selectChartName=t=>t.options.chartName,selectSyncId=t=>t.rootProps.syncId,selectSyncMethod=t=>t.rootProps.syncMethod,selectEventEmitter=t=>t.options.eventEmitter,defaultPolarAngleAxisProps={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},defaultPolarRadiusAxisProps={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},combineAxisRangeWithReverse=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},implicitAngleAxis={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:defaultPolarAngleAxisProps.angleAxisId,includeHidden:!1,name:void 0,reversed:defaultPolarAngleAxisProps.reversed,scale:defaultPolarAngleAxisProps.scale,tick:defaultPolarAngleAxisProps.tick,tickCount:void 0,ticks:void 0,type:defaultPolarAngleAxisProps.type,unit:void 0},implicitRadiusAxis={allowDataOverflow:defaultPolarRadiusAxisProps.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:defaultPolarRadiusAxisProps.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:defaultPolarRadiusAxisProps.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:defaultPolarRadiusAxisProps.scale,tick:defaultPolarRadiusAxisProps.tick,tickCount:defaultPolarRadiusAxisProps.tickCount,ticks:void 0,type:defaultPolarRadiusAxisProps.type,unit:void 0},implicitRadialBarAngleAxis={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:defaultPolarAngleAxisProps.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:defaultPolarAngleAxisProps.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:defaultPolarAngleAxisProps.scale,tick:defaultPolarAngleAxisProps.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},implicitRadialBarRadiusAxis={allowDataOverflow:defaultPolarRadiusAxisProps.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:defaultPolarRadiusAxisProps.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:defaultPolarRadiusAxisProps.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:defaultPolarRadiusAxisProps.scale,tick:defaultPolarRadiusAxisProps.tick,tickCount:defaultPolarRadiusAxisProps.tickCount,ticks:void 0,type:"category",unit:void 0},selectAngleAxis=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?implicitRadialBarAngleAxis:implicitAngleAxis,selectRadiusAxis=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?implicitRadialBarRadiusAxis:implicitRadiusAxis,selectPolarOptions=t=>t.polarOptions,selectMaxRadius=createSelector([selectChartWidth,selectChartHeight,selectChartOffsetInternal],getMaxRadius),selectInnerRadius=createSelector([selectPolarOptions,selectMaxRadius],(t,e)=>{if(t!=null)return getPercentValue(t.innerRadius,e,0)}),selectOuterRadius=createSelector([selectPolarOptions,selectMaxRadius],(t,e)=>{if(t!=null)return getPercentValue(t.outerRadius,e,e*.8)}),combineAngleAxisRange=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},selectAngleAxisRange=createSelector([selectPolarOptions],combineAngleAxisRange);createSelector([selectAngleAxis,selectAngleAxisRange],combineAxisRangeWithReverse);var selectRadiusAxisRange=createSelector([selectMaxRadius,selectInnerRadius,selectOuterRadius],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});createSelector([selectRadiusAxis,selectRadiusAxisRange],combineAxisRangeWithReverse);var selectPolarViewBox=createSelector([selectChartLayout,selectPolarOptions,selectInnerRadius,selectOuterRadius,selectChartWidth,selectChartHeight],(t,e,n,i,l,f)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||i==null)){var{cx:p,cy:b,startAngle:w,endAngle:v}=e;return{cx:getPercentValue(p,l,l/2),cy:getPercentValue(b,f,f/2),innerRadius:n,outerRadius:i,startAngle:w,endAngle:v,clockWise:!1}}}),pickAxisType=(t,e)=>e,pickAxisId=(t,e,n)=>n;function getStackSeriesIdentifier(t){return t==null?void 0:t.id}var selectTooltipAxisType=t=>{var e=selectChartLayout(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},selectTooltipAxisId=t=>t.tooltip.settings.axisId,selectTooltipAxis=t=>{var e=selectTooltipAxisType(t),n=selectTooltipAxisId(t);return selectAxisSettings(t,e,n)},selectTooltipAxisDataKey=createSelector([selectTooltipAxis],t=>t==null?void 0:t.dataKey);function combineDisplayedStackedData(t,e,n){var{chartData:i=[]}=e,{allowDuplicatedCategory:l,dataKey:f}=n,p=new Map;return t.forEach(b=>{var w,v=(w=b.data)!==null&&w!==void 0?w:i;if(!(v==null||v.length===0)){var g=getStackSeriesIdentifier(b);v.forEach((u,o)=>{var h=f==null||l?o:String(getValueByDataKey(u,f,null)),_=getValueByDataKey(u,b.dataKey,0),S;p.has(h)?S=p.get(h):S={},Object.assign(S,{[g]:_}),p.set(h,S)})}}),Array.from(p.values())}function isStacked(t){return t.stackId!=null&&t.dataKey!=null}var numberDomainEqualityCheck=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function arrayEqualityCheck(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function ownKeys$n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$n(Object(n),!0).forEach(function(i){_defineProperty$p(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$n(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$p(t,e,n){return(e=_toPropertyKey$p(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$p(t){var e=_toPrimitive$p(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$p(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var defaultNumericDomain=[0,"auto"],implicitXAxis={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},selectXAxisSettingsNoDefaults=(t,e)=>t.cartesianAxis.xAxis[e],selectXAxisSettings=(t,e)=>{var n=selectXAxisSettingsNoDefaults(t,e);return n??implicitXAxis},implicitYAxis={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:defaultNumericDomain,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:DEFAULT_Y_AXIS_WIDTH},selectYAxisSettingsNoDefaults=(t,e)=>t.cartesianAxis.yAxis[e],selectYAxisSettings=(t,e)=>{var n=selectYAxisSettingsNoDefaults(t,e);return n??implicitYAxis},implicitZAxis={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},selectZAxisSettings=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??implicitZAxis},selectBaseAxis=(t,e,n)=>{switch(e){case"xAxis":return selectXAxisSettings(t,n);case"yAxis":return selectYAxisSettings(t,n);case"zAxis":return selectZAxisSettings(t,n);case"angleAxis":return selectAngleAxis(t,n);case"radiusAxis":return selectRadiusAxis(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},selectCartesianAxisSettings=(t,e,n)=>{switch(e){case"xAxis":return selectXAxisSettings(t,n);case"yAxis":return selectYAxisSettings(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},selectAxisSettings=(t,e,n)=>{switch(e){case"xAxis":return selectXAxisSettings(t,n);case"yAxis":return selectYAxisSettings(t,n);case"angleAxis":return selectAngleAxis(t,n);case"radiusAxis":return selectRadiusAxis(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},selectHasBar=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function itemAxisPredicate(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var selectUnfilteredCartesianItems=t=>t.graphicalItems.cartesianItems,selectAxisPredicate$1=createSelector([pickAxisType,pickAxisId],itemAxisPredicate),combineGraphicalItemsSettings=(t,e,n)=>t.filter(n).filter(i=>(e==null?void 0:e.includeHidden)===!0?!0:!i.hide),selectCartesianItemsSettings=createSelector([selectUnfilteredCartesianItems,selectBaseAxis,selectAxisPredicate$1],combineGraphicalItemsSettings,{memoizeOptions:{resultEqualityCheck:arrayEqualityCheck}}),selectStackedCartesianItemsSettings=createSelector([selectCartesianItemsSettings],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(isStacked)),filterGraphicalNotStackedItems=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),selectCartesianItemsSettingsExceptStacked=createSelector([selectCartesianItemsSettings],filterGraphicalNotStackedItems),combineGraphicalItemsData=t=>t.map(e=>e.data).filter(Boolean).flat(1),selectCartesianGraphicalItemsData=createSelector([selectCartesianItemsSettings],combineGraphicalItemsData,{memoizeOptions:{resultEqualityCheck:arrayEqualityCheck}}),combineDisplayedData=(t,e)=>{var{chartData:n=[],dataStartIndex:i,dataEndIndex:l}=e;return t.length>0?t:n.slice(i,l+1)},selectDisplayedData$1=createSelector([selectCartesianGraphicalItemsData,selectChartDataWithIndexesIfNotInPanorama],combineDisplayedData),combineAppliedValues=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(i=>({value:getValueByDataKey(i,e.dataKey)})):n.length>0?n.map(i=>i.dataKey).flatMap(i=>t.map(l=>({value:getValueByDataKey(l,i)}))):t.map(i=>({value:i})),selectAllAppliedValues=createSelector([selectDisplayedData$1,selectBaseAxis,selectCartesianItemsSettings],combineAppliedValues);function isErrorBarRelevantForAxisType(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function makeNumber(t){if(isNumOrStr(t)||t instanceof Date){var e=Number(t);if(isWellBehavedNumber(e))return e}}function makeDomain(t){if(Array.isArray(t)){var e=[makeNumber(t[0]),makeNumber(t[1])];return isWellFormedNumberDomain(e)?e:void 0}var n=makeNumber(t);if(n!=null)return[n,n]}function onlyAllowNumbers(t){return t.map(makeNumber).filter(isNotNil)}function getErrorDomainByDataKey(t,e,n){return!n||typeof e!="number"||isNan(e)?[]:n.length?onlyAllowNumbers(n.flatMap(i=>{var l=getValueByDataKey(t,i.dataKey),f,p;if(Array.isArray(l)?[f,p]=l:f=p=l,!(!isWellBehavedNumber(f)||!isWellBehavedNumber(p)))return[e-f,e+p]})):[]}var selectDisplayedStackedData=createSelector([selectStackedCartesianItemsSettings,selectChartDataWithIndexesIfNotInPanorama,selectTooltipAxis],combineDisplayedStackedData),combineStackGroups=(t,e,n)=>{var i={},l=e.reduce((f,p)=>(p.stackId==null||(f[p.stackId]==null&&(f[p.stackId]=[]),f[p.stackId].push(p)),f),i);return Object.fromEntries(Object.entries(l).map(f=>{var[p,b]=f,w=b.map(getStackSeriesIdentifier);return[p,{stackedData:getStackedData(t,w,n),graphicalItems:b}]}))},selectStackGroups=createSelector([selectDisplayedStackedData,selectStackedCartesianItemsSettings,selectStackOffsetType],combineStackGroups),combineDomainOfStackGroups=(t,e,n,i)=>{var{dataStartIndex:l,dataEndIndex:f}=e;if(i==null&&n!=="zAxis"){var p=getDomainOfStackGroups(t,l,f);if(!(p!=null&&p[0]===0&&p[1]===0))return p}},selectAllowsDataOverflow=createSelector([selectBaseAxis],t=>t.allowDataOverflow),getDomainDefinition=t=>{var e;if(t==null||!("domain"in t))return defaultNumericDomain;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=onlyAllowNumbers(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:defaultNumericDomain},selectDomainDefinition=createSelector([selectBaseAxis],getDomainDefinition),selectDomainFromUserPreference=createSelector([selectDomainDefinition,selectAllowsDataOverflow],numericalDomainSpecifiedWithoutRequiringData),selectDomainOfStackGroups=createSelector([selectStackGroups,selectChartDataWithIndexes,pickAxisType,selectDomainFromUserPreference],combineDomainOfStackGroups,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}}),selectAllErrorBarSettings=t=>t.errorBars,combineRelevantErrorBarSettings=(t,e,n)=>t.flatMap(i=>e[i.id]).filter(Boolean).filter(i=>isErrorBarRelevantForAxisType(n,i)),mergeDomains=function t(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var l=n.filter(Boolean);if(l.length!==0){var f=l.flat(),p=Math.min(...f),b=Math.max(...f);return[p,b]}},combineDomainOfAllAppliedNumericalValuesIncludingErrorValues=(t,e,n,i,l)=>{var f,p;if(n.length>0&&t.forEach(b=>{n.forEach(w=>{var v,g,u=(v=i[w.id])===null||v===void 0?void 0:v.filter(O=>isErrorBarRelevantForAxisType(l,O)),o=getValueByDataKey(b,(g=e.dataKey)!==null&&g!==void 0?g:w.dataKey),h=getErrorDomainByDataKey(b,o,u);if(h.length>=2){var _=Math.min(...h),S=Math.max(...h);(f==null||_<f)&&(f=_),(p==null||S>p)&&(p=S)}var T=makeDomain(o);T!=null&&(f=f==null?T[0]:Math.min(f,T[0]),p=p==null?T[1]:Math.max(p,T[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(b=>{var w=makeDomain(getValueByDataKey(b,e.dataKey));w!=null&&(f=f==null?w[0]:Math.min(f,w[0]),p=p==null?w[1]:Math.max(p,w[1]))}),isWellBehavedNumber(f)&&isWellBehavedNumber(p))return[f,p]},selectDomainOfAllAppliedNumericalValuesIncludingErrorValues$1=createSelector([selectDisplayedData$1,selectBaseAxis,selectCartesianItemsSettingsExceptStacked,selectAllErrorBarSettings,pickAxisType],combineDomainOfAllAppliedNumericalValuesIncludingErrorValues,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}});function onlyAllowNumbersAndStringsAndDates(t){var{value:e}=t;if(isNumOrStr(e)||e instanceof Date)return e}var computeDomainOfTypeCategory=(t,e,n)=>{var i=t.map(onlyAllowNumbersAndStringsAndDates).filter(l=>l!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&hasDuplicate(i))?range$2(0,t.length):e.allowDuplicatedCategory?i:Array.from(new Set(i))},selectReferenceDots=t=>t.referenceElements.dots,filterReferenceElements=(t,e,n)=>t.filter(i=>i.ifOverflow==="extendDomain").filter(i=>e==="xAxis"?i.xAxisId===n:i.yAxisId===n),selectReferenceDotsByAxis=createSelector([selectReferenceDots,pickAxisType,pickAxisId],filterReferenceElements),selectReferenceAreas=t=>t.referenceElements.areas,selectReferenceAreasByAxis=createSelector([selectReferenceAreas,pickAxisType,pickAxisId],filterReferenceElements),selectReferenceLines=t=>t.referenceElements.lines,selectReferenceLinesByAxis=createSelector([selectReferenceLines,pickAxisType,pickAxisId],filterReferenceElements),combineDotsDomain=(t,e)=>{var n=onlyAllowNumbers(t.map(i=>e==="xAxis"?i.x:i.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},selectReferenceDotsDomain=createSelector(selectReferenceDotsByAxis,pickAxisType,combineDotsDomain),combineAreasDomain=(t,e)=>{var n=onlyAllowNumbers(t.flatMap(i=>[e==="xAxis"?i.x1:i.y1,e==="xAxis"?i.x2:i.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},selectReferenceAreasDomain=createSelector([selectReferenceAreasByAxis,pickAxisType],combineAreasDomain),combineLinesDomain=(t,e)=>{var n=onlyAllowNumbers(t.map(i=>e==="xAxis"?i.x:i.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},selectReferenceLinesDomain=createSelector(selectReferenceLinesByAxis,pickAxisType,combineLinesDomain),selectReferenceElementsDomain=createSelector(selectReferenceDotsDomain,selectReferenceLinesDomain,selectReferenceAreasDomain,(t,e,n)=>mergeDomains(t,n,e)),combineNumericalDomain=(t,e,n,i,l,f,p,b)=>{if(n!=null)return n;var w=p==="vertical"&&b==="xAxis"||p==="horizontal"&&b==="yAxis",v=w?mergeDomains(i,f,l):mergeDomains(f,l);return parseNumericalUserDomain(e,v,t.allowDataOverflow)},selectNumericalDomain=createSelector([selectBaseAxis,selectDomainDefinition,selectDomainFromUserPreference,selectDomainOfStackGroups,selectDomainOfAllAppliedNumericalValuesIncludingErrorValues$1,selectReferenceElementsDomain,selectChartLayout,pickAxisType],combineNumericalDomain,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}}),expandDomain=[0,1],combineAxisDomain=(t,e,n,i,l,f,p)=>{if(!((t==null||n==null||n.length===0)&&p===void 0)){var{dataKey:b,type:w}=t,v=isCategoricalAxis(e,f);return v&&b==null?range$2(0,n.length):w==="category"?computeDomainOfTypeCategory(i,t,v):l==="expand"?expandDomain:p}},selectAxisDomain=createSelector([selectBaseAxis,selectChartLayout,selectDisplayedData$1,selectAllAppliedValues,selectStackOffsetType,pickAxisType,selectNumericalDomain],combineAxisDomain),combineRealScaleType=(t,e,n,i,l)=>{if(t!=null){var{scale:f,type:p}=t;if(f==="auto")return e==="radial"&&l==="radiusAxis"?"band":e==="radial"&&l==="angleAxis"?"linear":p==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!n)?"point":p==="category"?"band":"linear";if(typeof f=="string"){var b="scale".concat(upperFirst(f));return b in d3Scales?b:"point"}}},selectRealScaleType=createSelector([selectBaseAxis,selectChartLayout,selectHasBar,selectChartName,pickAxisType],combineRealScaleType);function getD3ScaleFromType(t){if(t!=null){if(t in d3Scales)return d3Scales[t]();var e="scale".concat(upperFirst(t));if(e in d3Scales)return d3Scales[e]()}}function combineScaleFunction(t,e,n,i){if(!(n==null||i==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(i);var l=getD3ScaleFromType(e);if(l!=null){var f=l.domain(n).range(i);return checkDomainOfScale(f),f}}}var combineNiceTicks=(t,e,n)=>{var i=getDomainDefinition(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&isWellFormedNumberDomain(t))return getNiceTickValues(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&isWellFormedNumberDomain(t))return getTickValuesFixedDomain(t,e.tickCount,e.allowDecimals)}},selectNiceTicks=createSelector([selectAxisDomain,selectAxisSettings,selectRealScaleType],combineNiceTicks),combineAxisDomainWithNiceTicks=(t,e,n,i)=>{if(i!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&isWellFormedNumberDomain(e)&&Array.isArray(n)&&n.length>0){var l=e[0],f=n[0],p=e[1],b=n[n.length-1];return[Math.min(l,f),Math.max(p,b)]}return e},selectAxisDomainIncludingNiceTicks=createSelector([selectBaseAxis,selectAxisDomain,selectNiceTicks,pickAxisType],combineAxisDomainWithNiceTicks),selectSmallestDistanceBetweenValues=createSelector(selectAllAppliedValues,selectBaseAxis,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,i=Array.from(onlyAllowNumbers(t.map(b=>b.value))).sort((b,w)=>b-w);if(i.length<2)return 1/0;var l=i[i.length-1]-i[0];if(l===0)return 1/0;for(var f=0;f<i.length-1;f++){var p=i[f+1]-i[f];n=Math.min(n,p)}return n/l}}),selectCalculatedPadding=createSelector(selectSmallestDistanceBetweenValues,selectChartLayout,selectBarCategoryGap,selectChartOffsetInternal,(t,e,n,i)=>i,(t,e,n,i,l)=>{if(!isWellBehavedNumber(t))return 0;var f=e==="vertical"?i.height:i.width;if(l==="gap")return t*f/2;if(l==="no-gap"){var p=getPercentValue(n,t*f),b=t*f/2;return b-p-(b-p)/f*p}return 0}),selectCalculatedXAxisPadding=(t,e)=>{var n=selectXAxisSettings(t,e);return n==null||typeof n.padding!="string"?0:selectCalculatedPadding(t,"xAxis",e,n.padding)},selectCalculatedYAxisPadding=(t,e)=>{var n=selectYAxisSettings(t,e);return n==null||typeof n.padding!="string"?0:selectCalculatedPadding(t,"yAxis",e,n.padding)},selectXAxisPadding=createSelector(selectXAxisSettings,selectCalculatedXAxisPadding,(t,e)=>{var n,i;if(t==null)return{left:0,right:0};var{padding:l}=t;return typeof l=="string"?{left:e,right:e}:{left:((n=l.left)!==null&&n!==void 0?n:0)+e,right:((i=l.right)!==null&&i!==void 0?i:0)+e}}),selectYAxisPadding=createSelector(selectYAxisSettings,selectCalculatedYAxisPadding,(t,e)=>{var n,i;if(t==null)return{top:0,bottom:0};var{padding:l}=t;return typeof l=="string"?{top:e,bottom:e}:{top:((n=l.top)!==null&&n!==void 0?n:0)+e,bottom:((i=l.bottom)!==null&&i!==void 0?i:0)+e}}),combineXAxisRange=createSelector([selectChartOffsetInternal,selectXAxisPadding,selectBrushDimensions,selectBrushSettings,(t,e,n)=>n],(t,e,n,i,l)=>{var{padding:f}=i;return l?[f.left,n.width-f.right]:[t.left+e.left,t.left+t.width-e.right]}),combineYAxisRange=createSelector([selectChartOffsetInternal,selectChartLayout,selectYAxisPadding,selectBrushDimensions,selectBrushSettings,(t,e,n)=>n],(t,e,n,i,l,f)=>{var{padding:p}=l;return f?[i.height-p.bottom,p.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),selectAxisRange=(t,e,n,i)=>{var l;switch(e){case"xAxis":return combineXAxisRange(t,n,i);case"yAxis":return combineYAxisRange(t,n,i);case"zAxis":return(l=selectZAxisSettings(t,n))===null||l===void 0?void 0:l.range;case"angleAxis":return selectAngleAxisRange(t);case"radiusAxis":return selectRadiusAxisRange(t,n);default:return}},selectAxisRangeWithReverse=createSelector([selectBaseAxis,selectAxisRange],combineAxisRangeWithReverse),selectAxisScale=createSelector([selectBaseAxis,selectRealScaleType,selectAxisDomainIncludingNiceTicks,selectAxisRangeWithReverse],combineScaleFunction);createSelector([selectCartesianItemsSettings,selectAllErrorBarSettings,pickAxisType],combineRelevantErrorBarSettings);function compareIds(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var pickAxisOrientation=(t,e)=>e,pickMirror=(t,e,n)=>n,selectAllXAxesWithOffsetType=createSelector(selectAllXAxes,pickAxisOrientation,pickMirror,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(compareIds)),selectAllYAxesWithOffsetType=createSelector(selectAllYAxes,pickAxisOrientation,pickMirror,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(compareIds)),getXAxisSize=(t,e)=>({width:t.width,height:e.height}),getYAxisSize=(t,e)=>{var n=typeof e.width=="number"?e.width:DEFAULT_Y_AXIS_WIDTH;return{width:n,height:t.height}},selectXAxisSize=createSelector(selectChartOffsetInternal,selectXAxisSettings,getXAxisSize),combineXAxisPositionStartingPoint=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},combineYAxisPositionStartingPoint=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},selectAllXAxesOffsetSteps=createSelector(selectChartHeight,selectChartOffsetInternal,selectAllXAxesWithOffsetType,pickAxisOrientation,pickMirror,(t,e,n,i,l)=>{var f={},p;return n.forEach(b=>{var w=getXAxisSize(e,b);p==null&&(p=combineXAxisPositionStartingPoint(e,i,t));var v=i==="top"&&!l||i==="bottom"&&l;f[b.id]=p-Number(v)*w.height,p+=(v?-1:1)*w.height}),f}),selectAllYAxesOffsetSteps=createSelector(selectChartWidth,selectChartOffsetInternal,selectAllYAxesWithOffsetType,pickAxisOrientation,pickMirror,(t,e,n,i,l)=>{var f={},p;return n.forEach(b=>{var w=getYAxisSize(e,b);p==null&&(p=combineYAxisPositionStartingPoint(e,i,t));var v=i==="left"&&!l||i==="right"&&l;f[b.id]=p-Number(v)*w.width,p+=(v?-1:1)*w.width}),f}),selectXAxisOffsetSteps=(t,e)=>{var n=selectXAxisSettings(t,e);if(n!=null)return selectAllXAxesOffsetSteps(t,n.orientation,n.mirror)},selectXAxisPosition=createSelector([selectChartOffsetInternal,selectXAxisSettings,selectXAxisOffsetSteps,(t,e)=>e],(t,e,n,i)=>{if(e!=null){var l=n==null?void 0:n[i];return l==null?{x:t.left,y:0}:{x:t.left,y:l}}}),selectYAxisOffsetSteps=(t,e)=>{var n=selectYAxisSettings(t,e);if(n!=null)return selectAllYAxesOffsetSteps(t,n.orientation,n.mirror)},selectYAxisPosition=createSelector([selectChartOffsetInternal,selectYAxisSettings,selectYAxisOffsetSteps,(t,e)=>e],(t,e,n,i)=>{if(e!=null){var l=n==null?void 0:n[i];return l==null?{x:0,y:t.top}:{x:l,y:t.top}}}),selectYAxisSize=createSelector(selectChartOffsetInternal,selectYAxisSettings,(t,e)=>{var n=typeof e.width=="number"?e.width:DEFAULT_Y_AXIS_WIDTH;return{width:n,height:t.height}}),selectCartesianAxisSize=(t,e,n)=>{switch(e){case"xAxis":return selectXAxisSize(t,n).width;case"yAxis":return selectYAxisSize(t,n).height;default:return}},combineDuplicateDomain=(t,e,n,i)=>{if(n!=null){var{allowDuplicatedCategory:l,type:f,dataKey:p}=n,b=isCategoricalAxis(t,i),w=e.map(v=>v.value);if(p&&b&&f==="category"&&l&&hasDuplicate(w))return w}},selectDuplicateDomain=createSelector([selectChartLayout,selectAllAppliedValues,selectBaseAxis,pickAxisType],combineDuplicateDomain),combineCategoricalDomain=(t,e,n,i)=>{if(!(n==null||n.dataKey==null)){var{type:l,scale:f}=n,p=isCategoricalAxis(t,i);if(p&&(l==="number"||f!=="auto"))return e.map(b=>b.value)}},selectCategoricalDomain=createSelector([selectChartLayout,selectAllAppliedValues,selectAxisSettings,pickAxisType],combineCategoricalDomain),selectAxisPropsNeededForCartesianGridTicksGenerator=createSelector([selectChartLayout,selectCartesianAxisSettings,selectRealScaleType,selectAxisScale,selectDuplicateDomain,selectCategoricalDomain,selectAxisRange,selectNiceTicks,pickAxisType],(t,e,n,i,l,f,p,b,w)=>{if(e==null)return null;var v=isCategoricalAxis(t,w);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:w,categoricalDomain:f,duplicateDomain:l,isCategorical:v,niceTicks:b,range:p,realScaleType:n,scale:i}}),combineAxisTicks=(t,e,n,i,l,f,p,b,w)=>{if(!(e==null||i==null)){var v=isCategoricalAxis(t,w),{type:g,ticks:u,tickCount:o}=e,h=n==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,_=g==="category"&&i.bandwidth?i.bandwidth()/h:0;_=w==="angleAxis"&&f!=null&&f.length>=2?mathSign(f[0]-f[1])*2*_:_;var S=u||l;if(S){var T=S.map((O,j)=>{var C=p?p.indexOf(O):O;return{index:j,coordinate:i(C)+_,value:O,offset:_}});return T.filter(O=>!isNan(O.coordinate))}return v&&b?b.map((O,j)=>({coordinate:i(O)+_,value:O,index:j,offset:_})):i.ticks?i.ticks(o).map(O=>({coordinate:i(O)+_,value:O,offset:_})):i.domain().map((O,j)=>({coordinate:i(O)+_,value:p?p[O]:O,index:j,offset:_}))}},selectTicksOfAxis=createSelector([selectChartLayout,selectAxisSettings,selectRealScaleType,selectAxisScale,selectNiceTicks,selectAxisRange,selectDuplicateDomain,selectCategoricalDomain,pickAxisType],combineAxisTicks),combineGraphicalItemTicks=(t,e,n,i,l,f,p)=>{if(!(e==null||n==null||i==null||i[0]===i[1])){var b=isCategoricalAxis(t,p),{tickCount:w}=e,v=0;return v=p==="angleAxis"&&(i==null?void 0:i.length)>=2?mathSign(i[0]-i[1])*2*v:v,b&&f?f.map((g,u)=>({coordinate:n(g)+v,value:g,index:u,offset:v})):n.ticks?n.ticks(w).map(g=>({coordinate:n(g)+v,value:g,offset:v})):n.domain().map((g,u)=>({coordinate:n(g)+v,value:l?l[g]:g,index:u,offset:v}))}},selectTicksOfGraphicalItem=createSelector([selectChartLayout,selectAxisSettings,selectAxisScale,selectAxisRange,selectDuplicateDomain,selectCategoricalDomain,pickAxisType],combineGraphicalItemTicks),selectAxisWithScale=createSelector(selectBaseAxis,selectAxisScale,(t,e)=>{if(!(t==null||e==null))return _objectSpread$n(_objectSpread$n({},t),{},{scale:e})}),selectZAxisScale=createSelector([selectBaseAxis,selectRealScaleType,selectAxisDomain,selectAxisRangeWithReverse],combineScaleFunction);createSelector((t,e,n)=>selectZAxisSettings(t,n),selectZAxisScale,(t,e)=>{if(!(t==null||e==null))return _objectSpread$n(_objectSpread$n({},t),{},{scale:e})});var selectChartDirection=createSelector([selectChartLayout,selectAllXAxes,selectAllYAxes],(t,e,n)=>{switch(t){case"horizontal":return e.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),selectDefaultTooltipEventType=t=>t.options.defaultTooltipEventType,selectValidateTooltipEventTypes=t=>t.options.validateTooltipEventTypes;function combineTooltipEventType(t,e,n){if(t==null)return e;var i=t?"axis":"item";return n==null?e:n.includes(i)?i:e}function selectTooltipEventType$1(t,e){var n=selectDefaultTooltipEventType(t),i=selectValidateTooltipEventTypes(t);return combineTooltipEventType(e,n,i)}function useTooltipEventType(t){return useAppSelector(e=>selectTooltipEventType$1(e,t))}var combineActiveLabel=(t,e)=>{var n,i=Number(e);if(!(isNan(i)||e==null))return i>=0?t==null||(n=t[i])===null||n===void 0?void 0:n.value:void 0},selectTooltipSettings=t=>t.tooltip.settings,noInteraction={active:!1,index:null,dataKey:void 0,coordinate:void 0},initialState$8={itemInteraction:{click:noInteraction,hover:noInteraction},axisInteraction:{click:noInteraction,hover:noInteraction},keyboardInteraction:noInteraction,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},tooltipSlice=createSlice({name:"tooltip",initialState:initialState$8,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:prepareAutoBatched()},removeTooltipEntrySettings:{reducer(t,e){var n=current(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:prepareAutoBatched()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings,removeTooltipEntrySettings,setTooltipSettingsState,setActiveMouseOverItemIndex,mouseLeaveItem,mouseLeaveChart,setActiveClickItemIndex,setMouseOverAxisIndex,setMouseClickAxisIndex,setSyncInteraction,setKeyboardInteraction}=tooltipSlice.actions,tooltipReducer=tooltipSlice.reducer;function ownKeys$m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$m(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$m(Object(n),!0).forEach(function(i){_defineProperty$o(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$m(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$o(t,e,n){return(e=_toPropertyKey$o(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$o(t){var e=_toPrimitive$o(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$o(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function chooseAppropriateMouseInteraction(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function hasBeenActivePreviously(t){return t.index!=null}var combineTooltipInteractionState=(t,e,n,i)=>{if(e==null)return noInteraction;var l=chooseAppropriateMouseInteraction(t,e,n);if(l==null)return noInteraction;if(l.active)return l;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var f=t.settings.active===!0;if(hasBeenActivePreviously(l)){if(f)return _objectSpread$m(_objectSpread$m({},l),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i};return _objectSpread$m(_objectSpread$m({},noInteraction),{},{coordinate:l.coordinate})},combineActiveTooltipIndex=(t,e)=>{var n=t==null?void 0:t.index;if(n==null)return null;var i=Number(n);if(!isWellBehavedNumber(i))return n;var l=0,f=1/0;return e.length>0&&(f=e.length-1),String(Math.max(l,Math.min(i,f)))},combineCoordinateForDefaultIndex=(t,e,n,i,l,f,p,b)=>{if(!(f==null||b==null)){var w=p[0],v=w==null?void 0:b(w.positions,f);if(v!=null)return v;var g=l==null?void 0:l[Number(f)];if(g)switch(n){case"horizontal":return{x:g.coordinate,y:(i.top+e)/2};default:return{x:(i.left+t)/2,y:g.coordinate}}}},combineTooltipPayloadConfigurations=(t,e,n,i)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var l;return n==="hover"?l=t.itemInteraction.hover.dataKey:l=t.itemInteraction.click.dataKey,l==null&&i!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(f=>{var p;return((p=f.settings)===null||p===void 0?void 0:p.dataKey)===l})},selectTooltipPayloadSearcher=t=>t.options.tooltipPayloadSearcher,selectTooltipState=t=>t.tooltip;function ownKeys$l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$l(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$l(Object(n),!0).forEach(function(i){_defineProperty$n(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$l(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$n(t,e,n){return(e=_toPropertyKey$n(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$n(t){var e=_toPrimitive$n(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$n(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function selectFinalData(t,e){return t??e}var combineTooltipPayload=(t,e,n,i,l,f,p)=>{if(!(e==null||f==null)){var{chartData:b,computedData:w,dataStartIndex:v,dataEndIndex:g}=n,u=[];return t.reduce((o,h)=>{var _,{dataDefinedOnItem:S,settings:T}=h,O=selectFinalData(S,b),j=Array.isArray(O)?getSliced(O,v,g):O,C=(_=T==null?void 0:T.dataKey)!==null&&_!==void 0?_:i,D=T==null?void 0:T.nameKey,R;if(i&&Array.isArray(j)&&!Array.isArray(j[0])&&p==="axis"?R=findEntryInArray(j,i,l):R=f(j,e,w,D),Array.isArray(R))R.forEach($=>{var F=_objectSpread$l(_objectSpread$l({},T),{},{name:$.name,unit:$.unit,color:void 0,fill:void 0});o.push(getTooltipEntry({tooltipEntrySettings:F,dataKey:$.dataKey,payload:$.payload,value:getValueByDataKey($.payload,$.dataKey),name:$.name}))});else{var I;o.push(getTooltipEntry({tooltipEntrySettings:T,dataKey:C,payload:R,value:getValueByDataKey(R,C),name:(I=getValueByDataKey(R,D))!==null&&I!==void 0?I:T==null?void 0:T.name}))}return o},u)}},selectTooltipAxisRealScaleType=createSelector([selectTooltipAxis,selectChartLayout,selectHasBar,selectChartName,selectTooltipAxisType],combineRealScaleType),selectAllUnfilteredGraphicalItems=createSelector([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),selectTooltipAxisPredicate=createSelector([selectTooltipAxisType,selectTooltipAxisId],itemAxisPredicate),selectAllGraphicalItemsSettings=createSelector([selectAllUnfilteredGraphicalItems,selectTooltipAxis,selectTooltipAxisPredicate],combineGraphicalItemsSettings,{memoizeOptions:{resultEqualityCheck:arrayEqualityCheck}}),selectAllStackedGraphicalItemsSettings=createSelector([selectAllGraphicalItemsSettings],t=>t.filter(isStacked)),selectTooltipGraphicalItemsData=createSelector([selectAllGraphicalItemsSettings],combineGraphicalItemsData,{memoizeOptions:{resultEqualityCheck:arrayEqualityCheck}}),selectTooltipDisplayedData=createSelector([selectTooltipGraphicalItemsData,selectChartDataWithIndexes],combineDisplayedData),selectTooltipStackedData=createSelector([selectAllStackedGraphicalItemsSettings,selectChartDataWithIndexes,selectTooltipAxis],combineDisplayedStackedData),selectAllTooltipAppliedValues=createSelector([selectTooltipDisplayedData,selectTooltipAxis,selectAllGraphicalItemsSettings],combineAppliedValues),selectTooltipAxisDomainDefinition=createSelector([selectTooltipAxis],getDomainDefinition),selectTooltipDataOverflow=createSelector([selectTooltipAxis],t=>t.allowDataOverflow),selectTooltipDomainFromUserPreferences=createSelector([selectTooltipAxisDomainDefinition,selectTooltipDataOverflow],numericalDomainSpecifiedWithoutRequiringData),selectAllStackedGraphicalItems=createSelector([selectAllGraphicalItemsSettings],t=>t.filter(isStacked)),selectTooltipStackGroups=createSelector([selectTooltipStackedData,selectAllStackedGraphicalItems,selectStackOffsetType],combineStackGroups),selectTooltipDomainOfStackGroups=createSelector([selectTooltipStackGroups,selectChartDataWithIndexes,selectTooltipAxisType,selectTooltipDomainFromUserPreferences],combineDomainOfStackGroups),selectTooltipItemsSettingsExceptStacked=createSelector([selectAllGraphicalItemsSettings],filterGraphicalNotStackedItems),selectDomainOfAllAppliedNumericalValuesIncludingErrorValues=createSelector([selectTooltipDisplayedData,selectTooltipAxis,selectTooltipItemsSettingsExceptStacked,selectAllErrorBarSettings,selectTooltipAxisType],combineDomainOfAllAppliedNumericalValuesIncludingErrorValues,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}}),selectReferenceDotsByTooltipAxis=createSelector([selectReferenceDots,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),selectTooltipReferenceDotsDomain=createSelector([selectReferenceDotsByTooltipAxis,selectTooltipAxisType],combineDotsDomain),selectReferenceAreasByTooltipAxis=createSelector([selectReferenceAreas,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),selectTooltipReferenceAreasDomain=createSelector([selectReferenceAreasByTooltipAxis,selectTooltipAxisType],combineAreasDomain),selectReferenceLinesByTooltipAxis=createSelector([selectReferenceLines,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),selectTooltipReferenceLinesDomain=createSelector([selectReferenceLinesByTooltipAxis,selectTooltipAxisType],combineLinesDomain),selectTooltipReferenceElementsDomain=createSelector([selectTooltipReferenceDotsDomain,selectTooltipReferenceLinesDomain,selectTooltipReferenceAreasDomain],mergeDomains),selectTooltipNumericalDomain=createSelector([selectTooltipAxis,selectTooltipAxisDomainDefinition,selectTooltipDomainFromUserPreferences,selectTooltipDomainOfStackGroups,selectDomainOfAllAppliedNumericalValuesIncludingErrorValues,selectTooltipReferenceElementsDomain,selectChartLayout,selectTooltipAxisType],combineNumericalDomain),selectTooltipAxisDomain=createSelector([selectTooltipAxis,selectChartLayout,selectTooltipDisplayedData,selectAllTooltipAppliedValues,selectStackOffsetType,selectTooltipAxisType,selectTooltipNumericalDomain],combineAxisDomain),selectTooltipNiceTicks=createSelector([selectTooltipAxisDomain,selectTooltipAxis,selectTooltipAxisRealScaleType],combineNiceTicks),selectTooltipAxisDomainIncludingNiceTicks=createSelector([selectTooltipAxis,selectTooltipAxisDomain,selectTooltipNiceTicks,selectTooltipAxisType],combineAxisDomainWithNiceTicks),selectTooltipAxisRange=t=>{var e=selectTooltipAxisType(t),n=selectTooltipAxisId(t),i=!1;return selectAxisRange(t,e,n,i)},selectTooltipAxisRangeWithReverse=createSelector([selectTooltipAxis,selectTooltipAxisRange],combineAxisRangeWithReverse),selectTooltipAxisScale=createSelector([selectTooltipAxis,selectTooltipAxisRealScaleType,selectTooltipAxisDomainIncludingNiceTicks,selectTooltipAxisRangeWithReverse],combineScaleFunction),selectTooltipDuplicateDomain=createSelector([selectChartLayout,selectAllTooltipAppliedValues,selectTooltipAxis,selectTooltipAxisType],combineDuplicateDomain),selectTooltipCategoricalDomain=createSelector([selectChartLayout,selectAllTooltipAppliedValues,selectTooltipAxis,selectTooltipAxisType],combineCategoricalDomain),combineTicksOfTooltipAxis=(t,e,n,i,l,f,p,b)=>{if(e){var{type:w}=e,v=isCategoricalAxis(t,b);if(i){var g=n==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,u=w==="category"&&i.bandwidth?i.bandwidth()/g:0;return u=b==="angleAxis"&&l!=null&&(l==null?void 0:l.length)>=2?mathSign(l[0]-l[1])*2*u:u,v&&p?p.map((o,h)=>({coordinate:i(o)+u,value:o,index:h,offset:u})):i.domain().map((o,h)=>({coordinate:i(o)+u,value:f?f[o]:o,index:h,offset:u}))}}},selectTooltipAxisTicks=createSelector([selectChartLayout,selectTooltipAxis,selectTooltipAxisRealScaleType,selectTooltipAxisScale,selectTooltipAxisRange,selectTooltipDuplicateDomain,selectTooltipCategoricalDomain,selectTooltipAxisType],combineTicksOfTooltipAxis),selectTooltipEventType=createSelector([selectDefaultTooltipEventType,selectValidateTooltipEventTypes,selectTooltipSettings],(t,e,n)=>combineTooltipEventType(n.shared,t,e)),selectTooltipTrigger=t=>t.tooltip.settings.trigger,selectDefaultIndex=t=>t.tooltip.settings.defaultIndex,selectTooltipInteractionState$1=createSelector([selectTooltipState,selectTooltipEventType,selectTooltipTrigger,selectDefaultIndex],combineTooltipInteractionState),selectActiveTooltipIndex=createSelector([selectTooltipInteractionState$1,selectTooltipDisplayedData],combineActiveTooltipIndex),selectActiveLabel$1=createSelector([selectTooltipAxisTicks,selectActiveTooltipIndex],combineActiveLabel),selectActiveTooltipDataKey=createSelector([selectTooltipInteractionState$1],t=>{if(t)return t.dataKey}),selectTooltipPayloadConfigurations$1=createSelector([selectTooltipState,selectTooltipEventType,selectTooltipTrigger,selectDefaultIndex],combineTooltipPayloadConfigurations),selectTooltipCoordinateForDefaultIndex=createSelector([selectChartWidth,selectChartHeight,selectChartLayout,selectChartOffsetInternal,selectTooltipAxisTicks,selectDefaultIndex,selectTooltipPayloadConfigurations$1,selectTooltipPayloadSearcher],combineCoordinateForDefaultIndex),selectActiveTooltipCoordinate=createSelector([selectTooltipInteractionState$1,selectTooltipCoordinateForDefaultIndex],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),selectIsTooltipActive$1=createSelector([selectTooltipInteractionState$1],t=>t.active),selectActiveTooltipPayload=createSelector([selectTooltipPayloadConfigurations$1,selectActiveTooltipIndex,selectChartDataWithIndexes,selectTooltipAxisDataKey,selectActiveLabel$1,selectTooltipPayloadSearcher,selectTooltipEventType],combineTooltipPayload),selectActiveTooltipDataPoints=createSelector([selectActiveTooltipPayload],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function ownKeys$k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$k(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$k(Object(n),!0).forEach(function(i){_defineProperty$m(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$k(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$m(t,e,n){return(e=_toPropertyKey$m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$m(t){var e=_toPrimitive$m(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$m(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var useTooltipAxis=()=>useAppSelector(selectTooltipAxis),useTooltipAxisBandSize=()=>{var t=useTooltipAxis(),e=useAppSelector(selectTooltipAxisTicks),n=useAppSelector(selectTooltipAxisScale);return getBandSizeOfAxis(_objectSpread$k(_objectSpread$k({},t),{},{scale:n}),e)},useChartName=()=>useAppSelector(selectChartName),pickTooltipEventType=(t,e)=>e,pickTrigger=(t,e,n)=>n,pickDefaultIndex=(t,e,n,i)=>i,selectOrderedTooltipTicks=createSelector(selectTooltipAxisTicks,t=>sortBy(t,e=>e.coordinate)),selectTooltipInteractionState=createSelector([selectTooltipState,pickTooltipEventType,pickTrigger,pickDefaultIndex],combineTooltipInteractionState),selectActiveIndex=createSelector([selectTooltipInteractionState,selectTooltipDisplayedData],combineActiveTooltipIndex),selectTooltipDataKey=(t,e,n)=>{if(e!=null){var i=selectTooltipState(t);return e==="axis"?n==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:n==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},selectTooltipPayloadConfigurations=createSelector([selectTooltipState,pickTooltipEventType,pickTrigger,pickDefaultIndex],combineTooltipPayloadConfigurations),selectCoordinateForDefaultIndex=createSelector([selectChartWidth,selectChartHeight,selectChartLayout,selectChartOffsetInternal,selectTooltipAxisTicks,pickDefaultIndex,selectTooltipPayloadConfigurations,selectTooltipPayloadSearcher],combineCoordinateForDefaultIndex),selectActiveCoordinate=createSelector([selectTooltipInteractionState,selectCoordinateForDefaultIndex],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),selectActiveLabel=createSelector(selectTooltipAxisTicks,selectActiveIndex,combineActiveLabel),selectTooltipPayload=createSelector([selectTooltipPayloadConfigurations,selectActiveIndex,selectChartDataWithIndexes,selectTooltipAxisDataKey,selectActiveLabel,selectTooltipPayloadSearcher,pickTooltipEventType],combineTooltipPayload),selectIsTooltipActive=createSelector([selectTooltipInteractionState],t=>({isActive:t.active,activeIndex:t.index})),combineActiveProps=(t,e,n,i,l,f,p,b)=>{if(!(!t||!e||!i||!l||!f)){var w=inRange(t.chartX,t.chartY,e,n,b);if(w){var v=calculateTooltipPos(w,e),g=calculateActiveTickIndex(v,p,f,i,l),u=getActiveCoordinate(e,f,g,w);return{activeIndex:String(g),activeCoordinate:u}}}};function _extends$i(){return _extends$i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$i.apply(null,arguments)}function ownKeys$j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$j(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$j(Object(n),!0).forEach(function(i){_defineProperty$l(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$j(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$l(t,e,n){return(e=_toPropertyKey$l(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$l(t){var e=_toPrimitive$l(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$l(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CursorInternal(t){var{coordinate:e,payload:n,index:i,offset:l,tooltipAxisBandSize:f,layout:p,cursor:b,tooltipEventType:w,chartName:v}=t,g=e,u=n,o=i;if(!b||!g||v!=="ScatterChart"&&w!=="axis")return null;var h,_;if(v==="ScatterChart")h=g,_=Cross;else if(v==="BarChart")h=getCursorRectangle(p,g,l,f),_=Rectangle;else if(p==="radial"){var{cx:S,cy:T,radius:O,startAngle:j,endAngle:C}=getRadialCursorPoints(g);h={cx:S,cy:T,startAngle:j,endAngle:C,innerRadius:O,outerRadius:O},_=Sector}else h={points:getCursorPoints(p,g,l)},_=Curve;var D=typeof b=="object"&&"className"in b?b.className:void 0,R=_objectSpread$j(_objectSpread$j(_objectSpread$j(_objectSpread$j({stroke:"#ccc",pointerEvents:"none"},l),h),svgPropertiesNoEventsFromUnknown(b)),{},{payload:u,payloadIndex:o,className:clsx("recharts-tooltip-cursor",D)});return reactExports.isValidElement(b)?reactExports.cloneElement(b,R):reactExports.createElement(_,R)}function Cursor(t){var e=useTooltipAxisBandSize(),n=useOffsetInternal(),i=useChartLayout(),l=useChartName();return reactExports.createElement(CursorInternal,_extends$i({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:i,tooltipAxisBandSize:e,chartName:l}))}var TooltipPortalContext=reactExports.createContext(null),useTooltipPortal=()=>reactExports.useContext(TooltipPortalContext),eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function l(w,v,g){this.fn=w,this.context=v,this.once=g||!1}function f(w,v,g,u,o){if(typeof g!="function")throw new TypeError("The listener must be a function");var h=new l(g,u||w,o),_=n?n+v:v;return w._events[_]?w._events[_].fn?w._events[_]=[w._events[_],h]:w._events[_].push(h):(w._events[_]=h,w._eventsCount++),w}function p(w,v){--w._eventsCount===0?w._events=new i:delete w._events[v]}function b(){this._events=new i,this._eventsCount=0}b.prototype.eventNames=function(){var v=[],g,u;if(this._eventsCount===0)return v;for(u in g=this._events)e.call(g,u)&&v.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(g)):v},b.prototype.listeners=function(v){var g=n?n+v:v,u=this._events[g];if(!u)return[];if(u.fn)return[u.fn];for(var o=0,h=u.length,_=new Array(h);o<h;o++)_[o]=u[o].fn;return _},b.prototype.listenerCount=function(v){var g=n?n+v:v,u=this._events[g];return u?u.fn?1:u.length:0},b.prototype.emit=function(v,g,u,o,h,_){var S=n?n+v:v;if(!this._events[S])return!1;var T=this._events[S],O=arguments.length,j,C;if(T.fn){switch(T.once&&this.removeListener(v,T.fn,void 0,!0),O){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,g),!0;case 3:return T.fn.call(T.context,g,u),!0;case 4:return T.fn.call(T.context,g,u,o),!0;case 5:return T.fn.call(T.context,g,u,o,h),!0;case 6:return T.fn.call(T.context,g,u,o,h,_),!0}for(C=1,j=new Array(O-1);C<O;C++)j[C-1]=arguments[C];T.fn.apply(T.context,j)}else{var D=T.length,R;for(C=0;C<D;C++)switch(T[C].once&&this.removeListener(v,T[C].fn,void 0,!0),O){case 1:T[C].fn.call(T[C].context);break;case 2:T[C].fn.call(T[C].context,g);break;case 3:T[C].fn.call(T[C].context,g,u);break;case 4:T[C].fn.call(T[C].context,g,u,o);break;default:if(!j)for(R=1,j=new Array(O-1);R<O;R++)j[R-1]=arguments[R];T[C].fn.apply(T[C].context,j)}}return!0},b.prototype.on=function(v,g,u){return f(this,v,g,u,!1)},b.prototype.once=function(v,g,u){return f(this,v,g,u,!0)},b.prototype.removeListener=function(v,g,u,o){var h=n?n+v:v;if(!this._events[h])return this;if(!g)return p(this,h),this;var _=this._events[h];if(_.fn)_.fn===g&&(!o||_.once)&&(!u||_.context===u)&&p(this,h);else{for(var S=0,T=[],O=_.length;S<O;S++)(_[S].fn!==g||o&&!_[S].once||u&&_[S].context!==u)&&T.push(_[S]);T.length?this._events[h]=T.length===1?T[0]:T:p(this,h)}return this},b.prototype.removeAllListeners=function(v){var g;return v?(g=n?n+v:v,this._events[g]&&p(this,g)):(this._events=new i,this._eventsCount=0),this},b.prototype.off=b.prototype.removeListener,b.prototype.addListener=b.prototype.on,b.prefixed=n,b.EventEmitter=b,t.exports=b})(eventemitter3)),eventemitter3.exports}var eventemitter3Exports=requireEventemitter3();const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);var eventCenter=new EventEmitter,TOOLTIP_SYNC_EVENT="recharts.syncEvent.tooltip",BRUSH_SYNC_EVENT="recharts.syncEvent.brush";function arrayTooltipSearcher(t,e){if(e){var n=Number.parseInt(e,10);if(!isNan(n))return t==null?void 0:t[n]}}var initialState$7={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},optionsSlice=createSlice({name:"options",initialState:initialState$7,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),optionsReducer=optionsSlice.reducer,{createEventEmitter}=optionsSlice.actions;function selectSynchronisedTooltipState(t){return t.tooltip.syncInteraction}var initialChartDataState={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},chartDataSlice=createSlice({name:"chartData",initialState:initialChartDataState,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:i}=e.payload;n!=null&&(t.dataStartIndex=n),i!=null&&(t.dataEndIndex=i)}}}),{setChartData,setDataStartEndIndexes,setComputedData}=chartDataSlice.actions,chartDataReducer=chartDataSlice.reducer,_excluded$h=["x","y"];function ownKeys$i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$i(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$i(Object(n),!0).forEach(function(i){_defineProperty$k(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$i(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$k(t,e,n){return(e=_toPropertyKey$k(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$k(t){var e=_toPrimitive$k(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$k(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _objectWithoutProperties$h(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$h(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$h(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var noop$1=()=>{};function useTooltipSyncEventsListener(){var t=useAppSelector(selectSyncId),e=useAppSelector(selectEventEmitter),n=useAppDispatch(),i=useAppSelector(selectSyncMethod),l=useAppSelector(selectTooltipAxisTicks),f=useChartLayout(),p=useViewBox(),b=useAppSelector(w=>w.rootProps.className);reactExports.useEffect(()=>{if(t==null)return noop$1;var w=(v,g,u)=>{if(e!==u&&t===v){if(i==="index"){var o;if(p&&g!==null&&g!==void 0&&(o=g.payload)!==null&&o!==void 0&&o.coordinate&&g.payload.sourceViewBox){var h=g.payload.coordinate,{x:_,y:S}=h,T=_objectWithoutProperties$h(h,_excluded$h),{x:O,y:j,width:C,height:D}=g.payload.sourceViewBox,R=_objectSpread$i(_objectSpread$i({},T),{},{x:p.x+(C?(_-O)/C:0)*p.width,y:p.y+(D?(S-j)/D:0)*p.height});n(_objectSpread$i(_objectSpread$i({},g),{},{payload:_objectSpread$i(_objectSpread$i({},g.payload),{},{coordinate:R})}))}else n(g);return}if(l!=null){var I;if(typeof i=="function"){var $={activeTooltipIndex:g.payload.index==null?void 0:Number(g.payload.index),isTooltipActive:g.payload.active,activeIndex:g.payload.index==null?void 0:Number(g.payload.index),activeLabel:g.payload.label,activeDataKey:g.payload.dataKey,activeCoordinate:g.payload.coordinate},F=i(l,$);I=l[F]}else i==="value"&&(I=l.find(z=>String(z.value)===g.payload.label));var{coordinate:L}=g.payload;if(I==null||g.payload.active===!1||L==null||p==null){n(setSyncInteraction({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:V,y:Y}=L,Q=Math.min(V,p.x+p.width),ee=Math.min(Y,p.y+p.height),X={x:f==="horizontal"?I.coordinate:Q,y:f==="horizontal"?ee:I.coordinate},W=setSyncInteraction({active:g.payload.active,coordinate:X,dataKey:g.payload.dataKey,index:String(I.index),label:g.payload.label,sourceViewBox:g.payload.sourceViewBox});n(W)}}};return eventCenter.on(TOOLTIP_SYNC_EVENT,w),()=>{eventCenter.off(TOOLTIP_SYNC_EVENT,w)}},[b,n,e,t,i,l,f,p])}function useBrushSyncEventsListener(){var t=useAppSelector(selectSyncId),e=useAppSelector(selectEventEmitter),n=useAppDispatch();reactExports.useEffect(()=>{if(t==null)return noop$1;var i=(l,f,p)=>{e!==p&&t===l&&n(setDataStartEndIndexes(f))};return eventCenter.on(BRUSH_SYNC_EVENT,i),()=>{eventCenter.off(BRUSH_SYNC_EVENT,i)}},[n,e,t])}function useSynchronisedEventsFromOtherCharts(){var t=useAppDispatch();reactExports.useEffect(()=>{t(createEventEmitter())},[t]),useTooltipSyncEventsListener(),useBrushSyncEventsListener()}function useTooltipChartSynchronisation(t,e,n,i,l,f){var p=useAppSelector(h=>selectTooltipDataKey(h,t,e)),b=useAppSelector(selectEventEmitter),w=useAppSelector(selectSyncId),v=useAppSelector(selectSyncMethod),g=useAppSelector(selectSynchronisedTooltipState),u=g==null?void 0:g.active,o=useViewBox();reactExports.useEffect(()=>{if(!u&&w!=null&&b!=null){var h=setSyncInteraction({active:f,coordinate:n,dataKey:p,index:l,label:typeof i=="number"?String(i):i,sourceViewBox:o});eventCenter.emit(TOOLTIP_SYNC_EVENT,w,h,b)}},[u,n,p,l,i,b,w,v,f,o])}function ownKeys$h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$h(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$h(Object(n),!0).forEach(function(i){_defineProperty$j(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$h(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$j(t,e,n){return(e=_toPropertyKey$j(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$j(t){var e=_toPrimitive$j(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$j(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function defaultUniqBy(t){return t.dataKey}function renderContent$1(t,e){return reactExports.isValidElement(t)?reactExports.cloneElement(t,e):typeof t=="function"?reactExports.createElement(t,e):reactExports.createElement(DefaultTooltipContent,e)}var emptyPayload=[],defaultTooltipProps={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Global.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Tooltip(t){var e=resolveDefaultProps(t,defaultTooltipProps),{active:n,allowEscapeViewBox:i,animationDuration:l,animationEasing:f,content:p,filterNull:b,isAnimationActive:w,offset:v,payloadUniqBy:g,position:u,reverseDirection:o,useTranslate3d:h,wrapperStyle:_,cursor:S,shared:T,trigger:O,defaultIndex:j,portal:C,axisId:D}=e,R=useAppDispatch(),I=typeof j=="number"?String(j):j;reactExports.useEffect(()=>{R(setTooltipSettingsState({shared:T,trigger:O,axisId:D,active:n,defaultIndex:I}))},[R,T,O,D,n,I]);var $=useViewBox(),F=useAccessibilityLayer(),L=useTooltipEventType(T),{activeIndex:V,isActive:Y}=useAppSelector(pe=>selectIsTooltipActive(pe,L,O,I)),Q=useAppSelector(pe=>selectTooltipPayload(pe,L,O,I)),ee=useAppSelector(pe=>selectActiveLabel(pe,L,O,I)),X=useAppSelector(pe=>selectActiveCoordinate(pe,L,O,I)),W=Q,z=useTooltipPortal(),q=n??Y,[ce,ae]=useElementOffset([W,q]),we=L==="axis"?ee:void 0;useTooltipChartSynchronisation(L,O,X,we,V,q);var Z=C??z;if(Z==null)return null;var ue=W??emptyPayload;q||(ue=emptyPayload),b&&ue.length&&(ue=getUniqPayload(W.filter(pe=>pe.value!=null&&(pe.hide!==!0||e.includeHidden)),g,defaultUniqBy));var Pe=ue.length>0,Re=reactExports.createElement(TooltipBoundingBox,{allowEscapeViewBox:i,animationDuration:l,animationEasing:f,isAnimationActive:w,active:q,coordinate:X,hasPayload:Pe,offset:v,position:u,reverseDirection:o,useTranslate3d:h,viewBox:$,wrapperStyle:_,lastBoundingBox:ce,innerRef:ae,hasPortalFromProps:!!C},renderContent$1(p,_objectSpread$h(_objectSpread$h({},e),{},{payload:ue,label:we,active:q,coordinate:X,accessibilityLayer:F})));return reactExports.createElement(reactExports.Fragment,null,reactDomExports.createPortal(Re,Z),q&&reactExports.createElement(Cursor,{cursor:S,tooltipEventType:L,coordinate:X,payload:W,index:V}))}var Cell=t=>null;Cell.displayName="Cell";function _defineProperty$i(t,e,n){return(e=_toPropertyKey$i(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$i(t){var e=_toPrimitive$i(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$i(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class LRUCache{constructor(e){_defineProperty$i(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var i=this.cache.keys().next().value;this.cache.delete(i)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function ownKeys$g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$g(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$g(Object(n),!0).forEach(function(i){_defineProperty$h(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$g(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$h(t,e,n){return(e=_toPropertyKey$h(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$h(t){var e=_toPrimitive$h(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$h(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var defaultConfig={cacheSize:2e3,enableCache:!0},currentConfig=_objectSpread$g({},defaultConfig),stringCache=new LRUCache(currentConfig.cacheSize),SPAN_STYLE={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MEASUREMENT_SPAN_ID="recharts_measurement_span";function createCacheKey(t,e){var n=e.fontSize||"",i=e.fontFamily||"",l=e.fontWeight||"",f=e.fontStyle||"",p=e.letterSpacing||"",b=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(i,"|").concat(l,"|").concat(f,"|").concat(p,"|").concat(b)}var measureTextWithDOM=(t,e)=>{try{var n=document.getElementById(MEASUREMENT_SPAN_ID);n||(n=document.createElement("span"),n.setAttribute("id",MEASUREMENT_SPAN_ID),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,SPAN_STYLE,e),n.textContent="".concat(t);var i=n.getBoundingClientRect();return{width:i.width,height:i.height}}catch{return{width:0,height:0}}},getStringSize=function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Global.isSsr)return{width:0,height:0};if(!currentConfig.enableCache)return measureTextWithDOM(e,n);var i=createCacheKey(e,n),l=stringCache.get(i);if(l)return l;var f=measureTextWithDOM(e,n);return stringCache.set(i,f),f},MULTIPLY_OR_DIVIDE_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ADD_OR_SUBTRACT_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CSS_LENGTH_UNIT_REGEX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,NUM_SPLIT_REGEX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,CONVERSION_RATES={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FIXED_CSS_LENGTH_UNITS=Object.keys(CONVERSION_RATES),STR_NAN="NaN";function convertToPx(t,e){return t*CONVERSION_RATES[e]}class DecimalCSS{static parse(e){var n,[,i,l]=(n=NUM_SPLIT_REGEX.exec(e))!==null&&n!==void 0?n:[];return new DecimalCSS(parseFloat(i),l??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,isNan(e)&&(this.unit=""),n!==""&&!CSS_LENGTH_UNIT_REGEX.test(n)&&(this.num=NaN,this.unit=""),FIXED_CSS_LENGTH_UNITS.includes(n)&&(this.num=convertToPx(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return isNan(this.num)}}function calculateArithmetic(t){if(t.includes(STR_NAN))return STR_NAN;for(var e=t;e.includes("*")||e.includes("/");){var n,[,i,l,f]=(n=MULTIPLY_OR_DIVIDE_REGEX.exec(e))!==null&&n!==void 0?n:[],p=DecimalCSS.parse(i??""),b=DecimalCSS.parse(f??""),w=l==="*"?p.multiply(b):p.divide(b);if(w.isNaN())return STR_NAN;e=e.replace(MULTIPLY_OR_DIVIDE_REGEX,w.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var v,[,g,u,o]=(v=ADD_OR_SUBTRACT_REGEX.exec(e))!==null&&v!==void 0?v:[],h=DecimalCSS.parse(g??""),_=DecimalCSS.parse(o??""),S=u==="+"?h.add(_):h.subtract(_);if(S.isNaN())return STR_NAN;e=e.replace(ADD_OR_SUBTRACT_REGEX,S.toString())}return e}var PARENTHESES_REGEX=/\(([^()]*)\)/;function calculateParentheses(t){for(var e=t,n;(n=PARENTHESES_REGEX.exec(e))!=null;){var[,i]=n;e=e.replace(PARENTHESES_REGEX,calculateArithmetic(i))}return e}function evaluateExpression(t){var e=t.replace(/\s+/g,"");return e=calculateParentheses(e),e=calculateArithmetic(e),e}function safeEvaluateExpression(t){try{return evaluateExpression(t)}catch{return STR_NAN}}function reduceCSSCalc(t){var e=safeEvaluateExpression(t.slice(5,-1));return e===STR_NAN?"":e}var _excluded$g=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_excluded2$9=["dx","dy","angle","className","breakAll"];function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$h.apply(null,arguments)}function _objectWithoutProperties$g(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$g(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$g(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var BREAKING_SPACES=/[ \f\n\r\t\v\u2028\u2029]+/,calculateWordWidths=t=>{var{children:e,breakAll:n,style:i}=t;try{var l=[];isNullish(e)||(n?l=e.toString().split(""):l=e.toString().split(BREAKING_SPACES));var f=l.map(b=>({word:b,width:getStringSize(b,i).width})),p=n?0:getStringSize("",i).width;return{wordsWithComputedWidth:f,spaceWidth:p}}catch{return null}},calculateWordsByLines=(t,e,n,i,l)=>{var{maxLines:f,children:p,style:b,breakAll:w}=t,v=isNumber(f),g=p,u=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y.reduce((Q,ee)=>{var{word:X,width:W}=ee,z=Q[Q.length-1];if(z&&(i==null||l||z.width+W+n<Number(i)))z.words.push(X),z.width+=W+n;else{var q={words:[X],width:W};Q.push(q)}return Q},[])},o=u(e),h=V=>V.reduce((Y,Q)=>Y.width>Q.width?Y:Q);if(!v||l)return o;var _=o.length>f||h(o).width>Number(i);if(!_)return o;for(var S="",T=V=>{var Y=g.slice(0,V),Q=calculateWordWidths({breakAll:w,style:b,children:Y+S}).wordsWithComputedWidth,ee=u(Q),X=ee.length>f||h(ee).width>Number(i);return[X,ee]},O=0,j=g.length-1,C=0,D;O<=j&&C<=g.length-1;){var R=Math.floor((O+j)/2),I=R-1,[$,F]=T(I),[L]=T(R);if(!$&&!L&&(O=R+1),$&&L&&(j=R-1),!$&&L){D=F;break}C++}return D||o},getWordsWithoutCalculate=t=>{var e=isNullish(t)?[]:t.toString().split(BREAKING_SPACES);return[{words:e}]},getWordsByLines=t=>{var{width:e,scaleToFit:n,children:i,style:l,breakAll:f,maxLines:p}=t;if((e||n)&&!Global.isSsr){var b,w,v=calculateWordWidths({breakAll:f,children:i,style:l});if(v){var{wordsWithComputedWidth:g,spaceWidth:u}=v;b=g,w=u}else return getWordsWithoutCalculate(i);return calculateWordsByLines({breakAll:f,children:i,maxLines:p,style:l},b,w,e,n)}return getWordsWithoutCalculate(i)},DEFAULT_FILL="#808080",Text=reactExports.forwardRef((t,e)=>{var{x:n=0,y:i=0,lineHeight:l="1em",capHeight:f="0.71em",scaleToFit:p=!1,textAnchor:b="start",verticalAnchor:w="end",fill:v=DEFAULT_FILL}=t,g=_objectWithoutProperties$g(t,_excluded$g),u=reactExports.useMemo(()=>getWordsByLines({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:p,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,p,g.style,g.width]),{dx:o,dy:h,angle:_,className:S,breakAll:T}=g,O=_objectWithoutProperties$g(g,_excluded2$9);if(!isNumOrStr(n)||!isNumOrStr(i)||u.length===0)return null;var j=n+(isNumber(o)?o:0),C=i+(isNumber(h)?h:0),D;switch(w){case"start":D=reduceCSSCalc("calc(".concat(f,")"));break;case"middle":D=reduceCSSCalc("calc(".concat((u.length-1)/2," * -").concat(l," + (").concat(f," / 2))"));break;default:D=reduceCSSCalc("calc(".concat(u.length-1," * -").concat(l,")"));break}var R=[];if(p){var I=u[0].width,{width:$}=g;R.push("scale(".concat(isNumber($)?$/I:1,")"))}return _&&R.push("rotate(".concat(_,", ").concat(j,", ").concat(C,")")),R.length&&(O.transform=R.join(" ")),reactExports.createElement("text",_extends$h({},svgPropertiesAndEvents(O),{ref:e,x:j,y:C,className:clsx("recharts-text",S),textAnchor:b,fill:v.includes("url")?DEFAULT_FILL:v}),u.map((F,L)=>{var V=F.words.join(T?"":" ");return reactExports.createElement("tspan",{x:j,dy:L===0?D:l,key:"".concat(V,"-").concat(L)},V)}))});Text.displayName="Text";var _excluded$f=["labelRef"];function _objectWithoutProperties$f(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$f(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$f(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function ownKeys$f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$f(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$f(Object(n),!0).forEach(function(i){_defineProperty$g(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$f(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$g(t,e,n){return(e=_toPropertyKey$g(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$g(t){var e=_toPrimitive$g(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$g(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$g.apply(null,arguments)}var CartesianLabelContext=reactExports.createContext(null),CartesianLabelContextProvider=t=>{var{x:e,y:n,width:i,height:l,children:f}=t,p=reactExports.useMemo(()=>({x:e,y:n,width:i,height:l}),[e,n,i,l]);return reactExports.createElement(CartesianLabelContext.Provider,{value:p},f)},useCartesianLabelContext=()=>{var t=reactExports.useContext(CartesianLabelContext),e=useViewBox();return t||e},PolarLabelContext=reactExports.createContext(null),usePolarLabelContext=()=>{var t=reactExports.useContext(PolarLabelContext),e=useAppSelector(selectPolarViewBox);return t||e},getLabel=t=>{var{value:e,formatter:n}=t,i=isNullish(t.children)?e:t.children;return typeof n=="function"?n(i):i},isLabelContentAFunction=t=>t!=null&&typeof t=="function",getDeltaAngle=(t,e)=>{var n=mathSign(e-t),i=Math.min(Math.abs(e-t),360);return n*i},renderRadialLabel=(t,e,n,i,l)=>{var{offset:f,className:p}=t,{cx:b,cy:w,innerRadius:v,outerRadius:g,startAngle:u,endAngle:o,clockWise:h}=l,_=(v+g)/2,S=getDeltaAngle(u,o),T=S>=0?1:-1,O,j;switch(e){case"insideStart":O=u+T*f,j=h;break;case"insideEnd":O=o-T*f,j=!h;break;case"end":O=o+T*f,j=h;break;default:throw new Error("Unsupported position ".concat(e))}j=S<=0?j:!j;var C=polarToCartesian(b,w,_,O),D=polarToCartesian(b,w,_,O+(j?1:-1)*359),R="M".concat(C.x,",").concat(C.y,`
    A`).concat(_,",").concat(_,",0,1,").concat(j?0:1,`,
    `).concat(D.x,",").concat(D.y),I=isNullish(t.id)?uniqueId("recharts-radial-line-"):t.id;return reactExports.createElement("text",_extends$g({},i,{dominantBaseline:"central",className:clsx("recharts-radial-bar-label",p)}),reactExports.createElement("defs",null,reactExports.createElement("path",{id:I,d:R})),reactExports.createElement("textPath",{xlinkHref:"#".concat(I)},n))},getAttrsOfPolarLabel=(t,e,n)=>{var{cx:i,cy:l,innerRadius:f,outerRadius:p,startAngle:b,endAngle:w}=t,v=(b+w)/2;if(n==="outside"){var{x:g,y:u}=polarToCartesian(i,l,p+e,v);return{x:g,y:u,textAnchor:g>=i?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:i,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:i,y:l,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:i,y:l,textAnchor:"middle",verticalAnchor:"end"};var o=(f+p)/2,{x:h,y:_}=polarToCartesian(i,l,o,v);return{x:h,y:_,textAnchor:"middle",verticalAnchor:"middle"}},isPolar=t=>"cx"in t&&isNumber(t.cx),getAttrsOfCartesianLabel=(t,e)=>{var{parentViewBox:n,offset:i,position:l}=t,f;n!=null&&!isPolar(n)&&(f=n);var{x:p,y:b,width:w,height:v}=e,g=v>=0?1:-1,u=g*i,o=g>0?"end":"start",h=g>0?"start":"end",_=w>=0?1:-1,S=_*i,T=_>0?"end":"start",O=_>0?"start":"end";if(l==="top"){var j={x:p+w/2,y:b-g*i,textAnchor:"middle",verticalAnchor:o};return _objectSpread$f(_objectSpread$f({},j),f?{height:Math.max(b-f.y,0),width:w}:{})}if(l==="bottom"){var C={x:p+w/2,y:b+v+u,textAnchor:"middle",verticalAnchor:h};return _objectSpread$f(_objectSpread$f({},C),f?{height:Math.max(f.y+f.height-(b+v),0),width:w}:{})}if(l==="left"){var D={x:p-S,y:b+v/2,textAnchor:T,verticalAnchor:"middle"};return _objectSpread$f(_objectSpread$f({},D),f?{width:Math.max(D.x-f.x,0),height:v}:{})}if(l==="right"){var R={x:p+w+S,y:b+v/2,textAnchor:O,verticalAnchor:"middle"};return _objectSpread$f(_objectSpread$f({},R),f?{width:Math.max(f.x+f.width-R.x,0),height:v}:{})}var I=f?{width:w,height:v}:{};return l==="insideLeft"?_objectSpread$f({x:p+S,y:b+v/2,textAnchor:O,verticalAnchor:"middle"},I):l==="insideRight"?_objectSpread$f({x:p+w-S,y:b+v/2,textAnchor:T,verticalAnchor:"middle"},I):l==="insideTop"?_objectSpread$f({x:p+w/2,y:b+u,textAnchor:"middle",verticalAnchor:h},I):l==="insideBottom"?_objectSpread$f({x:p+w/2,y:b+v-u,textAnchor:"middle",verticalAnchor:o},I):l==="insideTopLeft"?_objectSpread$f({x:p+S,y:b+u,textAnchor:O,verticalAnchor:h},I):l==="insideTopRight"?_objectSpread$f({x:p+w-S,y:b+u,textAnchor:T,verticalAnchor:h},I):l==="insideBottomLeft"?_objectSpread$f({x:p+S,y:b+v-u,textAnchor:O,verticalAnchor:o},I):l==="insideBottomRight"?_objectSpread$f({x:p+w-S,y:b+v-u,textAnchor:T,verticalAnchor:o},I):l&&typeof l=="object"&&(isNumber(l.x)||isPercent(l.x))&&(isNumber(l.y)||isPercent(l.y))?_objectSpread$f({x:p+getPercentValue(l.x,w),y:b+getPercentValue(l.y,v),textAnchor:"end",verticalAnchor:"end"},I):_objectSpread$f({x:p+w/2,y:b+v/2,textAnchor:"middle",verticalAnchor:"middle"},I)},defaultLabelProps={offset:5};function Label(t){var e=resolveDefaultProps(t,defaultLabelProps),{viewBox:n,position:i,value:l,children:f,content:p,className:b="",textBreakAll:w,labelRef:v}=e,g=usePolarLabelContext(),u=useCartesianLabelContext(),o=i==="center"?u:g??u,h=n||o;if(!h||isNullish(l)&&isNullish(f)&&!reactExports.isValidElement(p)&&typeof p!="function")return null;var _=_objectSpread$f(_objectSpread$f({},e),{},{viewBox:h});if(reactExports.isValidElement(p)){var{labelRef:S}=_,T=_objectWithoutProperties$f(_,_excluded$f);return reactExports.cloneElement(p,T)}var O;if(typeof p=="function"){if(O=reactExports.createElement(p,_),reactExports.isValidElement(O))return O}else O=getLabel(e);var j=isPolar(h),C=svgPropertiesAndEvents(e);if(j&&(i==="insideStart"||i==="insideEnd"||i==="end"))return renderRadialLabel(e,i,O,C,h);var D=j?getAttrsOfPolarLabel(h,e.offset,e.position):getAttrsOfCartesianLabel(e,h);return reactExports.createElement(Text,_extends$g({ref:v,className:clsx("recharts-label",b)},C,D,{breakAll:w}),O)}Label.displayName="Label";var parseLabel=(t,e,n)=>{if(!t)return null;var i={viewBox:e,labelRef:n};return t===!0?reactExports.createElement(Label,_extends$g({key:"label-implicit"},i)):isNumOrStr(t)?reactExports.createElement(Label,_extends$g({key:"label-implicit",value:t},i)):reactExports.isValidElement(t)?t.type===Label?reactExports.cloneElement(t,_objectSpread$f({key:"label-implicit"},i)):reactExports.createElement(Label,_extends$g({key:"label-implicit",content:t},i)):isLabelContentAFunction(t)?reactExports.createElement(Label,_extends$g({key:"label-implicit",content:t},i)):t&&typeof t=="object"?reactExports.createElement(Label,_extends$g({},t,{key:"label-implicit"},i)):null};function CartesianLabelFromLabelProp(t){var{label:e,labelRef:n}=t,i=useCartesianLabelContext();return parseLabel(e,i,n)||null}var last$3={},last$2={},hasRequiredLast$2;function requireLast$2(){return hasRequiredLast$2||(hasRequiredLast$2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(last$2)),last$2}var toArray$1={},hasRequiredToArray;function requireToArray(){return hasRequiredToArray||(hasRequiredToArray=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(toArray$1)),toArray$1}var hasRequiredLast$1;function requireLast$1(){return hasRequiredLast$1||(hasRequiredLast$1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=requireLast$2(),n=requireToArray(),i=requireIsArrayLike();function l(f){if(i.isArrayLike(f))return e.last(n.toArray(f))}t.last=l})(last$3)),last$3}var last$1,hasRequiredLast;function requireLast(){return hasRequiredLast||(hasRequiredLast=1,last$1=requireLast$1().last),last$1}var lastExports=requireLast();const last=getDefaultExportFromCjs(lastExports);var _excluded$e=["valueAccessor"],_excluded2$8=["dataKey","clockWise","id","textBreakAll"];function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$f.apply(null,arguments)}function _objectWithoutProperties$e(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$e(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$e(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var defaultAccessor=t=>Array.isArray(t.value)?last(t.value):t.value,CartesianLabelListContext=reactExports.createContext(void 0),CartesianLabelListContextProvider=CartesianLabelListContext.Provider,PolarLabelListContext=reactExports.createContext(void 0),PolarLabelListContextProvider=PolarLabelListContext.Provider;function useCartesianLabelListContext(){return reactExports.useContext(CartesianLabelListContext)}function usePolarLabelListContext(){return reactExports.useContext(PolarLabelListContext)}function LabelList(t){var{valueAccessor:e=defaultAccessor}=t,n=_objectWithoutProperties$e(t,_excluded$e),{dataKey:i,clockWise:l,id:f,textBreakAll:p}=n,b=_objectWithoutProperties$e(n,_excluded2$8),w=useCartesianLabelListContext(),v=usePolarLabelListContext(),g=w||v;return!g||!g.length?null:reactExports.createElement(Layer,{className:"recharts-label-list"},g.map((u,o)=>{var h,_=isNullish(i)?e(u,o):getValueByDataKey(u&&u.payload,i),S=isNullish(f)?{}:{id:"".concat(f,"-").concat(o)};return reactExports.createElement(Label,_extends$f({key:"label-".concat(o)},svgPropertiesAndEvents(u),b,S,{fill:(h=n.fill)!==null&&h!==void 0?h:u.fill,parentViewBox:u.parentViewBox,value:_,textBreakAll:p,viewBox:u.viewBox,index:o}))}))}LabelList.displayName="LabelList";function LabelListFromLabelProp(t){var{label:e}=t;return e?e===!0?reactExports.createElement(LabelList,{key:"labelList-implicit"}):reactExports.isValidElement(e)||isLabelContentAFunction(e)?reactExports.createElement(LabelList,{key:"labelList-implicit",content:e}):typeof e=="object"?reactExports.createElement(LabelList,_extends$f({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$e.apply(null,arguments)}var Dot=t=>{var{cx:e,cy:n,r:i,className:l}=t,f=clsx("recharts-dot",l);return e===+e&&n===+n&&i===+i?reactExports.createElement("circle",_extends$e({},svgPropertiesNoEvents(t),adaptEventHandlers(t),{className:f,cx:e,cy:n,r:i})):null},selectUnfilteredPolarItems=t=>t.graphicalItems.polarItems,selectAxisPredicate=createSelector([pickAxisType,pickAxisId],itemAxisPredicate),selectPolarItemsSettings=createSelector([selectUnfilteredPolarItems,selectBaseAxis,selectAxisPredicate],combineGraphicalItemsSettings),selectPolarGraphicalItemsData=createSelector([selectPolarItemsSettings],combineGraphicalItemsData),selectPolarDisplayedData=createSelector([selectPolarGraphicalItemsData,selectChartDataAndAlwaysIgnoreIndexes],combineDisplayedData),selectPolarAppliedValues=createSelector([selectPolarDisplayedData,selectBaseAxis,selectPolarItemsSettings],combineAppliedValues);createSelector([selectPolarDisplayedData,selectBaseAxis,selectPolarItemsSettings],(t,e,n)=>n.length>0?t.flatMap(i=>n.flatMap(l=>{var f,p=getValueByDataKey(i,(f=e.dataKey)!==null&&f!==void 0?f:l.dataKey);return{value:p,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(i=>({value:getValueByDataKey(i,e.dataKey),errorDomain:[]})):t.map(i=>({value:i,errorDomain:[]})));var unsupportedInPolarChart=()=>{},selectDomainOfAllPolarAppliedNumericalValues=createSelector([selectPolarDisplayedData,selectBaseAxis,selectPolarItemsSettings,selectAllErrorBarSettings,pickAxisType],combineDomainOfAllAppliedNumericalValuesIncludingErrorValues),selectPolarNumericalDomain=createSelector([selectBaseAxis,selectDomainDefinition,selectDomainFromUserPreference,unsupportedInPolarChart,selectDomainOfAllPolarAppliedNumericalValues,unsupportedInPolarChart,selectChartLayout,pickAxisType],combineNumericalDomain),selectPolarAxisDomain=createSelector([selectBaseAxis,selectChartLayout,selectPolarDisplayedData,selectPolarAppliedValues,selectStackOffsetType,pickAxisType,selectPolarNumericalDomain],combineAxisDomain),selectPolarNiceTicks=createSelector([selectPolarAxisDomain,selectBaseAxis,selectRealScaleType],combineNiceTicks);createSelector([selectBaseAxis,selectPolarAxisDomain,selectPolarNiceTicks,pickAxisType],combineAxisDomainWithNiceTicks);var initialState$6={radiusAxis:{},angleAxis:{}},polarAxisSlice=createSlice({name:"polarAxis",initialState:initialState$6,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis,removeRadiusAxis,addAngleAxis,removeAngleAxis}=polarAxisSlice.actions,polarAxisReducer=polarAxisSlice.reducer;function ownKeys$e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$e(Object(n),!0).forEach(function(i){_defineProperty$f(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$e(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$f(t,e,n){return(e=_toPropertyKey$f(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$f(t){var e=_toPrimitive$f(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$f(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pickId=(t,e)=>e,selectSynchronisedPieSettings=createSelector([selectUnfilteredPolarItems,pickId],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),emptyArray=[],pickCells$1=(t,e,n)=>(n==null?void 0:n.length)===0?emptyArray:n,selectDisplayedData=createSelector([selectChartDataAndAlwaysIgnoreIndexes,selectSynchronisedPieSettings,pickCells$1],(t,e,n)=>{var{chartData:i}=t;if(e!=null){var l;if((e==null?void 0:e.data)!=null&&e.data.length>0?l=e.data:l=i,(!l||!l.length)&&n!=null&&(l=n.map(f=>_objectSpread$e(_objectSpread$e({},e.presentationProps),f.props))),l!=null)return l}}),selectPieLegend=createSelector([selectDisplayedData,selectSynchronisedPieSettings,pickCells$1],(t,e,n)=>{if(!(t==null||e==null))return t.map((i,l)=>{var f,p=getValueByDataKey(i,e.nameKey,e.name),b;return n!=null&&(f=n[l])!==null&&f!==void 0&&(f=f.props)!==null&&f!==void 0&&f.fill?b=n[l].props.fill:typeof i=="object"&&i!=null&&"fill"in i?b=i.fill:b=e.fill,{value:getTooltipNameProp(p,e.dataKey),color:b,payload:i,type:e.legendType}})}),selectPieSectors=createSelector([selectDisplayedData,selectSynchronisedPieSettings,pickCells$1,selectChartOffsetInternal],(t,e,n,i)=>{if(!(e==null||t==null))return computePieSectors({offset:i,pieSettings:e,displayedData:t,cells:n})}),reactIs={exports:{}},reactIs_production={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production;function requireReactIs_production(){if(hasRequiredReactIs_production)return reactIs_production;hasRequiredReactIs_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),p=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),o=Symbol.for("react.view_transition"),h=Symbol.for("react.client.reference");function _(S){if(typeof S=="object"&&S!==null){var T=S.$$typeof;switch(T){case t:switch(S=S.type,S){case n:case l:case i:case w:case v:case o:return S;default:switch(S=S&&S.$$typeof,S){case p:case b:case u:case g:return S;case f:return S;default:return T}}case e:return T}}}return reactIs_production.ContextConsumer=f,reactIs_production.ContextProvider=p,reactIs_production.Element=t,reactIs_production.ForwardRef=b,reactIs_production.Fragment=n,reactIs_production.Lazy=u,reactIs_production.Memo=g,reactIs_production.Portal=e,reactIs_production.Profiler=l,reactIs_production.StrictMode=i,reactIs_production.Suspense=w,reactIs_production.SuspenseList=v,reactIs_production.isContextConsumer=function(S){return _(S)===f},reactIs_production.isContextProvider=function(S){return _(S)===p},reactIs_production.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},reactIs_production.isForwardRef=function(S){return _(S)===b},reactIs_production.isFragment=function(S){return _(S)===n},reactIs_production.isLazy=function(S){return _(S)===u},reactIs_production.isMemo=function(S){return _(S)===g},reactIs_production.isPortal=function(S){return _(S)===e},reactIs_production.isProfiler=function(S){return _(S)===l},reactIs_production.isStrictMode=function(S){return _(S)===i},reactIs_production.isSuspense=function(S){return _(S)===w},reactIs_production.isSuspenseList=function(S){return _(S)===v},reactIs_production.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===l||S===i||S===w||S===v||typeof S=="object"&&S!==null&&(S.$$typeof===u||S.$$typeof===g||S.$$typeof===p||S.$$typeof===f||S.$$typeof===b||S.$$typeof===h||S.getModuleId!==void 0)},reactIs_production.typeOf=_,reactIs_production}var hasRequiredReactIs;function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,reactIs.exports=requireReactIs_production()),reactIs.exports}var reactIsExports=requireReactIs(),getDisplayName=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",lastChildren=null,lastResult=null,toArray=t=>{if(t===lastChildren&&Array.isArray(lastResult))return lastResult;var e=[];return reactExports.Children.forEach(t,n=>{isNullish(n)||(reactIsExports.isFragment(n)?e=e.concat(toArray(n.props.children)):e.push(n))}),lastResult=e,lastChildren=t,e};function findAllByType(t,e){var n=[],i=[];return Array.isArray(e)?i=e.map(l=>getDisplayName(l)):i=[getDisplayName(e)],toArray(t).forEach(l=>{var f=get(l,"type.displayName")||get(l,"type.name");i.indexOf(f)!==-1&&n.push(l)}),n}var isClipDot=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,isPlainObject$2={},hasRequiredIsPlainObject$1;function requireIsPlainObject$1(){return hasRequiredIsPlainObject$1||(hasRequiredIsPlainObject$1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var l;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const f=n[Symbol.toStringTag];return f==null||!((l=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&l.writable)?!1:n.toString()===`[object ${f}]`}let i=n;for(;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(n)===i}t.isPlainObject=e})(isPlainObject$2)),isPlainObject$2}var isPlainObject$1,hasRequiredIsPlainObject;function requireIsPlainObject(){return hasRequiredIsPlainObject||(hasRequiredIsPlainObject=1,isPlainObject$1=requireIsPlainObject$1().isPlainObject),isPlainObject$1}var isPlainObjectExports=requireIsPlainObject();const isPlainObject=getDefaultExportFromCjs(isPlainObjectExports);function ownKeys$d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$d(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$d(Object(n),!0).forEach(function(i){_defineProperty$e(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$d(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$e(t,e,n){return(e=_toPropertyKey$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$e(t){var e=_toPrimitive$e(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$d.apply(null,arguments)}var getTrapezoidPath=(t,e,n,i,l)=>{var f=n-i,p;return p="M ".concat(t,",").concat(e),p+="L ".concat(t+n,",").concat(e),p+="L ".concat(t+n-f/2,",").concat(e+l),p+="L ".concat(t+n-f/2-i,",").concat(e+l),p+="L ".concat(t,",").concat(e," Z"),p},defaultProps$4={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Trapezoid=t=>{var e=resolveDefaultProps(t,defaultProps$4),{x:n,y:i,upperWidth:l,lowerWidth:f,height:p,className:b}=e,{animationEasing:w,animationDuration:v,animationBegin:g,isUpdateAnimationActive:u}=e,o=reactExports.useRef(null),[h,_]=reactExports.useState(-1),S=reactExports.useRef(l),T=reactExports.useRef(f),O=reactExports.useRef(p),j=reactExports.useRef(n),C=reactExports.useRef(i),D=useAnimationId(t,"trapezoid-");if(reactExports.useEffect(()=>{if(o.current&&o.current.getTotalLength)try{var X=o.current.getTotalLength();X&&_(X)}catch{}},[]),n!==+n||i!==+i||l!==+l||f!==+f||p!==+p||l===0&&f===0||p===0)return null;var R=clsx("recharts-trapezoid",b);if(!u)return reactExports.createElement("g",null,reactExports.createElement("path",_extends$d({},svgPropertiesAndEvents(e),{className:R,d:getTrapezoidPath(n,i,l,f,p)})));var I=S.current,$=T.current,F=O.current,L=j.current,V=C.current,Y="0px ".concat(h===-1?1:h,"px"),Q="".concat(h,"px 0px"),ee=getTransitionVal(["strokeDasharray"],v,w);return reactExports.createElement(JavascriptAnimate,{animationId:D,key:D,canBegin:h>0,duration:v,easing:w,isActive:u,begin:g},X=>{var W=interpolate$1(I,l,X),z=interpolate$1($,f,X),q=interpolate$1(F,p,X),ce=interpolate$1(L,n,X),ae=interpolate$1(V,i,X);o.current&&(S.current=W,T.current=z,O.current=q,j.current=ce,C.current=ae);var we=X>0?{transition:ee,strokeDasharray:Q}:{strokeDasharray:Y};return reactExports.createElement("path",_extends$d({},svgPropertiesAndEvents(e),{className:R,d:getTrapezoidPath(ce,ae,W,z,q),ref:o,style:_objectSpread$d(_objectSpread$d({},we),e.style)}))})},_excluded$d=["option","shapeType","propTransformer","activeClassName","isActive"];function _objectWithoutProperties$d(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$d(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$d(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function ownKeys$c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$c(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$c(Object(n),!0).forEach(function(i){_defineProperty$d(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$c(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$d(t,e,n){return(e=_toPropertyKey$d(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$d(t){var e=_toPrimitive$d(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$d(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function defaultPropTransformer(t,e){return _objectSpread$c(_objectSpread$c({},e),t)}function isSymbolsProps(t,e){return t==="symbols"}function ShapeSelector(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return reactExports.createElement(Rectangle,n);case"trapezoid":return reactExports.createElement(Trapezoid,n);case"sector":return reactExports.createElement(Sector,n);case"symbols":if(isSymbolsProps(e))return reactExports.createElement(Symbols,n);break;default:return null}}function getPropsFromShapeOption(t){return reactExports.isValidElement(t)?t.props:t}function Shape(t){var{option:e,shapeType:n,propTransformer:i=defaultPropTransformer,activeClassName:l="recharts-active-shape",isActive:f}=t,p=_objectWithoutProperties$d(t,_excluded$d),b;if(reactExports.isValidElement(e))b=reactExports.cloneElement(e,_objectSpread$c(_objectSpread$c({},p),getPropsFromShapeOption(e)));else if(typeof e=="function")b=e(p);else if(isPlainObject(e)&&typeof e!="boolean"){var w=i(e,p);b=reactExports.createElement(ShapeSelector,{shapeType:n,elementProps:w})}else{var v=p;b=reactExports.createElement(ShapeSelector,{shapeType:n,elementProps:v})}return f?reactExports.createElement(Layer,{className:l},b):b}var useMouseEnterItemDispatch=(t,e)=>{var n=useAppDispatch();return(i,l)=>f=>{t==null||t(i,l,f),n(setActiveMouseOverItemIndex({activeIndex:String(l),activeDataKey:e,activeCoordinate:i.tooltipPosition}))}},useMouseLeaveItemDispatch=t=>{var e=useAppDispatch();return(n,i)=>l=>{t==null||t(n,i,l),e(mouseLeaveItem())}},useMouseClickItemDispatch=(t,e)=>{var n=useAppDispatch();return(i,l)=>f=>{t==null||t(i,l,f),n(setActiveClickItemIndex({activeIndex:String(l),activeDataKey:e,activeCoordinate:i.tooltipPosition}))}};function SetTooltipEntrySettings(t){var{fn:e,args:n}=t,i=useAppDispatch(),l=useIsPanorama();return reactExports.useLayoutEffect(()=>{if(!l){var f=e(n);return i(addTooltipEntrySettings(f)),()=>{i(removeTooltipEntrySettings(f))}}},[e,n,i,l]),null}var noop=()=>{};function SetLegendPayload(t){var{legendPayload:e}=t,n=useAppDispatch(),i=useIsPanorama();return reactExports.useLayoutEffect(()=>i?noop:(n(addLegendPayload(e)),()=>{n(removeLegendPayload(e))}),[n,i,e]),null}function SetPolarLegendPayload(t){var{legendPayload:e}=t,n=useAppDispatch(),i=useAppSelector(selectChartLayout);return reactExports.useLayoutEffect(()=>i!=="centric"&&i!=="radial"?noop:(n(addLegendPayload(e)),()=>{n(removeLegendPayload(e))}),[n,i,e]),null}var _ref,useIdFallback=()=>{var[t]=reactExports.useState(()=>uniqueId("uid-"));return t},useId=(_ref=React$1.useId)!==null&&_ref!==void 0?_ref:useIdFallback;function useUniqueId(t,e){var n=useId();return e||(t?"".concat(t,"-").concat(n):n)}var GraphicalItemIdContext=reactExports.createContext(void 0),RegisterGraphicalItemId=t=>{var{id:e,type:n,children:i}=t,l=useUniqueId("recharts-".concat(n),e);return reactExports.createElement(GraphicalItemIdContext.Provider,{value:l},i(l))},initialState$5={cartesianItems:[],polarItems:[]},graphicalItemsSlice=createSlice({name:"graphicalItems",initialState:initialState$5,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:prepareAutoBatched()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:i}=e.payload,l=current(t).cartesianItems.indexOf(n);l>-1&&(t.cartesianItems[l]=i)},prepare:prepareAutoBatched()},removeCartesianGraphicalItem:{reducer(t,e){var n=current(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:prepareAutoBatched()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:prepareAutoBatched()},removePolarGraphicalItem:{reducer(t,e){var n=current(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:prepareAutoBatched()}}}),{addCartesianGraphicalItem,replaceCartesianGraphicalItem,removeCartesianGraphicalItem,addPolarGraphicalItem,removePolarGraphicalItem}=graphicalItemsSlice.actions,graphicalItemsReducer=graphicalItemsSlice.reducer;function SetCartesianGraphicalItem(t){var e=useAppDispatch(),n=reactExports.useRef(null);return reactExports.useLayoutEffect(()=>{n.current===null?e(addCartesianGraphicalItem(t)):n.current!==t&&e(replaceCartesianGraphicalItem({prev:n.current,next:t})),n.current=t},[e,t]),reactExports.useLayoutEffect(()=>()=>{n.current&&(e(removeCartesianGraphicalItem(n.current)),n.current=null)},[e]),null}function SetPolarGraphicalItem(t){var e=useAppDispatch();return reactExports.useLayoutEffect(()=>(e(addPolarGraphicalItem(t)),()=>{e(removePolarGraphicalItem(t))}),[e,t]),null}var _excluded$c=["onMouseEnter","onClick","onMouseLeave"],_excluded2$7=["id"],_excluded3$6=["id"];function _objectWithoutProperties$c(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$c(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$c(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function ownKeys$b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$b(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$b(Object(n),!0).forEach(function(i){_defineProperty$c(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$b(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$c(t,e,n){return(e=_toPropertyKey$c(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$c(t){var e=_toPrimitive$c(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$c(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$c.apply(null,arguments)}function SetPiePayloadLegend(t){var e=reactExports.useMemo(()=>findAllByType(t.children,Cell),[t.children]),n=useAppSelector(i=>selectPieLegend(i,t.id,e));return n==null?null:reactExports.createElement(SetPolarLegendPayload,{legendPayload:n})}function getTooltipEntrySettings$3(t){var{dataKey:e,nameKey:n,sectors:i,stroke:l,strokeWidth:f,fill:p,name:b,hide:w,tooltipType:v}=t;return{dataDefinedOnItem:i.map(g=>g.tooltipPayload),positions:i.map(g=>g.tooltipPosition),settings:{stroke:l,strokeWidth:f,fill:p,dataKey:e,nameKey:n,name:getTooltipNameProp(b,e),hide:w,type:v,color:p,unit:""}}}var getTextAnchor=(t,e)=>t>e?"start":t<e?"end":"middle",getOuterRadius=(t,e,n)=>getPercentValue(typeof e=="function"?e(t):e,n,n*.8),parseCoordinateOfPie=(t,e,n)=>{var{top:i,left:l,width:f,height:p}=e,b=getMaxRadius(f,p),w=l+getPercentValue(t.cx,f,f/2),v=i+getPercentValue(t.cy,p,p/2),g=getPercentValue(t.innerRadius,b,0),u=getOuterRadius(n,t.outerRadius,b),o=t.maxRadius||Math.sqrt(f*f+p*p)/2;return{cx:w,cy:v,innerRadius:g,outerRadius:u,maxRadius:o}},parseDeltaAngle=(t,e)=>{var n=mathSign(e-t),i=Math.min(Math.abs(e-t),360);return n*i};function getClassNamePropertyIfExists(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var renderLabelLineItem=(t,e)=>{if(reactExports.isValidElement(t))return reactExports.cloneElement(t,e);if(typeof t=="function")return t(e);var n=clsx("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return reactExports.createElement(Curve,_extends$c({},e,{type:"linear",className:n}))},renderLabelItem=(t,e,n)=>{if(reactExports.isValidElement(t))return reactExports.cloneElement(t,e);var i=n;if(typeof t=="function"&&(i=t(e),reactExports.isValidElement(i)))return i;var l=clsx("recharts-pie-label-text",getClassNamePropertyIfExists(t));return reactExports.createElement(Text,_extends$c({},e,{alignmentBaseline:"middle",className:l}),i)};function PieLabels(t){var{sectors:e,props:n,showLabels:i}=t,{label:l,labelLine:f,dataKey:p}=n;if(!i||!l||!e)return null;var b=svgPropertiesNoEvents(n),w=svgPropertiesNoEventsFromUnknown(l),v=svgPropertiesNoEventsFromUnknown(f),g=typeof l=="object"&&"offsetRadius"in l&&typeof l.offsetRadius=="number"&&l.offsetRadius||20,u=e.map((o,h)=>{var _=(o.startAngle+o.endAngle)/2,S=polarToCartesian(o.cx,o.cy,o.outerRadius+g,_),T=_objectSpread$b(_objectSpread$b(_objectSpread$b(_objectSpread$b({},b),o),{},{stroke:"none"},w),{},{index:h,textAnchor:getTextAnchor(S.x,o.cx)},S),O=_objectSpread$b(_objectSpread$b(_objectSpread$b(_objectSpread$b({},b),o),{},{fill:"none",stroke:o.fill},v),{},{index:h,points:[polarToCartesian(o.cx,o.cy,o.outerRadius,_),S],key:"line"});return reactExports.createElement(Layer,{key:"label-".concat(o.startAngle,"-").concat(o.endAngle,"-").concat(o.midAngle,"-").concat(h)},f&&renderLabelLineItem(f,O),renderLabelItem(l,T,getValueByDataKey(o,p)))});return reactExports.createElement(Layer,{className:"recharts-pie-labels"},u)}function PieLabelList(t){var{sectors:e,props:n,showLabels:i}=t,{label:l}=n;return typeof l=="object"&&l!=null&&"position"in l?reactExports.createElement(LabelListFromLabelProp,{label:l}):reactExports.createElement(PieLabels,{sectors:e,props:n,showLabels:i})}function PieSectors(t){var{sectors:e,activeShape:n,inactiveShape:i,allOtherPieProps:l}=t,f=useAppSelector(selectActiveTooltipIndex),{onMouseEnter:p,onClick:b,onMouseLeave:w}=l,v=_objectWithoutProperties$c(l,_excluded$c),g=useMouseEnterItemDispatch(p,l.dataKey),u=useMouseLeaveItemDispatch(w),o=useMouseClickItemDispatch(b,l.dataKey);return e==null||e.length===0?null:reactExports.createElement(reactExports.Fragment,null,e.map((h,_)=>{if((h==null?void 0:h.startAngle)===0&&(h==null?void 0:h.endAngle)===0&&e.length!==1)return null;var S=n&&String(_)===f,T=f?i:null,O=S?n:T,j=_objectSpread$b(_objectSpread$b({},h),{},{stroke:h.stroke,tabIndex:-1,[DATA_ITEM_INDEX_ATTRIBUTE_NAME]:_,[DATA_ITEM_DATAKEY_ATTRIBUTE_NAME]:l.dataKey});return reactExports.createElement(Layer,_extends$c({key:"sector-".concat(h==null?void 0:h.startAngle,"-").concat(h==null?void 0:h.endAngle,"-").concat(h.midAngle,"-").concat(_),tabIndex:-1,className:"recharts-pie-sector"},adaptEventsOfChild(v,h,_),{onMouseEnter:g(h,_),onMouseLeave:u(h,_),onClick:o(h,_)}),reactExports.createElement(Shape,_extends$c({option:O,isActive:S,shapeType:"sector"},j)))}))}function computePieSectors(t){var e,{pieSettings:n,displayedData:i,cells:l,offset:f}=t,{cornerRadius:p,startAngle:b,endAngle:w,dataKey:v,nameKey:g,tooltipType:u}=n,o=Math.abs(n.minAngle),h=parseDeltaAngle(b,w),_=Math.abs(h),S=i.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,T=i.filter(I=>getValueByDataKey(I,v,0)!==0).length,O=(_>=360?T:T-1)*S,j=_-T*o-O,C=i.reduce((I,$)=>{var F=getValueByDataKey($,v,0);return I+(isNumber(F)?F:0)},0),D;if(C>0){var R;D=i.map((I,$)=>{var F=getValueByDataKey(I,v,0),L=getValueByDataKey(I,g,$),V=parseCoordinateOfPie(n,f,I),Y=(isNumber(F)?F:0)/C,Q,ee=_objectSpread$b(_objectSpread$b({},I),l&&l[$]&&l[$].props);$?Q=R.endAngle+mathSign(h)*S*(F!==0?1:0):Q=b;var X=Q+mathSign(h)*((F!==0?o:0)+Y*j),W=(Q+X)/2,z=(V.innerRadius+V.outerRadius)/2,q=[{name:L,value:F,payload:ee,dataKey:v,type:u}],ce=polarToCartesian(V.cx,V.cy,z,W);return R=_objectSpread$b(_objectSpread$b(_objectSpread$b(_objectSpread$b({},n.presentationProps),{},{percent:Y,cornerRadius:p,name:L,tooltipPayload:q,midAngle:W,middleRadius:z,tooltipPosition:ce},ee),V),{},{value:F,startAngle:Q,endAngle:X,payload:ee,paddingAngle:mathSign(h)*S}),R})}return D}function PieLabelListProvider(t){var{showLabels:e,sectors:n,children:i}=t,l=reactExports.useMemo(()=>!e||!n?[]:n.map(f=>({value:f.value,payload:f.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:f.cx,cy:f.cy,innerRadius:f.innerRadius,outerRadius:f.outerRadius,startAngle:f.startAngle,endAngle:f.endAngle,clockWise:!1},fill:f.fill})),[n,e]);return reactExports.createElement(PolarLabelListContextProvider,{value:e?l:void 0},i)}function SectorsWithAnimation(t){var{props:e,previousSectorsRef:n}=t,{sectors:i,isAnimationActive:l,animationBegin:f,animationDuration:p,animationEasing:b,activeShape:w,inactiveShape:v,onAnimationStart:g,onAnimationEnd:u}=e,o=useAnimationId(e,"recharts-pie-"),h=n.current,[_,S]=reactExports.useState(!1),T=reactExports.useCallback(()=>{typeof u=="function"&&u(),S(!1)},[u]),O=reactExports.useCallback(()=>{typeof g=="function"&&g(),S(!0)},[g]);return reactExports.createElement(PieLabelListProvider,{showLabels:!_,sectors:i},reactExports.createElement(JavascriptAnimate,{animationId:o,begin:f,duration:p,isActive:l,easing:b,onAnimationStart:O,onAnimationEnd:T,key:o},j=>{var C=[],D=i&&i[0],R=D==null?void 0:D.startAngle;return i==null||i.forEach((I,$)=>{var F=h&&h[$],L=$>0?get(I,"paddingAngle",0):0;if(F){var V=interpolate$1(F.endAngle-F.startAngle,I.endAngle-I.startAngle,j),Y=_objectSpread$b(_objectSpread$b({},I),{},{startAngle:R+L,endAngle:R+V+L});C.push(Y),R=Y.endAngle}else{var{endAngle:Q,startAngle:ee}=I,X=interpolate$1(0,Q-ee,j),W=_objectSpread$b(_objectSpread$b({},I),{},{startAngle:R+L,endAngle:R+X+L});C.push(W),R=W.endAngle}}),n.current=C,reactExports.createElement(Layer,null,reactExports.createElement(PieSectors,{sectors:C,activeShape:w,inactiveShape:v,allOtherPieProps:e}))}),reactExports.createElement(PieLabelList,{showLabels:!_,sectors:i,props:e}),e.children)}var defaultPieProps={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Global.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function PieImpl(t){var{id:e}=t,n=_objectWithoutProperties$c(t,_excluded2$7),{hide:i,className:l,rootTabIndex:f}=t,p=reactExports.useMemo(()=>findAllByType(t.children,Cell),[t.children]),b=useAppSelector(g=>selectPieSectors(g,e,p)),w=reactExports.useRef(null),v=clsx("recharts-pie",l);return i||b==null?(w.current=null,reactExports.createElement(Layer,{tabIndex:f,className:v})):reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(SetTooltipEntrySettings,{fn:getTooltipEntrySettings$3,args:_objectSpread$b(_objectSpread$b({},t),{},{sectors:b})}),reactExports.createElement(Layer,{tabIndex:f,className:v},reactExports.createElement(SectorsWithAnimation,{props:_objectSpread$b(_objectSpread$b({},n),{},{sectors:b}),previousSectorsRef:w})))}function Pie(t){var e=resolveDefaultProps(t,defaultPieProps),{id:n}=e,i=_objectWithoutProperties$c(e,_excluded3$6),l=svgPropertiesNoEvents(i);return reactExports.createElement(RegisterGraphicalItemId,{id:n,type:"pie"},f=>reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(SetPolarGraphicalItem,{type:"pie",id:f,data:i.data,dataKey:i.dataKey,hide:i.hide,angleAxisId:0,radiusAxisId:0,name:i.name,nameKey:i.nameKey,tooltipType:i.tooltipType,legendType:i.legendType,fill:i.fill,cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,paddingAngle:i.paddingAngle,minAngle:i.minAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius,cornerRadius:i.cornerRadius,presentationProps:l,maxRadius:e.maxRadius}),reactExports.createElement(SetPiePayloadLegend,_extends$c({},i,{id:f})),reactExports.createElement(PieImpl,_extends$c({},i,{id:f}))))}Pie.displayName="Pie";function ownKeys$a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$a(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$a(Object(n),!0).forEach(function(i){_defineProperty$b(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$a(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$b(t,e,n){return(e=_toPropertyKey$b(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$b(t){var e=_toPrimitive$b(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$b(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var initialState$4={xAxis:{},yAxis:{},zAxis:{}},cartesianAxisSlice=createSlice({name:"cartesianAxis",initialState:initialState$4,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:prepareAutoBatched()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:prepareAutoBatched()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:prepareAutoBatched()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:prepareAutoBatched()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:prepareAutoBatched()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:prepareAutoBatched()},updateYAxisWidth(t,e){var{id:n,width:i}=e.payload,l=t.yAxis[n];if(l){var f=l.widthHistory||[];if(f.length===3&&f[0]===f[2]&&i===f[1]&&i!==l.width&&Math.abs(i-f[0])<=1)return;var p=[...f,i].slice(-3);t.yAxis[n]=_objectSpread$a(_objectSpread$a({},t.yAxis[n]),{},{width:i,widthHistory:p})}}}}),{addXAxis,removeXAxis,addYAxis,removeYAxis,addZAxis,removeZAxis,updateYAxisWidth}=cartesianAxisSlice.actions,cartesianAxisReducer=cartesianAxisSlice.reducer,selectChartOffset=createSelector([selectChartOffsetInternal],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),selectPlotArea=createSelector([selectChartOffset,selectChartWidth,selectChartHeight],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),usePlotArea=()=>useAppSelector(selectPlotArea),useActiveTooltipDataPoints=()=>useAppSelector(selectActiveTooltipDataPoints);function ownKeys$9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$9(Object(n),!0).forEach(function(i){_defineProperty$a(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$9(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$a(t,e,n){return(e=_toPropertyKey$a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$a(t){var e=_toPrimitive$a(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$a(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var renderActivePoint=t=>{var{point:e,childIndex:n,mainColor:i,activeDot:l,dataKey:f}=t;if(l===!1||e.x==null||e.y==null)return null;var p=_objectSpread$9(_objectSpread$9({index:n,dataKey:f,cx:e.x,cy:e.y,r:4,fill:i??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},svgPropertiesNoEventsFromUnknown(l)),adaptEventHandlers(l)),b;return reactExports.isValidElement(l)?b=reactExports.cloneElement(l,p):typeof l=="function"?b=l(p):b=reactExports.createElement(Dot,p),reactExports.createElement(Layer,{className:"recharts-active-dot"},b)};function ActivePoints(t){var{points:e,mainColor:n,activeDot:i,itemDataKey:l}=t,f=useAppSelector(selectActiveTooltipIndex),p=useActiveTooltipDataPoints();if(e==null||p==null)return null;var b=e.find(w=>p.includes(w.payload));return isNullish(b)?null:renderActivePoint({point:b,childIndex:Number(f),mainColor:n,dataKey:l,activeDot:i})}var prefix="Invariant failed";function invariant(t,e){throw new Error(prefix)}var _excluded$b=["x","y"];function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$b.apply(null,arguments)}function ownKeys$8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$8(Object(n),!0).forEach(function(i){_defineProperty$9(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$9(t,e,n){return(e=_toPropertyKey$9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$9(t){var e=_toPrimitive$9(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _objectWithoutProperties$b(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$b(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$b(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function typeguardBarRectangleProps(t,e){var{x:n,y:i}=t,l=_objectWithoutProperties$b(t,_excluded$b),f="".concat(n),p=parseInt(f,10),b="".concat(i),w=parseInt(b,10),v="".concat(e.height||l.height),g=parseInt(v,10),u="".concat(e.width||l.width),o=parseInt(u,10);return _objectSpread$8(_objectSpread$8(_objectSpread$8(_objectSpread$8(_objectSpread$8({},e),l),p?{x:p}:{}),w?{y:w}:{}),{},{height:g,width:o,name:e.name,radius:e.radius})}function BarRectangle(t){return reactExports.createElement(Shape,_extends$b({shapeType:"rectangle",propTransformer:typeguardBarRectangleProps,activeClassName:"recharts-active-bar"},t))}var minPointSizeCallback=function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(i,l)=>{if(isNumber(e))return e;var f=isNumber(i)||isNullish(i);return f?e(i,l):(f||invariant(),n)}},initialState$3={},errorBarSlice=createSlice({name:"errorBars",initialState:initialState$3,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:i}=e.payload;t[n]||(t[n]=[]),t[n].push(i)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:i,next:l}=e.payload;t[n]&&(t[n]=t[n].map(f=>f.dataKey===i.dataKey&&f.direction===i.direction?l:f))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:i}=e.payload;t[n]&&(t[n]=t[n].filter(l=>l.dataKey!==i.dataKey||l.direction!==i.direction))}}}),{addErrorBar,replaceErrorBar,removeErrorBar}=errorBarSlice.actions,errorBarReducer=errorBarSlice.reducer,_excluded$a=["children"];function _objectWithoutProperties$a(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$a(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$a(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var initialContextState={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},ErrorBarContext=reactExports.createContext(initialContextState);function SetErrorBarContext(t){var{children:e}=t,n=_objectWithoutProperties$a(t,_excluded$a);return reactExports.createElement(ErrorBarContext.Provider,{value:n},e)}function useNeedsClip(t,e){var n,i,l=useAppSelector(v=>selectXAxisSettings(v,t)),f=useAppSelector(v=>selectYAxisSettings(v,e)),p=(n=l==null?void 0:l.allowDataOverflow)!==null&&n!==void 0?n:implicitXAxis.allowDataOverflow,b=(i=f==null?void 0:f.allowDataOverflow)!==null&&i!==void 0?i:implicitYAxis.allowDataOverflow,w=p||b;return{needClip:w,needClipX:p,needClipY:b}}function GraphicalItemClipPath(t){var{xAxisId:e,yAxisId:n,clipPathId:i}=t,l=usePlotArea(),{needClipX:f,needClipY:p,needClip:b}=useNeedsClip(e,n);if(!b)return null;var{x:w,y:v,width:g,height:u}=l;return reactExports.createElement("clipPath",{id:"clipPath-".concat(i)},reactExports.createElement("rect",{x:f?w:w-g/2,y:p?v:v-u/2,width:f?g:g*2,height:p?u:u*2}))}var _excluded$9=["onMouseEnter","onMouseLeave","onClick"],_excluded2$6=["value","background","tooltipPosition"],_excluded3$5=["id"],_excluded4$3=["onMouseEnter","onClick","onMouseLeave"];function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$a.apply(null,arguments)}function ownKeys$7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$7(Object(n),!0).forEach(function(i){_defineProperty$8(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$7(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$8(t,e,n){return(e=_toPropertyKey$8(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$8(t){var e=_toPrimitive$8(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$8(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _objectWithoutProperties$9(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$9(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$9(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var computeLegendPayloadFromBarData=t=>{var{dataKey:e,name:n,fill:i,legendType:l,hide:f}=t;return[{inactive:f,dataKey:e,type:l,color:i,value:getTooltipNameProp(n,e),payload:t}]};function getTooltipEntrySettings$2(t){var{dataKey:e,stroke:n,strokeWidth:i,fill:l,name:f,hide:p,unit:b}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:l,dataKey:e,nameKey:void 0,name:getTooltipNameProp(f,e),hide:p,type:t.tooltipType,color:t.fill,unit:b}}}function BarBackground(t){var e=useAppSelector(selectActiveTooltipIndex),{data:n,dataKey:i,background:l,allOtherBarProps:f}=t,{onMouseEnter:p,onMouseLeave:b,onClick:w}=f,v=_objectWithoutProperties$9(f,_excluded$9),g=useMouseEnterItemDispatch(p,i),u=useMouseLeaveItemDispatch(b),o=useMouseClickItemDispatch(w,i);if(!l||n==null)return null;var h=svgPropertiesNoEventsFromUnknown(l);return reactExports.createElement(reactExports.Fragment,null,n.map((_,S)=>{var{value:T,background:O,tooltipPosition:j}=_,C=_objectWithoutProperties$9(_,_excluded2$6);if(!O)return null;var D=g(_,S),R=u(_,S),I=o(_,S),$=_objectSpread$7(_objectSpread$7(_objectSpread$7(_objectSpread$7(_objectSpread$7({option:l,isActive:String(S)===e},C),{},{fill:"#eee"},O),h),adaptEventsOfChild(v,_,S)),{},{onMouseEnter:D,onMouseLeave:R,onClick:I,dataKey:i,index:S,className:"recharts-bar-background-rectangle"});return reactExports.createElement(BarRectangle,_extends$a({key:"background-bar-".concat(S)},$))}))}function BarLabelListProvider(t){var{showLabels:e,children:n,rects:i}=t,l=i==null?void 0:i.map(f=>{var p={x:f.x,y:f.y,width:f.width,height:f.height};return _objectSpread$7(_objectSpread$7({},p),{},{value:f.value,payload:f.payload,parentViewBox:f.parentViewBox,viewBox:p,fill:f.fill})});return reactExports.createElement(CartesianLabelListContextProvider,{value:e?l:void 0},n)}function BarRectangleWithActiveState(t){var{shape:e,activeBar:n,baseProps:i,entry:l,index:f,dataKey:p}=t,b=useAppSelector(selectActiveTooltipIndex),w=useAppSelector(selectActiveTooltipDataKey),v=n&&String(f)===b&&(w==null||p===w),g=v?n:e;return reactExports.createElement(BarRectangle,_extends$a({},i,{name:String(i.name)},l,{isActive:v,option:g,index:f,dataKey:p}))}function BarRectangleNeverActive(t){var{shape:e,baseProps:n,entry:i,index:l,dataKey:f}=t;return reactExports.createElement(BarRectangle,_extends$a({},n,{name:String(n.name)},i,{isActive:!1,option:e,index:l,dataKey:f}))}function BarRectangles(t){var{data:e,props:n}=t,i=svgPropertiesNoEvents(n),{id:l}=i,f=_objectWithoutProperties$9(i,_excluded3$5),{shape:p,dataKey:b,activeBar:w}=n,{onMouseEnter:v,onClick:g,onMouseLeave:u}=n,o=_objectWithoutProperties$9(n,_excluded4$3),h=useMouseEnterItemDispatch(v,b),_=useMouseLeaveItemDispatch(u),S=useMouseClickItemDispatch(g,b);return e?reactExports.createElement(reactExports.Fragment,null,e.map((T,O)=>reactExports.createElement(Layer,_extends$a({key:"rectangle-".concat(T==null?void 0:T.x,"-").concat(T==null?void 0:T.y,"-").concat(T==null?void 0:T.value,"-").concat(O),className:"recharts-bar-rectangle"},adaptEventsOfChild(o,T,O),{onMouseEnter:h(T,O),onMouseLeave:_(T,O),onClick:S(T,O)}),w?reactExports.createElement(BarRectangleWithActiveState,{shape:p,activeBar:w,baseProps:f,entry:T,index:O,dataKey:b}):reactExports.createElement(BarRectangleNeverActive,{shape:p,baseProps:f,entry:T,index:O,dataKey:b})))):null}function RectanglesWithAnimation(t){var{props:e,previousRectanglesRef:n}=t,{data:i,layout:l,isAnimationActive:f,animationBegin:p,animationDuration:b,animationEasing:w,onAnimationEnd:v,onAnimationStart:g}=e,u=n.current,o=useAnimationId(e,"recharts-bar-"),[h,_]=reactExports.useState(!1),S=!h,T=reactExports.useCallback(()=>{typeof v=="function"&&v(),_(!1)},[v]),O=reactExports.useCallback(()=>{typeof g=="function"&&g(),_(!0)},[g]);return reactExports.createElement(BarLabelListProvider,{showLabels:S,rects:i},reactExports.createElement(JavascriptAnimate,{animationId:o,begin:p,duration:b,isActive:f,easing:w,onAnimationEnd:T,onAnimationStart:O,key:o},j=>{var C=j===1?i:i==null?void 0:i.map((D,R)=>{var I=u&&u[R];if(I)return _objectSpread$7(_objectSpread$7({},D),{},{x:interpolate$1(I.x,D.x,j),y:interpolate$1(I.y,D.y,j),width:interpolate$1(I.width,D.width,j),height:interpolate$1(I.height,D.height,j)});if(l==="horizontal"){var $=interpolate$1(0,D.height,j);return _objectSpread$7(_objectSpread$7({},D),{},{y:D.y+D.height-$,height:$})}var F=interpolate$1(0,D.width,j);return _objectSpread$7(_objectSpread$7({},D),{},{width:F})});return j>0&&(n.current=C??null),C==null?null:reactExports.createElement(Layer,null,reactExports.createElement(BarRectangles,{props:e,data:C}))}),reactExports.createElement(LabelListFromLabelProp,{label:e.label}),e.children)}function RenderRectangles(t){var e=reactExports.useRef(null);return reactExports.createElement(RectanglesWithAnimation,{previousRectanglesRef:e,props:t})}var defaultMinPointSize=0,errorBarDataPointFormatter$1=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:getValueByDataKey(t,e)}};class BarWithState extends reactExports.PureComponent{render(){var{hide:e,data:n,dataKey:i,className:l,xAxisId:f,yAxisId:p,needClip:b,background:w,id:v}=this.props;if(e||n==null)return null;var g=clsx("recharts-bar",l),u=v;return reactExports.createElement(Layer,{className:g,id:v},b&&reactExports.createElement("defs",null,reactExports.createElement(GraphicalItemClipPath,{clipPathId:u,xAxisId:f,yAxisId:p})),reactExports.createElement(Layer,{className:"recharts-bar-rectangles",clipPath:b?"url(#clipPath-".concat(u,")"):void 0},reactExports.createElement(BarBackground,{data:n,dataKey:i,background:w,allOtherBarProps:this.props}),reactExports.createElement(RenderRectangles,this.props)))}}var defaultBarProps={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Global.isSsr,legendType:"rect",minPointSize:defaultMinPointSize,xAxisId:0,yAxisId:0};function BarImpl(t){var{xAxisId:e,yAxisId:n,hide:i,legendType:l,minPointSize:f,activeBar:p,animationBegin:b,animationDuration:w,animationEasing:v,isAnimationActive:g}=t,{needClip:u}=useNeedsClip(e,n),o=useChartLayout(),h=useIsPanorama(),_=findAllByType(t.children,Cell),S=useAppSelector(j=>selectBarRectangles(j,e,n,h,t.id,_));if(o!=="vertical"&&o!=="horizontal")return null;var T,O=S==null?void 0:S[0];return O==null||O.height==null||O.width==null?T=0:T=o==="vertical"?O.height/2:O.width/2,reactExports.createElement(SetErrorBarContext,{xAxisId:e,yAxisId:n,data:S,dataPointFormatter:errorBarDataPointFormatter$1,errorBarOffset:T},reactExports.createElement(BarWithState,_extends$a({},t,{layout:o,needClip:u,data:S,xAxisId:e,yAxisId:n,hide:i,legendType:l,minPointSize:f,activeBar:p,animationBegin:b,animationDuration:w,animationEasing:v,isAnimationActive:g})))}function computeBarRectangles(t){var{layout:e,barSettings:{dataKey:n,minPointSize:i},pos:l,bandSize:f,xAxis:p,yAxis:b,xAxisTicks:w,yAxisTicks:v,stackedData:g,displayedData:u,offset:o,cells:h,parentViewBox:_}=t,S=e==="horizontal"?b:p,T=g?S.scale.domain():null,O=getBaseValueOfBar({numericAxis:S});return u.map((j,C)=>{var D,R,I,$,F,L;g?D=truncateByDomain(g[C],T):(D=getValueByDataKey(j,n),Array.isArray(D)||(D=[O,D]));var V=minPointSizeCallback(i,defaultMinPointSize)(D[1],C);if(e==="horizontal"){var Y,[Q,ee]=[b.scale(D[0]),b.scale(D[1])];R=getCateCoordinateOfBar({axis:p,ticks:w,bandSize:f,offset:l.offset,entry:j,index:C}),I=(Y=ee??Q)!==null&&Y!==void 0?Y:void 0,$=l.size;var X=Q-ee;if(F=isNan(X)?0:X,L={x:R,y:o.top,width:$,height:o.height},Math.abs(V)>0&&Math.abs(F)<Math.abs(V)){var W=mathSign(F||V)*(Math.abs(V)-Math.abs(F));I-=W,F+=W}}else{var[z,q]=[p.scale(D[0]),p.scale(D[1])];if(R=z,I=getCateCoordinateOfBar({axis:b,ticks:v,bandSize:f,offset:l.offset,entry:j,index:C}),$=q-z,F=l.size,L={x:o.left,y:I,width:o.width,height:F},Math.abs(V)>0&&Math.abs($)<Math.abs(V)){var ce=mathSign($||V)*(Math.abs(V)-Math.abs($));$+=ce}}if(R==null||I==null||$==null||F==null)return null;var ae=_objectSpread$7(_objectSpread$7({},j),{},{x:R,y:I,width:$,height:F,value:g?D:D[1],payload:j,background:L,tooltipPosition:{x:R+$/2,y:I+F/2},parentViewBox:_},h&&h[C]&&h[C].props);return ae}).filter(Boolean)}function BarFn(t){var e=resolveDefaultProps(t,defaultBarProps),n=useIsPanorama();return reactExports.createElement(RegisterGraphicalItemId,{id:e.id,type:"bar"},i=>reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(SetLegendPayload,{legendPayload:computeLegendPayloadFromBarData(e)}),reactExports.createElement(SetTooltipEntrySettings,{fn:getTooltipEntrySettings$2,args:e}),reactExports.createElement(SetCartesianGraphicalItem,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:getNormalizedStackId(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),reactExports.createElement(BarImpl,_extends$a({},e,{id:i}))))}var Bar=reactExports.memo(BarFn);Bar.displayName="Bar";function ownKeys$6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$6(Object(n),!0).forEach(function(i){_defineProperty$7(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$7(t,e,n){return(e=_toPropertyKey$7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$7(t){var e=_toPrimitive$7(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pickXAxisId=(t,e)=>e,pickYAxisId=(t,e,n)=>n,pickIsPanorama=(t,e,n,i)=>i,pickBarId=(t,e,n,i,l)=>l,selectSynchronisedBarSettings=createSelector([selectUnfilteredCartesianItems,pickBarId],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),selectMaxBarSize=createSelector([selectSynchronisedBarSettings],t=>t==null?void 0:t.maxBarSize),pickCells=(t,e,n,i,l,f)=>f,getBarSize=(t,e,n)=>{var i=n??t;if(!isNullish(i))return getPercentValue(i,e,0)},selectAllVisibleBars=createSelector([selectChartLayout,selectUnfilteredCartesianItems,pickXAxisId,pickYAxisId,pickIsPanorama],(t,e,n,i,l)=>e.filter(f=>t==="horizontal"?f.xAxisId===n:f.yAxisId===i).filter(f=>f.isPanorama===l).filter(f=>f.hide===!1).filter(f=>f.type==="bar")),selectBarStackGroups=(t,e,n,i)=>{var l=selectChartLayout(t);return l==="horizontal"?selectStackGroups(t,"yAxis",n,i):selectStackGroups(t,"xAxis",e,i)},selectBarCartesianAxisSize=(t,e,n)=>{var i=selectChartLayout(t);return i==="horizontal"?selectCartesianAxisSize(t,"xAxis",e):selectCartesianAxisSize(t,"yAxis",n)},combineBarSizeList=(t,e,n)=>{var i={},l=t.filter(isStacked),f=t.filter(v=>v.stackId==null),p=l.reduce((v,g)=>(v[g.stackId]||(v[g.stackId]=[]),v[g.stackId].push(g),v),i),b=Object.entries(p).map(v=>{var[g,u]=v,o=u.map(_=>_.dataKey),h=getBarSize(e,n,u[0].barSize);return{stackId:g,dataKeys:o,barSize:h}}),w=f.map(v=>{var g=[v.dataKey].filter(o=>o!=null),u=getBarSize(e,n,v.barSize);return{stackId:void 0,dataKeys:g,barSize:u}});return[...b,...w]},selectBarSizeList=createSelector([selectAllVisibleBars,selectRootBarSize,selectBarCartesianAxisSize],combineBarSizeList),selectBarBandSize=(t,e,n,i,l)=>{var f,p,b=selectSynchronisedBarSettings(t,e,n,i,l);if(b!=null){var w=selectChartLayout(t),v=selectRootMaxBarSize(t),{maxBarSize:g}=b,u=isNullish(g)?v:g,o,h;return w==="horizontal"?(o=selectAxisWithScale(t,"xAxis",e,i),h=selectTicksOfGraphicalItem(t,"xAxis",e,i)):(o=selectAxisWithScale(t,"yAxis",n,i),h=selectTicksOfGraphicalItem(t,"yAxis",n,i)),(f=(p=getBandSizeOfAxis(o,h,!0))!==null&&p!==void 0?p:u)!==null&&f!==void 0?f:0}},selectAxisBandSize=(t,e,n,i)=>{var l=selectChartLayout(t),f,p;return l==="horizontal"?(f=selectAxisWithScale(t,"xAxis",e,i),p=selectTicksOfGraphicalItem(t,"xAxis",e,i)):(f=selectAxisWithScale(t,"yAxis",n,i),p=selectTicksOfGraphicalItem(t,"yAxis",n,i)),getBandSizeOfAxis(f,p)};function getBarPositions(t,e,n,i,l){var f=i.length;if(!(f<1)){var p=getPercentValue(t,n,0,!0),b,w=[];if(isWellBehavedNumber(i[0].barSize)){var v=!1,g=n/f,u=i.reduce((O,j)=>O+(j.barSize||0),0);u+=(f-1)*p,u>=n&&(u-=(f-1)*p,p=0),u>=n&&g>0&&(v=!0,g*=.9,u=f*g);var o=(n-u)/2>>0,h={offset:o-p,size:0};b=i.reduce((O,j)=>{var C,D={stackId:j.stackId,dataKeys:j.dataKeys,position:{offset:h.offset+h.size+p,size:v?g:(C=j.barSize)!==null&&C!==void 0?C:0}},R=[...O,D];return h=R[R.length-1].position,R},w)}else{var _=getPercentValue(e,n,0,!0);n-2*_-(f-1)*p<=0&&(p=0);var S=(n-2*_-(f-1)*p)/f;S>1&&(S>>=0);var T=isWellBehavedNumber(l)?Math.min(S,l):S;b=i.reduce((O,j,C)=>[...O,{stackId:j.stackId,dataKeys:j.dataKeys,position:{offset:_+(S+p)*C+(S-T)/2,size:T}}],w)}return b}}var combineAllBarPositions=(t,e,n,i,l,f,p)=>{var b=isNullish(p)?e:p,w=getBarPositions(n,i,l!==f?l:f,t,b);return l!==f&&w!=null&&(w=w.map(v=>_objectSpread$6(_objectSpread$6({},v),{},{position:_objectSpread$6(_objectSpread$6({},v.position),{},{offset:v.position.offset-l/2})}))),w},selectAllBarPositions=createSelector([selectBarSizeList,selectRootMaxBarSize,selectBarGap,selectBarCategoryGap,selectBarBandSize,selectAxisBandSize,selectMaxBarSize],combineAllBarPositions),selectXAxisWithScale$2=(t,e,n,i)=>selectAxisWithScale(t,"xAxis",e,i),selectYAxisWithScale$2=(t,e,n,i)=>selectAxisWithScale(t,"yAxis",n,i),selectXAxisTicks$2=(t,e,n,i)=>selectTicksOfGraphicalItem(t,"xAxis",e,i),selectYAxisTicks$2=(t,e,n,i)=>selectTicksOfGraphicalItem(t,"yAxis",n,i),selectBarPosition=createSelector([selectAllBarPositions,selectSynchronisedBarSettings],(t,e)=>{if(!(t==null||e==null)){var n=t.find(i=>i.stackId===e.stackId&&e.dataKey!=null&&i.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),combineStackedData=(t,e)=>{var n=getStackSeriesIdentifier(e);if(!(!t||n==null||e==null)){var{stackId:i}=e;if(i!=null){var l=t[i];if(l){var{stackedData:f}=l;if(f)return f.find(p=>p.key===n)}}}},selectStackedDataOfItem=createSelector([selectBarStackGroups,selectSynchronisedBarSettings],combineStackedData),selectBarRectangles=createSelector([selectChartOffsetInternal,selectAxisViewBox,selectXAxisWithScale$2,selectYAxisWithScale$2,selectXAxisTicks$2,selectYAxisTicks$2,selectBarPosition,selectChartLayout,selectChartDataWithIndexesIfNotInPanorama,selectAxisBandSize,selectStackedDataOfItem,selectSynchronisedBarSettings,pickCells],(t,e,n,i,l,f,p,b,w,v,g,u,o)=>{var{chartData:h,dataStartIndex:_,dataEndIndex:S}=w;if(!(u==null||p==null||e==null||b!=="horizontal"&&b!=="vertical"||n==null||i==null||l==null||f==null||v==null)){var{data:T}=u,O;if(T!=null&&T.length>0?O=T:O=h==null?void 0:h.slice(_,S+1),O!=null)return computeBarRectangles({layout:b,barSettings:u,pos:p,parentViewBox:e,bandSize:v,xAxis:n,yAxis:i,xAxisTicks:l,yAxisTicks:f,stackedData:g,displayedData:O,offset:t,cells:o})}}),ChartDataContextProvider=t=>{var{chartData:e}=t,n=useAppDispatch(),i=useIsPanorama();return reactExports.useEffect(()=>i?()=>{}:(n(setChartData(e)),()=>{n(setChartData(void 0))}),[e,n,i]),null},initialState$2={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},brushSlice=createSlice({name:"brush",initialState:initialState$2,reducers:{setBrushSettings(t,e){return e.payload==null?initialState$2:e.payload}}}),{setBrushSettings}=brushSlice.actions,brushReducer=brushSlice.reducer;function _defineProperty$6(t,e,n){return(e=_toPropertyKey$6(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$6(t){var e=_toPrimitive$6(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$6(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class ScaleHelper{static create(e){return new ScaleHelper(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(i)switch(i){case"start":return this.scale(e);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+l}case"end":{var f=this.bandwidth?this.bandwidth():0;return this.scale(e)+f}default:return this.scale(e)}if(n){var p=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+p}return this.scale(e)}}isInRange(e){var n=this.range(),i=n[0],l=n[n.length-1];return i<=l?e>=i&&e<=l:e>=l&&e<=i}}_defineProperty$6(ScaleHelper,"EPS",1e-4);function normalizeAngle(t){return(t%180+180)%180}var getAngledRectangleWidth=function t(e){var{width:n,height:i}=e,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,f=normalizeAngle(l),p=f*Math.PI/180,b=Math.atan(i/n),w=p>b&&p<Math.PI-b?i/Math.sin(p):n/Math.cos(p);return Math.abs(w)},initialState$1={dots:[],areas:[],lines:[]},referenceElementsSlice=createSlice({name:"referenceElements",initialState:initialState$1,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=current(t).dots.findIndex(i=>i===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=current(t).areas.findIndex(i=>i===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=current(t).lines.findIndex(i=>i===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot,removeDot,addArea,removeArea,addLine,removeLine}=referenceElementsSlice.actions,referenceElementsReducer=referenceElementsSlice.reducer,ClipPathIdContext=reactExports.createContext(void 0),ClipPathProvider=t=>{var{children:e}=t,[n]=reactExports.useState("".concat(uniqueId("recharts"),"-clip")),i=usePlotArea();if(i==null)return null;var{x:l,y:f,width:p,height:b}=i;return reactExports.createElement(ClipPathIdContext.Provider,{value:n},reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:n},reactExports.createElement("rect",{x:l,y:f,height:b,width:p}))),e)};function shallowEqual(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var i in e)if({}.hasOwnProperty.call(e,i)&&!{}.hasOwnProperty.call(t,i))return!1;return!0}function getEveryNthWithCondition(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var i=[],l=0;l<t.length;l+=e)i.push(t[l]);return i}function getAngledTickWidth(t,e,n){var i={width:t.width+e.width,height:t.height+e.height};return getAngledRectangleWidth(i,n)}function getTickBoundaries(t,e,n){var i=n==="width",{x:l,y:f,width:p,height:b}=t;return e===1?{start:i?l:f,end:i?l+p:f+b}:{start:i?l+p:f+b,end:i?l:f}}function isVisible(t,e,n,i,l){if(t*e<t*i||t*e>t*l)return!1;var f=n();return t*(e-t*f/2-i)>=0&&t*(e+t*f/2-l)<=0}function getNumberIntervalTicks(t,e){return getEveryNthWithCondition(t,e+1)}function getEquidistantTicks(t,e,n,i,l){for(var f=(i||[]).slice(),{start:p,end:b}=e,w=0,v=1,g=p,u=function(){var _=i==null?void 0:i[w];if(_===void 0)return{v:getEveryNthWithCondition(i,v)};var S=w,T,O=()=>(T===void 0&&(T=n(_,S)),T),j=_.coordinate,C=w===0||isVisible(t,j,O,g,b);C||(w=0,g=p,v+=1),C&&(g=j+t*(O()/2+l),w+=v)},o;v<=f.length;)if(o=u(),o)return o.v;return[]}function ownKeys$5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$5(Object(n),!0).forEach(function(i){_defineProperty$5(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$5(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$5(t,e,n){return(e=_toPropertyKey$5(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$5(t){var e=_toPrimitive$5(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$5(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function getTicksEnd(t,e,n,i,l){for(var f=(i||[]).slice(),p=f.length,{start:b}=e,{end:w}=e,v=function(o){var h=f[o],_,S=()=>(_===void 0&&(_=n(h,o)),_);if(o===p-1){var T=t*(h.coordinate+t*S()/2-w);f[o]=h=_objectSpread$5(_objectSpread$5({},h),{},{tickCoord:T>0?h.coordinate-T*t:h.coordinate})}else f[o]=h=_objectSpread$5(_objectSpread$5({},h),{},{tickCoord:h.coordinate});var O=isVisible(t,h.tickCoord,S,b,w);O&&(w=h.tickCoord-t*(S()/2+l),f[o]=_objectSpread$5(_objectSpread$5({},h),{},{isShow:!0}))},g=p-1;g>=0;g--)v(g);return f}function getTicksStart(t,e,n,i,l,f){var p=(i||[]).slice(),b=p.length,{start:w,end:v}=e;if(f){var g=i[b-1],u=n(g,b-1),o=t*(g.coordinate+t*u/2-v);p[b-1]=g=_objectSpread$5(_objectSpread$5({},g),{},{tickCoord:o>0?g.coordinate-o*t:g.coordinate});var h=isVisible(t,g.tickCoord,()=>u,w,v);h&&(v=g.tickCoord-t*(u/2+l),p[b-1]=_objectSpread$5(_objectSpread$5({},g),{},{isShow:!0}))}for(var _=f?b-1:b,S=function(j){var C=p[j],D,R=()=>(D===void 0&&(D=n(C,j)),D);if(j===0){var I=t*(C.coordinate-t*R()/2-w);p[j]=C=_objectSpread$5(_objectSpread$5({},C),{},{tickCoord:I<0?C.coordinate-I*t:C.coordinate})}else p[j]=C=_objectSpread$5(_objectSpread$5({},C),{},{tickCoord:C.coordinate});var $=isVisible(t,C.tickCoord,R,w,v);$&&(w=C.tickCoord+t*(R()/2+l),p[j]=_objectSpread$5(_objectSpread$5({},C),{},{isShow:!0}))},T=0;T<_;T++)S(T);return p}function getTicks(t,e,n){var{tick:i,ticks:l,viewBox:f,minTickGap:p,orientation:b,interval:w,tickFormatter:v,unit:g,angle:u}=t;if(!l||!l.length||!i)return[];if(isNumber(w)||Global.isSsr){var o;return(o=getNumberIntervalTicks(l,isNumber(w)?w:0))!==null&&o!==void 0?o:[]}var h=[],_=b==="top"||b==="bottom"?"width":"height",S=g&&_==="width"?getStringSize(g,{fontSize:e,letterSpacing:n}):{width:0,height:0},T=(C,D)=>{var R=typeof v=="function"?v(C.value,D):C.value;return _==="width"?getAngledTickWidth(getStringSize(R,{fontSize:e,letterSpacing:n}),S,u):getStringSize(R,{fontSize:e,letterSpacing:n})[_]},O=l.length>=2?mathSign(l[1].coordinate-l[0].coordinate):1,j=getTickBoundaries(f,O,_);return w==="equidistantPreserveStart"?getEquidistantTicks(O,j,T,l,p):(w==="preserveStart"||w==="preserveStartEnd"?h=getTicksStart(O,j,T,l,p,w==="preserveStartEnd"):h=getTicksEnd(O,j,T,l,p),h.filter(C=>C.isShow))}var getCalculatedYAxisWidth=t=>{var{ticks:e,label:n,labelGapWithTick:i=5,tickSize:l=0,tickMargin:f=0}=t,p=0;if(e){Array.from(e).forEach(g=>{if(g){var u=g.getBoundingClientRect();u.width>p&&(p=u.width)}});var b=n?n.getBoundingClientRect().width:0,w=l+f,v=p+w+b+(n?i:0);return Math.round(v)}return 0},_excluded$8=["axisLine","width","height","className","hide","ticks"],_excluded2$5=["viewBox"],_excluded3$4=["viewBox"];function _objectWithoutProperties$8(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$8(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$8(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$9.apply(null,arguments)}function ownKeys$4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$4(Object(n),!0).forEach(function(i){_defineProperty$4(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$4(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$4(t,e,n){return(e=_toPropertyKey$4(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$4(t){var e=_toPrimitive$4(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$4(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var defaultCartesianAxisProps={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function AxisLine(t){var{x:e,y:n,width:i,height:l,orientation:f,mirror:p,axisLine:b,otherSvgProps:w}=t;if(!b)return null;var v=_objectSpread$4(_objectSpread$4(_objectSpread$4({},w),svgPropertiesNoEvents(b)),{},{fill:"none"});if(f==="top"||f==="bottom"){var g=+(f==="top"&&!p||f==="bottom"&&p);v=_objectSpread$4(_objectSpread$4({},v),{},{x1:e,y1:n+g*l,x2:e+i,y2:n+g*l})}else{var u=+(f==="left"&&!p||f==="right"&&p);v=_objectSpread$4(_objectSpread$4({},v),{},{x1:e+u*i,y1:n,x2:e+u*i,y2:n+l})}return reactExports.createElement("line",_extends$9({},v,{className:clsx("recharts-cartesian-axis-line",get(b,"className"))}))}function getTickLineCoord(t,e,n,i,l,f,p,b,w){var v,g,u,o,h,_,S=b?-1:1,T=t.tickSize||p,O=isNumber(t.tickCoord)?t.tickCoord:t.coordinate;switch(f){case"top":v=g=t.coordinate,o=n+ +!b*l,u=o-S*T,_=u-S*w,h=O;break;case"left":u=o=t.coordinate,g=e+ +!b*i,v=g-S*T,h=v-S*w,_=O;break;case"right":u=o=t.coordinate,g=e+ +b*i,v=g+S*T,h=v+S*w,_=O;break;default:v=g=t.coordinate,o=n+ +b*l,u=o+S*T,_=u+S*w,h=O;break}return{line:{x1:v,y1:u,x2:g,y2:o},tick:{x:h,y:_}}}function getTickTextAnchor(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function getTickVerticalAnchor(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function TickItem(t){var{option:e,tickProps:n,value:i}=t,l,f=clsx(n.className,"recharts-cartesian-axis-tick-value");if(reactExports.isValidElement(e))l=reactExports.cloneElement(e,_objectSpread$4(_objectSpread$4({},n),{},{className:f}));else if(typeof e=="function")l=e(_objectSpread$4(_objectSpread$4({},n),{},{className:f}));else{var p="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(p=clsx(p,e==null?void 0:e.className)),l=reactExports.createElement(Text,_extends$9({},n,{className:p}),i)}return l}function Ticks(t){var{ticks:e=[],tick:n,tickLine:i,stroke:l,tickFormatter:f,unit:p,padding:b,tickTextProps:w,orientation:v,mirror:g,x:u,y:o,width:h,height:_,tickSize:S,tickMargin:T,fontSize:O,letterSpacing:j,getTicksConfig:C,events:D}=t,R=getTicks(_objectSpread$4(_objectSpread$4({},C),{},{ticks:e}),O,j),I=getTickTextAnchor(v,g),$=getTickVerticalAnchor(v,g),F=svgPropertiesNoEvents(C),L=svgPropertiesNoEventsFromUnknown(n),V={};typeof i=="object"&&(V=i);var Y=_objectSpread$4(_objectSpread$4({},F),{},{fill:"none"},V),Q=R.map((ee,X)=>{var{line:W,tick:z}=getTickLineCoord(ee,u,o,h,_,v,S,g,T),q=_objectSpread$4(_objectSpread$4(_objectSpread$4(_objectSpread$4({textAnchor:I,verticalAnchor:$},F),{},{stroke:"none",fill:l},L),z),{},{index:X,payload:ee,visibleTicksCount:R.length,tickFormatter:f,padding:b},w);return reactExports.createElement(Layer,_extends$9({className:"recharts-cartesian-axis-tick",key:"tick-".concat(ee.value,"-").concat(ee.coordinate,"-").concat(ee.tickCoord)},adaptEventsOfChild(D,ee,X)),i&&reactExports.createElement("line",_extends$9({},Y,W,{className:clsx("recharts-cartesian-axis-tick-line",get(i,"className"))})),n&&reactExports.createElement(TickItem,{option:n,tickProps:q,value:"".concat(typeof f=="function"?f(ee.value,X):ee.value).concat(p||"")}))});return Q.length>0?reactExports.createElement("g",{className:"recharts-cartesian-axis-ticks"},Q):null}var CartesianAxisComponent=reactExports.forwardRef((t,e)=>{var{axisLine:n,width:i,height:l,className:f,hide:p,ticks:b}=t,w=_objectWithoutProperties$8(t,_excluded$8),[v,g]=reactExports.useState(""),[u,o]=reactExports.useState(""),h=reactExports.useRef(null);reactExports.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var S;return getCalculatedYAxisWidth({ticks:h.current,label:(S=t.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var _=reactExports.useCallback(S=>{if(S){var T=S.getElementsByClassName("recharts-cartesian-axis-tick-value");h.current=T;var O=T[0];if(O){var j=window.getComputedStyle(O),C=j.fontSize,D=j.letterSpacing;(C!==v||D!==u)&&(g(C),o(D))}}},[v,u]);return p||i!=null&&i<=0||l!=null&&l<=0?null:reactExports.createElement(Layer,{className:clsx("recharts-cartesian-axis",f),ref:_},reactExports.createElement(AxisLine,{x:t.x,y:t.y,width:i,height:l,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:svgPropertiesNoEvents(t)}),reactExports.createElement(Ticks,{ticks:b,tick:t.tick,tickLine:t.tickLine,stroke:t.stroke,tickFormatter:t.tickFormatter,unit:t.unit,padding:t.padding,tickTextProps:t.tickTextProps,orientation:t.orientation,mirror:t.mirror,x:t.x,y:t.y,width:t.width,height:t.height,tickSize:t.tickSize,tickMargin:t.tickMargin,fontSize:v,letterSpacing:u,getTicksConfig:t,events:w}),reactExports.createElement(CartesianLabelContextProvider,{x:t.x,y:t.y,width:t.width,height:t.height},reactExports.createElement(CartesianLabelFromLabelProp,{label:t.label,labelRef:t.labelRef}),t.children))}),MemoCartesianAxis=reactExports.memo(CartesianAxisComponent,(t,e)=>{var{viewBox:n}=t,i=_objectWithoutProperties$8(t,_excluded2$5),{viewBox:l}=e,f=_objectWithoutProperties$8(e,_excluded3$4);return shallowEqual(n,l)&&shallowEqual(i,f)}),CartesianAxis=reactExports.forwardRef((t,e)=>{var n=resolveDefaultProps(t,defaultCartesianAxisProps);return reactExports.createElement(MemoCartesianAxis,_extends$9({},n,{ref:e}))});CartesianAxis.displayName="CartesianAxis";var _excluded$7=["x1","y1","x2","y2","key"],_excluded2$4=["offset"],_excluded3$3=["xAxisId","yAxisId"],_excluded4$2=["xAxisId","yAxisId"];function ownKeys$3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$3(Object(n),!0).forEach(function(i){_defineProperty$3(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$3(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$3(t,e,n){return(e=_toPropertyKey$3(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$3(t){var e=_toPrimitive$3(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$3(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$8.apply(null,arguments)}function _objectWithoutProperties$7(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$7(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$7(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Background=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:i,y:l,width:f,height:p,ry:b}=t;return reactExports.createElement("rect",{x:i,y:l,ry:b,width:f,height:p,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function renderLineItem(t,e){var n;if(reactExports.isValidElement(t))n=reactExports.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var{x1:i,y1:l,x2:f,y2:p,key:b}=e,w=_objectWithoutProperties$7(e,_excluded$7),v=svgPropertiesNoEvents(w),{offset:g}=v,u=_objectWithoutProperties$7(v,_excluded2$4);n=reactExports.createElement("line",_extends$8({},u,{x1:i,y1:l,x2:f,y2:p,fill:"none",key:b}))}return n}function HorizontalGridLines(t){var{x:e,width:n,horizontal:i=!0,horizontalPoints:l}=t;if(!i||!l||!l.length)return null;var{xAxisId:f,yAxisId:p}=t,b=_objectWithoutProperties$7(t,_excluded3$3),w=l.map((v,g)=>{var u=_objectSpread$3(_objectSpread$3({},b),{},{x1:e,y1:v,x2:e+n,y2:v,key:"line-".concat(g),index:g});return renderLineItem(i,u)});return reactExports.createElement("g",{className:"recharts-cartesian-grid-horizontal"},w)}function VerticalGridLines(t){var{y:e,height:n,vertical:i=!0,verticalPoints:l}=t;if(!i||!l||!l.length)return null;var{xAxisId:f,yAxisId:p}=t,b=_objectWithoutProperties$7(t,_excluded4$2),w=l.map((v,g)=>{var u=_objectSpread$3(_objectSpread$3({},b),{},{x1:v,y1:e,x2:v,y2:e+n,key:"line-".concat(g),index:g});return renderLineItem(i,u)});return reactExports.createElement("g",{className:"recharts-cartesian-grid-vertical"},w)}function HorizontalStripes(t){var{horizontalFill:e,fillOpacity:n,x:i,y:l,width:f,height:p,horizontalPoints:b,horizontal:w=!0}=t;if(!w||!e||!e.length)return null;var v=b.map(u=>Math.round(u+l-l)).sort((u,o)=>u-o);l!==v[0]&&v.unshift(0);var g=v.map((u,o)=>{var h=!v[o+1],_=h?l+p-u:v[o+1]-u;if(_<=0)return null;var S=o%e.length;return reactExports.createElement("rect",{key:"react-".concat(o),y:u,x:i,height:_,width:f,stroke:"none",fill:e[S],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return reactExports.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},g)}function VerticalStripes(t){var{vertical:e=!0,verticalFill:n,fillOpacity:i,x:l,y:f,width:p,height:b,verticalPoints:w}=t;if(!e||!n||!n.length)return null;var v=w.map(u=>Math.round(u+l-l)).sort((u,o)=>u-o);l!==v[0]&&v.unshift(0);var g=v.map((u,o)=>{var h=!v[o+1],_=h?l+p-u:v[o+1]-u;if(_<=0)return null;var S=o%n.length;return reactExports.createElement("rect",{key:"react-".concat(o),x:u,y:f,width:_,height:b,stroke:"none",fill:n[S],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return reactExports.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},g)}var defaultVerticalCoordinatesGenerator=(t,e)=>{var{xAxis:n,width:i,height:l,offset:f}=t;return getCoordinatesOfGrid(getTicks(_objectSpread$3(_objectSpread$3(_objectSpread$3({},defaultCartesianAxisProps),n),{},{ticks:getTicksOfAxis(n),viewBox:{x:0,y:0,width:i,height:l}})),f.left,f.left+f.width,e)},defaultHorizontalCoordinatesGenerator=(t,e)=>{var{yAxis:n,width:i,height:l,offset:f}=t;return getCoordinatesOfGrid(getTicks(_objectSpread$3(_objectSpread$3(_objectSpread$3({},defaultCartesianAxisProps),n),{},{ticks:getTicksOfAxis(n),viewBox:{x:0,y:0,width:i,height:l}})),f.top,f.top+f.height,e)},defaultProps$3={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function CartesianGrid(t){var e=useChartWidth(),n=useChartHeight(),i=useOffsetInternal(),l=_objectSpread$3(_objectSpread$3({},resolveDefaultProps(t,defaultProps$3)),{},{x:isNumber(t.x)?t.x:i.left,y:isNumber(t.y)?t.y:i.top,width:isNumber(t.width)?t.width:i.width,height:isNumber(t.height)?t.height:i.height}),{xAxisId:f,yAxisId:p,x:b,y:w,width:v,height:g,syncWithTicks:u,horizontalValues:o,verticalValues:h}=l,_=useIsPanorama(),S=useAppSelector(L=>selectAxisPropsNeededForCartesianGridTicksGenerator(L,"xAxis",f,_)),T=useAppSelector(L=>selectAxisPropsNeededForCartesianGridTicksGenerator(L,"yAxis",p,_));if(!isNumber(v)||v<=0||!isNumber(g)||g<=0||!isNumber(b)||b!==+b||!isNumber(w)||w!==+w)return null;var O=l.verticalCoordinatesGenerator||defaultVerticalCoordinatesGenerator,j=l.horizontalCoordinatesGenerator||defaultHorizontalCoordinatesGenerator,{horizontalPoints:C,verticalPoints:D}=l;if((!C||!C.length)&&typeof j=="function"){var R=o&&o.length,I=j({yAxis:T?_objectSpread$3(_objectSpread$3({},T),{},{ticks:R?o:T.ticks}):void 0,width:e,height:n,offset:i},R?!0:u);warn(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(C=I)}if((!D||!D.length)&&typeof O=="function"){var $=h&&h.length,F=O({xAxis:S?_objectSpread$3(_objectSpread$3({},S),{},{ticks:$?h:S.ticks}):void 0,width:e,height:n,offset:i},$?!0:u);warn(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof F,"]")),Array.isArray(F)&&(D=F)}return reactExports.createElement("g",{className:"recharts-cartesian-grid"},reactExports.createElement(Background,{fill:l.fill,fillOpacity:l.fillOpacity,x:l.x,y:l.y,width:l.width,height:l.height,ry:l.ry}),reactExports.createElement(HorizontalStripes,_extends$8({},l,{horizontalPoints:C})),reactExports.createElement(VerticalStripes,_extends$8({},l,{verticalPoints:D})),reactExports.createElement(HorizontalGridLines,_extends$8({},l,{offset:i,horizontalPoints:C,xAxis:S,yAxis:T})),reactExports.createElement(VerticalGridLines,_extends$8({},l,{offset:i,verticalPoints:D,xAxis:S,yAxis:T})))}CartesianGrid.displayName="CartesianGrid";var selectXAxisWithScale$1=(t,e,n,i)=>selectAxisWithScale(t,"xAxis",e,i),selectXAxisTicks$1=(t,e,n,i)=>selectTicksOfGraphicalItem(t,"xAxis",e,i),selectYAxisWithScale$1=(t,e,n,i)=>selectAxisWithScale(t,"yAxis",n,i),selectYAxisTicks$1=(t,e,n,i)=>selectTicksOfGraphicalItem(t,"yAxis",n,i),selectBandSize$1=createSelector([selectChartLayout,selectXAxisWithScale$1,selectYAxisWithScale$1,selectXAxisTicks$1,selectYAxisTicks$1],(t,e,n,i,l)=>isCategoricalAxis(t,"xAxis")?getBandSizeOfAxis(e,i,!1):getBandSizeOfAxis(n,l,!1)),pickLineId=(t,e,n,i,l)=>l;function isLineSettings(t){return t.type==="line"}var selectSynchronisedLineSettings=createSelector([selectUnfilteredCartesianItems,pickLineId],(t,e)=>t.filter(isLineSettings).find(n=>n.id===e)),selectLinePoints=createSelector([selectChartLayout,selectXAxisWithScale$1,selectYAxisWithScale$1,selectXAxisTicks$1,selectYAxisTicks$1,selectSynchronisedLineSettings,selectBandSize$1,selectChartDataWithIndexesIfNotInPanorama],(t,e,n,i,l,f,p,b)=>{var{chartData:w,dataStartIndex:v,dataEndIndex:g}=b;if(!(f==null||e==null||n==null||i==null||l==null||i.length===0||l.length===0||p==null)){var{dataKey:u,data:o}=f,h;if(o!=null&&o.length>0?h=o:h=w==null?void 0:w.slice(v,g+1),h!=null)return computeLinePoints({layout:t,xAxis:e,yAxis:n,xAxisTicks:i,yAxisTicks:l,dataKey:u,bandSize:p,displayedData:h})}});function getRadiusAndStrokeWidthFromDot(t){var e=svgPropertiesNoEventsFromUnknown(t),n=3,i=2;if(e!=null){var{r:l,strokeWidth:f}=e,p=Number(l),b=Number(f);return(Number.isNaN(p)||p<0)&&(p=n),(Number.isNaN(b)||b<0)&&(b=i),{r:p,strokeWidth:b}}return{r:n,strokeWidth:i}}var _excluded$6=["id"],_excluded2$3=["type","layout","connectNulls","needClip"],_excluded3$2=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function ownKeys$2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$2(Object(n),!0).forEach(function(i){_defineProperty$2(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$2(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$2(t,e,n){return(e=_toPropertyKey$2(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$2(t){var e=_toPrimitive$2(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$2(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _objectWithoutProperties$6(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$6(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$6(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$7.apply(null,arguments)}var computeLegendPayloadFromAreaData$1=t=>{var{dataKey:e,name:n,stroke:i,legendType:l,hide:f}=t;return[{inactive:f,dataKey:e,type:l,color:i,value:getTooltipNameProp(n,e),payload:t}]};function getTooltipEntrySettings$1(t){var{dataKey:e,data:n,stroke:i,strokeWidth:l,fill:f,name:p,hide:b,unit:w}=t;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:i,strokeWidth:l,fill:f,dataKey:e,nameKey:void 0,name:getTooltipNameProp(p,e),hide:b,type:t.tooltipType,color:t.stroke,unit:w}}}var generateSimpleStrokeDasharray=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function repeat(t,e){for(var n=t.length%2!==0?[...t,0]:t,i=[],l=0;l<e;++l)i=[...i,...n];return i}var getStrokeDasharray=(t,e,n)=>{var i=n.reduce((u,o)=>u+o);if(!i)return generateSimpleStrokeDasharray(e,t);for(var l=Math.floor(t/i),f=t%i,p=e-t,b=[],w=0,v=0;w<n.length;v+=n[w],++w)if(v+n[w]>f){b=[...n.slice(0,w),f-v];break}var g=b.length%2===0?[0,p]:[p];return[...repeat(n,l),...b,...g].map(u=>"".concat(u,"px")).join(", ")};function renderDotItem$1(t,e){var n;if(reactExports.isValidElement(t))n=reactExports.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var i=clsx("recharts-line-dot",typeof t!="boolean"?t.className:"");n=reactExports.createElement(Dot,_extends$7({},e,{className:i}))}return n}function shouldRenderDots$1(t,e){return t==null?!1:e?!0:t.length===1}function Dots$1(t){var{clipPathId:e,points:n,props:i}=t,{dot:l,dataKey:f,needClip:p}=i;if(!shouldRenderDots$1(n,l))return null;var{id:b}=i,w=_objectWithoutProperties$6(i,_excluded$6),v=isClipDot(l),g=svgPropertiesNoEvents(w),u=svgPropertiesAndEventsFromUnknown(l),o=n.map((_,S)=>{var T=_objectSpread$2(_objectSpread$2(_objectSpread$2({key:"dot-".concat(S),r:3},g),u),{},{index:S,cx:_.x,cy:_.y,dataKey:f,value:_.value,payload:_.payload,points:n});return renderDotItem$1(l,T)}),h={clipPath:p?"url(#clipPath-".concat(v?"":"dots-").concat(e,")"):void 0};return reactExports.createElement(Layer,_extends$7({className:"recharts-line-dots",key:"dots"},h),o)}function LineLabelListProvider(t){var{showLabels:e,children:n,points:i}=t,l=reactExports.useMemo(()=>i==null?void 0:i.map(f=>{var p={x:f.x,y:f.y,width:0,height:0};return _objectSpread$2(_objectSpread$2({},p),{},{value:f.value,payload:f.payload,viewBox:p,parentViewBox:void 0,fill:void 0})}),[i]);return reactExports.createElement(CartesianLabelListContextProvider,{value:e?l:null},n)}function StaticCurve(t){var{clipPathId:e,pathRef:n,points:i,strokeDasharray:l,props:f}=t,{type:p,layout:b,connectNulls:w,needClip:v}=f,g=_objectWithoutProperties$6(f,_excluded2$3),u=_objectSpread$2(_objectSpread$2({},svgPropertiesAndEvents(g)),{},{fill:"none",className:"recharts-line-curve",clipPath:v?"url(#clipPath-".concat(e,")"):void 0,points:i,type:p,layout:b,connectNulls:w,strokeDasharray:l??f.strokeDasharray});return reactExports.createElement(reactExports.Fragment,null,(i==null?void 0:i.length)>1&&reactExports.createElement(Curve,_extends$7({},u,{pathRef:n})),reactExports.createElement(Dots$1,{points:i,clipPathId:e,props:f}))}function getTotalLength(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function CurveWithAnimation(t){var{clipPathId:e,props:n,pathRef:i,previousPointsRef:l,longestAnimatedLengthRef:f}=t,{points:p,strokeDasharray:b,isAnimationActive:w,animationBegin:v,animationDuration:g,animationEasing:u,animateNewValues:o,width:h,height:_,onAnimationEnd:S,onAnimationStart:T}=n,O=l.current,j=useAnimationId(n,"recharts-line-"),[C,D]=reactExports.useState(!1),R=!C,I=reactExports.useCallback(()=>{typeof S=="function"&&S(),D(!1)},[S]),$=reactExports.useCallback(()=>{typeof T=="function"&&T(),D(!0)},[T]),F=getTotalLength(i.current),L=f.current;return reactExports.createElement(LineLabelListProvider,{points:p,showLabels:R},n.children,reactExports.createElement(JavascriptAnimate,{animationId:j,begin:v,duration:g,isActive:w,easing:u,onAnimationEnd:I,onAnimationStart:$,key:j},V=>{var Y=interpolate$1(L,F+L,V),Q=Math.min(Y,F),ee;if(w)if(b){var X="".concat(b).split(/[,\s]+/gim).map(q=>parseFloat(q));ee=getStrokeDasharray(Q,F,X)}else ee=generateSimpleStrokeDasharray(F,Q);else ee=b==null?void 0:String(b);if(O){var W=O.length/p.length,z=V===1?p:p.map((q,ce)=>{var ae=Math.floor(ce*W);if(O[ae]){var we=O[ae];return _objectSpread$2(_objectSpread$2({},q),{},{x:interpolate$1(we.x,q.x,V),y:interpolate$1(we.y,q.y,V)})}return o?_objectSpread$2(_objectSpread$2({},q),{},{x:interpolate$1(h*2,q.x,V),y:interpolate$1(_/2,q.y,V)}):_objectSpread$2(_objectSpread$2({},q),{},{x:q.x,y:q.y})});return l.current=z,reactExports.createElement(StaticCurve,{props:n,points:z,clipPathId:e,pathRef:i,strokeDasharray:ee})}return V>0&&F>0&&(l.current=p,f.current=Q),reactExports.createElement(StaticCurve,{props:n,points:p,clipPathId:e,pathRef:i,strokeDasharray:ee})}),reactExports.createElement(LabelListFromLabelProp,{label:n.label}))}function RenderCurve(t){var{clipPathId:e,props:n}=t,i=reactExports.useRef(null),l=reactExports.useRef(0),f=reactExports.useRef(null);return reactExports.createElement(CurveWithAnimation,{props:n,clipPathId:e,previousPointsRef:i,longestAnimatedLengthRef:l,pathRef:f})}var errorBarDataPointFormatter=(t,e)=>({x:t.x,y:t.y,value:t.value,errorVal:getValueByDataKey(t.payload,e)});class LineWithState extends reactExports.Component{render(){var{hide:e,dot:n,points:i,className:l,xAxisId:f,yAxisId:p,top:b,left:w,width:v,height:g,id:u,needClip:o}=this.props;if(e)return null;var h=clsx("recharts-line",l),_=u,{r:S,strokeWidth:T}=getRadiusAndStrokeWidthFromDot(n),O=isClipDot(n),j=S*2+T;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Layer,{className:h},o&&reactExports.createElement("defs",null,reactExports.createElement(GraphicalItemClipPath,{clipPathId:_,xAxisId:f,yAxisId:p}),!O&&reactExports.createElement("clipPath",{id:"clipPath-dots-".concat(_)},reactExports.createElement("rect",{x:w-j/2,y:b-j/2,width:v+j,height:g+j}))),reactExports.createElement(SetErrorBarContext,{xAxisId:f,yAxisId:p,data:i,dataPointFormatter:errorBarDataPointFormatter,errorBarOffset:0},reactExports.createElement(RenderCurve,{props:this.props,clipPathId:_}))),reactExports.createElement(ActivePoints,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var defaultLineProps={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Global.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function LineImpl(t){var e=resolveDefaultProps(t,defaultLineProps),{activeDot:n,animateNewValues:i,animationBegin:l,animationDuration:f,animationEasing:p,connectNulls:b,dot:w,hide:v,isAnimationActive:g,label:u,legendType:o,xAxisId:h,yAxisId:_,id:S}=e,T=_objectWithoutProperties$6(e,_excluded3$2),{needClip:O}=useNeedsClip(h,_),j=usePlotArea(),C=useChartLayout(),D=useIsPanorama(),R=useAppSelector(V=>selectLinePoints(V,h,_,D,S));if(C!=="horizontal"&&C!=="vertical"||R==null||j==null)return null;var{height:I,width:$,x:F,y:L}=j;return reactExports.createElement(LineWithState,_extends$7({},T,{id:S,connectNulls:b,dot:w,activeDot:n,animateNewValues:i,animationBegin:l,animationDuration:f,animationEasing:p,isAnimationActive:g,hide:v,label:u,legendType:o,xAxisId:h,yAxisId:_,points:R,layout:C,height:I,width:$,left:F,top:L,needClip:O}))}function computeLinePoints(t){var{layout:e,xAxis:n,yAxis:i,xAxisTicks:l,yAxisTicks:f,dataKey:p,bandSize:b,displayedData:w}=t;return w.map((v,g)=>{var u=getValueByDataKey(v,p);if(e==="horizontal"){var o=getCateCoordinateOfLine({axis:n,ticks:l,bandSize:b,entry:v,index:g}),h=isNullish(u)?null:i.scale(u);return{x:o,y:h,value:u,payload:v}}var _=isNullish(u)?null:n.scale(u),S=getCateCoordinateOfLine({axis:i,ticks:f,bandSize:b,entry:v,index:g});return _==null||S==null?null:{x:_,y:S,value:u,payload:v}}).filter(Boolean)}function LineFn(t){var e=resolveDefaultProps(t,defaultLineProps),n=useIsPanorama();return reactExports.createElement(RegisterGraphicalItemId,{id:e.id,type:"line"},i=>reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(SetLegendPayload,{legendPayload:computeLegendPayloadFromAreaData$1(e)}),reactExports.createElement(SetTooltipEntrySettings,{fn:getTooltipEntrySettings$1,args:e}),reactExports.createElement(SetCartesianGraphicalItem,{type:"line",id:i,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),reactExports.createElement(LineImpl,_extends$7({},e,{id:i}))))}var Line=reactExports.memo(LineFn);Line.displayName="Line";var selectXAxisWithScale=(t,e,n,i)=>selectAxisWithScale(t,"xAxis",e,i),selectXAxisTicks=(t,e,n,i)=>selectTicksOfGraphicalItem(t,"xAxis",e,i),selectYAxisWithScale=(t,e,n,i)=>selectAxisWithScale(t,"yAxis",n,i),selectYAxisTicks=(t,e,n,i)=>selectTicksOfGraphicalItem(t,"yAxis",n,i),selectBandSize=createSelector([selectChartLayout,selectXAxisWithScale,selectYAxisWithScale,selectXAxisTicks,selectYAxisTicks],(t,e,n,i,l)=>isCategoricalAxis(t,"xAxis")?getBandSizeOfAxis(e,i,!1):getBandSizeOfAxis(n,l,!1)),pickAreaId=(t,e,n,i,l)=>l,selectSynchronisedAreaSettings=createSelector([selectUnfilteredCartesianItems,pickAreaId],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),selectGraphicalItemStackedData=(t,e,n,i,l)=>{var f,p=selectSynchronisedAreaSettings(t,e,n,i,l);if(p!=null){var b=selectChartLayout(t),w=isCategoricalAxis(b,"xAxis"),v;if(w?v=selectStackGroups(t,"yAxis",n,i):v=selectStackGroups(t,"xAxis",e,i),v!=null){var{stackId:g}=p,u=getStackSeriesIdentifier(p);if(!(g==null||u==null)){var o=(f=v[g])===null||f===void 0?void 0:f.stackedData;return o==null?void 0:o.find(h=>h.key===u)}}}},selectArea=createSelector([selectChartLayout,selectXAxisWithScale,selectYAxisWithScale,selectXAxisTicks,selectYAxisTicks,selectGraphicalItemStackedData,selectChartDataWithIndexesIfNotInPanorama,selectBandSize,selectSynchronisedAreaSettings],(t,e,n,i,l,f,p,b,w)=>{var{chartData:v,dataStartIndex:g,dataEndIndex:u}=p;if(!(w==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||i==null||l==null||i.length===0||l.length===0||b==null)){var{data:o}=w,h;if(o&&o.length>0?h=o:h=v==null?void 0:v.slice(g,u+1),h!=null){var _=void 0;return computeArea({layout:t,xAxis:e,yAxis:n,xAxisTicks:i,yAxisTicks:l,dataStartIndex:g,areaSettings:w,stackedData:f,displayedData:h,chartBaseValue:_,bandSize:b})}}}),_excluded$5=["id"],_excluded2$2=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function _objectWithoutProperties$5(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$5(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$5(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function ownKeys$1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(n),!0).forEach(function(i){_defineProperty$1(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$1(t,e,n){return(e=_toPropertyKey$1(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$1(t){var e=_toPrimitive$1(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive$1(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$6.apply(null,arguments)}function getLegendItemColor(t,e){return t&&t!=="none"?t:e}var computeLegendPayloadFromAreaData=t=>{var{dataKey:e,name:n,stroke:i,fill:l,legendType:f,hide:p}=t;return[{inactive:p,dataKey:e,type:f,color:getLegendItemColor(i,l),value:getTooltipNameProp(n,e),payload:t}]};function getTooltipEntrySettings(t){var{dataKey:e,data:n,stroke:i,strokeWidth:l,fill:f,name:p,hide:b,unit:w}=t;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:i,strokeWidth:l,fill:f,dataKey:e,nameKey:void 0,name:getTooltipNameProp(p,e),hide:b,type:t.tooltipType,color:getLegendItemColor(i,f),unit:w}}}var renderDotItem=(t,e)=>{var n;if(reactExports.isValidElement(t))n=reactExports.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var i=clsx("recharts-area-dot",typeof t!="boolean"?t.className:"");n=reactExports.createElement(Dot,_extends$6({},e,{className:i}))}return n};function shouldRenderDots(t,e){return t==null?!1:e?!0:t.length===1}function Dots(t){var{clipPathId:e,points:n,props:i}=t,{needClip:l,dot:f,dataKey:p}=i;if(!shouldRenderDots(n,f))return null;var b=isClipDot(f),w=svgPropertiesNoEvents(i),v=svgPropertiesAndEventsFromUnknown(f),g=n.map((o,h)=>{var _=_objectSpread$1(_objectSpread$1(_objectSpread$1({key:"dot-".concat(h),r:3},w),v),{},{index:h,cx:o.x,cy:o.y,dataKey:p,value:o.value,payload:o.payload,points:n});return renderDotItem(f,_)}),u={clipPath:l?"url(#clipPath-".concat(b?"":"dots-").concat(e,")"):void 0};return reactExports.createElement(Layer,_extends$6({className:"recharts-area-dots"},u),g)}function AreaLabelListProvider(t){var{showLabels:e,children:n,points:i}=t,l=i.map(f=>{var p={x:f.x,y:f.y,width:0,height:0};return _objectSpread$1(_objectSpread$1({},p),{},{value:f.value,payload:f.payload,parentViewBox:void 0,viewBox:p,fill:void 0})});return reactExports.createElement(CartesianLabelListContextProvider,{value:e?l:null},n)}function StaticArea(t){var{points:e,baseLine:n,needClip:i,clipPathId:l,props:f}=t,{layout:p,type:b,stroke:w,connectNulls:v,isRange:g}=f,{id:u}=f,o=_objectWithoutProperties$5(f,_excluded$5),h=svgPropertiesNoEvents(o);return reactExports.createElement(reactExports.Fragment,null,(e==null?void 0:e.length)>1&&reactExports.createElement(Layer,{clipPath:i?"url(#clipPath-".concat(l,")"):void 0},reactExports.createElement(Curve,_extends$6({},h,{id:u,points:e,connectNulls:v,type:b,baseLine:n,layout:p,stroke:"none",className:"recharts-area-area"})),w!=="none"&&reactExports.createElement(Curve,_extends$6({},h,{className:"recharts-area-curve",layout:p,type:b,connectNulls:v,fill:"none",points:e})),w!=="none"&&g&&reactExports.createElement(Curve,_extends$6({},h,{className:"recharts-area-curve",layout:p,type:b,connectNulls:v,fill:"none",points:n}))),reactExports.createElement(Dots,{points:e,props:o,clipPathId:l}))}function VerticalRect(t){var{alpha:e,baseLine:n,points:i,strokeWidth:l}=t,f=i[0].y,p=i[i.length-1].y;if(!isWellBehavedNumber(f)||!isWellBehavedNumber(p))return null;var b=e*Math.abs(f-p),w=Math.max(...i.map(v=>v.x||0));return isNumber(n)?w=Math.max(n,w):n&&Array.isArray(n)&&n.length&&(w=Math.max(...n.map(v=>v.x||0),w)),isNumber(w)?reactExports.createElement("rect",{x:0,y:f<p?f:f-b,width:w+(l?parseInt("".concat(l),10):1),height:Math.floor(b)}):null}function HorizontalRect(t){var{alpha:e,baseLine:n,points:i,strokeWidth:l}=t,f=i[0].x,p=i[i.length-1].x;if(!isWellBehavedNumber(f)||!isWellBehavedNumber(p))return null;var b=e*Math.abs(f-p),w=Math.max(...i.map(v=>v.y||0));return isNumber(n)?w=Math.max(n,w):n&&Array.isArray(n)&&n.length&&(w=Math.max(...n.map(v=>v.y||0),w)),isNumber(w)?reactExports.createElement("rect",{x:f<p?f:f-b,y:0,width:b,height:Math.floor(w+(l?parseInt("".concat(l),10):1))}):null}function ClipRect(t){var{alpha:e,layout:n,points:i,baseLine:l,strokeWidth:f}=t;return n==="vertical"?reactExports.createElement(VerticalRect,{alpha:e,points:i,baseLine:l,strokeWidth:f}):reactExports.createElement(HorizontalRect,{alpha:e,points:i,baseLine:l,strokeWidth:f})}function AreaWithAnimation(t){var{needClip:e,clipPathId:n,props:i,previousPointsRef:l,previousBaselineRef:f}=t,{points:p,baseLine:b,isAnimationActive:w,animationBegin:v,animationDuration:g,animationEasing:u,onAnimationStart:o,onAnimationEnd:h}=i,_=useAnimationId(i,"recharts-area-"),[S,T]=reactExports.useState(!1),O=!S,j=reactExports.useCallback(()=>{typeof h=="function"&&h(),T(!1)},[h]),C=reactExports.useCallback(()=>{typeof o=="function"&&o(),T(!0)},[o]),D=l.current,R=f.current;return reactExports.createElement(AreaLabelListProvider,{showLabels:O,points:p},i.children,reactExports.createElement(JavascriptAnimate,{animationId:_,begin:v,duration:g,isActive:w,easing:u,onAnimationEnd:j,onAnimationStart:C,key:_},I=>{if(D){var $=D.length/p.length,F=I===1?p:p.map((V,Y)=>{var Q=Math.floor(Y*$);if(D[Q]){var ee=D[Q];return _objectSpread$1(_objectSpread$1({},V),{},{x:interpolate$1(ee.x,V.x,I),y:interpolate$1(ee.y,V.y,I)})}return V}),L;return isNumber(b)?L=interpolate$1(R,b,I):isNullish(b)||isNan(b)?L=interpolate$1(R,0,I):L=b.map((V,Y)=>{var Q=Math.floor(Y*$);if(Array.isArray(R)&&R[Q]){var ee=R[Q];return _objectSpread$1(_objectSpread$1({},V),{},{x:interpolate$1(ee.x,V.x,I),y:interpolate$1(ee.y,V.y,I)})}return V}),I>0&&(l.current=F,f.current=L),reactExports.createElement(StaticArea,{points:F,baseLine:L,needClip:e,clipPathId:n,props:i})}return I>0&&(l.current=p,f.current=b),reactExports.createElement(Layer,null,w&&reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:"animationClipPath-".concat(n)},reactExports.createElement(ClipRect,{alpha:I,points:p,baseLine:b,layout:i.layout,strokeWidth:i.strokeWidth}))),reactExports.createElement(Layer,{clipPath:"url(#animationClipPath-".concat(n,")")},reactExports.createElement(StaticArea,{points:p,baseLine:b,needClip:e,clipPathId:n,props:i})))}),reactExports.createElement(LabelListFromLabelProp,{label:i.label}))}function RenderArea(t){var{needClip:e,clipPathId:n,props:i}=t,l=reactExports.useRef(null),f=reactExports.useRef();return reactExports.createElement(AreaWithAnimation,{needClip:e,clipPathId:n,props:i,previousPointsRef:l,previousBaselineRef:f})}class AreaWithState extends reactExports.PureComponent{render(){var{hide:e,dot:n,points:i,className:l,top:f,left:p,needClip:b,xAxisId:w,yAxisId:v,width:g,height:u,id:o,baseLine:h}=this.props;if(e)return null;var _=clsx("recharts-area",l),S=o,{r:T,strokeWidth:O}=getRadiusAndStrokeWidthFromDot(n),j=isClipDot(n),C=T*2+O;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Layer,{className:_},b&&reactExports.createElement("defs",null,reactExports.createElement(GraphicalItemClipPath,{clipPathId:S,xAxisId:w,yAxisId:v}),!j&&reactExports.createElement("clipPath",{id:"clipPath-dots-".concat(S)},reactExports.createElement("rect",{x:p-C/2,y:f-C/2,width:g+C,height:u+C}))),reactExports.createElement(RenderArea,{needClip:b,clipPathId:S,props:this.props})),reactExports.createElement(ActivePoints,{points:i,mainColor:getLegendItemColor(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(h)&&reactExports.createElement(ActivePoints,{points:h,mainColor:getLegendItemColor(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var defaultAreaProps={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!Global.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function AreaImpl(t){var e,n=resolveDefaultProps(t,defaultAreaProps),{activeDot:i,animationBegin:l,animationDuration:f,animationEasing:p,connectNulls:b,dot:w,fill:v,fillOpacity:g,hide:u,isAnimationActive:o,legendType:h,stroke:_,xAxisId:S,yAxisId:T}=n,O=_objectWithoutProperties$5(n,_excluded2$2),j=useChartLayout(),C=useChartName(),{needClip:D}=useNeedsClip(S,T),R=useIsPanorama(),{points:I,isRange:$,baseLine:F}=(e=useAppSelector(X=>selectArea(X,S,T,R,t.id)))!==null&&e!==void 0?e:{},L=usePlotArea();if(j!=="horizontal"&&j!=="vertical"||L==null||C!=="AreaChart"&&C!=="ComposedChart")return null;var{height:V,width:Y,x:Q,y:ee}=L;return!I||!I.length?null:reactExports.createElement(AreaWithState,_extends$6({},O,{activeDot:i,animationBegin:l,animationDuration:f,animationEasing:p,baseLine:F,connectNulls:b,dot:w,fill:v,fillOpacity:g,height:V,hide:u,layout:j,isAnimationActive:o,isRange:$,legendType:h,needClip:D,points:I,stroke:_,width:Y,left:Q,top:ee,xAxisId:S,yAxisId:T}))}var getBaseValue=(t,e,n,i,l)=>{var f=n??e;if(isNumber(f))return f;var p=t==="horizontal"?l:i,b=p.scale.domain();if(p.type==="number"){var w=Math.max(b[0],b[1]),v=Math.min(b[0],b[1]);return f==="dataMin"?v:f==="dataMax"||w<0?w:Math.max(Math.min(b[0],b[1]),0)}return f==="dataMin"?b[0]:f==="dataMax"?b[1]:b[0]};function computeArea(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:i},stackedData:l,layout:f,chartBaseValue:p,xAxis:b,yAxis:w,displayedData:v,dataStartIndex:g,xAxisTicks:u,yAxisTicks:o,bandSize:h}=t,_=l&&l.length,S=getBaseValue(f,p,n,b,w),T=f==="horizontal",O=!1,j=v.map((D,R)=>{var I;_?I=l[g+R]:(I=getValueByDataKey(D,i),Array.isArray(I)?O=!0:I=[S,I]);var $=I[1]==null||_&&!e&&getValueByDataKey(D,i)==null;return T?{x:getCateCoordinateOfLine({axis:b,ticks:u,bandSize:h,entry:D,index:R}),y:$?null:w.scale(I[1]),value:I,payload:D}:{x:$?null:b.scale(I[1]),y:getCateCoordinateOfLine({axis:w,ticks:o,bandSize:h,entry:D,index:R}),value:I,payload:D}}),C;return _||O?C=j.map(D=>{var R=Array.isArray(D.value)?D.value[0]:null;return T?{x:D.x,y:R!=null&&D.y!=null?w.scale(R):null,payload:D.payload}:{x:R!=null?b.scale(R):null,y:D.y,payload:D.payload}}):C=T?w.scale(S):b.scale(S),{points:j,baseLine:C,isRange:O}}function AreaFn(t){var e=resolveDefaultProps(t,defaultAreaProps),n=useIsPanorama();return reactExports.createElement(RegisterGraphicalItemId,{id:e.id,type:"area"},i=>reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(SetLegendPayload,{legendPayload:computeLegendPayloadFromAreaData(e)}),reactExports.createElement(SetTooltipEntrySettings,{fn:getTooltipEntrySettings,args:e}),reactExports.createElement(SetCartesianGraphicalItem,{type:"area",id:i,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:getNormalizedStackId(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),reactExports.createElement(AreaImpl,_extends$6({},e,{id:i}))))}var Area=reactExports.memo(AreaFn);Area.displayName="Area";var _excluded$4=["dangerouslySetInnerHTML","ticks"],_excluded2$1=["id"],_excluded3$1=["domain"],_excluded4$1=["domain"];function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$5.apply(null,arguments)}function _objectWithoutProperties$4(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$4(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$4(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function SetXAxisSettings(t){var e=useAppDispatch();return reactExports.useLayoutEffect(()=>(e(addXAxis(t)),()=>{e(removeXAxis(t))}),[t,e]),null}var XAxisImpl=t=>{var{xAxisId:e,className:n}=t,i=useAppSelector(selectAxisViewBox),l=useIsPanorama(),f="xAxis",p=useAppSelector(T=>selectAxisScale(T,f,e,l)),b=useAppSelector(T=>selectTicksOfAxis(T,f,e,l)),w=useAppSelector(T=>selectXAxisSize(T,e)),v=useAppSelector(T=>selectXAxisPosition(T,e)),g=useAppSelector(T=>selectXAxisSettingsNoDefaults(T,e));if(w==null||v==null||g==null)return null;var{dangerouslySetInnerHTML:u,ticks:o}=t,h=_objectWithoutProperties$4(t,_excluded$4),{id:_}=g,S=_objectWithoutProperties$4(g,_excluded2$1);return reactExports.createElement(CartesianAxis,_extends$5({},h,S,{scale:p,x:v.x,y:v.y,width:w.width,height:w.height,className:clsx("recharts-".concat(f," ").concat(f),n),viewBox:i,ticks:b}))},xAxisDefaultProps={allowDataOverflow:implicitXAxis.allowDataOverflow,allowDecimals:implicitXAxis.allowDecimals,allowDuplicatedCategory:implicitXAxis.allowDuplicatedCategory,height:implicitXAxis.height,hide:!1,mirror:implicitXAxis.mirror,orientation:implicitXAxis.orientation,padding:implicitXAxis.padding,reversed:implicitXAxis.reversed,scale:implicitXAxis.scale,tickCount:implicitXAxis.tickCount,type:implicitXAxis.type,xAxisId:0},XAxisSettingsDispatcher=t=>{var e,n,i,l,f,p=resolveDefaultProps(t,xAxisDefaultProps);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(SetXAxisSettings,{interval:(e=p.interval)!==null&&e!==void 0?e:"preserveEnd",id:p.xAxisId,scale:p.scale,type:p.type,padding:p.padding,allowDataOverflow:p.allowDataOverflow,domain:p.domain,dataKey:p.dataKey,allowDuplicatedCategory:p.allowDuplicatedCategory,allowDecimals:p.allowDecimals,tickCount:p.tickCount,includeHidden:(n=p.includeHidden)!==null&&n!==void 0?n:!1,reversed:p.reversed,ticks:p.ticks,height:p.height,orientation:p.orientation,mirror:p.mirror,hide:p.hide,unit:p.unit,name:p.name,angle:(i=p.angle)!==null&&i!==void 0?i:0,minTickGap:(l=p.minTickGap)!==null&&l!==void 0?l:5,tick:(f=p.tick)!==null&&f!==void 0?f:!0,tickFormatter:p.tickFormatter}),reactExports.createElement(XAxisImpl,p))},XAxisMemoComparator=(t,e)=>{var{domain:n}=t,i=_objectWithoutProperties$4(t,_excluded3$1),{domain:l}=e,f=_objectWithoutProperties$4(e,_excluded4$1);return shallowEqual(i,f)?Array.isArray(n)&&n.length===2&&Array.isArray(l)&&l.length===2?n[0]===l[0]&&n[1]===l[1]:shallowEqual({domain:n},{domain:l}):!1},XAxis=reactExports.memo(XAxisSettingsDispatcher,XAxisMemoComparator);XAxis.displayName="XAxis";var _excluded$3=["dangerouslySetInnerHTML","ticks"],_excluded2=["id"],_excluded3=["domain"],_excluded4=["domain"];function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$4.apply(null,arguments)}function _objectWithoutProperties$3(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$3(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$3(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function SetYAxisSettings(t){var e=useAppDispatch();return reactExports.useLayoutEffect(()=>(e(addYAxis(t)),()=>{e(removeYAxis(t))}),[t,e]),null}var YAxisImpl=t=>{var{yAxisId:e,className:n,width:i,label:l}=t,f=reactExports.useRef(null),p=reactExports.useRef(null),b=useAppSelector(selectAxisViewBox),w=useIsPanorama(),v=useAppDispatch(),g="yAxis",u=useAppSelector(R=>selectAxisScale(R,g,e,w)),o=useAppSelector(R=>selectYAxisSize(R,e)),h=useAppSelector(R=>selectYAxisPosition(R,e)),_=useAppSelector(R=>selectTicksOfAxis(R,g,e,w)),S=useAppSelector(R=>selectYAxisSettingsNoDefaults(R,e));if(reactExports.useLayoutEffect(()=>{if(!(i!=="auto"||!o||isLabelContentAFunction(l)||reactExports.isValidElement(l)||S==null)){var R=f.current;if(R){var I=R.getCalculatedWidth();Math.round(o.width)!==Math.round(I)&&v(updateYAxisWidth({id:e,width:I}))}}},[_,o,v,l,e,i,S]),o==null||h==null||S==null)return null;var{dangerouslySetInnerHTML:T,ticks:O}=t,j=_objectWithoutProperties$3(t,_excluded$3),{id:C}=S,D=_objectWithoutProperties$3(S,_excluded2);return reactExports.createElement(CartesianAxis,_extends$4({},j,D,{ref:f,labelRef:p,scale:u,x:h.x,y:h.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:o.width,height:o.height,className:clsx("recharts-".concat(g," ").concat(g),n),viewBox:b,ticks:_}))},yAxisDefaultProps={allowDataOverflow:implicitYAxis.allowDataOverflow,allowDecimals:implicitYAxis.allowDecimals,allowDuplicatedCategory:implicitYAxis.allowDuplicatedCategory,hide:!1,mirror:implicitYAxis.mirror,orientation:implicitYAxis.orientation,padding:implicitYAxis.padding,reversed:implicitYAxis.reversed,scale:implicitYAxis.scale,tickCount:implicitYAxis.tickCount,type:implicitYAxis.type,width:implicitYAxis.width,yAxisId:0},YAxisSettingsDispatcher=t=>{var e,n,i,l,f,p=resolveDefaultProps(t,yAxisDefaultProps);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(SetYAxisSettings,{interval:(e=p.interval)!==null&&e!==void 0?e:"preserveEnd",id:p.yAxisId,scale:p.scale,type:p.type,domain:p.domain,allowDataOverflow:p.allowDataOverflow,dataKey:p.dataKey,allowDuplicatedCategory:p.allowDuplicatedCategory,allowDecimals:p.allowDecimals,tickCount:p.tickCount,padding:p.padding,includeHidden:(n=p.includeHidden)!==null&&n!==void 0?n:!1,reversed:p.reversed,ticks:p.ticks,width:p.width,orientation:p.orientation,mirror:p.mirror,hide:p.hide,unit:p.unit,name:p.name,angle:(i=p.angle)!==null&&i!==void 0?i:0,minTickGap:(l=p.minTickGap)!==null&&l!==void 0?l:5,tick:(f=p.tick)!==null&&f!==void 0?f:!0,tickFormatter:p.tickFormatter}),reactExports.createElement(YAxisImpl,p))},YAxisMemoComparator=(t,e)=>{var{domain:n}=t,i=_objectWithoutProperties$3(t,_excluded3),{domain:l}=e,f=_objectWithoutProperties$3(e,_excluded4);return shallowEqual(i,f)?Array.isArray(n)&&n.length===2&&Array.isArray(l)&&l.length===2?n[0]===l[0]&&n[1]===l[1]:shallowEqual({domain:n},{domain:l}):!1},YAxis=reactExports.memo(YAxisSettingsDispatcher,YAxisMemoComparator);YAxis.displayName="YAxis";var withSelector={exports:{}},useSyncExternalStoreWithSelector_production={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreWithSelector_production;function requireUseSyncExternalStoreWithSelector_production(){if(hasRequiredUseSyncExternalStoreWithSelector_production)return useSyncExternalStoreWithSelector_production;hasRequiredUseSyncExternalStoreWithSelector_production=1;var t=requireReact();function e(w,v){return w===v&&(w!==0||1/w===1/v)||w!==w&&v!==v}var n=typeof Object.is=="function"?Object.is:e,i=t.useSyncExternalStore,l=t.useRef,f=t.useEffect,p=t.useMemo,b=t.useDebugValue;return useSyncExternalStoreWithSelector_production.useSyncExternalStoreWithSelector=function(w,v,g,u,o){var h=l(null);if(h.current===null){var _={hasValue:!1,value:null};h.current=_}else _=h.current;h=p(function(){function T(R){if(!O){if(O=!0,j=R,R=u(R),o!==void 0&&_.hasValue){var I=_.value;if(o(I,R))return C=I}return C=R}if(I=C,n(j,R))return I;var $=u(R);return o!==void 0&&o(I,$)?(j=R,I):(j=R,C=$)}var O=!1,j,C,D=g===void 0?null:g;return[function(){return T(v())},D===null?void 0:function(){return T(D())}]},[v,g,u,o]);var S=i(w,h[0],h[1]);return f(function(){_.hasValue=!0,_.value=S},[S]),b(S),S},useSyncExternalStoreWithSelector_production}var hasRequiredWithSelector;function requireWithSelector(){return hasRequiredWithSelector||(hasRequiredWithSelector=1,withSelector.exports=requireUseSyncExternalStoreWithSelector_production()),withSelector.exports}requireWithSelector();function defaultNoopBatch(t){t()}function createListenerCollection(){let t=null,e=null;return{clear(){t=null,e=null},notify(){defaultNoopBatch(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=t;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const l=e={callback:n,next:null,prev:e};return l.prev?l.prev.next=l:t=l,function(){!i||t===null||(i=!1,l.next?l.next.prev=l.prev:e=l.prev,l.prev?l.prev.next=l.next:t=l.next)}}}}var nullListeners={notify(){},get:()=>[]};function createSubscription(t,e){let n,i=nullListeners,l=0,f=!1;function p(S){g();const T=i.subscribe(S);let O=!1;return()=>{O||(O=!0,T(),u())}}function b(){i.notify()}function w(){_.onStateChange&&_.onStateChange()}function v(){return f}function g(){l++,n||(n=t.subscribe(w),i=createListenerCollection())}function u(){l--,n&&l===0&&(n(),n=void 0,i.clear(),i=nullListeners)}function o(){f||(f=!0,g())}function h(){f&&(f=!1,u())}const _={addNestedSub:p,notifyNestedSubs:b,handleChangeWrapper:w,isSubscribed:v,trySubscribe:o,tryUnsubscribe:h,getListeners:()=>i};return _}var canUseDOM=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isDOM=canUseDOM(),isRunningInReactNative=()=>typeof navigator<"u"&&navigator.product==="ReactNative",isReactNative=isRunningInReactNative(),getUseIsomorphicLayoutEffect=()=>isDOM||isReactNative?reactExports.useLayoutEffect:reactExports.useEffect,useIsomorphicLayoutEffect=getUseIsomorphicLayoutEffect(),ContextKey=Symbol.for("react-redux-context"),gT=typeof globalThis<"u"?globalThis:{};function getContext(){if(!reactExports.createContext)return{};const t=gT[ContextKey]??(gT[ContextKey]=new Map);let e=t.get(reactExports.createContext);return e||(e=reactExports.createContext(null),t.set(reactExports.createContext,e)),e}var ReactReduxContext=getContext();function Provider(t){const{children:e,context:n,serverState:i,store:l}=t,f=reactExports.useMemo(()=>{const w=createSubscription(l);return{store:l,subscription:w,getServerState:i?()=>i:void 0}},[l,i]),p=reactExports.useMemo(()=>l.getState(),[l]);useIsomorphicLayoutEffect(()=>{const{subscription:w}=f;return w.onStateChange=w.notifyNestedSubs,w.trySubscribe(),p!==l.getState()&&w.notifyNestedSubs(),()=>{w.tryUnsubscribe(),w.onStateChange=void 0}},[f,p]);const b=n||ReactReduxContext;return reactExports.createElement(b.Provider,{value:f},e)}var Provider_default=Provider,pickChartPointer=(t,e)=>e,selectActivePropsFromChartPointer=createSelector([pickChartPointer,selectChartLayout,selectPolarViewBox,selectTooltipAxisType,selectTooltipAxisRangeWithReverse,selectTooltipAxisTicks,selectOrderedTooltipTicks,selectChartOffsetInternal],combineActiveProps),getChartPointer=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,i=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/i)}},mouseClickAction=createAction("mouseClick"),mouseClickMiddleware=createListenerMiddleware();mouseClickMiddleware.startListening({actionCreator:mouseClickAction,effect:(t,e)=>{var n=t.payload,i=selectActivePropsFromChartPointer(e.getState(),getChartPointer(n));(i==null?void 0:i.activeIndex)!=null&&e.dispatch(setMouseClickAxisIndex({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var mouseMoveAction=createAction("mouseMove"),mouseMoveMiddleware=createListenerMiddleware();mouseMoveMiddleware.startListening({actionCreator:mouseMoveAction,effect:(t,e)=>{var n=t.payload,i=e.getState(),l=selectTooltipEventType$1(i,i.tooltip.settings.shared),f=selectActivePropsFromChartPointer(i,getChartPointer(n));l==="axis"&&((f==null?void 0:f.activeIndex)!=null?e.dispatch(setMouseOverAxisIndex({activeIndex:f.activeIndex,activeDataKey:void 0,activeCoordinate:f.activeCoordinate})):e.dispatch(mouseLeaveChart()))}});var initialState={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},rootPropsSlice=createSlice({name:"rootProps",initialState,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:initialState.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),rootPropsReducer=rootPropsSlice.reducer,{updateOptions}=rootPropsSlice.actions,polarOptionsSlice=createSlice({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions}=polarOptionsSlice.actions,polarOptionsReducer=polarOptionsSlice.reducer,keyDownAction=createAction("keyDown"),focusAction=createAction("focus"),keyboardEventsMiddleware=createListenerMiddleware();keyboardEventsMiddleware.startListening({actionCreator:keyDownAction,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:l}=n.tooltip,f=t.payload;if(!(f!=="ArrowRight"&&f!=="ArrowLeft"&&f!=="Enter")){var p=Number(combineActiveTooltipIndex(l,selectTooltipDisplayedData(n))),b=selectTooltipAxisTicks(n);if(f==="Enter"){var w=selectCoordinateForDefaultIndex(n,"axis","hover",String(l.index));e.dispatch(setKeyboardInteraction({active:!l.active,activeIndex:l.index,activeDataKey:l.dataKey,activeCoordinate:w}));return}var v=selectChartDirection(n),g=v==="left-to-right"?1:-1,u=f==="ArrowRight"?1:-1,o=p+u*g;if(!(b==null||o>=b.length||o<0)){var h=selectCoordinateForDefaultIndex(n,"axis","hover",String(o));e.dispatch(setKeyboardInteraction({active:!0,activeIndex:o.toString(),activeDataKey:void 0,activeCoordinate:h}))}}}}});keyboardEventsMiddleware.startListening({actionCreator:focusAction,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:l}=n.tooltip;if(!l.active&&l.index==null){var f="0",p=selectCoordinateForDefaultIndex(n,"axis","hover",String(f));e.dispatch(setKeyboardInteraction({activeDataKey:void 0,active:!0,activeIndex:f,activeCoordinate:p}))}}}});var externalEventAction=createAction("externalEvent"),externalEventsMiddleware=createListenerMiddleware();externalEventsMiddleware.startListening({actionCreator:externalEventAction,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),i={activeCoordinate:selectActiveTooltipCoordinate(n),activeDataKey:selectActiveTooltipDataKey(n),activeIndex:selectActiveTooltipIndex(n),activeLabel:selectActiveLabel$1(n),activeTooltipIndex:selectActiveTooltipIndex(n),isTooltipActive:selectIsTooltipActive$1(n)};t.payload.handler(i,t.payload.reactEvent)}}});var selectAllTooltipPayloadConfiguration=createSelector([selectTooltipState],t=>t.tooltipItemPayloads),selectTooltipCoordinate=createSelector([selectAllTooltipPayloadConfiguration,selectTooltipPayloadSearcher,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,i)=>{var l=t.find(b=>b.settings.dataKey===i);if(l!=null){var{positions:f}=l;if(f!=null){var p=e(f,n);return p}}}),touchEventAction=createAction("touchMove"),touchEventMiddleware=createListenerMiddleware();touchEventMiddleware.startListening({actionCreator:touchEventAction,effect:(t,e)=>{var n=t.payload,i=e.getState(),l=selectTooltipEventType$1(i,i.tooltip.settings.shared);if(l==="axis"){var f=selectActivePropsFromChartPointer(i,getChartPointer({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(f==null?void 0:f.activeIndex)!=null&&e.dispatch(setMouseOverAxisIndex({activeIndex:f.activeIndex,activeDataKey:void 0,activeCoordinate:f.activeCoordinate}))}else if(l==="item"){var p,b=n.touches[0],w=document.elementFromPoint(b.clientX,b.clientY);if(!w||!w.getAttribute)return;var v=w.getAttribute(DATA_ITEM_INDEX_ATTRIBUTE_NAME),g=(p=w.getAttribute(DATA_ITEM_DATAKEY_ATTRIBUTE_NAME))!==null&&p!==void 0?p:void 0,u=selectTooltipCoordinate(e.getState(),v,g);e.dispatch(setActiveMouseOverItemIndex({activeDataKey:g,activeIndex:v,activeCoordinate:u}))}}});var rootReducer=combineReducers({brush:brushReducer,cartesianAxis:cartesianAxisReducer,chartData:chartDataReducer,errorBars:errorBarReducer,graphicalItems:graphicalItemsReducer,layout:chartLayoutReducer,legend:legendReducer,options:optionsReducer,polarAxis:polarAxisReducer,polarOptions:polarOptionsReducer,referenceElements:referenceElementsReducer,rootProps:rootPropsReducer,tooltip:tooltipReducer}),createRechartsStore=function t(e){return configureStore({reducer:rootReducer,preloadedState:e,middleware:n=>n({serializableCheck:!1}).concat([mouseClickMiddleware.middleware,mouseMoveMiddleware.middleware,keyboardEventsMiddleware.middleware,externalEventsMiddleware.middleware,touchEventMiddleware.middleware]),enhancers:n=>{var i=n;return typeof n=="function"&&(i=n()),i.concat(autoBatchEnhancer({type:"raf"}))},devTools:Global.devToolsEnabled})};function RechartsStoreProvider(t){var{preloadedState:e,children:n,reduxStoreName:i}=t,l=useIsPanorama(),f=reactExports.useRef(null);if(l)return n;f.current==null&&(f.current=createRechartsStore(e));var p=RechartsReduxContext;return reactExports.createElement(Provider_default,{context:p,store:f.current},n)}function ReportMainChartProps(t){var{layout:e,margin:n}=t,i=useAppDispatch(),l=useIsPanorama();return reactExports.useEffect(()=>{l||(i(setLayout(e)),i(setMargin(n)))},[i,l,e,n]),null}function ReportChartProps(t){var e=useAppDispatch();return reactExports.useEffect(()=>{e(updateOptions(t))},[e,t]),null}var _excluded$2=["children"];function _objectWithoutProperties$2(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$2(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$2(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$3.apply(null,arguments)}var FULL_WIDTH_AND_HEIGHT={width:"100%",height:"100%",display:"block"},MainChartSurface=reactExports.forwardRef((t,e)=>{var n=useChartWidth(),i=useChartHeight(),l=useAccessibilityLayer();if(!isPositiveNumber(n)||!isPositiveNumber(i))return null;var{children:f,otherAttributes:p,title:b,desc:w}=t,v,g;return typeof p.tabIndex=="number"?v=p.tabIndex:v=l?0:void 0,typeof p.role=="string"?g=p.role:g=l?"application":void 0,reactExports.createElement(Surface,_extends$3({},p,{title:b,desc:w,role:g,tabIndex:v,width:n,height:i,style:FULL_WIDTH_AND_HEIGHT,ref:e}),f)}),BrushPanoramaSurface=t=>{var{children:e}=t,n=useAppSelector(selectBrushDimensions);if(!n)return null;var{width:i,height:l,y:f,x:p}=n;return reactExports.createElement(Surface,{width:i,height:l,x:p,y:f},e)},RootSurface=reactExports.forwardRef((t,e)=>{var{children:n}=t,i=_objectWithoutProperties$2(t,_excluded$2),l=useIsPanorama();return l?reactExports.createElement(BrushPanoramaSurface,null,n):reactExports.createElement(MainChartSurface,_extends$3({ref:e},i),n)});function useReportScale(){var t=useAppDispatch(),[e,n]=reactExports.useState(null),i=useAppSelector(selectContainerScale);return reactExports.useEffect(()=>{if(e!=null){var l=e.getBoundingClientRect(),f=l.width/e.offsetWidth;isWellBehavedNumber(f)&&f!==i&&t(setScale(f))}},[e,t,i]),n}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(i){_defineProperty(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty(t,e,n){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$2.apply(null,arguments)}var EventSynchronizer=()=>(useSynchronisedEventsFromOtherCharts(),null);function getNumberOrZero(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var ResponsiveDiv=reactExports.forwardRef((t,e)=>{var n,i,l=reactExports.useRef(null),[f,p]=reactExports.useState({containerWidth:getNumberOrZero((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:getNumberOrZero((i=t.style)===null||i===void 0?void 0:i.height)}),b=reactExports.useCallback((v,g)=>{p(u=>{var o=Math.round(v),h=Math.round(g);return u.containerWidth===o&&u.containerHeight===h?u:{containerWidth:o,containerHeight:h}})},[]),w=reactExports.useCallback(v=>{if(typeof e=="function"&&e(v),v!=null){var{width:g,height:u}=v.getBoundingClientRect();b(g,u);var o=_=>{var{width:S,height:T}=_[0].contentRect;b(S,T)},h=new ResizeObserver(o);h.observe(v),l.current=h}},[e,b]);return reactExports.useEffect(()=>()=>{var v=l.current;v!=null&&v.disconnect()},[b]),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:f.containerWidth,height:f.containerHeight}),reactExports.createElement("div",_extends$2({ref:w},t)))}),ReadSizeOnceDiv=reactExports.forwardRef((t,e)=>{var{width:n,height:i}=t,[l,f]=reactExports.useState({containerWidth:getNumberOrZero(n),containerHeight:getNumberOrZero(i)}),p=reactExports.useCallback((w,v)=>{f(g=>{var u=Math.round(w),o=Math.round(v);return g.containerWidth===u&&g.containerHeight===o?g:{containerWidth:u,containerHeight:o}})},[]),b=reactExports.useCallback(w=>{if(typeof e=="function"&&e(w),w!=null){var{width:v,height:g}=w.getBoundingClientRect();p(v,g)}},[e,p]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:l.containerWidth,height:l.containerHeight}),reactExports.createElement("div",_extends$2({ref:b},t)))}),StaticDiv=reactExports.forwardRef((t,e)=>{var{width:n,height:i}=t;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:n,height:i}),reactExports.createElement("div",_extends$2({ref:e},t)))}),NonResponsiveDiv=reactExports.forwardRef((t,e)=>{var{width:n,height:i}=t;return isPercent(n)||isPercent(i)?reactExports.createElement(ReadSizeOnceDiv,_extends$2({},t,{ref:e})):reactExports.createElement(StaticDiv,_extends$2({},t,{ref:e}))});function getWrapperDivComponent(t){return t===!0?ResponsiveDiv:NonResponsiveDiv}var RechartsWrapper=reactExports.forwardRef((t,e)=>{var{children:n,className:i,height:l,onClick:f,onContextMenu:p,onDoubleClick:b,onMouseDown:w,onMouseEnter:v,onMouseLeave:g,onMouseMove:u,onMouseUp:o,onTouchEnd:h,onTouchMove:_,onTouchStart:S,style:T,width:O,responsive:j,dispatchTouchEvents:C=!0}=t,D=reactExports.useRef(null),R=useAppDispatch(),[I,$]=reactExports.useState(null),[F,L]=reactExports.useState(null),V=useReportScale(),Y=useResponsiveContainerContext(),Q=(Y==null?void 0:Y.width)>0?Y.width:O,ee=(Y==null?void 0:Y.height)>0?Y.height:l,X=reactExports.useCallback(se=>{V(se),typeof e=="function"&&e(se),$(se),L(se),se!=null&&(D.current=se)},[V,e,$,L]),W=reactExports.useCallback(se=>{R(mouseClickAction(se)),R(externalEventAction({handler:f,reactEvent:se}))},[R,f]),z=reactExports.useCallback(se=>{R(mouseMoveAction(se)),R(externalEventAction({handler:v,reactEvent:se}))},[R,v]),q=reactExports.useCallback(se=>{R(mouseLeaveChart()),R(externalEventAction({handler:g,reactEvent:se}))},[R,g]),ce=reactExports.useCallback(se=>{R(mouseMoveAction(se)),R(externalEventAction({handler:u,reactEvent:se}))},[R,u]),ae=reactExports.useCallback(()=>{R(focusAction())},[R]),we=reactExports.useCallback(se=>{R(keyDownAction(se.key))},[R]),Z=reactExports.useCallback(se=>{R(externalEventAction({handler:p,reactEvent:se}))},[R,p]),ue=reactExports.useCallback(se=>{R(externalEventAction({handler:b,reactEvent:se}))},[R,b]),Pe=reactExports.useCallback(se=>{R(externalEventAction({handler:w,reactEvent:se}))},[R,w]),Re=reactExports.useCallback(se=>{R(externalEventAction({handler:o,reactEvent:se}))},[R,o]),pe=reactExports.useCallback(se=>{R(externalEventAction({handler:S,reactEvent:se}))},[R,S]),Ae=reactExports.useCallback(se=>{C&&R(touchEventAction(se)),R(externalEventAction({handler:_,reactEvent:se}))},[R,C,_]),Ce=reactExports.useCallback(se=>{R(externalEventAction({handler:h,reactEvent:se}))},[R,h]),$e=getWrapperDivComponent(j);return reactExports.createElement(TooltipPortalContext.Provider,{value:I},reactExports.createElement(LegendPortalContext.Provider,{value:F},reactExports.createElement($e,{width:Q??(T==null?void 0:T.width),height:ee??(T==null?void 0:T.height),className:clsx("recharts-wrapper",i),style:_objectSpread({position:"relative",cursor:"default",width:Q,height:ee},T),onClick:W,onContextMenu:Z,onDoubleClick:ue,onFocus:ae,onKeyDown:we,onMouseDown:Pe,onMouseEnter:z,onMouseLeave:q,onMouseMove:ce,onMouseUp:Re,onTouchEnd:Ce,onTouchMove:Ae,onTouchStart:pe,ref:X},reactExports.createElement(EventSynchronizer,null),n)))}),_excluded$1=["width","height","responsive","children","className","style","compact","title","desc"];function _objectWithoutProperties$1(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose$1(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose$1(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var CategoricalChart=reactExports.forwardRef((t,e)=>{var{width:n,height:i,responsive:l,children:f,className:p,style:b,compact:w,title:v,desc:g}=t,u=_objectWithoutProperties$1(t,_excluded$1),o=svgPropertiesNoEvents(u);return w?reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:n,height:i}),reactExports.createElement(RootSurface,{otherAttributes:o,title:v,desc:g},f)):reactExports.createElement(RechartsWrapper,{className:p,style:b,width:n,height:i,responsive:l,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},reactExports.createElement(RootSurface,{otherAttributes:o,title:v,desc:g,ref:e},reactExports.createElement(ClipPathProvider,null,f)))});function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$1.apply(null,arguments)}var defaultMargin$1={top:5,right:5,bottom:5,left:5},defaultProps$2={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:defaultMargin$1,reverseStackOrder:!1,syncMethod:"index",responsive:!1},CartesianChart=reactExports.forwardRef(function t(e,n){var i,l=resolveDefaultProps(e.categoricalChartProps,defaultProps$2),{chartName:f,defaultTooltipEventType:p,validateTooltipEventTypes:b,tooltipPayloadSearcher:w,categoricalChartProps:v}=e,g={chartName:f,defaultTooltipEventType:p,validateTooltipEventTypes:b,tooltipPayloadSearcher:w,eventEmitter:void 0};return reactExports.createElement(RechartsStoreProvider,{preloadedState:{options:g},reduxStoreName:(i=v.id)!==null&&i!==void 0?i:f},reactExports.createElement(ChartDataContextProvider,{chartData:v.data}),reactExports.createElement(ReportMainChartProps,{layout:l.layout,margin:l.margin}),reactExports.createElement(ReportChartProps,{accessibilityLayer:l.accessibilityLayer,barCategoryGap:l.barCategoryGap,maxBarSize:l.maxBarSize,stackOffset:l.stackOffset,barGap:l.barGap,barSize:l.barSize,syncId:l.syncId,syncMethod:l.syncMethod,className:l.className}),reactExports.createElement(CategoricalChart,_extends$1({},l,{ref:n})))}),allowedTooltipTypes$4=["axis"],LineChart=reactExports.forwardRef((t,e)=>reactExports.createElement(CartesianChart,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:allowedTooltipTypes$4,tooltipPayloadSearcher:arrayTooltipSearcher,categoricalChartProps:t,ref:e})),allowedTooltipTypes$3=["axis","item"],BarChart=reactExports.forwardRef((t,e)=>reactExports.createElement(CartesianChart,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:allowedTooltipTypes$3,tooltipPayloadSearcher:arrayTooltipSearcher,categoricalChartProps:t,ref:e}));function ReportPolarOptions(t){var e=useAppDispatch();return reactExports.useEffect(()=>{e(updatePolarOptions(t))},[e,t]),null}var _excluded=["layout"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends.apply(null,arguments)}function _objectWithoutProperties(t,e){if(t==null)return{};var n,i,l=_objectWithoutPropertiesLoose(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)n=f[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}function _objectWithoutPropertiesLoose(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var defaultMargin={top:5,right:5,bottom:5,left:5},defaultProps$1={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:defaultMargin,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},PolarChart=reactExports.forwardRef(function t(e,n){var i,l=resolveDefaultProps(e.categoricalChartProps,defaultProps$1),{layout:f}=l,p=_objectWithoutProperties(l,_excluded),{chartName:b,defaultTooltipEventType:w,validateTooltipEventTypes:v,tooltipPayloadSearcher:g}=e,u={chartName:b,defaultTooltipEventType:w,validateTooltipEventTypes:v,tooltipPayloadSearcher:g,eventEmitter:void 0};return reactExports.createElement(RechartsStoreProvider,{preloadedState:{options:u},reduxStoreName:(i=l.id)!==null&&i!==void 0?i:b},reactExports.createElement(ChartDataContextProvider,{chartData:l.data}),reactExports.createElement(ReportMainChartProps,{layout:f,margin:l.margin}),reactExports.createElement(ReportChartProps,{accessibilityLayer:l.accessibilityLayer,barCategoryGap:l.barCategoryGap,maxBarSize:l.maxBarSize,stackOffset:l.stackOffset,barGap:l.barGap,barSize:l.barSize,syncId:l.syncId,syncMethod:l.syncMethod,className:l.className}),reactExports.createElement(ReportPolarOptions,{cx:l.cx,cy:l.cy,startAngle:l.startAngle,endAngle:l.endAngle,innerRadius:l.innerRadius,outerRadius:l.outerRadius}),reactExports.createElement(CategoricalChart,_extends({},p,{ref:n})))}),allowedTooltipTypes$2=["item"],defaultProps={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},PieChart=reactExports.forwardRef((t,e)=>{var n=resolveDefaultProps(t,defaultProps);return reactExports.createElement(PolarChart,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:allowedTooltipTypes$2,tooltipPayloadSearcher:arrayTooltipSearcher,categoricalChartProps:n,ref:e})}),allowedTooltipTypes$1=["axis"],AreaChart=reactExports.forwardRef((t,e)=>reactExports.createElement(CartesianChart,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:allowedTooltipTypes$1,tooltipPayloadSearcher:arrayTooltipSearcher,categoricalChartProps:t,ref:e})),allowedTooltipTypes=["axis"],ComposedChart=reactExports.forwardRef((t,e)=>reactExports.createElement(CartesianChart,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:allowedTooltipTypes,tooltipPayloadSearcher:arrayTooltipSearcher,categoricalChartProps:t,ref:e}));const FourPillars=({section:t})=>{if(t.content.type!=="summary")return null;const e=[{metric:"Industry Avg",retention:70,revenue:100},{metric:"VisuSewer",retention:95,revenue:115}],n=[{category:"Standard",value:100},{category:"Premium (10%)",value:110},{category:"Premium (15%)",value:115}],i=[{metric:"Industry",onTime:85,retention:60},{metric:"VisuSewer",onTime:98,retention:95}],l=[{source:"Marketing",value:50,color:"#ef4444"},{source:"Referrals",value:50,color:"#10b981"}];return jsxRuntimeExports.jsxs("div",{className:"p-6 md:p-8 h-full flex flex-col justify-center bg-gradient-to-br from-blue-50 to-white overflow-hidden",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-3 text-center",children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-4 max-w-4xl mx-auto text-center",children:t.narrative}),jsxRuntimeExports.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-3 rounded-r-lg shadow-md max-w-4xl mx-auto mb-4",children:jsxRuntimeExports.jsx("p",{className:"text-base font-bold text-blue-800 italic text-center",children:t.content.message})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4 gap-3 flex-grow",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl border-2 border-blue-300 shadow-lg p-3",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-center text-blue-800 mb-2 text-xs",children:"Responsiveness Impact"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"70%",minWidth:0,minHeight:0,children:jsxRuntimeExports.jsxs(BarChart,{data:e,margin:{top:5,right:5,left:-20,bottom:30},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"metric",tick:{fontSize:8},angle:-15,textAnchor:"end",height:40}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:9},label:{value:"%",angle:-90,position:"insideLeft",style:{fontSize:9}}}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:"10px"}}),jsxRuntimeExports.jsx(Bar,{dataKey:"retention",fill:"#3b82f6",name:"Retention %",radius:[8,8,0,0]})]})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-700 leading-tight mt-2 px-1",children:[jsxRuntimeExports.jsx("strong",{className:"text-blue-600",children:"95% retention"})," vs 70% industry avg = ",jsxRuntimeExports.jsx("strong",{children:"$15M revenue"})," difference. <2hr response time, 24/7 availability."]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl border-2 border-green-300 shadow-lg p-3",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-center text-green-800 mb-2 text-xs",children:"Integrity Premium"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"70%",minWidth:0,minHeight:0,children:jsxRuntimeExports.jsxs(LineChart,{data:n,margin:{top:5,right:5,left:-20,bottom:30},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"category",tick:{fontSize:8},angle:-15,textAnchor:"end",height:40}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:9},domain:[95,120],label:{value:"Index",angle:-90,position:"insideLeft",style:{fontSize:9}}}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:"10px"}}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"value",stroke:"#10b981",strokeWidth:3,dot:{r:4,fill:"#10b981"}})]})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-700 leading-tight mt-2 px-1",children:[jsxRuntimeExports.jsx("strong",{className:"text-green-600",children:"10-15% premium pricing"})," = ",jsxRuntimeExports.jsx("strong",{children:"$5-10M profit"})," uplift. 0% report revisions, clients trust accuracy."]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl border-2 border-orange-300 shadow-lg p-3",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-center text-orange-800 mb-2 text-xs",children:"Dedication Metrics"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"70%",minWidth:0,minHeight:0,children:jsxRuntimeExports.jsxs(BarChart,{data:i,margin:{top:5,right:5,left:-20,bottom:30},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"metric",tick:{fontSize:8},angle:-15,textAnchor:"end",height:40}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:9},label:{value:"%",angle:-90,position:"insideLeft",style:{fontSize:9}}}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:"10px"}}),jsxRuntimeExports.jsx(Bar,{dataKey:"onTime",fill:"#f59e0b",name:"On-Time %",radius:[8,8,0,0]})]})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-700 leading-tight mt-2 px-1",children:[jsxRuntimeExports.jsx("strong",{className:"text-orange-600",children:"98% on-time delivery"}),", work in blizzards. 95% retention = ",jsxRuntimeExports.jsx("strong",{children:"$2M annual"})," savings."]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl border-2 border-purple-300 shadow-lg p-3",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-center text-purple-800 mb-2 text-xs",children:"Reputation Power"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"70%",minWidth:0,minHeight:0,children:jsxRuntimeExports.jsxs(BarChart,{data:l,margin:{top:5,right:5,left:-20,bottom:30},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"source",tick:{fontSize:8},angle:-15,textAnchor:"end",height:40}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:9},label:{value:"%",angle:-90,position:"insideLeft",style:{fontSize:9}}}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:"10px"},formatter:f=>`${f}%`}),jsxRuntimeExports.jsx(Bar,{dataKey:"value",radius:[8,8,0,0],children:l.map((f,p)=>jsxRuntimeExports.jsx(Cell,{fill:f.color},`cell-${p}`))})]})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-700 leading-tight mt-2 px-1",children:[jsxRuntimeExports.jsx("strong",{className:"text-purple-600",children:"50% referral-based"})," revenue, NPS >70. Last job is next pitch = ",jsxRuntimeExports.jsx("strong",{children:"$3M marketing"})," savings."]})]})]})]})},FourTests=({section:t})=>t.content.type!=="summary"?null:jsxRuntimeExports.jsxs("div",{className:"h-full relative overflow-hidden",children:[jsxRuntimeExports.jsx("img",{src:"/images/feild-project-work.png",alt:"Background - Field project work","aria-hidden":!0,className:"absolute inset-0 w-full h-full object-cover saturate-125 contrast-110 brightness-105"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/70 via-white/55 to-white/40","aria-hidden":!0}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 h-full flex flex-col p-6 md:p-8",children:[jsxRuntimeExports.jsx("header",{className:"mb-4",children:jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-amber-900 drop-shadow-sm text-center md:text-left",children:t.title})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[jsxRuntimeExports.jsxs("div",{className:"relative max-w-4xl w-full mb-6",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-lg bg-white/85 backdrop-blur-sm shadow-md","aria-hidden":!0}),jsxRuntimeExports.jsx("p",{className:"relative text-lg leading-relaxed text-gray-900 font-medium px-6 py-5 drop-shadow-sm",dangerouslySetInnerHTML:{__html:t.narrative}})]}),jsxRuntimeExports.jsx("div",{className:"bg-blue-50/95 border-l-4 border-blue-600 p-5 rounded-r-lg shadow-lg max-w-3xl w-full backdrop-blur-sm",children:jsxRuntimeExports.jsxs("p",{className:"text-lg font-bold text-blue-900 italic",children:['"',t.content.message,'"']})}),jsxRuntimeExports.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4 max-w-4xl w-full",children:t.content.points.map((e,n)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start bg-white/90 rounded-md p-4 shadow backdrop-blur-sm",children:[jsxRuntimeExports.jsx("svg",{className:"h-5 w-5 text-amber-600 mr-3 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),jsxRuntimeExports.jsx("p",{className:"text-gray-900 leading-relaxed text-sm md:text-base",children:e})]},n))})]})]})]}),Index=({section:t})=>{if(t.content.type!=="index")return null;const{sections:e}=t.content;return jsxRuntimeExports.jsxs("div",{className:"p-6 md:p-8 h-full flex flex-col justify-center bg-gradient-to-br from-blue-50 to-white",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-3",children:"Presentation Roadmap"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-600 max-w-4xl mx-auto",children:t.narrative})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-7xl mx-auto overflow-y-auto max-h-[calc(100vh-250px)]",children:e.map(n=>jsxRuntimeExports.jsx("div",{className:"index-card bg-white rounded-lg shadow-md p-4 border-l-4 border-blue-500 hover:shadow-xl transition-all duration-300 opacity-0",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-lg",children:n.id}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-gray-800 text-base mb-2",children:n.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 leading-snug",children:n.description})]})]})},n.id))}),jsxRuntimeExports.jsx("div",{className:"text-center mt-6 text-sm text-gray-500",children:"Use navigation arrows to explore each section in detail"})]})},LoveStoryCraft=({section:t})=>t.content.type!=="summary"?null:jsxRuntimeExports.jsx("div",{className:"h-full flex flex-col",children:jsxRuntimeExports.jsx("div",{className:"flex-1 p-4 md:p-6 overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-start h-full",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-3 h-full flex flex-col",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2 md:mb-3 text-center md:text-left",children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-base md:text-lg text-gray-700 mb-4 md:mb-5",dangerouslySetInnerHTML:{__html:t.narrative}}),jsxRuntimeExports.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 md:p-5 rounded-r-lg shadow-md",children:jsxRuntimeExports.jsxs("p",{className:"text-lg md:text-xl font-bold text-amber-800 italic",children:['"',t.content.message,'"']})}),jsxRuntimeExports.jsx("div",{className:"mt-4 md:mt-5 grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-5",children:t.content.points.map((e,n)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start bg-white rounded-lg p-3 md:p-4 shadow border border-gray-200",children:[jsxRuntimeExports.jsx("svg",{className:"h-6 w-6 text-amber-600 mr-3 mt-1 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),jsxRuntimeExports.jsx("p",{className:"text-gray-800 leading-snug text-sm md:text-base",children:e})]},n))}),jsxRuntimeExports.jsx("div",{className:"mt-auto"})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 h-full flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-xl overflow-hidden shadow border border-gray-200 bg-white",children:jsxRuntimeExports.jsx("img",{src:"/images/feild-technician-top-man.png",alt:"Field Technician  top man",className:"w-full h-full object-cover saturate-125 contrast-110 brightness-105"})}),jsxRuntimeExports.jsx("span",{className:"mt-2 text-xs text-gray-600",children:"Field Technician"})]})]})})}),LoveStoryFuture=({section:t})=>{if(t.content.type!=="summary")return null;const e=[{year:2020,Aegion:75,Insituform:70,VisuSewer:45},{year:2021,Aegion:85,Insituform:82,VisuSewer:50},{year:2022,Aegion:92,Insituform:90,VisuSewer:55},{year:2023,Aegion:97,Insituform:95,VisuSewer:60},{year:2024,Aegion:97,Insituform:96,VisuSewer:85},{year:2025,Aegion:98,Insituform:97,VisuSewer:96}],n=[{category:`Pre-Partnership
(2020-2023)`,Investment:150,ROI:.8},{category:`Partnership Year 1
(2024)`,Investment:1e3,ROI:2.1},{category:`Projected Year 2
(2025)`,Investment:750,ROI:3.5},{category:`Projected Year 3
(2026)`,Investment:575,ROI:4.2}],i=[{metric:`Defect
Accuracy`,Before:60,After:96,Industry:95},{metric:`Coding
Time (hrs)`,Before:10,After:.75,Industry:2},{metric:`Client
Dashboards`,Before:0,After:100,Industry:85},{metric:`Predictive
Analytics`,Before:0,After:75,Industry:60}],l=[{component:"Tech Budget",value:1e3,percentage:43},{component:"M&A Capital",value:800,percentage:34},{component:"Consulting",value:350,percentage:15},{component:"Network Access",value:200,percentage:8}];return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col bg-gradient-to-br from-purple-50 to-blue-50 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex-shrink-0 p-6 border-b-2 border-purple-200",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-purple-900",children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-purple-700 mt-2",children:t.content.message})]}),jsxRuntimeExports.jsxs("div",{className:"flex-grow grid grid-cols-2 grid-rows-2 gap-4 p-4 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-3 flex flex-col",children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-bold text-purple-800 mb-2",children:"AI Defect Detection: Closing the Gap"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(LineChart,{data:e,margin:{top:5,right:20,left:-10,bottom:5},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"year",tick:{fontSize:11}}),jsxRuntimeExports.jsx(YAxis,{label:{value:"Accuracy %",angle:-90,position:"insideLeft",fontSize:11},tick:{fontSize:11}}),jsxRuntimeExports.jsx(Tooltip,{}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{fontSize:"11px"}}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"Aegion",stroke:"#ef4444",strokeWidth:2}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"Insituform",stroke:"#f97316",strokeWidth:2}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"VisuSewer",stroke:"#8b5cf6",strokeWidth:3})]})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-700 mt-2",children:["Competitors achieved ",jsxRuntimeExports.jsx("strong",{children:"95-97% accuracy"})," by 2023. Visu-Sewer's 2024 partnership accelerated AI adoption from 60% to ",jsxRuntimeExports.jsx("strong",{children:"96% in 12 months"}),", matching industry leaders."]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-3 flex flex-col",children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-bold text-purple-800 mb-2",children:"Partnership Investment Impact"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:n,margin:{top:5,right:20,left:-10,bottom:20},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"category",tick:{fontSize:10},angle:-10,textAnchor:"end"}),jsxRuntimeExports.jsx(YAxis,{yAxisId:"left",label:{value:"Investment ($K)",angle:-90,position:"insideLeft",fontSize:11},tick:{fontSize:11}}),jsxRuntimeExports.jsx(YAxis,{yAxisId:"right",orientation:"right",label:{value:"ROI Multiple",angle:90,position:"insideRight",fontSize:11},tick:{fontSize:11}}),jsxRuntimeExports.jsx(Tooltip,{}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{fontSize:"11px"}}),jsxRuntimeExports.jsx(Bar,{yAxisId:"left",dataKey:"Investment",fill:"#8b5cf6"}),jsxRuntimeExports.jsx(Bar,{yAxisId:"right",dataKey:"ROI",fill:"#10b981"})]})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-700 mt-2",children:["Fort Point Capital partnership unlocked ",jsxRuntimeExports.jsx("strong",{children:"$1M Year 1 budget"})," (7x pre-partnership), delivering ",jsxRuntimeExports.jsx("strong",{children:"2.1x ROI"}),". Projected 3-year cumulative investment of ",jsxRuntimeExports.jsx("strong",{children:"$2.3M"})," with escalating returns."]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-3 flex flex-col",children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-bold text-purple-800 mb-2",children:"Competitive Feature Parity Achieved"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:i,margin:{top:5,right:20,left:-10,bottom:5},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"metric",tick:{fontSize:10}}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:11}}),jsxRuntimeExports.jsx(Tooltip,{}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{fontSize:"11px"}}),jsxRuntimeExports.jsx(Bar,{dataKey:"Before",fill:"#ef4444",name:"Pre-2024"}),jsxRuntimeExports.jsx(Bar,{dataKey:"After",fill:"#8b5cf6",name:"Post-Partnership"}),jsxRuntimeExports.jsx(Bar,{dataKey:"Industry",fill:"#94a3b8",name:"Industry Avg"})]})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-700 mt-2",children:["Risk eliminated: Visu-Sewer now ",jsxRuntimeExports.jsx("strong",{children:"matches or exceeds"})," competitor capabilities across all technology dimensions. Coding time reduced ",jsxRuntimeExports.jsx("strong",{children:"13x"})," (10hrs  0.75hrs), maintaining premium craftsmanship with digital speed."]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-3 flex flex-col",children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-bold text-purple-800 mb-2",children:"Fort Point Capital Value Creation"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:l,layout:"vertical",margin:{top:5,right:20,left:60,bottom:5},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{type:"number",label:{value:"Value ($K)",position:"bottom",fontSize:11},tick:{fontSize:11}}),jsxRuntimeExports.jsx(YAxis,{type:"category",dataKey:"component",tick:{fontSize:11}}),jsxRuntimeExports.jsx(Tooltip,{}),jsxRuntimeExports.jsx(Bar,{dataKey:"value",fill:"#8b5cf6",children:l.map((f,p)=>jsxRuntimeExports.jsxs("text",{x:"50%",y:"50%",fill:"white",fontSize:10,textAnchor:"middle",children:[f.percentage,"%"]},p))})]})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-700 mt-2",children:[jsxRuntimeExports.jsx("strong",{children:"$2.35M total value"})," from Fort Point partnership ($2B AUM): Technology funding (43%), M&A capital access (34%), operational consulting (15%), and industry network (8%). Culture preservation was non-negotiable condition."]})]})]})]})},LoveStoryLegacy=({section:t})=>{if(t.content.type!=="summary")return null;const e=[{year:2025,revenue:37,target:40},{year:2026,revenue:48,target:52},{year:2027,revenue:58,target:62},{year:2028,revenue:68,target:72},{year:2029,revenue:78,target:80},{year:2030,revenue:85,target:85},{year:2032,revenue:105,target:110},{year:2034,revenue:130,target:135},{year:2035,revenue:150,target:150},{year:2038,revenue:195,target:200},{year:2041,revenue:245,target:250},{year:2045,revenue:300,target:300}],n=[{year:2025,EBITDA:18,Recurring:15},{year:2027,EBITDA:20,Recurring:20},{year:2030,EBITDA:24,Recurring:28},{year:2032,EBITDA:26,Recurring:34},{year:2035,EBITDA:28,Recurring:40},{year:2038,EBITDA:30,Recurring:45},{year:2041,EBITDA:32,Recurring:48},{year:2045,EBITDA:34,Recurring:50}],i=[{year:2030,International:2,ESGScore:55},{year:2032,International:5,ESGScore:62},{year:2035,International:10,ESGScore:70},{year:2038,International:14,ESGScore:78},{year:2041,International:17,ESGScore:85},{year:2045,International:20,ESGScore:90}];return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col bg-linear-to-br from-indigo-50 to-purple-50 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"shrink-0 p-6 border-b-2 border-indigo-200",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-indigo-900",children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-indigo-700 mt-2",children:t.content.message})]}),jsxRuntimeExports.jsxs("div",{className:"grow grid grid-cols-3 gap-4 p-4 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-3 flex flex-col",children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-bold text-indigo-800 mb-2",children:"Phase 1: National Platform (2025-2030)"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(ComposedChart,{data:e,margin:{top:5,right:20,left:-10,bottom:5},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"year",tick:{fontSize:10}}),jsxRuntimeExports.jsx(YAxis,{label:{value:"Revenue ($M)",angle:-90,position:"insideLeft",fontSize:11},tick:{fontSize:11}}),jsxRuntimeExports.jsx(Tooltip,{}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{fontSize:"11px"}}),jsxRuntimeExports.jsx(Area,{type:"monotone",dataKey:"target",fill:"#e0e7ff",stroke:"none",name:"Growth Corridor"}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"revenue",stroke:"#6366f1",strokeWidth:3,name:"Actual Revenue",dot:{r:4}})]})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-700 mt-2",children:["Technology-enabled national expansion: ",jsxRuntimeExports.jsx("strong",{children:"$37M  $85M revenue"})," (2.3x growth over 5 years). Geographic footprint expands from 6 states to 12-15 states. M&A pipeline delivers ",jsxRuntimeExports.jsx("strong",{children:"1-2 tuck-in acquisitions annually"})," (50 targets identified). EBITDA margin improves from ",jsxRuntimeExports.jsx("strong",{children:"18%  24%"}),". Client retention reaches ",jsxRuntimeExports.jsx("strong",{children:"95% vs 70% industry average"}),"."]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-3 flex flex-col",children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-bold text-indigo-800 mb-2",children:"Phase 2: Intelligence Company (2030-2035)"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(LineChart,{data:n,margin:{top:5,right:20,left:-10,bottom:5},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"year",tick:{fontSize:10}}),jsxRuntimeExports.jsx(YAxis,{label:{value:"Percentage (%)",angle:-90,position:"insideLeft",fontSize:11},tick:{fontSize:11}}),jsxRuntimeExports.jsx(Tooltip,{}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{fontSize:"11px"}}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"EBITDA",stroke:"#10b981",strokeWidth:3,name:"EBITDA Margin %",dot:{r:4}}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"Recurring",stroke:"#8b5cf6",strokeWidth:3,name:"Recurring Revenue %",dot:{r:4}})]})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-700 mt-2",children:["Predictive intelligence as core product: ",jsxRuntimeExports.jsx("strong",{children:"$85M  $150M revenue"})," (1.8x growth). Recurring revenue reaches ",jsxRuntimeExports.jsx("strong",{children:"40% of total revenue"})," via SaaS analytics, managed services, and multi-year inspection contracts. EBITDA margin expands to ",jsxRuntimeExports.jsx("strong",{children:"28%"})," (software mix). Company valuation reaches ",jsxRuntimeExports.jsx("strong",{children:"10-15x EBITDA"})," (SaaS-hybrid multiple vs 6-8x traditional services). AI platform generates ",jsxRuntimeExports.jsx("strong",{children:"$60M annual revenue"}),"."]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-3 flex flex-col",children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-bold text-indigo-800 mb-2",children:"Phase 3: Climate Resilience (2035-2045)"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:i,margin:{top:5,right:20,left:-10,bottom:5},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"year",tick:{fontSize:10}}),jsxRuntimeExports.jsx(YAxis,{yAxisId:"left",label:{value:"International %",angle:-90,position:"insideLeft",fontSize:11},tick:{fontSize:11}}),jsxRuntimeExports.jsx(YAxis,{yAxisId:"right",orientation:"right",label:{value:"ESG Score",angle:90,position:"insideRight",fontSize:11},tick:{fontSize:11}}),jsxRuntimeExports.jsx(Tooltip,{}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{fontSize:"11px"}}),jsxRuntimeExports.jsx(Bar,{yAxisId:"left",dataKey:"International",fill:"#3b82f6",name:"International Revenue %"}),jsxRuntimeExports.jsx(Bar,{yAxisId:"right",dataKey:"ESGScore",fill:"#10b981",name:"ESG Score"})]})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-700 mt-2",children:["Climate resilience leadership: ",jsxRuntimeExports.jsx("strong",{children:"$150M  $300M revenue"})," (2x growth). International operations reach ",jsxRuntimeExports.jsx("strong",{children:"20% of revenue"})," (Canada, UK, Australia partnerships). Top decile ESG performance (",jsxRuntimeExports.jsx("strong",{children:"90+ score"}),") attracts impact investors and green municipal bonds. Digital twin technology enables ",jsxRuntimeExports.jsx("strong",{children:"climate adaptation planning"})," for 500+ municipalities. Company positioned as ",jsxRuntimeExports.jsx("strong",{children:"critical infrastructure resilience advisor"})," for aging systems in extreme weather."]})]})]}),jsxRuntimeExports.jsx("div",{className:"shrink-0 bg-linear-to-r from-indigo-100 to-purple-100 p-3 border-t-2 border-indigo-300",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-center text-indigo-900 font-semibold",children:[jsxRuntimeExports.jsx("strong",{children:"The Covenant Lives On:"})," Values translated into measurable KPIs embedded in compensation and cultureensuring the covenant made underground in 1975 guides the company through 2045 and beyond."]})})]})},LoveStoryOps=({section:t})=>t.content.type!=="summary"?null:jsxRuntimeExports.jsxs("div",{className:"h-full relative overflow-hidden",children:[jsxRuntimeExports.jsx("img",{src:"/images/finished-tunnel.png",alt:"Finished tunnel infrastructure","aria-hidden":!0,className:"absolute inset-0 w-full h-full object-cover saturate-125 contrast-110 brightness-105"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-linear-to-b from-black/10 via-black/20 to-black/30","aria-hidden":!0}),jsxRuntimeExports.jsx("div",{className:"relative z-10 h-full flex items-center justify-center p-4 md:p-6",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-5xl bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl border border-white/60 px-5 py-6 md:px-8 md:py-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl md:text-3xl font-extrabold text-gray-900 mb-3 md:mb-4 text-center md:text-left",children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-base md:text-lg text-gray-800 leading-relaxed mb-4 md:mb-5",dangerouslySetInnerHTML:{__html:t.narrative}}),jsxRuntimeExports.jsxs("blockquote",{className:"text-gray-900 italic font-semibold mb-5 md:mb-6",children:["",t.content.message,""]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:t.content.points.map((e,n)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("svg",{className:"h-5 w-5 text-gray-500 mr-3 mt-0.5 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),jsxRuntimeExports.jsx("p",{className:"text-gray-800 leading-snug text-sm md:text-base",children:e})]},n))})]})})]}),Metrics=({section:t})=>{if(t.content.type!=="people_metrics")return null;const{metrics:e,image:n}=t.content,i=l=>{const f=parseFloat(l.replace(/[^0-9.]/g,""));return isNaN(f)?0:f};return jsxRuntimeExports.jsxs("div",{className:"p-6 md:p-8 h-full flex flex-col bg-linear-to-br from-gray-50 to-white",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-base text-gray-600 max-w-4xl mx-auto",children:t.narrative})]}),jsxRuntimeExports.jsxs("div",{className:`flex-1 flex flex-col ${n?"md:flex-row items-stretch":""} gap-8`,children:[n&&jsxRuntimeExports.jsx("div",{className:"md:w-1/2 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full h-full max-h-[520px]",children:[jsxRuntimeExports.jsx("img",{src:n,alt:"Human capital operations crew",className:"rounded-2xl shadow-2xl w-full h-full object-cover border border-gray-200",onError:l=>{l.currentTarget.src="/images/placeholder-crew.svg"}}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-2xl ring-1 ring-black/10 pointer-events-none"})]})}),jsxRuntimeExports.jsx("div",{className:`${n?"md:w-1/2":""} grid grid-cols-1 sm:grid-cols-2 gap-4 content-start`,children:e.map((l,f)=>{const p=i(l.current),b=i(l.target.replace(/[<>]/g,"")),w=Math.min(p/b*100,100),v=["#10b981","#3b82f6","#f59e0b","#ef4444"],g=v[f%v.length],u=f===0?"text-green-500":f===1?"text-blue-500":f===2?"text-orange-500":"text-red-500",o=[{name:"Current",value:w,fill:g},{name:"Remaining",value:100-w,fill:"#e5e7eb"}];return jsxRuntimeExports.jsxs("div",{className:`metrics-card metrics-card-${f} bg-white rounded-xl shadow-lg p-4 border border-gray-200 hover:shadow-xl transition-all duration-300 animate-fade-in-scale opacity-0 flex flex-col`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"w-24 h-24 shrink-0",children:[jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsx(PieChart,{children:jsxRuntimeExports.jsx(Pie,{data:o,cx:"50%",cy:"50%",startAngle:180,endAngle:0,innerRadius:"60%",outerRadius:"90%",dataKey:"value",animationDuration:1500,animationBegin:f*150,children:o.map((h,_)=>jsxRuntimeExports.jsx(Cell,{fill:h.fill},`cell-${_}`))})})}),jsxRuntimeExports.jsx("div",{className:"text-center -mt-6",children:jsxRuntimeExports.jsx("span",{className:`text-xl font-bold ${u}`,children:l.current})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-gray-800 text-sm mb-1",children:l.metric}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Target:"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-green-600",children:l.target})]}),jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-medium bg-gray-100 text-gray-700",children:[Math.round(w),"% of target"]})]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 leading-tight mt-auto",children:l.why})]},f)})})]})]})},MemberModal=({member:t,onClose:e})=>jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e,children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",onClick:n=>n.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[jsxRuntimeExports.jsx("img",{src:t.photoUrl,alt:t.name,className:"w-20 h-20 rounded-full border-4 border-blue-500 object-cover"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-900",children:t.name}),jsxRuntimeExports.jsx("p",{className:"text-blue-600 font-semibold",children:t.title})]})]}),t.tagline&&jsxRuntimeExports.jsxs("p",{className:"text-gray-600 italic mb-4 border-l-4 border-blue-400 pl-3 py-2 bg-blue-50 rounded",children:['"',t.tagline,'"']}),jsxRuntimeExports.jsx("button",{onClick:e,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"Close"})]})}),OrgChart=({section:t})=>{var w,v,g;const[e,n]=reactExports.useState(null);if(t.content.type!=="org_chart")return null;const{leadership:i}=t.content,l=((w=i.children)==null?void 0:w.filter(u=>u.title!=="Regional Operations"))||[],f=((g=(v=i.children)==null?void 0:v.find(u=>u.title==="Regional Operations"))==null?void 0:g.children)||[],p=[{card:"p-1.5 bg-gradient-to-br from-indigo-600 to-indigo-700 border-2 border-indigo-800 shadow",name:"text-white",title:"text-indigo-100",img:"border-white"},{card:"p-1.5 bg-gradient-to-br from-emerald-600 to-emerald-700 border-2 border-emerald-800 shadow",name:"text-white",title:"text-emerald-100",img:"border-white"},{card:"p-1.5 bg-gradient-to-br from-rose-600 to-rose-700 border-2 border-rose-800 shadow",name:"text-white",title:"text-rose-100",img:"border-white"},{card:"p-1.5 bg-gradient-to-br from-cyan-600 to-cyan-700 border-2 border-cyan-800 shadow",name:"text-white",title:"text-cyan-100",img:"border-white"},{card:"p-1.5 bg-gradient-to-br from-fuchsia-600 to-fuchsia-700 border-2 border-fuchsia-800 shadow",name:"text-white",title:"text-fuchsia-100",img:"border-white"},{card:"p-1.5 bg-gradient-to-br from-amber-500 to-amber-600 border-2 border-amber-700 shadow",name:"text-white",title:"text-amber-100",img:"border-white"},{card:"p-1.5 bg-gradient-to-br from-violet-600 to-violet-700 border-2 border-violet-800 shadow",name:"text-white",title:"text-violet-100",img:"border-white"},{card:"p-1.5 bg-gradient-to-br from-teal-600 to-teal-700 border-2 border-teal-800 shadow",name:"text-white",title:"text-teal-100",img:"border-white"}],b=[{card:"p-1.5 bg-rose-50 border border-rose-300 shadow",name:"text-gray-900",title:"text-rose-600",img:"border-rose-300"},{card:"p-1.5 bg-sky-50 border border-sky-300 shadow",name:"text-gray-900",title:"text-sky-600",img:"border-sky-300"},{card:"p-1.5 bg-emerald-50 border border-emerald-300 shadow",name:"text-gray-900",title:"text-emerald-600",img:"border-emerald-300"},{card:"p-1.5 bg-violet-50 border border-violet-300 shadow",name:"text-gray-900",title:"text-violet-600",img:"border-violet-300"},{card:"p-1.5 bg-amber-50 border border-amber-300 shadow",name:"text-gray-900",title:"text-amber-600",img:"border-amber-300"},{card:"p-1.5 bg-indigo-50 border border-indigo-300 shadow",name:"text-gray-900",title:"text-indigo-600",img:"border-indigo-300"},{card:"p-1.5 bg-lime-50 border border-lime-300 shadow",name:"text-gray-900",title:"text-lime-600",img:"border-lime-300"},{card:"p-1.5 bg-fuchsia-50 border border-fuchsia-300 shadow",name:"text-gray-900",title:"text-fuchsia-600",img:"border-fuchsia-300"},{card:"p-1.5 bg-teal-50 border border-teal-300 shadow",name:"text-gray-900",title:"text-teal-600",img:"border-teal-300"}];return jsxRuntimeExports.jsxs("div",{className:"p-2 h-full flex flex-col bg-linear-to-br from-blue-50 to-white overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-2",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-0.5",children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-[10px] text-gray-600 max-w-4xl mx-auto",children:t.narrative}),jsxRuntimeExports.jsx("p",{className:"text-[9px] text-blue-600 font-semibold mt-0.5",children:" Click any member for details"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-3",children:jsxRuntimeExports.jsxs("div",{onClick:()=>n(i),className:"p-2 bg-linear-to-br from-blue-600 to-blue-700 border-2 border-blue-800 shadow-xl rounded-lg text-center w-32 cursor-pointer hover:shadow-2xl transition-all duration-200 hover:scale-105",children:[jsxRuntimeExports.jsx("img",{src:i.photoUrl,onError:u=>{u.currentTarget.src="/src/images/placeholder-male.png"},alt:i.name,className:"w-10 h-10 rounded-full mb-1 mx-auto object-cover border-2 border-white"}),jsxRuntimeExports.jsx("p",{className:"font-bold text-[10px] text-white leading-tight",children:i.name}),jsxRuntimeExports.jsx("p",{className:"text-[9px] text-blue-100 font-semibold leading-tight",children:i.title})]})}),jsxRuntimeExports.jsxs("div",{className:"mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-[10px] font-bold text-gray-700 mb-1 text-center",children:"Executive Leadership"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:l.map((u,o)=>{const h=p[o%p.length];return jsxRuntimeExports.jsxs("div",{onClick:()=>n(u),className:`${h.card} rounded text-center cursor-pointer hover:shadow-lg hover:scale-105 transition-all duration-200`,children:[jsxRuntimeExports.jsx("img",{src:u.photoUrl,onError:_=>{_.currentTarget.src="/src/images/placeholder-male.png"},alt:u.name,className:`w-8 h-8 rounded-full mb-0.5 mx-auto object-cover border ${h.img}`}),jsxRuntimeExports.jsx("p",{className:`font-bold text-[8px] leading-tight ${h.name}`,children:u.name}),jsxRuntimeExports.jsx("p",{className:`text-[7px] font-semibold leading-tight ${h.title}`,children:u.title})]},o)})})]}),f.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-[10px] font-bold text-gray-700 mb-1 text-center",children:"Division Managers"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-5 gap-1.5",children:f.map((u,o)=>{const h=b[o%b.length];return jsxRuntimeExports.jsxs("div",{onClick:()=>n(u),className:`${h.card} rounded text-center cursor-pointer hover:shadow-lg hover:scale-105 transition-all duration-200`,children:[jsxRuntimeExports.jsx("img",{src:u.photoUrl,onError:_=>{_.currentTarget.src="/src/images/placeholder-male.png"},alt:u.name,className:`w-7 h-7 rounded-full mb-0.5 mx-auto object-cover border ${h.img}`}),jsxRuntimeExports.jsx("p",{className:`font-bold text-[8px] leading-tight ${h.name}`,children:u.name}),jsxRuntimeExports.jsx("p",{className:`text-[7px] font-semibold leading-tight ${h.title}`,children:u.title})]},o)})})]}),e&&jsxRuntimeExports.jsx(MemberModal,{member:e,onClose:()=>n(null)})]})},GanttChart=({data:t,explanation:e})=>{const n=t.map(l=>({task:l.task.replace("Phase ","P").replace(":",""),duration:l.end-l.start,start:l.start})),i=Math.max(...t.map(l=>l.end));return jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:n,layout:"vertical",margin:{top:5,right:10,left:5,bottom:5},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb",horizontal:!1}),jsxRuntimeExports.jsx(XAxis,{type:"number",domain:[0,i],tick:{fontSize:11,fill:"#4b5563"},label:{value:"Months",position:"insideBottom",offset:-5,fontSize:11,fill:"#6b7280"}}),jsxRuntimeExports.jsx(YAxis,{type:"category",dataKey:"task",tick:{fontSize:10,fill:"#4b5563"},width:80}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"11px"},cursor:{fill:"rgba(59, 130, 246, 0.1)"},formatter:(l,f)=>f==="duration"?[`${l} months`,"Duration"]:[l,f]}),jsxRuntimeExports.jsx(Bar,{dataKey:"duration",fill:"#3b82f6",radius:[0,8,8,0],animationDuration:1500,animationBegin:0})]})})},RevenueTrendChart=({data:t})=>{const e=t.map(n=>({year:n.year,"Revenue ($M)":n.revenue,"Footage (k)":n.footage/1e3}));return jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:e,margin:{top:10,right:10,left:0,bottom:5},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"year",tick:{fontSize:12,fill:"#4b5563"}}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:11,fill:"#4b5563"}}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"12px"},cursor:{fill:"rgba(59, 130, 246, 0.1)"}}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{fontSize:"12px"}}),jsxRuntimeExports.jsx(Bar,{dataKey:"Revenue ($M)",fill:"#10b981",radius:[8,8,0,0],animationDuration:1500,animationBegin:0}),jsxRuntimeExports.jsx(Bar,{dataKey:"Footage (k)",fill:"#3b82f6",radius:[8,8,0,0],animationDuration:1500,animationBegin:200})]})})},InfiltrationLineChart=({data:t})=>{const e=t.map(n=>({year:n.year,"Infiltration (MGD)":n.mgd}));return jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(AreaChart,{data:e,margin:{top:10,right:10,left:0,bottom:5},children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"colorInfiltration",x1:"0",y1:"0",x2:"0",y2:"1",children:[jsxRuntimeExports.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),jsxRuntimeExports.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]})}),jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"year",tick:{fontSize:12,fill:"#4b5563"}}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:11,fill:"#4b5563"}}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"12px"}}),jsxRuntimeExports.jsx(Area,{type:"monotone",dataKey:"Infiltration (MGD)",stroke:"#3b82f6",strokeWidth:3,fillOpacity:1,fill:"url(#colorInfiltration)",animationDuration:2e3})]})})},ChartRenderer=({chart:t,explanation:e})=>{switch(t.type){case"gantt":return jsxRuntimeExports.jsx(GanttChart,{data:t.data,explanation:e});case"stacked-bar":return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"grow",children:jsxRuntimeExports.jsx(RevenueTrendChart,{data:t.data})}),e&&jsxRuntimeExports.jsxs("p",{className:"text-[9px] text-gray-700 mt-1 px-1",children:[jsxRuntimeExports.jsx("strong",{children:"Growth Impact:"})," ",e]})]});case"line":return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"grow",children:jsxRuntimeExports.jsx(InfiltrationLineChart,{data:t.data})}),e&&jsxRuntimeExports.jsxs("p",{className:"text-[9px] text-gray-700 mt-1 px-1",children:[jsxRuntimeExports.jsx("strong",{children:"Engineering Outcome:"})," ",e]})]});default:return null}},ProjectCard=({project:t,index:e})=>{const n=()=>{if(t.title.includes("Heart of Valley"))return"Monthly phases show sequential project execution from mobilization through closeout, demonstrating timeline management expertise and predictable milestone delivery.";if(t.title.includes("Fox Point"))return"3-year program delivered consistent annual revenue ($1.2M  $1.5M  $1.3M) while rehabilitating 15,000 linear feet, showcasing multi-year partnership reliability.";if(t.title.includes("Wauwatosa"))return"72% infiltration reduction (3.1  0.85 MGD) over 4 years through systematic lateral sealing, demonstrating measurable environmental and financial impact for client."};return jsxRuntimeExports.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 shadow-lg overflow-hidden flex flex-col animate-fade-in-up opacity-0 project-card-${e%3} h-full`,children:[jsxRuntimeExports.jsxs("div",{className:"p-2",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-bold text-blue-800 mb-1",children:t.title}),jsxRuntimeExports.jsx("ul",{className:"space-y-0.5",children:t.details.map((i,l)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start text-[10px] text-gray-700",children:[jsxRuntimeExports.jsx("svg",{className:"h-3 w-3 text-blue-500 mr-1 shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),i]},l))})]}),jsxRuntimeExports.jsx("div",{className:"grow bg-gray-50 p-2 border-t min-h-0",children:jsxRuntimeExports.jsx(ChartRenderer,{chart:t.chart,explanation:n()})})]})},Projects=({section:t})=>{if(t.content.type!=="projects")return null;const{projects:e}=t.content;return jsxRuntimeExports.jsxs("div",{className:"p-4 h-full flex flex-col bg-linear-to-br from-gray-50 to-white",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-3",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 max-w-3xl mx-auto",dangerouslySetInnerHTML:{__html:t.narrative}})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-4 grow overflow-hidden",children:e.map((n,i)=>jsxRuntimeExports.jsx(ProjectCard,{project:n,index:i},i))})]})},References=({section:t})=>{if(t.content.type!=="references")return null;const{pageReferences:e,generalSources:n,methodology:i}=t.content;return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col bg-linear-to-br from-slate-50 to-blue-50 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"shrink-0 p-4 border-b-2 border-slate-300",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-700 mt-1",children:t.narrative})]}),jsxRuntimeExports.jsxs("div",{className:"grow overflow-y-auto p-4 space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-bold text-blue-900 sticky top-0 bg-blue-100 p-2 rounded",children:" Page-by-Page Evidence"}),e.map((l,f)=>jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-md p-3 border-l-4 border-blue-500",children:[jsxRuntimeExports.jsxs("h4",{className:"text-sm font-bold text-blue-800 mb-1",children:["Page ",l.pageNumber,": ",l.pageTitle]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:l.claims.map((p,b)=>jsxRuntimeExports.jsxs("div",{className:"ml-2",children:[jsxRuntimeExports.jsxs("p",{className:"text-xs font-semibold text-gray-800 mb-0.5",children:[" ",p.claim,p.visibility&&jsxRuntimeExports.jsx("span",{className:`ml-2 px-2 py-0.5 text-[8px] rounded ${p.visibility==="Public"?"bg-green-100 text-green-700":p.visibility==="AO-Request"?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"}`,children:p.visibility})]}),jsxRuntimeExports.jsx("ul",{className:"ml-4 space-y-0.5",children:p.sources.map((w,v)=>jsxRuntimeExports.jsxs("li",{className:"text-[10px] text-gray-600 list-disc",children:[w,p.filePaths&&p.filePaths[v]&&jsxRuntimeExports.jsxs("span",{className:"ml-2 text-blue-600 font-mono",children:[" ",p.filePaths[v]]})]},v))})]},b))})]},f))]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-bold text-green-900 sticky top-0 bg-green-100 p-2 rounded",children:" General Reference Sources"}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-md p-3 border-l-4 border-green-500",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-bold text-green-800 mb-1",children:"Visu-Sewer Official Resources"}),jsxRuntimeExports.jsxs("ul",{className:"ml-2 space-y-0.5",children:[jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://visu-sewer.com",target:"_blank",rel:"noopener noreferrer",children:"https://visu-sewer.com"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://visu-sewer.com/projects",target:"_blank",rel:"noopener noreferrer",children:"https://visu-sewer.com/projects"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://visu-sewer.com/overview",target:"_blank",rel:"noopener noreferrer",children:"https://visu-sewer.com/overview"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://visu-sewer.com/serving-municipalities",target:"_blank",rel:"noopener noreferrer",children:"https://visu-sewer.com/serving-municipalities"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-md p-3 border-l-4 border-green-500",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-bold text-green-800 mb-1",children:"Municipal & Project-Specific Reports"}),jsxRuntimeExports.jsxs("ul",{className:"ml-2 space-y-0.5",children:[jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://hvmsd.org",target:"_blank",rel:"noopener noreferrer",children:"https://hvmsd.org"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://hvmsd.org/interceptor-rehabilitation-project",target:"_blank",rel:"noopener noreferrer",children:"https://hvmsd.org/interceptor-rehabilitation-project"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://hvmsd.org/wp-content/uploads/2023/08/HOV_Contract_Award.pdf",target:"_blank",rel:"noopener noreferrer",children:"HOVMSD Contract Award PDF"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://villageoffoxpoint.com",target:"_blank",rel:"noopener noreferrer",children:"https://villageoffoxpoint.com"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://villageoffoxpoint.com/213/Public-Works",target:"_blank",rel:"noopener noreferrer",children:"https://villageoffoxpoint.com/213/Public-Works"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://villageoffoxpoint.com/DocumentCenter/View/6052/2025-Sewer-Lining-Project",target:"_blank",rel:"noopener noreferrer",children:"2025 Fox Point Sewer Lining Project PDF"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://schaumburg.com",target:"_blank",rel:"noopener noreferrer",children:"https://schaumburg.com"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://schaumburg.novusagenda.com/agendapublic/Blobs/857364.pdf",target:"_blank",rel:"noopener noreferrer",children:"Schaumburg Project PDF"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://wauwatosa.net",target:"_blank",rel:"noopener noreferrer",children:"https://wauwatosa.net"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://wauwatosa.net/services/public-works/sewers-stormwater",target:"_blank",rel:"noopener noreferrer",children:"Wauwatosa Sewers & Stormwater"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://mtvernon.com/projects",target:"_blank",rel:"noopener noreferrer",children:"https://mtvernon.com/projects"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://mtvernon.com/publicworks/sewer",target:"_blank",rel:"noopener noreferrer",children:"Mt. Vernon Public Works Sewer"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-md p-3 border-l-4 border-green-500",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-bold text-green-800 mb-1",children:"Industry Sources & Technology Context"}),jsxRuntimeExports.jsxs("ul",{className:"ml-2 space-y-0.5",children:[jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://trenchlesstechnology.com",target:"_blank",rel:"noopener noreferrer",children:"https://trenchlesstechnology.com"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://nationalliner.com",target:"_blank",rel:"noopener noreferrer",children:"https://nationalliner.com"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://pipelinerpros.com",target:"_blank",rel:"noopener noreferrer",children:"https://pipelinerpros.com"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://patrioticplumbingandrooter.com/cured-in-place-pipe-cipp/",target:"_blank",rel:"noopener noreferrer",children:"CIPP Technology Education"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://wwdmag.com",target:"_blank",rel:"noopener noreferrer",children:"https://wwdmag.com"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://bluefieldresearch.com",target:"_blank",rel:"noopener noreferrer",children:"https://bluefieldresearch.com"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-md p-3 border-l-4 border-green-500",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-bold text-green-800 mb-1",children:"Regulatory & Financial Reporting"}),jsxRuntimeExports.jsxs("ul",{className:"ml-2 space-y-0.5",children:[jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://madsewer.org",target:"_blank",rel:"noopener noreferrer",children:"https://madsewer.org"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://ci.faribault.mn.us/documentcenter/view/11990/Sanitary-Sewer-Rehabilitation-Project-2020.pdf",target:"_blank",rel:"noopener noreferrer",children:"Faribault Sewer Rehab Project PDF"})}),jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://villageofshorewood.org/CivicAlerts.aspx?AID=122",target:"_blank",rel:"noopener noreferrer",children:"Shorewood Civic Alerts"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-md p-3 border-l-4 border-green-500",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-bold text-green-800 mb-1",children:"Relevant News & Announcements"}),jsxRuntimeExports.jsx("ul",{className:"ml-2 space-y-0.5",children:jsxRuntimeExports.jsx("li",{className:"text-[10px] text-blue-700 list-disc ml-4",children:jsxRuntimeExports.jsx("a",{href:"https://fox11online.com/news/local/heart-of-the-valley-awards-contract-for-sewerage-rehabilitation-project",target:"_blank",rel:"noopener noreferrer",children:"Heart of the Valley Contract Award Coverage"})})})]}),n.map((l,f)=>jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-md p-3 border-l-4 border-green-500",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-bold text-green-800 mb-1",children:l.category}),jsxRuntimeExports.jsx("ul",{className:"ml-2 space-y-0.5",children:l.sources.map((p,b)=>jsxRuntimeExports.jsx("li",{className:"text-[10px] text-gray-600 list-disc ml-4",children:p},b))})]},f))]}),jsxRuntimeExports.jsxs("div",{className:"bg-linear-to-r from-amber-50 to-orange-50 rounded-lg shadow-md p-3 border-l-4 border-amber-500",children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-bold text-amber-900 mb-1",children:" Methodology & Validation"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-700 leading-relaxed",children:i})]}),jsxRuntimeExports.jsx("div",{className:"bg-slate-100 rounded-lg p-3 border border-slate-300",children:jsxRuntimeExports.jsxs("p",{className:"text-[10px] text-slate-600 text-center italic",children:[jsxRuntimeExports.jsx("strong",{children:"Transparency Commitment:"})," All data sources are available for independent verification upon request. Financial projections follow conservative assumptions validated by Fort Point Capital due diligence. Third-party benchmarks are from recognized industry authorities (NASSCO, WEF, EPA, IBISWorld)."]})})]})]})},ResilienceFramework=({section:t})=>{if(t.content.type!=="summary")return null;const e=[{metric:"Fines Avoided",value:750},{metric:"Bid Risk Reduced",value:500}],n=[{metric:"Before",delays:100,costs:400},{metric:"After",delays:80,costs:300}],i=[{year:"Y1",revenue:2},{year:"Y2",revenue:2.8},{year:"Y3",revenue:3.5},{year:"Y4",revenue:4}],l=[{category:"Injury Reduction",value:30,color:"#10b981"},{category:"Cost Savings",value:175,color:"#3b82f6"}],f=[{name:"Political ($500K-1M)",value:750,fill:"#ef4444"},{name:"Supply Chain ($300-500K)",value:400,fill:"#f59e0b"},{name:"Emergency Revenue ($2-4M)",value:3e3,fill:"#10b981"},{name:"Safety ($150-200K)",value:175,fill:"#3b82f6"}];return jsxRuntimeExports.jsxs("div",{className:"p-6 md:p-8 h-full flex flex-col justify-center bg-linear-to-br from-red-50 to-white overflow-hidden",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-3 text-center",children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-4 max-w-4xl mx-auto text-center",children:t.narrative}),jsxRuntimeExports.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-3 rounded-r-lg shadow-md max-w-4xl mx-auto mb-4",children:jsxRuntimeExports.jsx("p",{className:"text-base font-bold text-red-800 italic text-center",children:t.content.message})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-5 gap-3 grow",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl border-2 border-red-300 shadow-lg p-3",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-center text-red-800 mb-2 text-xs",children:"Political & Regulatory"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"75%",children:jsxRuntimeExports.jsxs(BarChart,{data:e,margin:{top:5,right:5,left:-20,bottom:30},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"metric",tick:{fontSize:8},angle:-20,textAnchor:"end",height:50}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:9},label:{value:"$K",angle:-90,position:"insideLeft",style:{fontSize:9}}}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:"10px"},formatter:p=>`$${p}K`}),jsxRuntimeExports.jsx(Bar,{dataKey:"value",fill:"#ef4444",radius:[8,8,0,0]})]})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 text-center mt-2",children:"AI dashboards + engagement"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl border-2 border-orange-300 shadow-lg p-3",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-center text-orange-800 mb-2 text-xs",children:"Supply Chain"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"75%",children:jsxRuntimeExports.jsxs(BarChart,{data:n,margin:{top:5,right:5,left:-20,bottom:20},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"metric",tick:{fontSize:9}}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:9},label:{value:"%/$K",angle:-90,position:"insideLeft",style:{fontSize:8}}}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:"10px"}}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{fontSize:"8px"}}),jsxRuntimeExports.jsx(Bar,{dataKey:"delays",fill:"#f59e0b",name:"Delay %",radius:[8,8,0,0]}),jsxRuntimeExports.jsx(Bar,{dataKey:"costs",fill:"#fb923c",name:"Cost $K",radius:[8,8,0,0]})]})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 text-center mt-2",children:"20% delay reduction"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl border-2 border-green-300 shadow-lg p-3",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-center text-green-800 mb-2 text-xs",children:"Emergency Response"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"75%",children:jsxRuntimeExports.jsxs(BarChart,{data:i,margin:{top:5,right:5,left:-20,bottom:20},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"year",tick:{fontSize:9}}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:9},label:{value:"$M",angle:-90,position:"insideLeft",style:{fontSize:9}}}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:"10px"},formatter:p=>`$${p}M`}),jsxRuntimeExports.jsx(Bar,{dataKey:"revenue",fill:"#10b981",radius:[8,8,0,0]})]})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 text-center mt-2",children:"$2-4M captured annually"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl border-2 border-blue-300 shadow-lg p-3",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-center text-blue-800 mb-2 text-xs",children:"Safety & Training"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"75%",children:jsxRuntimeExports.jsxs(BarChart,{data:l,margin:{top:5,right:5,left:-20,bottom:30},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"category",tick:{fontSize:8},angle:-20,textAnchor:"end",height:50}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:9}}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:"10px"}}),jsxRuntimeExports.jsx(Bar,{dataKey:"value",radius:[8,8,0,0],children:l.map((p,b)=>jsxRuntimeExports.jsx(Cell,{fill:p.color},`cell-${b}`))})]})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 text-center mt-2",children:"VR/AR + wearables"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl border-2 border-purple-300 shadow-lg p-3",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-center text-purple-800 mb-2 text-xs",children:"Total Impact"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"75%",children:jsxRuntimeExports.jsxs(PieChart,{children:[jsxRuntimeExports.jsx(Pie,{data:f,cx:"50%",cy:"50%",outerRadius:"70%",dataKey:"value",label:!1,children:f.map((p,b)=>jsxRuntimeExports.jsx(Cell,{fill:p.fill},`cell-${b}`))}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:"9px"},formatter:p=>`$${p}K`})]})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 text-center mt-2",children:"$3-7M protection"})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 grid grid-cols-4 gap-2 text-xs text-gray-700",children:t.content.points.map((p,b)=>jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg p-2 border border-gray-200",children:jsxRuntimeExports.jsx("p",{className:"leading-tight",children:p})},b))})]})},Roadmap=({section:t})=>{if(t.content.type!=="roadmap")return null;const{data:e}=t.content,n=e.projection,i=[{year:"2024",margin:18},{year:"2025",margin:19.5},{year:"2026",margin:21.5},{year:"2027",margin:24}],l=[{year:"2024",retention:70,industry:60},{year:"2025",retention:80,industry:62},{year:"2026",retention:88,industry:63},{year:"2027",retention:95,industry:65}],f=[{metric:"Inspection Time",baseline:480,withAI:45,label:"Minutes"},{metric:"Report Delivery",baseline:7,withAI:1,label:"Days"},{metric:"Crew Utilization",baseline:72,withAI:85,label:"%"},{metric:"Safety TRIR",baseline:1.9,withAI:1.2,label:"Rate"}],p=[{stage:"Identified",count:50,value:250},{stage:"Due Diligence",count:12,value:85},{stage:"LOI Signed",count:3,value:25},{stage:"Closed (MOR)",count:1,value:12}];return jsxRuntimeExports.jsxs("div",{className:"roadmap-background p-6 md:p-8 h-full flex flex-col overflow-hidden relative",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-4 relative z-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 max-w-4xl mx-auto",children:t.narrative})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-3 grow relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"col-span-1 bg-white/95 backdrop-blur-sm p-3 rounded-xl border-2 border-purple-300 shadow-xl",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-center text-purple-800 mb-2 text-xs",children:"Revenue Growth Trajectory"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"90%",minWidth:0,minHeight:0,children:jsxRuntimeExports.jsxs(ComposedChart,{data:n,margin:{top:5,right:10,left:-10,bottom:5},children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[jsxRuntimeExports.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.8}),jsxRuntimeExports.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:.2})]})}),jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"label",tick:{fontSize:10}}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:10},label:{value:"$M",angle:-90,position:"insideLeft",style:{fontSize:10}}}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:"11px",borderRadius:"8px"},formatter:b=>`$${b}M`}),jsxRuntimeExports.jsx(Bar,{dataKey:"value",fill:"url(#colorRevenue)",radius:[8,8,0,0]}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"value",stroke:"#8b5cf6",strokeWidth:2,dot:{r:4}})]})})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-1 bg-white/95 backdrop-blur-sm p-3 rounded-xl border-2 border-green-300 shadow-xl",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-center text-green-800 mb-2 text-xs",children:"EBITDA Margin Expansion"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"90%",minWidth:0,minHeight:0,children:jsxRuntimeExports.jsxs(AreaChart,{data:i,margin:{top:5,right:10,left:-10,bottom:5},children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"colorEbitda",x1:"0",y1:"0",x2:"0",y2:"1",children:[jsxRuntimeExports.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),jsxRuntimeExports.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:.2})]})}),jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"year",tick:{fontSize:10}}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:10},domain:[15,25],label:{value:"%",angle:-90,position:"insideLeft",style:{fontSize:10}}}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:"11px",borderRadius:"8px"},formatter:b=>`${b}%`}),jsxRuntimeExports.jsx(Area,{type:"monotone",dataKey:"margin",stroke:"#10b981",strokeWidth:2,fill:"url(#colorEbitda)"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-1 bg-white/95 backdrop-blur-sm p-3 rounded-xl border-2 border-blue-300 shadow-xl",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-center text-blue-800 mb-2 text-xs",children:"Retention: VisuSewer vs Industry"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"90%",minWidth:0,minHeight:0,children:jsxRuntimeExports.jsxs(ComposedChart,{data:l,margin:{top:5,right:10,left:-10,bottom:5},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"year",tick:{fontSize:10}}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:10},domain:[50,100],label:{value:"%",angle:-90,position:"insideLeft",style:{fontSize:10}}}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:"11px",borderRadius:"8px"},formatter:b=>`${b}%`}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{fontSize:"10px"}}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"retention",stroke:"#3b82f6",strokeWidth:3,name:"VisuSewer",dot:{r:4}}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"industry",stroke:"#9ca3af",strokeWidth:2,strokeDasharray:"5 5",name:"Industry Avg",dot:{r:3}})]})})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2 bg-white/95 backdrop-blur-sm p-3 rounded-xl border-2 border-orange-300 shadow-xl",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-center text-orange-800 mb-2 text-xs",children:"AI Transformation Impact: Key Operational Metrics"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"90%",minWidth:0,minHeight:0,children:jsxRuntimeExports.jsxs(ComposedChart,{data:f,layout:"vertical",margin:{top:5,right:20,left:80,bottom:5},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),jsxRuntimeExports.jsx(XAxis,{type:"number",tick:{fontSize:10}}),jsxRuntimeExports.jsx(YAxis,{type:"category",dataKey:"metric",tick:{fontSize:10},width:75}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:"11px",borderRadius:"8px"}}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{fontSize:"10px"}}),jsxRuntimeExports.jsx(Bar,{dataKey:"baseline",fill:"#f59e0b",name:"Before AI",radius:[0,8,8,0]}),jsxRuntimeExports.jsx(Bar,{dataKey:"withAI",fill:"#10b981",name:"With AI",radius:[0,8,8,0]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-1 bg-white/95 backdrop-blur-sm p-3 rounded-xl border-2 border-indigo-300 shadow-xl",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-center text-indigo-800 mb-2 text-xs",children:"Acquisition Pipeline"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"90%",minWidth:0,minHeight:0,children:jsxRuntimeExports.jsxs(ComposedChart,{data:p,margin:{top:5,right:10,left:-10,bottom:5},children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"colorAcq",x1:"0",y1:"0",x2:"0",y2:"1",children:[jsxRuntimeExports.jsx("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.8}),jsxRuntimeExports.jsx("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:.3})]})}),jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"stage",tick:{fontSize:9},angle:-15,textAnchor:"end",height:60}),jsxRuntimeExports.jsx(YAxis,{yAxisId:"left",tick:{fontSize:10},label:{value:"Count",angle:-90,position:"insideLeft",style:{fontSize:10}}}),jsxRuntimeExports.jsx(YAxis,{yAxisId:"right",orientation:"right",tick:{fontSize:10},label:{value:"$M",angle:90,position:"insideRight",style:{fontSize:10}}}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:"11px",borderRadius:"8px"}}),jsxRuntimeExports.jsx(Bar,{yAxisId:"left",dataKey:"count",fill:"url(#colorAcq)",radius:[8,8,0,0],name:"# Targets"}),jsxRuntimeExports.jsx(Line,{yAxisId:"right",type:"monotone",dataKey:"value",stroke:"#ef4444",strokeWidth:2,name:"Value ($M)",dot:{r:4}})]})})]})]})]})},ServiceStack=({section:t})=>{if(t.content.type!=="service_stack")return null;const{image:e}=t.content,n=[{metric:`Coding
Time (hrs)`,Current:10,WithAI:.75},{metric:`Defect
Accuracy %`,Current:60,WithAI:96},{metric:"Reports/Day",Current:2,WithAI:8},{metric:`Cost per
Report ($)`,Current:450,WithAI:125}],i=[{metric:`Route
Optimization`,Current:65,WithAI:92},{metric:`Equipment
Utilization %`,Current:70,WithAI:88},{metric:`Admin
Time (hrs/wk)`,Current:12,WithAI:3},{metric:"Jobs/Day",Current:4.5,WithAI:6.2}],l=[{metric:`Material
Tracking %`,Current:75,WithAI:98},{metric:`On-Time
Delivery %`,Current:85,WithAI:98},{metric:`Cost
Overruns %`,Current:15,WithAI:4},{metric:`Quality
Score`,Current:82,WithAI:95}];return jsxRuntimeExports.jsxs("div",{className:"p-4 h-full flex flex-col bg-linear-to-br from-blue-50 to-white overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-3",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 max-w-3xl mx-auto",children:t.narrative})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3 grow overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border-2 border-blue-200 shadow-lg overflow-hidden flex items-center justify-center",children:jsxRuntimeExports.jsx("img",{src:e,alt:"Visu-Sewer Service Truck",className:"w-full h-full object-cover"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-2 flex flex-col flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-bold text-blue-800 mb-1",children:"Inspect: AI CCTV Analysis"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:n,margin:{top:5,right:10,left:-10,bottom:20},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"metric",tick:{fontSize:9},angle:-10,textAnchor:"end"}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:9}}),jsxRuntimeExports.jsx(Tooltip,{}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{fontSize:"9px"}}),jsxRuntimeExports.jsx(Bar,{dataKey:"Current",fill:"#ef4444",name:"Current State"}),jsxRuntimeExports.jsx(Bar,{dataKey:"WithAI",fill:"#10b981",name:"With AI"})]})}),jsxRuntimeExports.jsxs("p",{className:"text-[9px] text-gray-700 mt-1",children:["AI inspection reduces coding time from ",jsxRuntimeExports.jsx("strong",{children:"10 hours to 45 minutes"}),", increases accuracy to ",jsxRuntimeExports.jsx("strong",{children:"96%"}),", and enables ",jsxRuntimeExports.jsx("strong",{children:"8 reports/day vs 2"}),". Cost per report drops ",jsxRuntimeExports.jsx("strong",{children:"72% ($450  $125)"}),"."]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-2 flex flex-col flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-bold text-green-800 mb-1",children:"Maintain: FSM Optimization"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:i,margin:{top:5,right:10,left:-10,bottom:20},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"metric",tick:{fontSize:9},angle:-10,textAnchor:"end"}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:9}}),jsxRuntimeExports.jsx(Tooltip,{}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{fontSize:"9px"}}),jsxRuntimeExports.jsx(Bar,{dataKey:"Current",fill:"#ef4444",name:"Current State"}),jsxRuntimeExports.jsx(Bar,{dataKey:"WithAI",fill:"#10b981",name:"With AI"})]})}),jsxRuntimeExports.jsxs("p",{className:"text-[9px] text-gray-700 mt-1",children:["ServiceTitan FSM improves route optimization to ",jsxRuntimeExports.jsx("strong",{children:"92%"}),", equipment utilization to ",jsxRuntimeExports.jsx("strong",{children:"88%"}),", and reduces admin time ",jsxRuntimeExports.jsx("strong",{children:"75% (12hrs  3hrs/week)"}),". Field crews complete ",jsxRuntimeExports.jsx("strong",{children:"6.2 jobs/day vs 4.5"}),"."]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-2 flex flex-col flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-bold text-orange-800 mb-1",children:"Rehabilitate: Project Control"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:l,margin:{top:5,right:10,left:-10,bottom:20},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"metric",tick:{fontSize:9},angle:-10,textAnchor:"end"}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:9}}),jsxRuntimeExports.jsx(Tooltip,{}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{fontSize:"9px"}}),jsxRuntimeExports.jsx(Bar,{dataKey:"Current",fill:"#ef4444",name:"Current State"}),jsxRuntimeExports.jsx(Bar,{dataKey:"WithAI",fill:"#10b981",name:"With AI"})]})}),jsxRuntimeExports.jsxs("p",{className:"text-[9px] text-gray-700 mt-1",children:["Procore ERP + Info360 analytics increase material tracking to ",jsxRuntimeExports.jsx("strong",{children:"98%"}),", on-time delivery to ",jsxRuntimeExports.jsx("strong",{children:"98%"}),", reduce cost overruns ",jsxRuntimeExports.jsx("strong",{children:"73% (15%  4%)"}),", and boost quality scores to ",jsxRuntimeExports.jsx("strong",{children:"95"}),"."]})]})]})]})]})},TechTransformation=({section:t})=>{if(t.content.type!=="summary")return null;const e=[{metric:"Before AI",hours:10,color:"#ef4444"},{metric:"With AI",hours:.75,color:"#10b981"}],n=[{metric:"Utilization",before:72,after:85},{metric:"Admin Time",before:100,after:60}],i=[{year:"Year 1",revenue:.5},{year:"Year 2",revenue:1.2},{year:"Year 3",revenue:2}],l=[{category:"Investment",value:1,color:"#ef4444"},{category:"Benefits",value:2.1,color:"#10b981"}];return jsxRuntimeExports.jsxs("div",{className:"p-6 md:p-8 h-full flex flex-col justify-center bg-linear-to-br from-blue-50 to-white overflow-hidden",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-3 text-center",children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-4 max-w-4xl mx-auto text-center",children:t.narrative}),jsxRuntimeExports.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-3 rounded-r-lg shadow-md max-w-4xl mx-auto mb-4",children:jsxRuntimeExports.jsx("p",{className:"text-base font-bold text-blue-800 italic text-center",children:t.content.message})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4 gap-3 grow min-h-60",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl border-2 border-green-300 shadow-lg p-3 min-h-60 flex flex-col",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-center text-green-800 mb-2 text-xs",children:"Phase 1: AI Inspection Speed"}),jsxRuntimeExports.jsx("div",{className:"grow",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",minWidth:0,minHeight:0,children:jsxRuntimeExports.jsxs(BarChart,{data:e,margin:{top:5,right:5,left:-15,bottom:20},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"metric",tick:{fontSize:9},angle:-15,textAnchor:"end",height:40}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:9},label:{value:"Hours",angle:-90,position:"insideLeft",style:{fontSize:9}}}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:"10px"},formatter:f=>`${f}h`}),jsxRuntimeExports.jsx(Bar,{dataKey:"hours",radius:[8,8,0,0],children:e.map((f,p)=>jsxRuntimeExports.jsx(Cell,{fill:f.color},`cell-${p}`))})]})})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 text-center mt-1",children:"8-12hrs  30-60min"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl border-2 border-blue-300 shadow-lg p-3 min-h-60 flex flex-col",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-center text-blue-800 mb-2 text-xs",children:"Phase 2: FSM Impact"}),jsxRuntimeExports.jsx("div",{className:"grow",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",minWidth:0,minHeight:0,children:jsxRuntimeExports.jsxs(BarChart,{data:n,margin:{top:5,right:5,left:-15,bottom:20},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"metric",tick:{fontSize:9},angle:-15,textAnchor:"end",height:40}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:9},label:{value:"%",angle:-90,position:"insideLeft",style:{fontSize:9}}}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:"10px"},formatter:f=>`${f}%`}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{fontSize:"9px"}}),jsxRuntimeExports.jsx(Bar,{dataKey:"before",fill:"#f59e0b",name:"Before",radius:[8,8,0,0]}),jsxRuntimeExports.jsx(Bar,{dataKey:"after",fill:"#3b82f6",name:"After",radius:[8,8,0,0]})]})})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 text-center mt-1",children:"10-15% utilization gain"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl border-2 border-purple-300 shadow-lg p-3 min-h-60 flex flex-col",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-center text-purple-800 mb-2 text-xs",children:"Phase 3: Revenue Growth"}),jsxRuntimeExports.jsx("div",{className:"grow",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",minWidth:0,minHeight:0,children:jsxRuntimeExports.jsxs(LineChart,{data:i,margin:{top:5,right:5,left:-15,bottom:20},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"year",tick:{fontSize:9}}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:9},label:{value:"$M",angle:-90,position:"insideLeft",style:{fontSize:9}}}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:"10px"},formatter:f=>`$${f}M`}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"revenue",stroke:"#8b5cf6",strokeWidth:2,dot:{r:4,fill:"#8b5cf6"}})]})})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 text-center mt-1",children:"$1-2M recurring revenue"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl border-2 border-orange-300 shadow-lg p-3 min-h-60 flex flex-col",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-center text-orange-800 mb-2 text-xs",children:"Year 1 ROI"}),jsxRuntimeExports.jsx("div",{className:"grow",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",minWidth:0,minHeight:0,children:jsxRuntimeExports.jsxs(BarChart,{data:l,margin:{top:5,right:5,left:-15,bottom:20},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"category",tick:{fontSize:9},angle:-15,textAnchor:"end",height:40}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:9},label:{value:"$M",angle:-90,position:"insideLeft",style:{fontSize:9}},domain:[0,2.5]}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:"10px"},formatter:f=>`$${f}M`}),jsxRuntimeExports.jsx(Bar,{dataKey:"value",radius:[8,8,0,0],children:l.map((f,p)=>jsxRuntimeExports.jsx(Cell,{fill:f.color},`cell-${p}`))})]})})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 text-center mt-1",children:"110% ROI, 5.7mo payback"})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 grid grid-cols-4 gap-2 text-xs text-gray-700",children:t.content.points.map((f,p)=>jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg p-2 border border-gray-200",children:jsxRuntimeExports.jsx("p",{className:"leading-tight",children:f})},p))})]})},getCategoryColor=t=>{switch(t){case"tech":return"bg-blue-500";case"geo":return"bg-green-500";case"m&a":return"bg-orange-500";default:return"bg-gray-500"}},Timeline=({section:t})=>{if(t.content.type!=="timeline")return null;const{milestones:e}=t.content,n=reactExports.useRef(null),i=reactExports.useRef(null);return reactExports.useRef(null),reactExports.useEffect(()=>{},[]),jsxRuntimeExports.jsxs("div",{className:"p-6 md:p-8 h-full flex flex-col overflow-hidden",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2 text-center",children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-base text-gray-600 mb-6 max-w-4xl mx-auto text-center",dangerouslySetInnerHTML:{__html:t.narrative}}),jsxRuntimeExports.jsxs("div",{className:"grow grid grid-cols-1 md:grid-cols-2 gap-6 items-stretch",children:[jsxRuntimeExports.jsxs("div",{className:"relative rounded-xl overflow-hidden shadow border border-gray-200 bg-white",children:[jsxRuntimeExports.jsxs("div",{ref:i,className:"absolute inset-0 will-change-transform",children:[jsxRuntimeExports.jsx("img",{src:t.content.image||"/images/geographic-footprint.png",alt:"Geographic footprint",className:"w-full h-full object-cover saturate-125 contrast-110 brightness-105"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 ring-1 ring-gray-300/50 pointer-events-none"})]}),jsxRuntimeExports.jsx("div",{className:"relative z-10 p-3 text-center bg-linear-to-t from-white/60 via-white/20 to-transparent",children:jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Geographic Footprint"})})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{ref:n,className:"hidden md:flex flex-col h-full pr-2",children:jsxRuntimeExports.jsxs("div",{className:"relative h-full",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-1 bg-gray-200 rounded-full"}),jsxRuntimeExports.jsx("div",{className:"relative pl-12 h-full flex flex-col justify-between",children:e.map((l,f)=>jsxRuntimeExports.jsxs("div",{className:"relative group opacity-100 will-change-transform","data-depth":0,children:[jsxRuntimeExports.jsx("div",{className:`absolute -left-8 top-2 w-3.5 h-3.5 ${getCategoryColor(l.category)} rounded-full border-4 border-white shadow`}),jsxRuntimeExports.jsx("div",{className:"absolute -left-16 pr-3 top-1 text-[11px] font-bold text-gray-700 whitespace-nowrap",children:l.year}),jsxRuntimeExports.jsxs("div",{className:"bg-white/95 border border-gray-200 rounded-lg shadow p-3",children:[jsxRuntimeExports.jsx("p",{className:"font-bold text-gray-800 text-[13px] leading-snug",children:l.milestone}),jsxRuntimeExports.jsx("p",{className:"text-[11px] text-gray-600 mt-1 leading-tight",children:l.impact})]})]},f))})]})}),jsxRuntimeExports.jsx("div",{className:"md:hidden flex items-center px-4 py-6",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-0 w-full h-1 bg-gray-200 rounded-full -translate-y-1/2"}),jsxRuntimeExports.jsx("div",{className:"relative flex justify-between w-full",children:e.map((l,f)=>jsxRuntimeExports.jsxs("div",{className:`relative flex flex-col items-center group z-10 animate-fade-in-up opacity-0 timeline-event-${f%5}`,children:[jsxRuntimeExports.jsxs("div",{className:`absolute ${f%2===0?"bottom-8":"top-8"} w-36 p-2 bg-white border-2 border-gray-300 rounded-lg shadow-xl text-center transform transition-all duration-300 group-hover:scale-110 group-hover:shadow-2xl`,children:[jsxRuntimeExports.jsx("p",{className:"font-bold text-gray-800 text-xs",children:l.milestone}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 mt-1 leading-tight",children:l.impact}),jsxRuntimeExports.jsx("div",{className:`absolute ${f%2===0?"top-full":"bottom-full"} left-1/2 -translate-x-1/2 w-0 h-0 border-l-8 border-l-transparent border-r-8 border-r-transparent ${f%2===0?"border-t-8 border-t-gray-300":"border-b-8 border-b-gray-300"}`})]}),jsxRuntimeExports.jsx("div",{className:`w-4 h-4 ${getCategoryColor(l.category)} rounded-full z-10 border-4 border-white shadow-md`}),jsxRuntimeExports.jsx("p",{className:"absolute top-1/2 mt-5 font-bold text-gray-700 text-xs",children:l.year})]},f))})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center space-x-6 mt-4 text-xs text-gray-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"h-3 w-3 rounded-sm bg-blue-500 mr-2"}),"Technical Evolution"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"h-3 w-3 rounded-sm bg-green-500 mr-2"}),"Geographic Growth"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"h-3 w-3 rounded-sm bg-orange-500 mr-2"}),"M&A"]})]})]})},TowardHorizon=({section:t})=>{if(t.content.type!=="summary")return null;const e=[{category:"VisuSewer",retention:95,revenueImpact:15},{category:"Industry Avg",retention:70,revenueImpact:0}],n=[{year:"Year 1",BaseRevenue:30,PremiumRevenue:33},{year:"Year 2",BaseRevenue:40,PremiumRevenue:45},{year:"Year 3",BaseRevenue:50,PremiumRevenue:57.5},{year:"Year 4",BaseRevenue:60,PremiumRevenue:69},{year:"Year 5",BaseRevenue:70,PremiumRevenue:80.5}],i=[{metric:`Hiring
Costs ($K)`,VisuSewer:400,Competitor:1200},{metric:`Training
Time (mos)`,VisuSewer:6,Competitor:18},{metric:`Retention
Rate %`,VisuSewer:95,Competitor:60},{metric:`Experience
(avg yrs)`,VisuSewer:12,Competitor:4}],l=[{name:"Referral Revenue",value:50,savings:3e3},{name:"Marketing Spend",value:50,savings:0}],f=["#10b981","#3b82f6"];return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col bg-linear-to-br from-amber-50 to-orange-50 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"shrink-0 p-6 border-b-2 border-amber-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"min-w-0 max-w-[60%]",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-amber-900",children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-amber-700 mt-2",children:t.content.message})]}),jsxRuntimeExports.jsxs("div",{className:"shrink-0 rounded-lg shadow border border-amber-200 bg-white p-2",children:[jsxRuntimeExports.jsxs("div",{className:"relative h-40 md:h-52 lg:h-60 w-88 md:w-120 lg:w-152",children:[jsxRuntimeExports.jsx("img",{src:"/images/feild-technician-first-guy.png",alt:"Field Technician",className:"w-full h-full object-cover saturate-125 contrast-110 brightness-105"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 pointer-events-none rounded-lg ring-1 ring-amber-300/40"})]}),jsxRuntimeExports.jsx("p",{className:"text-[10px] md:text-xs text-amber-700 mt-2 text-center font-medium",children:"Field Technician  Authentic operations at the edge"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"grow grid grid-cols-4 gap-3 p-4 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-3 flex flex-col",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-bold text-blue-800 mb-2",children:"Responsiveness: Retention Advantage"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:e,margin:{top:5,right:10,left:-10,bottom:20},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"category",tick:{fontSize:10},angle:-10,textAnchor:"end"}),jsxRuntimeExports.jsx(YAxis,{yAxisId:"left",label:{value:"Retention %",angle:-90,position:"insideLeft",fontSize:10},tick:{fontSize:10}}),jsxRuntimeExports.jsx(YAxis,{yAxisId:"right",orientation:"right",label:{value:"Revenue Impact ($M)",angle:90,position:"insideRight",fontSize:10},tick:{fontSize:10}}),jsxRuntimeExports.jsx(Tooltip,{}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{fontSize:"10px"}}),jsxRuntimeExports.jsx(Bar,{yAxisId:"left",dataKey:"retention",fill:"#3b82f6",name:"Retention %"}),jsxRuntimeExports.jsx(Bar,{yAxisId:"right",dataKey:"revenueImpact",fill:"#10b981",name:"Revenue Impact"})]})}),jsxRuntimeExports.jsxs("p",{className:"text-[9px] text-gray-700 mt-2",children:[jsxRuntimeExports.jsx("strong",{children:"<2hr response time"})," and 24/7 availability drive ",jsxRuntimeExports.jsx("strong",{children:"95% client retention vs 70% industry"}),'. NPS >70 ("last job is next pitch"). At $150M scale, ',jsxRuntimeExports.jsx("strong",{children:"25-point retention advantage = $15M revenue"})," vs losing 30% of clients annually."]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-3 flex flex-col",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-bold text-green-800 mb-2",children:"Integrity: Premium Pricing Power"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:n,margin:{top:5,right:10,left:-10,bottom:20},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"year",tick:{fontSize:10},angle:-10,textAnchor:"end"}),jsxRuntimeExports.jsx(YAxis,{label:{value:"Revenue ($M)",angle:-90,position:"insideLeft",fontSize:10},tick:{fontSize:10}}),jsxRuntimeExports.jsx(Tooltip,{}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{fontSize:"10px"}}),jsxRuntimeExports.jsx(Bar,{dataKey:"BaseRevenue",fill:"#94a3b8",name:"Commodity Pricing"}),jsxRuntimeExports.jsx(Bar,{dataKey:"PremiumRevenue",fill:"#10b981",name:"Premium Pricing"})]})}),jsxRuntimeExports.jsxs("p",{className:"text-[9px] text-gray-700 mt-2",children:[`"Engineer's choice for critical projects" enables `,jsxRuntimeExports.jsx("strong",{children:"10-15% premium pricing"})," vs commodity competitors. Zero change orders build trust. At $70M revenue, premium pricing delivers ",jsxRuntimeExports.jsx("strong",{children:"$5-10M annual profit uplift"})," (15% margin on incremental revenue)."]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-3 flex flex-col",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-bold text-purple-800 mb-2",children:"Dedication: Workforce Stability"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:i,margin:{top:5,right:10,left:-10,bottom:20},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"metric",tick:{fontSize:9},angle:-10,textAnchor:"end"}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:10}}),jsxRuntimeExports.jsx(Tooltip,{}),jsxRuntimeExports.jsx(Legend,{wrapperStyle:{fontSize:"10px"}}),jsxRuntimeExports.jsx(Bar,{dataKey:"VisuSewer",fill:"#8b5cf6",name:"VisuSewer"}),jsxRuntimeExports.jsx(Bar,{dataKey:"Competitor",fill:"#ef4444",name:"Competitor Avg"})]})}),jsxRuntimeExports.jsxs("p",{className:"text-[9px] text-gray-700 mt-2",children:[jsxRuntimeExports.jsx("strong",{children:"98% on-time delivery"})," via field-born management. ",jsxRuntimeExports.jsx("strong",{children:"95% technician retention vs 60% industry"})," saves $800K annually in hiring/training. Average 12 years experience vs 4 years (competitors) = superior quality, ",jsxRuntimeExports.jsx("strong",{children:"$2M savings vs industry"}),"."]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-3 flex flex-col",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-bold text-orange-800 mb-2",children:"Reputation: Referral Economics"}),jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(PieChart,{margin:{top:5,right:10,left:10,bottom:5},children:[jsxRuntimeExports.jsx(Pie,{data:l,cx:"50%",cy:"50%",labelLine:!1,label:p=>`${p.name}: ${p.percent?(p.percent*100).toFixed(0):p.value}%`,outerRadius:60,fill:"#8884d8",dataKey:"value",children:l.map((p,b)=>jsxRuntimeExports.jsx(Cell,{fill:f[b%f.length]},`cell-${b}`))}),jsxRuntimeExports.jsx(Tooltip,{formatter:(p,b,w)=>{const v=w.payload.savings;return v>0?[`${p}% (saves $${v/1e3}K)`,b]:[`${p}%`,b]}})]})}),jsxRuntimeExports.jsxs("p",{className:"text-[9px] text-gray-700 mt-2",children:[jsxRuntimeExports.jsx("strong",{children:"50% revenue from referrals"})," vs industry 20-30%. Every satisfied client becomes sales force. At $70M revenue, ",jsxRuntimeExports.jsx("strong",{children:"50% referral mix saves $3M annually"})," in marketing/sales costs vs 8-10% sales expense (industry standard). Word-of-mouth = highest-converting lead source."]})]})]}),jsxRuntimeExports.jsx("div",{className:"shrink-0 bg-linear-to-r from-amber-100 to-orange-100 p-3 border-t-2 border-amber-300",children:jsxRuntimeExports.jsxs("p",{className:"text-xs text-center text-amber-900 font-semibold",children:["Combined Value Impact: ",jsxRuntimeExports.jsx("strong",{children:"$25-30M annual benefit"})," from values-driven operations at $150M revenue scale. The covenant isn't poetryit's competitive advantage."]})})]})},visuSewerLogo="/images/visu-sewer-logo.png",renderContent=t=>{switch(t.content.type){case"cover":return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col justify-center items-center text-center p-8 animate-fade-in relative overflow-hidden",children:[t.content.backgroundImage&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("img",{src:t.content.backgroundImage,alt:"Cover background","aria-hidden":!0,className:"absolute inset-0 w-full h-full object-cover saturate-125 contrast-110 brightness-105"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/35","aria-hidden":!0})]}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[jsxRuntimeExports.jsx("img",{src:visuSewerLogo,alt:"Visu-Sewer Logo",className:"max-w-md md:max-w-lg mb-8 drop-shadow-2xl"}),jsxRuntimeExports.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-white tracking-tight drop-shadow-lg mb-4",children:t.content.title}),jsxRuntimeExports.jsx("p",{className:"text-lg md:text-xl text-gray-100 font-medium drop-shadow-md",children:t.content.subtitle})]})]});case"summary":return t.title==="The Four Pillars: Values as Competitive Advantage"?jsxRuntimeExports.jsx(FourPillars,{section:t}):t.title==="Love Story #1: Falling in Love with the Craft"?jsxRuntimeExports.jsx(LoveStoryCraft,{section:t}):t.title==="Love Story #3: Falling in Love with the Future"?jsxRuntimeExports.jsx(LoveStoryFuture,{section:t}):t.title==="The Technology Transformation: Three-Phase Modernization"?jsxRuntimeExports.jsx(TechTransformation,{section:t}):t.title==="The Resilience Framework: Shielding the Bottom Line"?jsxRuntimeExports.jsx(ResilienceFramework,{section:t}):t.title==="Love Story #4: Falling in Love with Legacy"?jsxRuntimeExports.jsx(LoveStoryLegacy,{section:t}):t.title==="Love Story #2: Falling in Love with Operational Excellence"?jsxRuntimeExports.jsx(LoveStoryOps,{section:t}):t.title==="Toward the Horizon: 50 Years Underground, Infinite Years Ahead"?jsxRuntimeExports.jsx(TowardHorizon,{section:t}):t.title==="The Four Tests of Transformation"?jsxRuntimeExports.jsx(FourTests,{section:t}):t.title==="Executive Summary"?jsxRuntimeExports.jsx("div",{className:"p-6 md:p-8 h-full flex flex-col justify-center",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 items-start",children:[jsxRuntimeExports.jsxs("div",{className:"order-2 md:order-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-700 mb-6",dangerouslySetInnerHTML:{__html:t.narrative}}),jsxRuntimeExports.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-6 rounded-r-lg shadow-md",children:jsxRuntimeExports.jsxs("p",{className:"text-xl font-bold text-blue-800 italic",children:['"',t.content.message,'"']})}),jsxRuntimeExports.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:t.content.points.map((e,n)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("svg",{className:"h-6 w-6 text-blue-500 mr-3 mt-1 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),jsxRuntimeExports.jsx("p",{className:"text-gray-800",children:e})]},n))})]}),jsxRuntimeExports.jsxs("div",{className:"order-1 md:order-2 flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-full h-[50vh] md:h-[60vh] lg:h-[65vh] rounded-xl overflow-hidden shadow border border-gray-200 bg-white",children:jsxRuntimeExports.jsx("img",{src:"/images/feild-technician.png",alt:"Field Technician",className:"w-full h-full object-cover"})}),jsxRuntimeExports.jsx("span",{className:"mt-2 text-xs text-gray-600",children:"Field Technician"})]})]})}):jsxRuntimeExports.jsxs("div",{className:"p-6 md:p-8 h-full flex flex-col justify-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4 text-center",children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-700 mb-6 max-w-4xl mx-auto text-center",dangerouslySetInnerHTML:{__html:t.narrative}}),jsxRuntimeExports.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-6 rounded-r-lg shadow-md max-w-3xl mx-auto",children:jsxRuntimeExports.jsxs("p",{className:"text-xl font-bold text-blue-800 italic",children:['"',t.content.message,'"']})}),jsxRuntimeExports.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto",children:t.content.points.map((e,n)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("svg",{className:"h-6 w-6 text-blue-500 mr-3 mt-1 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),jsxRuntimeExports.jsx("p",{className:"text-gray-800",children:e})]},n))})]});case"index":return jsxRuntimeExports.jsx(Index,{section:t});case"timeline":return jsxRuntimeExports.jsx(Timeline,{section:t});case"org_chart":return jsxRuntimeExports.jsx(OrgChart,{section:t});case"service_stack":return jsxRuntimeExports.jsx(ServiceStack,{section:t});case"projects":return jsxRuntimeExports.jsx(Projects,{section:t});case"people_metrics":return jsxRuntimeExports.jsx(Metrics,{section:t});case"roadmap":return jsxRuntimeExports.jsx(Roadmap,{section:t});case"references":return jsxRuntimeExports.jsx(References,{section:t});case"closing":return jsxRuntimeExports.jsx(Closing,{section:t});default:return jsxRuntimeExports.jsx("div",{className:"p-8",children:"Content type not recognized."})}},Deck=({section:t})=>jsxRuntimeExports.jsx("div",{className:"h-full animate-fade-in",children:renderContent(t)}),App=()=>{const[t,e]=reactExports.useState(0),[n,i]=reactExports.useState("idle"),[l,f]=reactExports.useState(!1),[p,b]=reactExports.useState(!1),[w,v]=reactExports.useState(!1),[g,u]=reactExports.useState(!0),o=reactExports.useRef(0),h=reactExports.useRef("idle");reactExports.useEffect(()=>{o.current=t,h.current=n},[t,n]),reactExports.useEffect(()=>{l&&!w&&(console.log("Initializing app - setting up presentation at section 0"),e(0),b(!0),v(!0))},[l,w]);const _=reactExports.useCallback(()=>{e(L=>{const V=Math.min(L+1,pitchDeckData.length-1);return console.log(`Advancing from section ${L} to ${V}`),V}),setTimeout(()=>window.dispatchEvent(new Event("resize")),120)},[]),S=()=>{i("paused"),e(L=>Math.max(L-1,0)),setTimeout(()=>window.dispatchEvent(new Event("resize")),120)},T=reactExports.useCallback(()=>{console.log("Starting presentation from section 0"),e(0),i("presenting"),b(!0)},[]),{play:O,stop:j,isLoading:C,isPlaying:D}=useTTS({onEnded:()=>{console.log(`TTS ended. Current section: ${o.current}, state: ${h.current}`)}});reactExports.useEffect(()=>{console.log(`Section changed to ${t}, state: ${n}`),n==="presenting"&&t===0&&b(!0),requestAnimationFrame(()=>window.dispatchEvent(new Event("resize")))},[t,n]);const R=()=>{j(),i("paused")},I=()=>{f(!0)},$=()=>{u(!1),T()};if(!l)return jsxRuntimeExports.jsx(ConsentScreen,{onAccept:I});const F=(t+1)/pitchDeckData.length*100;return jsxRuntimeExports.jsxs("div",{className:"min-h-screen max-h-screen bg-gray-900 flex overflow-hidden font-sans",children:[jsxRuntimeExports.jsxs("div",{className:"w-3/4 flex flex-col p-4 min-h-0",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white/95 backdrop-blur-md shadow-2xl rounded-2xl border border-gray-300 overflow-hidden flex flex-col h-full min-h-0",children:[jsxRuntimeExports.jsxs("main",{className:"grow overflow-hidden relative min-h-0",children:[jsxRuntimeExports.jsx(Deck,{section:pitchDeckData[t]},t),g&&t===0&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("button",{onClick:$,className:"group relative px-12 py-6 bg-linear-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white text-2xl font-bold rounded-2xl shadow-2xl transform hover:scale-105 transition-all duration-300",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-blue-400 rounded-2xl blur-2xl opacity-50 group-hover:opacity-75 animate-pulse"}),jsxRuntimeExports.jsxs("span",{className:"relative flex items-center gap-4",children:[jsxRuntimeExports.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Presentation"]})]})})]}),jsxRuntimeExports.jsxs("footer",{className:"flex justify-between items-center p-4 bg-gray-50 border-t-2 border-gray-200",children:[jsxRuntimeExports.jsxs("button",{onClick:S,disabled:t===0,className:"flex flex-col items-center transition-transform transform hover:scale-105 disabled:opacity-30 disabled:cursor-not-allowed",children:[jsxRuntimeExports.jsx("img",{src:"/images/Visu-Sewer-Button.png",alt:"Previous",className:"h-20 w-20 object-contain"}),jsxRuntimeExports.jsx("div",{className:"text-xs font-medium text-gray-600 mt-1",children:"Previous"})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 text-center px-8",children:[jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 max-w-xs mx-auto",children:jsxRuntimeExports.jsx("div",{className:"progress-indicator bg-blue-600 h-2.5 rounded-full","data-progress":F})}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500 font-semibold mt-1 block",children:[t+1," / ",pitchDeckData.length]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{R(),_()},disabled:t===pitchDeckData.length-1,className:"flex flex-col items-center transition-transform transform hover:scale-105 disabled:opacity-30 disabled:cursor-not-allowed",children:[jsxRuntimeExports.jsx("img",{src:"/images/visu-sewer-logo-button.png",alt:"Next",className:"h-20 w-20 object-contain"}),jsxRuntimeExports.jsx("div",{className:"text-xs font-medium text-gray-600 mt-1",children:"Next"})]})]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-2 text-center",children:" 2025 VISU-Sewer LLC. A Fort Point Capital portfolio company. Confidential and proprietary. Developed by Leeway Industries."})]}),jsxRuntimeExports.jsx("div",{className:"w-1/4 flex flex-col p-4 pl-0 min-h-0 overflow-hidden",children:jsxRuntimeExports.jsx(Chatbot,{isOpen:p,setIsOpen:b,startPresentation:T,pausePresentation:R,setCurrentSection:e,currentSection:t,isNarrating:D,presentationState:n})})]})},rootElement=document.getElementById("root");if(!rootElement)throw new Error("Could not find root element to mount to");const root=ReactDOM.createRoot(rootElement);root.render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
